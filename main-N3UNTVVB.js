import{a as N,b as q,h as gg}from"./chunk-FU26YZD3.js";var lf;function el(){return lf}function On(n){let e=lf;return lf=n,e}var yg=Symbol("NotFound");function Pr(n){return n===yg||n?.name==="\u0275NotFound"}var Dt=null,tl=!1,uf=1,Ox=null,bt=Symbol("SIGNAL");function oe(n){let e=Dt;return Dt=n,e}function ol(){return Dt}var Gi={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fr(n){if(tl)throw new Error("");if(Dt===null)return;Dt.consumerOnSignalRead(n);let e=Dt.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=Dt.recomputing;if(i&&(t=e!==void 0?e.nextProducer:Dt.producers,t!==void 0&&t.producer===n)){Dt.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===Dt&&(!i||Vx(r,Dt)))return;let o=Lr(Dt),s={producer:n,consumer:Dt,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};Dt.producersTail=s,e!==void 0?e.nextProducer=s:Dt.producers=s,o&&Eg(n,s)}function vg(){uf++}function sl(n){if(!(Lr(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===uf)){if(!n.producerMustRecompute(n)&&!Or(n)){rl(n);return}n.producerRecomputeValue(n),rl(n)}}function cf(n){if(n.consumers===void 0)return;let e=tl;tl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||Lx(i)}}finally{tl=e}}function df(){return Dt?.consumerAllowSignalWrites!==!1}function Lx(n){n.dirty=!0,cf(n),n.consumerMarkedDirty?.(n)}function rl(n){n.dirty=!1,n.lastCleanEpoch=uf}function qi(n){return n&&_g(n),oe(n)}function _g(n){n.producersTail=void 0,n.recomputing=!0}function kr(n,e){oe(e),n&&Cg(n)}function Cg(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Lr(n))do t=ff(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Or(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(sl(t),i!==t.version))return!0}return!1}function Wi(n){if(Lr(n)){let e=n.producers;for(;e!==void 0;)e=ff(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Eg(n,e){let t=n.consumersTail,i=Lr(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)Eg(r.producer,r)}function ff(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!Lr(e)){let o=e.producers;for(;o!==void 0;)o=ff(o)}return t}function Lr(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function al(n){Ox?.(n)}function Vx(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function ll(n,e){return Object.is(n,e)}function ul(n,e){let t=Object.create(Bx);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(sl(t),Fr(t),t.value===ys)throw t.error;return t.value};return i[bt]=t,al(t),i}var nl=Symbol("UNSET"),il=Symbol("COMPUTING"),ys=Symbol("ERRORED"),Bx=q(N({},Gi),{value:nl,dirty:!0,error:null,equal:ll,kind:"computed",producerMustRecompute(n){return n.value===nl||n.value===il},producerRecomputeValue(n){if(n.value===il)throw new Error("");let e=n.value;n.value=il;let t=qi(n),i,r=!1;try{i=n.computation(),oe(null),r=e!==nl&&e!==ys&&i!==ys&&n.equal(e,i)}catch(o){i=ys,n.error=o}finally{kr(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function Ux(){throw new Error}var xg=Ux;function Sg(n){xg(n)}function pf(n){xg=n}var Hx=null;function mf(n,e){let t=Object.create(cl);t.value=n,e!==void 0&&(t.equal=e);let i=()=>Dg(t);return i[bt]=t,al(t),[i,s=>Vr(t,s),s=>hf(t,s)]}function Dg(n){return Fr(n),n.value}function Vr(n,e){df()||Sg(n),n.equal(n.value,e)||(n.value=e,$x(n))}function hf(n,e){df()||Sg(n),Vr(n,e(n.value))}var cl=q(N({},Gi),{equal:ll,value:void 0,kind:"signal"});function $x(n){n.version++,vg(),cf(n),Hx?.(n)}function ge(n){return typeof n=="function"}function Br(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var dl=Br(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function vs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var it=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(ge(i))try{i()}catch(o){e=o instanceof dl?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{bg(o)}catch(s){e=e??[],s instanceof dl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new dl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)bg(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vs(t,e)}remove(e){let{_finalizers:t}=this;t&&vs(t,e),e instanceof n&&e._removeParent(this)}};it.EMPTY=(()=>{let n=new it;return n.closed=!0,n})();var gf=it.EMPTY;function fl(n){return n instanceof it||n&&"closed"in n&&ge(n.remove)&&ge(n.add)&&ge(n.unsubscribe)}function bg(n){ge(n)?n():n.unsubscribe()}var vn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ur={setTimeout(n,e,...t){let{delegate:i}=Ur;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ur;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function pl(n){Ur.setTimeout(()=>{let{onUnhandledError:e}=vn;if(e)e(n);else throw n})}function _s(){}var wg=yf("C",void 0,void 0);function Tg(n){return yf("E",void 0,n)}function Ig(n){return yf("N",n,void 0)}function yf(n,e,t){return{kind:n,value:e,error:t}}var zi=null;function Hr(n){if(vn.useDeprecatedSynchronousErrorHandling){let e=!zi;if(e&&(zi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=zi;if(zi=null,t)throw i}}else n()}function Mg(n){vn.useDeprecatedSynchronousErrorHandling&&zi&&(zi.errorThrown=!0,zi.error=n)}var ji=class extends it{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fl(e)&&e.add(this)):this.destination=Wx}static create(e,t,i){return new $r(e,t,i)}next(e){this.isStopped?_f(Ig(e),this):this._next(e)}error(e){this.isStopped?_f(Tg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_f(wg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Gx=Function.prototype.bind;function vf(n,e){return Gx.call(n,e)}var Cf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){ml(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){ml(i)}else ml(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ml(t)}}},$r=class extends ji{constructor(e,t,i){super();let r;if(ge(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&vn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&vf(e.next,o),error:e.error&&vf(e.error,o),complete:e.complete&&vf(e.complete,o)}):r=e}this.destination=new Cf(r)}};function ml(n){vn.useDeprecatedSynchronousErrorHandling?Mg(n):pl(n)}function qx(n){throw n}function _f(n,e){let{onStoppedNotification:t}=vn;t&&Ur.setTimeout(()=>t(n,e))}var Wx={closed:!0,next:_s,error:qx,complete:_s};var Gr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function jt(n){return n}function Ef(...n){return xf(n)}function xf(n){return n.length===0?jt:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=jx(t)?t:new $r(t,i,r);return Hr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=Ag(i),new i((r,o)=>{let s=new $r({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Gr](){return this}pipe(...t){return xf(t)(this)}toPromise(t){return t=Ag(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function Ag(n){var e;return(e=n??vn.Promise)!==null&&e!==void 0?e:Promise}function zx(n){return n&&ge(n.next)&&ge(n.error)&&ge(n.complete)}function jx(n){return n&&n instanceof ji||zx(n)&&fl(n)}function Sf(n){return ge(n?.lift)}function Se(n){return e=>{if(Sf(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(n,e,t,i,r){return new Df(n,e,t,i,r)}var Df=class extends ji{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qr(){return Se((n,e)=>{let t=null;n._refCount++;let i=Ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Wr=class extends Ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Sf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new it;let t=this.getSubject();e.add(this.source.subscribe(Ee(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=it.EMPTY)}return e}refCount(){return qr()(this)}};var Rg=Br(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends Ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new hl(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Rg}next(t){Hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Hr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?gf:(this.currentObservers=null,o.push(t),new it(()=>{this.currentObservers=null,vs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Ce;return t.source=this,t}}return n.create=(e,t)=>new hl(e,t),n})(),hl=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:gf}};var Et=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Ht=new Ce(n=>n.complete());function Ng(n){return n&&ge(n.schedule)}function Pg(n){return n[n.length-1]}function gl(n){return ge(Pg(n))?n.pop():void 0}function vi(n){return Ng(Pg(n))?n.pop():void 0}function kg(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{f(i.next(m))}catch(y){s(y)}}function l(m){try{f(i.throw(m))}catch(y){s(y)}}function f(m){m.done?o(m.value):r(m.value).then(a,l)}f((i=i.apply(n,e||[])).next())})}function Fg(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yi(n){return this instanceof Yi?(this.v=n,this):new Yi(n)}function Og(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(_){return function(E){return Promise.resolve(E).then(_,y)}}function a(_,E){i[_]&&(r[_]=function(b){return new Promise(function(A,M){o.push([_,b,A,M])>1||l(_,b)})},E&&(r[_]=E(r[_])))}function l(_,E){try{f(i[_](E))}catch(b){v(o[0][3],b)}}function f(_){_.value instanceof Yi?Promise.resolve(_.value.v).then(m,y):v(o[0][2],_)}function m(_){l("next",_)}function y(_){l("throw",_)}function v(_,E){_(E),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Lg(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Fg=="function"?Fg(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(f){o({value:f,done:a})},s)}}var yl=n=>n&&typeof n.length=="number"&&typeof n!="function";function vl(n){return ge(n?.then)}function _l(n){return ge(n[Gr])}function Cl(n){return Symbol.asyncIterator&&ge(n?.[Symbol.asyncIterator])}function El(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Yx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xl=Yx();function Sl(n){return ge(n?.[xl])}function Dl(n){return Og(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Yi(t.read());if(r)return yield Yi(void 0);yield yield Yi(i)}}finally{t.releaseLock()}})}function bl(n){return ge(n?.getReader)}function rt(n){if(n instanceof Ce)return n;if(n!=null){if(_l(n))return Jx(n);if(yl(n))return Kx(n);if(vl(n))return Qx(n);if(Cl(n))return Vg(n);if(Sl(n))return Zx(n);if(bl(n))return Xx(n)}throw El(n)}function Jx(n){return new Ce(e=>{let t=n[Gr]();if(ge(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Kx(n){return new Ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Qx(n){return new Ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,pl)})}function Zx(n){return new Ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Vg(n){return new Ce(e=>{e2(n,e).catch(t=>e.error(t))})}function Xx(n){return Vg(Dl(n))}function e2(n,e){var t,i,r,o;return kg(this,void 0,void 0,function*(){try{for(t=Lg(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function $t(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function wl(n,e=0){return Se((t,i)=>{t.subscribe(Ee(i,r=>$t(i,n,()=>i.next(r),e),()=>$t(i,n,()=>i.complete(),e),r=>$t(i,n,()=>i.error(r),e)))})}function Tl(n,e=0){return Se((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Bg(n,e){return rt(n).pipe(Tl(e),wl(e))}function Ug(n,e){return rt(n).pipe(Tl(e),wl(e))}function Hg(n,e){return new Ce(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function $g(n,e){return new Ce(t=>{let i;return $t(t,e,()=>{i=n[xl](),$t(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>ge(i?.return)&&i.return()})}function Il(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ce(t=>{$t(t,e,()=>{let i=n[Symbol.asyncIterator]();$t(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Gg(n,e){return Il(Dl(n),e)}function qg(n,e){if(n!=null){if(_l(n))return Bg(n,e);if(yl(n))return Hg(n,e);if(vl(n))return Ug(n,e);if(Cl(n))return Il(n,e);if(Sl(n))return $g(n,e);if(bl(n))return Gg(n,e)}throw El(n)}function We(n,e){return e?qg(n,e):rt(n)}function ne(...n){let e=vi(n);return We(n,e)}function zr(n,e){let t=ge(n)?n:()=>n,i=r=>r.error(t());return new Ce(e?r=>e.schedule(i,0,r):i)}function bf(n){return!!n&&(n instanceof Ce||ge(n.lift)&&ge(n.subscribe))}var Xn=Br(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function le(n,e){return Se((t,i)=>{let r=0;t.subscribe(Ee(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:t2}=Array;function n2(n,e){return t2(e)?n(...e):n(e)}function Ml(n){return le(e=>n2(n,e))}var{isArray:i2}=Array,{getPrototypeOf:r2,prototype:o2,keys:s2}=Object;function Al(n){if(n.length===1){let e=n[0];if(i2(e))return{args:e,keys:null};if(a2(e)){let t=s2(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function a2(n){return n&&typeof n=="object"&&r2(n)===o2}function Rl(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Nl(...n){let e=vi(n),t=gl(n),{args:i,keys:r}=Al(n);if(i.length===0)return We([],e);let o=new Ce(l2(i,e,r?s=>Rl(r,s):jt));return t?o.pipe(Ml(t)):o}function l2(n,e,t=jt){return i=>{Wg(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)Wg(e,()=>{let f=We(n[l],e),m=!1;f.subscribe(Ee(i,y=>{o[l]=y,m||(m=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function Wg(n,e,t){n?$t(t,n,e):e()}function zg(n,e,t,i,r,o,s,a){let l=[],f=0,m=0,y=!1,v=()=>{y&&!l.length&&!f&&e.complete()},_=b=>f<i?E(b):l.push(b),E=b=>{o&&e.next(b),f++;let A=!1;rt(t(b,m++)).subscribe(Ee(e,M=>{r?.(M),o?_(M):e.next(M)},()=>{A=!0},void 0,()=>{if(A)try{for(f--;l.length&&f<i;){let M=l.shift();s?$t(e,s,()=>E(M)):E(M)}v()}catch(M){e.error(M)}}))};return n.subscribe(Ee(e,_,()=>{y=!0,v()})),()=>{a?.()}}function ot(n,e,t=1/0){return ge(e)?ot((i,r)=>le((o,s)=>e(i,o,r,s))(rt(n(i,r))),t):(typeof e=="number"&&(t=e),Se((i,r)=>zg(i,r,n,t)))}function jr(n=1/0){return ot(jt,n)}function jg(){return jr(1)}function Yr(...n){return jg()(We(n,vi(n)))}function Cs(n){return new Ce(e=>{rt(n()).subscribe(e)})}function wf(...n){let e=gl(n),{args:t,keys:i}=Al(n),r=new Ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,f=s;for(let m=0;m<s;m++){let y=!1;rt(t[m]).subscribe(Ee(o,v=>{y||(y=!0,f--),a[m]=v},()=>l--,void 0,()=>{(!l||!y)&&(f||o.next(i?Rl(i,a):a),o.complete())}))}});return e?r.pipe(Ml(e)):r}function ut(n,e){return Se((t,i)=>{let r=0;t.subscribe(Ee(i,o=>n.call(e,o,r++)&&i.next(o)))})}function ei(n){return Se((e,t)=>{let i=null,r=!1,o;i=e.subscribe(Ee(t,void 0,void 0,s=>{o=rt(n(s,ei(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function Yg(n,e,t,i,r){return(o,s)=>{let a=t,l=e,f=0;o.subscribe(Ee(s,m=>{let y=f++;l=a?n(l,m,y):(a=!0,m),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function ti(n,e){return ge(e)?ot(n,e,1):ot(n,1)}function _i(n){return Se((e,t)=>{let i=!1;e.subscribe(Ee(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ni(n){return n<=0?()=>Ht:Se((e,t)=>{let i=0;e.subscribe(Ee(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Pl(n=u2){return Se((e,t)=>{let i=!1;e.subscribe(Ee(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function u2(){return new Xn}function Ji(n){return Se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ii(n,e){let t=arguments.length>=2;return i=>i.pipe(n?ut((r,o)=>n(r,o,i)):jt,ni(1),t?_i(e):Pl(()=>new Xn))}function Jr(n){return n<=0?()=>Ht:Se((e,t)=>{let i=[];e.subscribe(Ee(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Tf(n,e){let t=arguments.length>=2;return i=>i.pipe(n?ut((r,o)=>n(r,o,i)):jt,Jr(1),t?_i(e):Pl(()=>new Xn))}function If(n,e){return Se(Yg(n,e,arguments.length>=2,!0))}function Mf(...n){let e=vi(n);return Se((t,i)=>{(e?Yr(n,t,e):Yr(n,t)).subscribe(i)})}function wt(n,e){return Se((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(Ee(i,l=>{r?.unsubscribe();let f=0,m=o++;rt(n(l,m)).subscribe(r=Ee(i,y=>i.next(e?e(l,y,m,f++):y),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Fl(n){return Se((e,t)=>{rt(n).subscribe(Ee(t,()=>t.complete(),_s)),!t.closed&&e.subscribe(t)})}function Ue(n,e,t){let i=ge(n)||e||t?{next:n,error:e,complete:t}:n;return i?Se((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Ee(o,l=>{var f;(f=i.next)===null||f===void 0||f.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var f;a=!1,(f=i.error)===null||f===void 0||f.call(i,l),o.error(l)},()=>{var l,f;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):jt}function Jg(n){let e=oe(null);try{return n()}finally{oe(e)}}var Kg=q(N({},Gi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Qg(n){if(n.dirty=!1,n.version>0&&!Or(n))return;n.version++;let e=qi(n);try{n.cleanup(),n.fn()}finally{kr(n,e)}}var Vl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",W=class extends Error{code;constructor(e,t){super(xi(e,t)),this.code=e}};function c2(n){return`NG0${Math.abs(n)}`}function xi(n,e){return`${c2(n)}${e?": "+e:""}`}var si=globalThis;function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("")}function ey(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function oi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(oi).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function Bl(n,e){return n?e?`${n} ${e}`:n:e||""}var d2=Ae({__forward_ref__:Ae});function It(n){return n.__forward_ref__=It,n.toString=function(){return oi(this())},n}function xt(n){return Uf(n)?n():n}function Uf(n){return typeof n=="function"&&n.hasOwnProperty(d2)&&n.__forward_ref__===It}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ln(n){return{providers:n.providers||[],imports:n.imports||[]}}function bs(n){return f2(n,Ul)}function Hf(n){return bs(n)!==null}function f2(n,e){return n.hasOwnProperty(e)&&n[e]||null}function p2(n){let e=n?.[Ul]??null;return e||null}function Rf(n){return n&&n.hasOwnProperty(Ol)?n[Ol]:null}var Ul=Ae({\u0275prov:Ae}),Ol=Ae({\u0275inj:Ae}),Z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $f(n){return n&&!!n.\u0275providers}var Gf=Ae({\u0275cmp:Ae}),qf=Ae({\u0275dir:Ae}),Wf=Ae({\u0275pipe:Ae}),zf=Ae({\u0275mod:Ae}),xs=Ae({\u0275fac:Ae}),er=Ae({__NG_ELEMENT_ID__:Ae}),Zg=Ae({__NG_ENV_ID__:Ae});function Ln(n){return typeof n=="string"?n:n==null?"":String(n)}function ty(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ln(n)}var ny=Ae({ngErrorCode:Ae}),m2=Ae({ngErrorMessage:Ae}),h2=Ae({ngTokenPath:Ae});function jf(n,e){return iy("",-200,e)}function Hl(n,e){throw new W(-201,!1)}function iy(n,e,t){let i=new W(e,n);return i[ny]=e,i[m2]=n,t&&(i[h2]=t),i}function g2(n){return n[ny]}var Nf;function ry(){return Nf}function Rt(n){let e=Nf;return Nf=n,e}function Yf(n,e,t){let i=bs(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;Hl(n,"Injector")}var y2={},Ki=y2,v2="__NG_DI_FLAG__",Pf=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=Qi(t)||0;try{return this.injector.get(e,i&8?null:Ki,i)}catch(r){if(Pr(r))return r;throw r}}};function _2(n,e=0){let t=el();if(t===void 0)throw new W(-203,!1);if(t===null)return Yf(n,void 0,e);{let i=C2(e),r=t.retrieve(n,i);if(Pr(r)){if(i.optional)return null;throw r}return r}}function ie(n,e=0){return(ry()||_2)(xt(n),e)}function R(n,e){return ie(n,Qi(e))}function Qi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function C2(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Ff(n){let e=[];for(let t=0;t<n.length;t++){let i=xt(n[t]);if(Array.isArray(i)){if(i.length===0)throw new W(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],l=E2(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(ie(r,o))}else e.push(ie(i))}return e}function E2(n){return n[v2]}function Ci(n,e){let t=n.hasOwnProperty(xs);return t?n[xs]:null}function oy(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function sy(n){return n.flat(Number.POSITIVE_INFINITY)}function $l(n,e){n.forEach(t=>Array.isArray(t)?$l(t,e):e(t))}function Jf(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ws(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ay(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Gl(n,e,t){let i=Qr(n,e);return i>=0?n[i|1]=t:(i=~i,ay(n,i,e,t)),i}function ql(n,e){let t=Qr(n,e);if(t>=0)return n[t|1]}function Qr(n,e){return x2(n,e,1)}function x2(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var Si={},Nt=[],Di=new Z(""),Kf=new Z("",-1),Qf=new Z(""),Ss=class{get(e,t=Ki){if(t===Ki){let r=iy("",-201);throw r.name="\u0275NotFound",r}return t}};function Zf(n){return n[zf]||null}function bi(n){return n[Gf]||null}function Xf(n){return n[qf]||null}function ly(n){return n[Wf]||null}function tr(n){return{\u0275providers:n}}function uy(...n){return{\u0275providers:ep(!0,n),\u0275fromNgModule:!0}}function ep(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return $l(e,s=>{let a=s;Ll(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&cy(r,o),t}function cy(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];tp(r,o=>{e(o,i)})}}function Ll(n,e,t,i){if(n=xt(n),!n)return!1;let r=null,o=Rf(n),s=!o&&bi(n);if(!o&&!s){let l=n.ngModule;if(o=Rf(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let f of l)Ll(f,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let f;try{$l(o.imports,m=>{Ll(m,e,t,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&cy(f,e)}if(!a){let f=Ci(r)||(()=>new r);e({provide:r,useFactory:f,deps:Nt},r),e({provide:Qf,useValue:r,multi:!0},r),e({provide:Di,useValue:()=>ie(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let f=n;tp(l,m=>{e(m,f)})}}else return!1;return r!==n&&n.providers!==void 0}function tp(n,e){for(let t of n)$f(t)&&(t=t.\u0275providers),Array.isArray(t)?tp(t,e):e(t)}var S2=Ae({provide:String,useValue:Ae});function dy(n){return n!==null&&typeof n=="object"&&S2 in n}function D2(n){return!!(n&&n.useExisting)}function b2(n){return!!(n&&n.useFactory)}function Zi(n){return typeof n=="function"}function fy(n){return!!n.useClass}var Ts=new Z(""),kl={},Xg={},Af;function Is(){return Af===void 0&&(Af=new Ss),Af}var st=class{},Xi=class extends st{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,Of(e,s=>this.processProvider(s)),this.records.set(Kf,Kr(void 0,this)),r.has("environment")&&this.records.set(st,Kr(void 0,this));let o=this.records.get(Ts);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Qf,Nt,{self:!0}))}retrieve(e,t){let i=Qi(t)||0;try{return this.get(e,Ki,i)}catch(r){if(Pr(r))return r;throw r}}destroy(){Es(this),this._destroyed=!0;let e=oe(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return Es(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Es(this);let t=On(this),i=Rt(void 0),r;try{return e()}finally{On(t),Rt(i)}}get(e,t=Ki,i){if(Es(this),e.hasOwnProperty(Zg))return e[Zg](this);let r=Qi(i),o,s=On(this),a=Rt(void 0);try{if(!(r&4)){let f=this.records.get(e);if(f===void 0){let m=A2(e)&&bs(e);m&&this.injectableDefInScope(m)?f=Kr(kf(e),kl):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,r)}let l=r&2?Is():this.parent;return t=r&8&&t===Ki?null:t,l.get(e,t)}catch(l){let f=g2(l);throw f===-200||f===-201?new W(f,null):l}finally{Rt(a),On(s)}}resolveInjectorInitializers(){let e=oe(null),t=On(this),i=Rt(void 0),r;try{let o=this.get(Di,Nt,{self:!0});for(let s of o)s()}finally{On(t),Rt(i),oe(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(oi(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=xt(e);let t=Zi(e)?e:xt(e&&e.provide),i=T2(e);if(!Zi(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Kr(void 0,kl,!0),r.factory=()=>Ff(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=oe(null);try{if(t.value===Xg)throw jf(oi(e));return t.value===kl&&(t.value=Xg,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&M2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=xt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function kf(n){let e=bs(n),t=e!==null?e.factory:Ci(n);if(t!==null)return t;if(n instanceof Z)throw new W(204,!1);if(n instanceof Function)return w2(n);throw new W(204,!1)}function w2(n){if(n.length>0)throw new W(204,!1);let t=p2(n);return t!==null?()=>t.factory(n):()=>new n}function T2(n){if(dy(n))return Kr(void 0,n.useValue);{let e=np(n);return Kr(e,kl)}}function np(n,e,t){let i;if(Zi(n)){let r=xt(n);return Ci(r)||kf(r)}else if(dy(n))i=()=>xt(n.useValue);else if(b2(n))i=()=>n.useFactory(...Ff(n.deps||[]));else if(D2(n))i=(r,o)=>ie(xt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let r=xt(n&&(n.useClass||n.provide));if(I2(n))i=()=>new r(...Ff(n.deps));else return Ci(r)||kf(r)}return i}function Es(n){if(n.destroyed)throw new W(205,!1)}function Kr(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function I2(n){return!!n.deps}function M2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function A2(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Of(n,e){for(let t of n)Array.isArray(t)?Of(t,e):t&&$f(t)?Of(t.\u0275providers,e):e(t)}function dt(n,e){let t;n instanceof Xi?(Es(n),t=n):t=new Pf(n);let i,r=On(t),o=Rt(void 0);try{return e()}finally{On(r),Rt(o)}}function py(){return ry()!==void 0||el()!=null}var _n=0,ee=1,se=2,ct=3,un=4,cn=5,Zr=6,Xr=7,tt=8,ai=9,Vn=10,Oe=11,eo=12,ip=13,nr=14,Yt=15,wi=16,ir=17,Bn=18,Ms=19,rp=20,ri=21,Wl=22,li=23,Jt=24,rr=25,or=26,at=27,my=1,op=6,Ti=7,As=8,sr=9,Je=10;function Un(n){return Array.isArray(n)&&typeof n[my]=="object"}function Cn(n){return Array.isArray(n)&&n[my]===!0}function sp(n){return(n.flags&4)!==0}function Ii(n){return n.componentOffset>-1}function zl(n){return(n.flags&1)===1}function Hn(n){return!!n.template}function to(n){return(n[se]&512)!==0}function ar(n){return(n[se]&256)===256}var hy="svg",gy="math";function dn(n){for(;Array.isArray(n);)n=n[_n];return n}function ap(n,e){return dn(e[n])}function En(n,e){return dn(e[n.index])}function Rs(n,e){return n.data[e]}function lp(n,e){return n[e]}function up(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function fn(n,e){let t=e[n];return Un(t)?t:t[_n]}function yy(n){return(n[se]&4)===4}function jl(n){return(n[se]&128)===128}function vy(n){return Cn(n[ct])}function $n(n,e){return e==null?null:n[e]}function cp(n){n[ir]=0}function dp(n){n[se]&1024||(n[se]|=1024,jl(n)&&Mi(n))}function _y(n,e){for(;n>0;)e=e[nr],n--;return e}function Ns(n){return!!(n[se]&9216||n[Jt]?.dirty)}function Yl(n){n[Vn].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),Ns(n)&&Mi(n)}function Mi(n){n[Vn].changeDetectionScheduler?.notify(0);let e=Ei(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!jl(e)));)e=Ei(e)}function fp(n,e){if(ar(n))throw new W(911,!1);n[ri]===null&&(n[ri]=[]),n[ri].push(e)}function Cy(n,e){if(n[ri]===null)return;let t=n[ri].indexOf(e);t!==-1&&n[ri].splice(t,1)}function Ei(n){let e=n[ct];return Cn(e)?e[ct]:e}function pp(n){return n[Xr]??=[]}function mp(n){return n.cleanup??=[]}function Ey(n,e,t,i){let r=pp(e);r.push(t),n.firstCreatePass&&mp(n).push(i,r.length-1)}var ve={lFrame:Fy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Lf=!1;function xy(){return ve.lFrame.elementDepthCount}function Sy(){ve.lFrame.elementDepthCount++}function hp(){ve.lFrame.elementDepthCount--}function Dy(){return ve.bindingsEnabled}function by(){return ve.skipHydrationRootTNode!==null}function gp(n){return ve.skipHydrationRootTNode===n}function yp(){ve.skipHydrationRootTNode=null}function ue(){return ve.lFrame.lView}function Ke(){return ve.lFrame.tView}function T(n){return ve.lFrame.contextLView=n,n[tt]}function I(n){return ve.lFrame.contextLView=null,n}function ft(){let n=vp();for(;n!==null&&n.type===64;)n=n.parent;return n}function vp(){return ve.lFrame.currentTNode}function wy(){let n=ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function no(n,e){let t=ve.lFrame;t.currentTNode=n,t.isParent=e}function _p(){return ve.lFrame.isParent}function Ty(){ve.lFrame.isParent=!1}function Cp(){return Lf}function io(n){let e=Lf;return Lf=n,e}function Jl(){let n=ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ep(){return ve.lFrame.bindingIndex}function Iy(n){return ve.lFrame.bindingIndex=n}function Ai(){return ve.lFrame.bindingIndex++}function Ps(n){let e=ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function My(){return ve.lFrame.inI18n}function Ay(n,e){let t=ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,Kl(e)}function Ry(){return ve.lFrame.currentDirectiveIndex}function Kl(n){ve.lFrame.currentDirectiveIndex=n}function Ny(n){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function xp(){return ve.lFrame.currentQueryIndex}function Ql(n){ve.lFrame.currentQueryIndex=n}function R2(n){let e=n[ee];return e.type===2?e.declTNode:e.type===1?n[cn]:null}function Sp(n,e,t){if(t&4){let r=e,o=n;for(;r=r.parent,r===null&&!(t&1);)if(r=R2(o),r===null||(o=o[nr],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=ve.lFrame=Py();return i.currentTNode=e,i.lView=n,!0}function Zl(n){let e=Py(),t=n[ee];ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Py(){let n=ve.lFrame,e=n===null?null:n.child;return e===null?Fy(n):e}function Fy(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ky(){let n=ve.lFrame;return ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Dp=ky;function Xl(){let n=ky();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Oy(n){return(ve.lFrame.contextLView=_y(n,ve.lFrame.contextLView))[tt]}function xn(){return ve.lFrame.selectedIndex}function Ri(n){ve.lFrame.selectedIndex=n}function Fs(){let n=ve.lFrame;return Rs(n.tView,n.selectedIndex)}function Ly(){return ve.lFrame.currentNamespace}var Vy=!0;function eu(){return Vy}function tu(n){Vy=n}function Vf(n,e=null,t=null,i){let r=bp(n,e,t,i);return r.resolveInjectorInitializers(),r}function bp(n,e=null,t=null,i,r=new Set){let o=[t||Nt,uy(n)];return i=i||(typeof n=="object"?void 0:oi(n)),new Xi(o,e||Is(),i||null,r)}var Tt=class n{static THROW_IF_NOT_FOUND=Ki;static NULL=new Ss;static create(e,t){if(Array.isArray(e))return Vf({name:""},t,e,"");{let i=e.name??"";return Vf({name:i},e.parent,e.providers,i)}}static \u0275prov=K({token:n,providedIn:"any",factory:()=>ie(Kf)});static __NG_ELEMENT_ID__=-1},pt=new Z(""),pn=(()=>{class n{static __NG_ELEMENT_ID__=N2;static __NG_ENV_ID__=t=>t}return n})(),Ds=class extends pn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ar(this._lView)}onDestroy(e){let t=this._lView;return fp(t,e),()=>Cy(t,e)}};function N2(){return new Ds(ue())}var sn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Gt=new Z("",{providedIn:"root",factory:()=>{let n=R(st),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(sn),e.handleError(t))}}}),By={provide:Di,useValue:()=>void R(sn),multi:!0};function wp(n){return typeof n=="function"&&n[bt]!==void 0}function w(n,e){let[t,i,r]=mf(n,e?.equal),o=t,s=o[bt];return o.set=i,o.update=r,o.asReadonly=Tp.bind(o),o}function Tp(){let n=this[bt];if(n.readonlyFn===void 0){let e=()=>this();e[bt]=n,n.readonlyFn=e}return n.readonlyFn}function Ip(n){return wp(n)&&typeof n.set=="function"}var ro=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=P2}return n})();function P2(){return new ro(ue(),ft())}var an=class{},ks=new Z("",{providedIn:"root",factory:()=>!1});var Mp=new Z(""),nu=new Z(""),Gn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Et(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ce(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),Os=(()=>{class n{internalPendingTasks=R(Gn);scheduler=R(an);errorHandler=R(Gt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})();function lr(...n){}var Ls=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new Bf})}return n})(),Bf=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function Ys(n){return{toString:n}.toString()}function H2(n){return typeof n=="function"}var du=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function gv(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var bn=(()=>{let n=()=>yv;return n.ngInherit=!0,n})();function yv(n){return n.type.prototype.ngOnChanges&&(n.setInput=G2),$2}function $2(){let n=_v(this),e=n?.current;if(e){let t=n.previous;if(t===Si)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function G2(n,e,t,i,r){let o=this.declaredInputs[i],s=_v(n)||q2(n,{previous:Si,current:null}),a=s.current||(s.current={}),l=s.previous,f=l[o];a[o]=new du(f&&f.currentValue,t,l===Si),gv(n,e,r,t)}var vv="__ngSimpleChanges__";function _v(n){return n[vv]||null}function q2(n,e){return n[vv]=e}var Uy=[];var Re=function(n,e=null,t){for(let i=0;i<Uy.length;i++){let r=Uy[i];r(n,e,t)}};function W2(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=yv(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function z2(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:f,ngOnDestroy:m}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),m!=null&&(n.destroyHooks??=[]).push(t,m)}}function su(n,e,t){Cv(n,e,3,t)}function au(n,e,t,i){(n[se]&3)===t&&Cv(n,e,t,i)}function Ap(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function Cv(n,e,t,i){let r=i!==void 0?n[ir]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[ir]+=65536),(a<o||o==-1)&&(j2(n,t,e,l),n[ir]=(n[ir]&4294901760)+l+2),l++}function Hy(n,e){Re(4,n,e);let t=oe(null);try{e.call(n)}finally{oe(t),Re(5,n,e)}}function j2(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[se]>>14<n[ir]>>16&&(n[se]&3)===e&&(n[se]+=16384,Hy(a,o)):Hy(a,o)}var so=-1,cr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function Y2(n){return(n.flags&8)!==0}function J2(n){return(n.flags&16)!==0}function K2(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];Q2(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function Ev(n){return n===3||n===4||n===6}function Q2(n){return n.charCodeAt(0)===64}function ao(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?$y(n,t,r,null,e[++i]):$y(n,t,r,null,null))}}return n}function $y(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function xv(n){return n!==so}function fu(n){return n&32767}function Z2(n){return n>>16}function pu(n,e){let t=Z2(n),i=e;for(;t>0;)i=i[nr],t--;return i}var Hp=!0;function mu(n){let e=Hp;return Hp=n,e}var X2=256,Sv=X2-1,Dv=5,eS=0,qn={};function tS(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(er)&&(i=t[er]),i==null&&(i=t[er]=eS++);let r=i&Sv,o=1<<r;e.data[n+(r>>Dv)]|=o}function hu(n,e){let t=bv(n,e);if(t!==-1)return t;let i=e[ee];i.firstCreatePass&&(n.injectorIndex=e.length,Rp(i.data,n),Rp(e,null),Rp(i.blueprint,null));let r=vm(n,e),o=n.injectorIndex;if(xv(r)){let s=fu(r),a=pu(r,e),l=a[ee].data;for(let f=0;f<8;f++)e[o+f]=a[s+f]|l[s+f]}return e[o+8]=r,o}function Rp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function bv(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function vm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=Av(r),i===null)return so;if(t++,r=r[nr],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return so}function $p(n,e,t){tS(n,e,t)}function nS(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(Ev(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function wv(n,e,t){if(t&8||n!==void 0)return n;Hl(e,"NodeInjector")}function Tv(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[ai],o=Rt(void 0);try{return r?r.get(e,i,t&8):Yf(e,i,t&8)}finally{Rt(o)}}return wv(i,e,t)}function Iv(n,e,t,i=0,r){if(n!==null){if(e[se]&2048&&!(i&2)){let s=sS(n,e,t,i,qn);if(s!==qn)return s}let o=Mv(n,e,t,i,qn);if(o!==qn)return o}return Tv(e,t,i,r)}function Mv(n,e,t,i,r){let o=rS(t);if(typeof o=="function"){if(!Sp(e,n,i))return i&1?wv(r,t,i):Tv(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&8))Hl(t);else return s}finally{Dp()}}else if(typeof o=="number"){let s=null,a=bv(n,e),l=so,f=i&1?e[Yt][cn]:null;for((a===-1||i&4)&&(l=a===-1?vm(n,e):e[a+8],l===so||!qy(i,!1)?a=-1:(s=e[ee],a=fu(l),e=pu(l,e)));a!==-1;){let m=e[ee];if(Gy(o,a,m.data)){let y=iS(a,e,t,s,i,f);if(y!==qn)return y}l=e[a+8],l!==so&&qy(i,e[ee].data[a+8]===f)&&Gy(o,a,e)?(s=m,a=fu(l),e=pu(l,e)):a=-1}}return r}function iS(n,e,t,i,r,o){let s=e[ee],a=s.data[n+8],l=i==null?Ii(a)&&Hp:i!=s&&(a.type&3)!==0,f=r&1&&o===a,m=lu(a,s,t,l,f);return m!==null?Us(e,s,m,a,r):qn}function lu(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,f=n.directiveEnd,m=o>>20,y=i?a:a+m,v=r?a+m:f;for(let _=y;_<v;_++){let E=s[_];if(_<l&&t===E||_>=l&&E.type===t)return _}if(r){let _=s[l];if(_&&Hn(_)&&_.type===t)return l}return null}function Us(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof cr){let a=o;if(a.resolving){let _=ty(s[t]);throw jf(_)}let l=mu(a.canSeeViewProviders);a.resolving=!0;let f=s[t].type||s[t],m,y=a.injectImpl?Rt(a.injectImpl):null,v=Sp(n,i,0);try{o=n[t]=a.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&W2(t,s[t],e)}finally{y!==null&&Rt(y),mu(l),a.resolving=!1,Dp()}}return o}function rS(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(er)?n[er]:void 0;return typeof e=="number"?e>=0?e&Sv:oS:e}function Gy(n,e,t){let i=1<<n;return!!(t[e+(n>>Dv)]&i)}function qy(n,e){return!(n&2)&&!(n&1&&e)}var ur=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Iv(this._tNode,this._lView,e,Qi(i),t)}};function oS(){return new ur(ft(),ue())}function wn(n){return Ys(()=>{let e=n.prototype.constructor,t=e[xs]||Gp(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[xs]||Gp(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Gp(n){return Uf(n)?()=>{let e=Gp(xt(n));return e&&e()}:Ci(n)}function sS(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!to(s);){let a=Mv(o,s,t,i|2,qn);if(a!==qn)return a;let l=o.parent;if(!l){let f=s[rp];if(f){let m=f.get(t,qn,i);if(m!==qn)return m}l=Av(s),s=s[nr]}o=l}return r}function Av(n){let e=n[ee],t=e.type;return t===2?e.declTNode:t===1?n[cn]:null}function Js(n){return nS(ft(),n)}function aS(){return po(ft(),ue())}function po(n,e){return new Pt(En(n,e))}var Pt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=aS}return n})();function lS(n){return n instanceof Pt?n.nativeElement:n}function uS(){return this._results[Symbol.iterator]()}var gu=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new et}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=sy(e);(this._changesDetected=!oy(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=uS};function Rv(n){return(n.flags&128)===128}var _m=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(_m||{}),Nv=new Map,cS=0;function dS(){return cS++}function fS(n){Nv.set(n[Ms],n)}function qp(n){Nv.delete(n[Ms])}var Wy="__ngContext__";function lo(n,e){Un(e)?(n[Wy]=e[Ms],fS(e)):n[Wy]=e}function Pv(n){return kv(n[eo])}function Fv(n){return kv(n[un])}function kv(n){for(;n!==null&&!Cn(n);)n=n[un];return n}var Wp;function Cm(n){Wp=n}function Ov(){if(Wp!==void 0)return Wp;if(typeof document<"u")return document;throw new W(210,!1)}var Nu=new Z("",{providedIn:"root",factory:()=>pS}),pS="ng",Pu=new Z(""),Ks=new Z("",{providedIn:"platform",factory:()=>"unknown"});var Fu=new Z("",{providedIn:"root",factory:()=>Ov().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mS="h",hS="b";var Lv="r";var Vv="di";var Bv=!1,Uv=new Z("",{providedIn:"root",factory:()=>Bv});var gS=(n,e,t,i)=>{};function yS(n,e,t,i){gS(n,e,t,i)}function Em(n){return(n.flags&32)===32}var vS=()=>null;function Hv(n,e,t=!1){return vS(n,e,t)}function $v(n,e){let t=n.contentQueries;if(t!==null){let i=oe(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];Ql(o),a.contentQueries(2,e[s],s)}}}finally{oe(i)}}}function zp(n,e,t){Ql(0);let i=oe(null);try{e(n,t)}finally{oe(i)}}function Gv(n,e,t){if(sp(e)){let i=oe(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{oe(i)}}}var ui=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(ui||{});var iu;function _S(){if(iu===void 0&&(iu=null,si.trustedTypes))try{iu=si.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return iu}function zy(n){return _S()?.createScriptURL(n)||n}var yu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vl})`}};function Qs(n){return n instanceof yu?n.changingThisBreaksApplicationSecurity:n}function xm(n,e){let t=qv(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Vl})`)}return t===e}function qv(n){return n instanceof yu&&n.getTypeName()||null}var CS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Wv(n){return n=String(n),n.match(CS)?n:"unsafe:"+n}function ES(n,e){return n.createText(e)}function xS(n,e,t){n.setValue(e,t)}function zv(n,e,t){return n.createElement(e,t)}function vu(n,e,t,i,r){n.insertBefore(e,t,i,r)}function jv(n,e,t){n.appendChild(e,t)}function jy(n,e,t,i,r){i!==null?vu(n,e,t,i,r):jv(n,e,t)}function Yv(n,e,t,i){n.removeChild(null,e,t,i)}function SS(n,e,t){n.setAttribute(e,"style",t)}function DS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Jv(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&K2(n,e,i),r!==null&&DS(n,e,r),o!==null&&SS(n,e,o)}var ku=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(ku||{});function Kv(n){let e=Zv();return e?e.sanitize(ku.URL,n)||"":xm(n,"URL")?Qs(n):Wv(Ln(n))}function Qv(n){let e=Zv();if(e)return zy(e.sanitize(ku.RESOURCE_URL,n)||"");if(xm(n,"ResourceURL"))return zy(Qs(n));throw new W(904,!1)}var bS=new Set(["embed","frame","iframe","media","script"]),wS=new Set(["base","link","script"]);function TS(n,e){return e==="src"&&bS.has(n)||e==="href"&&wS.has(n)||e==="xlink:href"&&n==="script"?Qv:Kv}function Sm(n,e,t){return TS(e,t)(n)}function Zv(){let n=ue();return n&&n[Vn].sanitizer}function Xv(n){return n instanceof Function?n():n}function IS(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var e_="ng-template";function MS(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&IS(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(Dm(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Dm(n){return n.type===4&&n.value!==e_}function AS(n,e,t){let i=n.type===4&&!t?e_:n.value;return e===i}function RS(n,e,t){let i=4,r=n.attrs,o=r!==null?FS(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Sn(i)&&!Sn(l))return!1;if(s&&Sn(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!AS(n,l,t)||l===""&&e.length===1){if(Sn(i))return!1;s=!0}}else if(i&8){if(r===null||!MS(n,r,l,t)){if(Sn(i))return!1;s=!0}}else{let f=e[++a],m=NS(l,r,Dm(n),t);if(m===-1){if(Sn(i))return!1;s=!0;continue}if(f!==""){let y;if(m>o?y="":y=r[m+1].toLowerCase(),i&2&&f!==y){if(Sn(i))return!1;s=!0}}}}return Sn(i)||s}function Sn(n){return(n&1)===0}function NS(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return kS(e,n)}function PS(n,e,t=!1){for(let i=0;i<e.length;i++)if(RS(n,e[i],t))return!0;return!1}function FS(n){for(let e=0;e<n.length;e++){let t=n[e];if(Ev(t))return e}return n.length}function kS(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function Yy(n,e){return n?":not("+e.trim()+")":e}function OS(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Sn(s)&&(e+=Yy(o,r),r=""),i=s,o=o||!Sn(i);t++}return r!==""&&(e+=Yy(o,r)),e}function LS(n){return n.map(OS).join(",")}function VS(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!Sn(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var St={};function bm(n,e,t,i,r,o,s,a,l,f,m){let y=at+i,v=y+r,_=BS(y,v),E=typeof f=="function"?f():f;return _[ee]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:E,incompleteFirstPass:!1,ssrId:m}}function BS(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:St);return t}function US(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=bm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function wm(n,e,t,i,r,o,s,a,l,f,m){let y=e.blueprint.slice();return y[_n]=r,y[se]=i|4|128|8|64|1024,(f!==null||n&&n[se]&2048)&&(y[se]|=2048),cp(y),y[ct]=y[nr]=n,y[tt]=t,y[Vn]=s||n&&n[Vn],y[Oe]=a||n&&n[Oe],y[ai]=l||n&&n[ai]||null,y[cn]=o,y[Ms]=dS(),y[Zr]=m,y[rp]=f,y[Yt]=e.type==2?n[Yt]:y,y}function HS(n,e,t){let i=En(e,n),r=US(t),o=n[Vn].rendererFactory,s=Tm(n,wm(n,r,null,t_(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function t_(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function n_(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Tm(n,e){return n[eo]?n[ip][un]=e:n[eo]=e,n[ip]=e,e}function g(n=1){i_(Ke(),ue(),xn()+n,!1)}function i_(n,e,t,i){if(!i)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&su(e,o,t)}else{let o=n.preOrderHooks;o!==null&&au(e,o,0,t)}Ri(t)}var Ou=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ou||{});function jp(n,e,t,i){let r=oe(null);try{let[o,s,a]=n.inputs[t],l=null;(s&Ou.SignalBased)!==0&&(l=e[o][bt]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,o):gv(e,l,o,i)}finally{oe(r)}}var Wn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Wn||{}),$S;function Im(n,e){return $S(n,e)}var dr=new Set,Lu=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Lu||{}),hr=new Z(""),Jy=new Set;function ci(n){Jy.has(n)||(Jy.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var r_=!1,Yp=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,py()&&(this.destroyRef=R(pn,{optional:!0})??void 0,this.pendingTasks=R(Gn,{optional:!0})??void 0)}emit(e){let t=oe(null);try{super.next(e)}finally{oe(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof it&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},ze=Yp;function o_(n){let e,t;function i(){n=lr;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function Ky(n){return queueMicrotask(()=>n()),()=>{n=lr}}var Mm="isAngularZone",_u=Mm+"_ID",GS=0,nt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ze(!1);onMicrotaskEmpty=new ze(!1);onStable=new ze(!1);onError=new ze(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=r_}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,zS(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Mm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new W(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,qS,lr,lr);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},qS={};function Am(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function WS(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){o_(()=>{n.callbackScheduled=!1,Jp(n),n.isCheckStableRunning=!0,Am(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Jp(n)}function zS(n){let e=()=>{WS(n)},t=GS++;n._inner=n._inner.fork({name:"angular",properties:{[Mm]:!0,[_u]:t,[_u+t]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(jS(l))return i.invokeTask(o,s,a,l);try{return Qy(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Zy(n)}},onInvoke:(i,r,o,s,a,l,f)=>{try{return Qy(n),i.invoke(o,s,a,l,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!YS(l)&&e(),Zy(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Jp(n),Am(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Jp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Qy(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Zy(n){n._nesting--,Am(n)}var Hs=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ze;onMicrotaskEmpty=new ze;onStable=new ze;onError=new ze;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function jS(n){return s_(n,"__ignore_ng_zone__")}function YS(n){return s_(n,"__scheduler_tick__")}function s_(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Rm=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),a_=[0,1,2,3],l_=(()=>{class n{ngZone=R(nt);scheduler=R(an);errorHandler=R(sn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(hr,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Re(16),this.executing=!0;for(let i of a_)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Re(17)}register(t){let{view:i}=t;i!==void 0?((i[rr]??=[]).push(t),Mi(i),i[se]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(Lu.AFTER_NEXT_RENDER,t):t()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),Cu=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[rr];e&&(this.view[rr]=e.filter(t=>t!==this))}};function di(n,e){let t=e?.injector??R(Tt);return ci("NgAfterNextRender"),KS(n,t,e,!0)}function JS(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function KS(n,e,t,i){let r=e.get(Rm);r.impl??=e.get(l_);let o=e.get(hr,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(pn):null,a=e.get(ro,null,{optional:!0}),l=new Cu(r.impl,JS(n),a?.view,i,s,o?.snapshot(null));return r.impl.register(l),l}var u_=new Z("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function c_(n,e,t){let i=n.get(u_);if(Array.isArray(e))for(let r of e)i.queue.add(r),t?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(n)}function QS(n,e){let t=n.get(u_);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)t.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function ZS(n,e){for(let[t,i]of e)c_(n,i.animateFns)}function Xy(n,e,t,i){let r=n?.[or]?.enter;e!==null&&r&&r.has(t.index)&&ZS(i,r)}function oo(n,e,t,i,r,o,s,a){if(r!=null){let l,f=!1;Cn(r)?l=r:Un(r)&&(f=!0,r=r[_n]);let m=dn(r);n===0&&i!==null?(Xy(a,i,o,t),s==null?jv(e,i,m):vu(e,i,m,s||null,!0)):n===1&&i!==null?(Xy(a,i,o,t),vu(e,i,m,s||null,!0)):n===2?ev(a,o,t,y=>{Yv(e,m,f,y)}):n===3&&ev(a,o,t,()=>{e.destroyNode(m)}),l!=null&&dD(e,n,t,l,o,i,s)}}function XS(n,e){d_(n,e),e[_n]=null,e[cn]=null}function eD(n,e,t,i,r,o){i[_n]=r,i[cn]=e,Bu(n,i,t,1,r,o)}function d_(n,e){e[Vn].changeDetectionScheduler?.notify(9),Bu(n,e,e[Oe],2,null,null)}function tD(n){let e=n[eo];if(!e)return Np(n[ee],n);for(;e;){let t=null;if(Un(e))t=e[eo];else{let i=e[Je];i&&(t=i)}if(!t){for(;e&&!e[un]&&e!==n;)Un(e)&&Np(e[ee],e),e=e[ct];e===null&&(e=n),Un(e)&&Np(e[ee],e),t=e&&e[un]}e=t}}function Nm(n,e){let t=n[sr],i=t.indexOf(e);t.splice(i,1)}function Vu(n,e){if(ar(e))return;let t=e[Oe];t.destroyNode&&Bu(n,e,t,3,null,null),tD(e)}function Np(n,e){if(ar(e))return;let t=oe(null);try{e[se]&=-129,e[se]|=256,e[Jt]&&Wi(e[Jt]),rD(n,e),iD(n,e),e[ee].type===1&&e[Oe].destroy();let i=e[wi];if(i!==null&&Cn(e[ct])){i!==e[ct]&&Nm(i,e);let r=e[Bn];r!==null&&r.detachView(n)}qp(e)}finally{oe(t)}}function ev(n,e,t,i){let r=n?.[or];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);n&&dr.add(n),c_(t,()=>{if(r.leave&&r.leave.has(e.index)){let s=r.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let f=s.animateFns[l],{promise:m}=f();a.push(m)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),nD(n,i)}else n&&dr.delete(n),i(!1)},r)}function nD(n,e){let t=n[or]?.running;if(t){t.then(()=>{n[or].running=void 0,dr.delete(n),e(!0)});return}e(!1)}function iD(n,e){let t=n.cleanup,i=e[Xr];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[Xr]=null);let r=e[ri];if(r!==null){e[ri]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[li];if(o!==null){e[li]=null;for(let s of o)s.destroy()}}function rD(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof cr)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Re(4,a,l);try{l.call(a)}finally{Re(5,a,l)}}else{Re(4,r,o);try{o.call(r)}finally{Re(5,r,o)}}}}}function oD(n,e,t){return sD(n,e.parent,t)}function sD(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[_n];if(Ii(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===ui.None||r===ui.Emulated)return null}return En(i,t)}function aD(n,e,t){return uD(n,e,t)}function lD(n,e,t){return n.type&40?En(n,t):null}var uD=lD,tv;function Pm(n,e,t,i){let r=oD(n,i,e),o=e[Oe],s=i.parent||e[cn],a=aD(s,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)jy(o,r,t[l],a,!1);else jy(o,r,t,a,!1);tv!==void 0&&tv(o,i,e,t,r)}function Vs(n,e){if(e!==null){let t=e.type;if(t&3)return En(e,n);if(t&4)return Kp(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Vs(n,i);{let r=n[e.index];return Cn(r)?Kp(-1,r):dn(r)}}else{if(t&128)return Vs(n,e.next);if(t&32)return Im(e,n)()||dn(n[e.index]);{let i=f_(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Ei(n[Yt]);return Vs(r,i)}else return Vs(n,e.next)}}}return null}function f_(n,e){if(e!==null){let i=n[Yt][cn],r=e.projection;return i.projection[r]}return null}function Kp(n,e){let t=Je+n+1;if(t<e.length){let i=e[t],r=i[ee].firstChild;if(r!==null)return Vs(i,r)}return e[Ti]}function Fm(n,e,t,i,r,o,s){for(;t!=null;){let a=i[ai];if(t.type===128){t=t.next;continue}let l=i[t.index],f=t.type;if(s&&e===0&&(l&&lo(dn(l),i),t.flags|=2),!Em(t))if(f&8)Fm(n,e,t.child,i,r,o,!1),oo(e,n,a,r,l,t,o,i);else if(f&32){let m=Im(t,i),y;for(;y=m();)oo(e,n,a,r,y,t,o,i);oo(e,n,a,r,l,t,o,i)}else f&16?cD(n,e,i,t,r,o):oo(e,n,a,r,l,t,o,i);t=s?t.projectionNext:t.next}}function Bu(n,e,t,i,r,o){Fm(t,i,n.firstChild,e,r,o,!1)}function cD(n,e,t,i,r,o){let s=t[Yt],l=s[cn].projection[i.projection];if(Array.isArray(l))for(let f=0;f<l.length;f++){let m=l[f];oo(e,n,t[ai],r,m,i,o,t)}else{let f=l,m=s[ct];Rv(i)&&(f.flags|=128),Fm(n,e,f,m,r,o,!0)}}function dD(n,e,t,i,r,o,s){let a=i[Ti],l=dn(i);a!==l&&oo(e,n,t,o,a,r,s);for(let f=Je;f<i.length;f++){let m=i[f];Bu(m[ee],m,n,e,o,a)}}function fD(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:Wn.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Wn.Important),n.setStyle(t,i,r,o))}}function p_(n,e,t,i,r){let o=xn(),s=i&2;try{Ri(-1),s&&e.length>at&&i_(n,e,at,!1),Re(s?2:0,r,t),t(i,r)}finally{Ri(o),Re(s?3:1,r,t)}}function m_(n,e,t){vD(n,e,t),(t.flags&64)===64&&_D(n,e,t)}function km(n,e,t=En){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function pD(n,e,t,i){let o=i.get(Uv,Bv)||t===ui.ShadowDom,s=n.selectRootElement(e,o);return mD(s),s}function mD(n){hD(n)}var hD=()=>null;function gD(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function h_(n,e,t,i,r,o){let s=e[ee];if(Om(n,s,e,t,i)){Ii(n)&&yD(e,n.index);return}n.type&3&&(t=gD(t)),g_(n,e,t,i,r,o)}function g_(n,e,t,i,r,o){if(n.type&3){let s=En(n,e);i=o!=null?o(i,n.value||"",t):i,r.setProperty(s,t,i)}else n.type&12}function yD(n,e){let t=fn(e,n);t[se]&16||(t[se]|=64)}function vD(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Ii(t)&&HS(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||hu(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],l=Us(e,n,s,t);if(lo(l,e),o!==null&&DD(e,s-i,l,a,t,o),Hn(a)){let f=fn(t.index,e);f[tt]=Us(e,n,s,t)}}}function _D(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=Ry();try{Ri(o);for(let a=i;a<r;a++){let l=n.data[a],f=e[a];Kl(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&CD(l,f)}}finally{Ri(-1),Kl(s)}}function CD(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function ED(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];PS(e,o.selectors,!1)&&(i??=[],Hn(o)?i.unshift(o):i.push(o))}return i}function xD(n,e,t,i,r,o){let s=En(n,e);SD(e[Oe],s,o,n.value,t,i,r)}function SD(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?Ln(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function DD(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],f=s[a+1];jp(i,t,l,f)}}function y_(n,e,t,i,r){let o=at+t,s=e[ee],a=r(s,e,n,i,t);e[o]=a,no(n,!0);let l=n.type===2;return l?(Jv(e[Oe],a,n),(xy()===0||zl(n))&&lo(a,e),Sy()):lo(a,e),eu()&&(!l||!Em(n))&&Pm(s,e,a,n),n}function v_(n){let e=n;return _p()?Ty():(e=e.parent,no(e,!1)),e}function bD(n,e){let t=n[ai];if(!t)return;let i;try{i=t.get(Gt,null)}catch{i=null}i?.(e)}function Om(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let f=s[l],m=s[l+1],y=e.data[f];jp(y,t[f],m,r),a=!0}if(o)for(let l of o){let f=t[l],m=e.data[l];jp(m,f,i,r),a=!0}return a}function wD(n,e){let t=fn(e,n),i=t[ee];TD(i,t);let r=t[_n];r!==null&&t[Zr]===null&&(t[Zr]=Hv(r,t[ai])),Re(18),Lm(i,t,t[tt]),Re(19,t[tt])}function TD(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Lm(n,e,t){Zl(e);try{let i=n.viewQuery;i!==null&&zp(1,i,t);let r=n.template;r!==null&&p_(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Bn]?.finishViewCreation(n),n.staticContentQueries&&$v(n,e),n.staticViewQueries&&zp(2,n.viewQuery,t);let o=n.components;o!==null&&ID(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[se]&=-5,Xl()}}function ID(n,e){for(let t=0;t<e.length;t++)wD(n,e[t])}function Uu(n,e,t,i){let r=oe(null);try{let o=e.tView,a=n[se]&4096?4096:16,l=wm(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[e.index];l[wi]=f;let m=n[Bn];return m!==null&&(l[Bn]=m.createEmbeddedView(o)),Lm(o,l,t),l}finally{oe(r)}}function $s(n,e){return!e||e.firstChild===null||Rv(n)}function Gs(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(dn(o)),Cn(o)&&__(o,i);let s=t.type;if(s&8)Gs(n,e,t.child,i);else if(s&32){let a=Im(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=f_(e,t);if(Array.isArray(a))i.push(...a);else{let l=Ei(e[Yt]);Gs(l[ee],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function __(n,e){for(let t=Je;t<n.length;t++){let i=n[t],r=i[ee].firstChild;r!==null&&Gs(i[ee],i,r,e)}n[Ti]!==n[_n]&&e.push(n[Ti])}function C_(n){if(n[rr]!==null){for(let e of n[rr])e.impl.addSequence(e);n[rr].length=0}}var E_=[];function MD(n){return n[Jt]??AD(n)}function AD(n){let e=E_.pop()??Object.create(ND);return e.lView=n,e}function RD(n){n.lView[Jt]!==n&&(n.lView=null,E_.push(n))}var ND=q(N({},Gi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Mi(n.lView)},consumerOnSignalRead(){this.lView[Jt]=this}});function PD(n){let e=n[Jt]??Object.create(FD);return e.lView=n,e}var FD=q(N({},Gi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ei(n.lView);for(;e&&!x_(e[ee]);)e=Ei(e);e&&dp(e)},consumerOnSignalRead(){this.lView[Jt]=this}});function x_(n){return n.type!==2}function S_(n){if(n[li]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[li])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[se]&8192)}}var kD=100;function D_(n,e=0){let i=n[Vn].rendererFactory,r=!1;r||i.begin?.();try{OD(n,e)}finally{r||i.end?.()}}function OD(n,e){let t=Cp();try{io(!0),Qp(n,e);let i=0;for(;Ns(n);){if(i===kD)throw new W(103,!1);i++,Qp(n,1)}}finally{io(t)}}function LD(n,e,t,i){if(ar(e))return;let r=e[se],o=!1,s=!1;Zl(e);let a=!0,l=null,f=null;o||(x_(n)?(f=MD(e),l=qi(f)):ol()===null?(a=!1,f=PD(e),l=qi(f)):e[Jt]&&(Wi(e[Jt]),e[Jt]=null));try{cp(e),Iy(n.bindingStartIndex),t!==null&&p_(n,e,t,2,i);let m=(r&3)===3;if(!o)if(m){let _=n.preOrderCheckHooks;_!==null&&su(e,_,null)}else{let _=n.preOrderHooks;_!==null&&au(e,_,0,null),Ap(e,0)}if(s||VD(e),S_(e),b_(e,0),n.contentQueries!==null&&$v(n,e),!o)if(m){let _=n.contentCheckHooks;_!==null&&su(e,_)}else{let _=n.contentHooks;_!==null&&au(e,_,1),Ap(e,1)}UD(n,e);let y=n.components;y!==null&&T_(e,y,0);let v=n.viewQuery;if(v!==null&&zp(2,v,i),!o)if(m){let _=n.viewCheckHooks;_!==null&&su(e,_)}else{let _=n.viewHooks;_!==null&&au(e,_,2),Ap(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Wl]){for(let _ of e[Wl])_();e[Wl]=null}o||(C_(e),e[se]&=-73)}catch(m){throw o||Mi(e),m}finally{f!==null&&(kr(f,l),a&&RD(f)),Xl()}}function b_(n,e){for(let t=Pv(n);t!==null;t=Fv(t))for(let i=Je;i<t.length;i++){let r=t[i];w_(r,e)}}function VD(n){for(let e=Pv(n);e!==null;e=Fv(e)){if(!(e[se]&2))continue;let t=e[sr];for(let i=0;i<t.length;i++){let r=t[i];dp(r)}}}function BD(n,e,t){Re(18);let i=fn(e,n);w_(i,t),Re(19,i[tt])}function w_(n,e){jl(n)&&Qp(n,e)}function Qp(n,e){let i=n[ee],r=n[se],o=n[Jt],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Or(o)),s||=!1,o&&(o.dirty=!1),n[se]&=-9217,s)LD(i,n,i.template,n[tt]);else if(r&8192){let a=oe(null);try{S_(n),b_(n,1);let l=i.components;l!==null&&T_(n,l,1),C_(n)}finally{oe(a)}}}function T_(n,e,t){for(let i=0;i<e.length;i++)BD(n,e[i],t)}function UD(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Ri(~r);else{let o=r,s=t[++i],a=t[++i];Ay(s,o);let l=e[o];Re(24,l),a(2,l),Re(25,l)}}}finally{Ri(-1)}}function Vm(n,e){let t=Cp()?64:1088;for(n[Vn].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let i=Ei(n);if(to(n)&&!i)return n;n=i}return null}function I_(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function M_(n,e){let t=Je+e;if(t<n.length)return n[t]}function Hu(n,e,t,i=!0){let r=e[ee];if(HD(r,e,n,t),i){let s=Kp(t,n),a=e[Oe],l=a.parentNode(n[Ti]);l!==null&&eD(r,n[cn],a,e,l,s)}let o=e[Zr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function A_(n,e){let t=qs(n,e);return t!==void 0&&Vu(t[ee],t),t}function qs(n,e){if(n.length<=Je)return;let t=Je+e,i=n[t];if(i){let r=i[wi];r!==null&&r!==n&&Nm(r,i),e>0&&(n[t-1][un]=i[un]);let o=ws(n,Je+e);XS(i[ee],i);let s=o[Bn];s!==null&&s.detachView(o[ee]),i[ct]=null,i[un]=null,i[se]&=-129}return i}function HD(n,e,t,i){let r=Je+i,o=t.length;i>0&&(t[r-1][un]=e),i<o-Je?(e[un]=t[r],Jf(t,Je+i,e)):(t.push(e),e[un]=null),e[ct]=t;let s=e[wi];s!==null&&t!==s&&R_(s,e);let a=e[Bn];a!==null&&a.insertView(n),Yl(e),e[se]|=128}function R_(n,e){let t=n[sr],i=e[ct];if(Un(i))n[se]|=2;else{let r=i[ct][Yt];e[Yt]!==r&&(n[se]|=2)}t===null?n[sr]=[e]:t.push(e)}var Ni=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ee];return Gs(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[tt]}set context(e){this._lView[tt]=e}get destroyed(){return ar(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ct];if(Cn(e)){let t=e[As],i=t?t.indexOf(this):-1;i>-1&&(qs(e,i),ws(t,i))}this._attachedToViewContainer=!1}Vu(this._lView[ee],this._lView)}onDestroy(e){fp(this._lView,e)}markForCheck(){Vm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){Yl(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,D_(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=to(this._lView),t=this._lView[wi];t!==null&&!e&&Nm(t,this._lView),d_(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let t=to(this._lView),i=this._lView[wi];i!==null&&!t&&R_(i,this._lView),Yl(this._lView)}};var uo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=$D;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let o=Uu(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new Ni(o)}}return n})();function $D(){return Bm(ft(),ue())}function Bm(n,e){return n.type&4?new uo(e,n,po(n,e)):null}function $u(n,e,t,i,r){let o=n.data[e];if(o===null)o=GD(n,e,t,i,r),My()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=wy();o.injectorIndex=s===null?-1:s.injectorIndex}return no(o,!0),o}function GD(n,e,t,i,r){let o=vp(),s=_p(),a=s?o:o&&o.parent,l=n.data[e]=WD(n,a,t,e,i,r);return qD(n,l,o,s),l}function qD(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function WD(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return by()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var O$=new RegExp(`^(\\d+)*(${hS}|${mS})*(.*)`);function zD(n){let e=n[op]??[],i=n[ct][Oe],r=[];for(let o of e)o.data[Vv]!==void 0?r.push(o):jD(o,i);n[op]=r}function jD(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[Lv];for(;t<r;){let o=i.nextSibling;Yv(e,i,!1),i=o,t++}}}var YD=()=>null,JD=()=>null;function Zp(n,e){return YD(n,e)}function N_(n,e,t){return JD(n,e,t)}var P_=class{},Gu=class{},Xp=class{resolveComponentFactory(e){throw new W(917,!1)}},Zs=class{static NULL=new Xp},fr=class{},Tn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>KD()}return n})();function KD(){let n=ue(),e=ft(),t=fn(e.index,n);return(Un(t)?t:n)[Oe]}var F_=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>null})}return n})();var uu={},em=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,uu,i);return r!==uu||t===uu?r:this.parentInjector.get(e,t,i)}};function Eu(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Bl(r,a);else if(o==2){let l=a,f=e[++s];i=Bl(i,l+": "+f+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function X(n,e=0){let t=ue();if(t===null)return ie(n,e);let i=ft();return Iv(i,t,xt(n),e)}function QD(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a=s,l=null,f=null;for(let m of s)if(m.resolveHostDirectives!==null){[a,l,f]=m.resolveHostDirectives(s);break}eb(n,e,t,a,o,l,f)}o!==null&&i!==null&&ZD(t,i,o)}function ZD(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new W(-301,!1);i.push(e[r],o)}}function XD(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function eb(n,e,t,i,r,o,s){let a=i.length,l=!1;for(let v=0;v<a;v++){let _=i[v];!l&&Hn(_)&&(l=!0,XD(n,t,v)),$p(hu(t,e),n,_.type)}sb(t,n.data.length,a);for(let v=0;v<a;v++){let _=i[v];_.providersResolver&&_.providersResolver(_)}let f=!1,m=!1,y=n_(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let v=0;v<a;v++){let _=i[v];if(t.mergedAttrs=ao(t.mergedAttrs,_.hostAttrs),nb(n,t,e,y,_),ob(y,_,r),s!==null&&s.has(_)){let[b,A]=s.get(_);t.directiveToIndex.set(_.type,[y,b+t.directiveStart,A+t.directiveStart])}else(o===null||!o.has(_))&&t.directiveToIndex.set(_.type,y);_.contentQueries!==null&&(t.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(t.flags|=64);let E=_.type.prototype;!f&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!m&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),m=!0),y++}tb(n,t,o)}function tb(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))nv(0,e,r,i),nv(1,e,r,i),rv(e,i,!1);else{let o=t.get(r);iv(0,e,o,i),iv(1,e,o,i),rv(e,i,!0)}}}function nv(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),k_(e,o)}}function iv(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),k_(e,s)}}function k_(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function rv(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||Dm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let f=r[l];for(let m of f)if(m===e){s??=[],s.push(l,i[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let f=o[l];for(let m=0;m<f.length;m+=2)if(f[m]===e){s??=[],s.push(f[m+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function nb(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=Ci(r.type,!0)),s=new cr(o,Hn(r),X,null);n.blueprint[i]=s,t[i]=s,ib(n,e,i,n_(n,t,r.hostVars,St),r)}function ib(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;rb(s)!=a&&s.push(a),s.push(t,i,o)}}function rb(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ob(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Hn(e)&&(t[""]=n)}}function sb(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function O_(n,e,t,i,r,o,s,a){let l=e[ee],f=l.consts,m=$n(f,s),y=$u(l,n,t,i,m);return o&&QD(l,e,y,$n(f,a),r),y.mergedAttrs=ao(y.mergedAttrs,y.attrs),y.attrs!==null&&Eu(y,y.attrs,!1),y.mergedAttrs!==null&&Eu(y,y.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,y),y}function L_(n,e){z2(n,e),sp(e)&&n.queries.elementEnd(e)}function ab(n,e,t,i,r,o){let s=e.consts,a=$n(s,r),l=$u(e,n,t,i,a);if(l.mergedAttrs=ao(l.mergedAttrs,l.attrs),o!=null){let f=$n(s,o);l.localNames=[];for(let m=0;m<f.length;m+=2)l.localNames.push(f[m],-1)}return l.attrs!==null&&Eu(l,l.attrs,!1),l.mergedAttrs!==null&&Eu(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function Um(n,e,t){return n[e]=t}function lb(n,e){return n[e]}function mn(n,e,t){if(t===St)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function Ws(n,e,t,i){let r=mn(n,e,t);return mn(n,e+1,i)||r}function ub(n,e,t,i,r){let o=Ws(n,e,t,i);return mn(n,e+2,r)||o}function cb(n,e,t,i,r,o){let s=Ws(n,e,t,i);return Ws(n,e+2,r,o)||s}function cu(n,e,t){return function i(r){let o=Ii(n)?fn(n.index,e):e;Vm(o,5);let s=e[tt],a=ov(e,s,t,r),l=i.__ngNextListenerFn__;for(;l;)a=ov(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function ov(n,e,t,i){let r=oe(null);try{return Re(6,e,t),t(i)!==!1}catch(o){return bD(n,o),!1}finally{Re(7,e,t),oe(r)}}function V_(n,e,t,i,r,o,s,a){let l=zl(n),f=!1,m=null;if(!i&&l&&(m=fb(e,t,o,n.index)),m!==null){let y=m.__ngLastListenerFn__||m;y.__ngNextListenerFn__=s,m.__ngLastListenerFn__=s,f=!0}else{let y=En(n,t),v=i?i(y):y;yS(t,v,o,a);let _=r.listen(v,o,a);if(!db(o)){let E=i?b=>i(dn(b[n.index])):n.index;B_(E,e,t,o,a,_,!1)}}return f}function db(n){return n.startsWith("animation")||n.startsWith("transition")}function fb(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[Xr],l=r[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function B_(n,e,t,i,r,o,s){let a=e.firstCreatePass?mp(e):null,l=pp(t),f=l.length;l.push(r,o),a&&a.push(i,n,f,(f+1)*(s?-1:1))}function sv(n,e,t,i,r,o){let s=e[t],a=e[ee],f=a.data[t].outputs[i],y=s[f].subscribe(o);B_(n.index,a,e,r,o,y,!0)}var tm=Symbol("BINDING");var xu=class extends Zs{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=bi(e);return new co(t,this.ngModule)}};function pb(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&Ou.SignalBased)!==0};return r&&(o.transform=r),o})}function mb(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function hb(n,e,t){let i=e instanceof st?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new em(t,i):t}function gb(n){let e=n.get(fr,null);if(e===null)throw new W(407,!1);let t=n.get(F_,null),i=n.get(an,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function yb(n,e){let t=U_(n);return zv(e,t,t==="svg"?hy:t==="math"?gy:null)}function U_(n){return(n.selectors[0][0]||"div").toLowerCase()}var co=class extends Gu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=pb(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=mb(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=LS(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,o,s){Re(22);let a=oe(null);try{let l=this.componentDef,f=vb(i,l,s,o),m=hb(l,r||this.ngModule,e),y=gb(m),v=y.rendererFactory.createRenderer(null,l),_=i?pD(v,i,l.encapsulation,m):yb(l,v),E=s?.some(av)||o?.some(M=>typeof M!="function"&&M.bindings.some(av)),b=wm(null,f,null,512|t_(l),null,null,y,v,m,null,Hv(_,m,!0));b[at]=_,Zl(b);let A=null;try{let M=O_(at,b,2,"#host",()=>f.directiveRegistry,!0,0);Jv(v,_,M),lo(_,b),m_(f,b,M),Gv(f,M,b),L_(f,M),t!==void 0&&Cb(M,this.ngContentSelectors,t),A=fn(M.index,b),b[tt]=A[tt],Lm(f,b,null)}catch(M){throw A!==null&&qp(A),qp(b),M}finally{Re(23),Xl()}return new Su(this.componentType,b,!!E)}finally{oe(a)}}};function vb(n,e,t,i){let r=n?["ng-version","20.3.16"]:VS(e.selectors[0]),o=null,s=null,a=0;if(t)for(let m of t)a+=m[tm].requiredVars,m.create&&(m.targetIdx=0,(o??=[]).push(m)),m.update&&(m.targetIdx=0,(s??=[]).push(m));if(i)for(let m=0;m<i.length;m++){let y=i[m];if(typeof y!="function")for(let v of y.bindings){a+=v[tm].requiredVars;let _=m+1;v.create&&(v.targetIdx=_,(o??=[]).push(v)),v.update&&(v.targetIdx=_,(s??=[]).push(v))}}let l=[e];if(i)for(let m of i){let y=typeof m=="function"?m:m.type,v=Xf(y);l.push(v)}return bm(0,null,_b(o,s),1,a,l,null,null,null,[r],null)}function _b(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function av(n){let e=n[tm].kind;return e==="input"||e==="twoWay"}var Su=class extends P_{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=Rs(t[ee],at),this.location=po(this._tNode,t),this.instance=fn(this._tNode.index,t)[tt],this.hostView=this.changeDetectorRef=new Ni(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=Om(i,r[ee],r,e,t);this.previousInputValues.set(e,t);let s=fn(i.index,r);Vm(s,1)}get injector(){return new ur(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Cb(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var gr=(()=>{class n{static __NG_ELEMENT_ID__=Eb}return n})();function Eb(){let n=ft();return $_(n,ue())}var xb=gr,H_=class extends xb{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return po(this._hostTNode,this._hostLView)}get injector(){return new ur(this._hostTNode,this._hostLView)}get parentInjector(){let e=vm(this._hostTNode,this._hostLView);if(xv(e)){let t=pu(e,this._hostLView),i=fu(e),r=t[ee].data[i+8];return new ur(r,t)}else return new ur(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=lv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Je}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Zp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,$s(this._hostTNode,s)),a}createComponent(e,t,i,r,o,s,a){let l=e&&!H2(e),f;if(l)f=t;else{let A=t||{};f=A.index,i=A.injector,r=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,a=A.bindings}let m=l?e:new co(bi(e)),y=i||this.parentInjector;if(!o&&m.ngModule==null){let M=(l?y:this.parentInjector).get(st,null);M&&(o=M)}let v=bi(m.componentType??{}),_=Zp(this._lContainer,v?.id??null),E=_?.firstChild??null,b=m.create(y,r,E,o,s,a);return this.insertImpl(b.hostView,f,$s(this._hostTNode,_)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(vy(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[ct],f=new H_(l,l[cn],l[ct]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Hu(s,r,o,i),e.attachToViewContainerRef(),Jf(Pp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=lv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=qs(this._lContainer,t);i&&(ws(Pp(this._lContainer),t),Vu(i[ee],i))}detach(e){let t=this._adjustIndex(e,-1),i=qs(this._lContainer,t);return i&&ws(Pp(this._lContainer),t)!=null?new Ni(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function lv(n){return n[As]}function Pp(n){return n[As]||(n[As]=[])}function $_(n,e){let t,i=e[n.index];return Cn(i)?t=i:(t=I_(i,e,null,n),e[n.index]=t,Tm(e,t)),Db(t,e,n,i),new H_(t,n,e)}function Sb(n,e){let t=n[Oe],i=t.createComment(""),r=En(e,n),o=t.parentNode(r);return vu(t,o,i,t.nextSibling(r),!1),i}var Db=Tb,bb=()=>!1;function wb(n,e,t){return bb(n,e,t)}function Tb(n,e,t,i){if(n[Ti])return;let r;t.type&8?r=dn(i):r=Sb(e,t),n[Ti]=r}var nm=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},im=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Hm(e,t).matches!==null&&this.queries[t].setDirty()}},Du=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=kb(e):this.predicate=e}},rm=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},om=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,Ib(t,o)),this.matchTNodeWithReadOption(e,t,lu(t,e,o,!1,!1))}else i===uo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,lu(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Pt||r===gr||r===uo&&t.type&4)this.addMatch(t.index,-2);else{let o=lu(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function Ib(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function Mb(n,e){return n.type&11?po(n,e):n.type&4?Bm(n,e):null}function Ab(n,e,t,i){return t===-1?Mb(e,n):t===-2?Rb(n,e,i):Us(n,n[ee],t,e)}function Rb(n,e,t){if(t===Pt)return po(e,n);if(t===uo)return Bm(e,n);if(t===gr)return $_(e,n)}function G_(n,e,t,i){let r=e[Bn].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let f=s[l];if(f<0)a.push(null);else{let m=o[f];a.push(Ab(e,m,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function sm(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=G_(n,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let f=o[a+1],m=e[-l];for(let y=Je;y<m.length;y++){let v=m[y];v[wi]===v[ct]&&sm(v[ee],v,f,i)}if(m[sr]!==null){let y=m[sr];for(let v=0;v<y.length;v++){let _=y[v];sm(_[ee],_,f,i)}}}}}return i}function Nb(n,e){return n[Bn].queries[e].queryList}function q_(n,e,t){let i=new gu((t&4)===4);return Ey(n,e,i,i.destroy),(e[Bn]??=new im).queries.push(new nm(i))-1}function Pb(n,e,t){let i=Ke();return i.firstCreatePass&&(W_(i,new Du(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),q_(i,ue(),e)}function Fb(n,e,t,i){let r=Ke();if(r.firstCreatePass){let o=ft();W_(r,new Du(e,t,i),o.index),Ob(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return q_(r,ue(),t)}function kb(n){return n.split(",").map(e=>e.trim())}function W_(n,e,t){n.queries===null&&(n.queries=new rm),n.queries.track(new om(e,t))}function Ob(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function Hm(n,e){return n.queries.getByIndex(e)}function Lb(n,e){let t=n[ee],i=Hm(t,e);return i.crossesNgTemplate?sm(t,n,e,[]):G_(t,n,i,e)}var pr=class{},qu=class{};var bu=class extends pr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new xu(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=Zf(e);this._bootstrapComponents=Xv(o.bootstrap),this._r3Injector=bp(e,t,[{provide:pr,useValue:this},{provide:Zs,useValue:this.componentFactoryResolver},...i],oi(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wu=class extends qu{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new bu(this.moduleType,e,[])}};var zs=class extends pr{injector;componentFactoryResolver=new xu(this);instance=null;constructor(e){super();let t=new Xi([...e.providers,{provide:pr,useValue:this},{provide:Zs,useValue:this.componentFactoryResolver}],e.parent||Is(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xs(n,e,t=null){return new zs({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Vb=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=ep(!1,t.type),r=i.length>0?Xs([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(ie(st))})}return n})();function ae(n){return Ys(()=>{let e=z_(n),t=q(N({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_m.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(Vb).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ui.Emulated,styles:n.styles||Nt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ci("NgStandalone"),j_(t);let i=n.dependencies;return t.directiveDefs=uv(i,Bb),t.pipeDefs=uv(i,ly),t.id=$b(t),t})}function Bb(n){return bi(n)||Xf(n)}function In(n){return Ys(()=>({type:n.type,bootstrap:n.bootstrap||Nt,declarations:n.declarations||Nt,imports:n.imports||Nt,exports:n.exports||Nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ub(n,e){if(n==null)return Si;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=Ou.None,l=null),t[o]=[i,a,l],e[o]=s}return t}function Hb(n){if(n==null)return Si;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Pe(n){return Ys(()=>{let e=z_(n);return j_(e),e})}function Wu(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function z_(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Si,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Nt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Ub(n.inputs,e),outputs:Hb(n.outputs),debugInfo:null}}function j_(n){n.features?.forEach(e=>e(n))}function uv(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let o=e(r);o!==null&&i.push(o)}return i}:null}function $b(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Gb(n){return Object.getPrototypeOf(n.prototype).constructor}function vt(n){let e=Gb(n.type),t=!0,i=[n];for(;e;){let r;if(Hn(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=Fp(n.inputs),s.declaredInputs=Fp(n.declaredInputs),s.outputs=Fp(n.outputs);let a=r.hostBindings;a&&Yb(n,a);let l=r.viewQuery,f=r.contentQueries;if(l&&zb(n,l),f&&jb(n,f),qb(n,r),ey(n.outputs,r.outputs),Hn(r)&&r.data.animation){let m=n.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===vt&&(t=!1)}}e=Object.getPrototypeOf(e)}Wb(i)}function qb(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function Wb(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ao(r.hostAttrs,t=ao(t,r.hostAttrs))}}function Fp(n){return n===Si?{}:n===Nt?[]:n}function zb(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function jb(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function Yb(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Jb(n,e,t,i,r,o,s,a){if(t.firstCreatePass){n.mergedAttrs=ao(n.mergedAttrs,n.attrs);let m=n.tView=bm(2,n,r,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),m.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),no(n,!1);let l=Kb(t,e,n,i);eu()&&Pm(t,e,l,n),lo(l,e);let f=I_(l,e,l,n);e[i+at]=f,Tm(e,f),wb(f,n,e)}function Tu(n,e,t,i,r,o,s,a,l,f,m){let y=t+at,v;if(e.firstCreatePass){if(v=$u(e,y,4,s||null,a||null),f!=null){let _=$n(e.consts,f);v.localNames=[];for(let E=0;E<_.length;E+=2)v.localNames.push(_[E],-1)}}else v=e.data[y];return Jb(v,n,e,t,i,r,o,l),f!=null&&km(n,v,m),v}var Kb=Qb;function Qb(n,e,t,i){return tu(!0),e[Oe].createComment("")}var $m=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Gm=new Z("");function Pi(n){return!!n&&typeof n.then=="function"}function qm(n){return!!n&&typeof n.subscribe=="function"}var Y_=new Z("");var Wm=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=R(Y_,{optional:!0})??[];injector=R(Tt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=dt(this.injector,r);if(Pi(o))t.push(o);else if(qm(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zu=new Z("");function J_(){pf(()=>{let n="";throw new W(600,n)})}function K_(n){return n.isBoundToModule}var Zb=10;var fi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(Gt);afterRenderManager=R(Rm);zonelessEnabled=R(ks);rootEffectScheduler=R(Ls);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(Gn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(le(t=>!t))}constructor(){R(hr,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=R(st);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Tt.NULL){return this._injector.get(nt).run(()=>{Re(10);let s=t instanceof Gu;if(!this._injector.get(Wm).done){let E="";throw new W(405,E)}let l;s?l=t:l=this._injector.get(Zs).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let f=K_(l)?void 0:this._injector.get(pr),m=i||l.selector,y=l.create(r,[],m,f),v=y.location.nativeElement,_=y.injector.get(Gm,null);return _?.registerApplication(v),y.onDestroy(()=>{this.detachView(y.hostView),Bs(this.components,y),_?.unregisterApplication(v)}),this._loadComponent(y),Re(11,y),y})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Re(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Lu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new W(101,!1);let t=oe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,oe(t),this.afterTick.next(),Re(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(fr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Zb;)Re(14),this.synchronizeOnce(),Re(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Ns(r))continue;let o=i&&!this.zonelessEnabled?0:1;D_(r,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ns(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Bs(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(zu,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Bs(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bs(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mt(n,e,t,i){let r=ue(),o=Ai();if(mn(r,o,e)){let s=Ke(),a=Fs();xD(a,r,n,e,t,i)}return mt}var G$=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var am=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function kp(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function Xb(n,e,t){let i,r,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let f=n.at(o),m=e[o],y=kp(o,f,o,m,t);if(y!==0){y<0&&n.updateValue(o,m),o++;continue}let v=n.at(s),_=e[l],E=kp(s,v,l,_,t);if(E!==0){E<0&&n.updateValue(s,_),s--,l--;continue}let b=t(o,f),A=t(s,v),M=t(o,m);if(Object.is(M,A)){let O=t(l,_);Object.is(O,b)?(n.swap(o,s),n.updateValue(s,_),l--,s--):n.move(s,o),n.updateValue(o,m),o++;continue}if(i??=new Iu,r??=dv(n,o,s,t),lm(n,i,o,M))n.updateValue(o,m),o++,s++;else if(r.has(M))i.set(b,n.detach(o)),s--;else{let O=n.create(o,e[o]);n.attach(o,O),o++,s++}}for(;o<=l;)cv(n,i,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),f=l.next();for(;!f.done&&o<=s;){let m=n.at(o),y=f.value,v=kp(o,m,o,y,t);if(v!==0)v<0&&n.updateValue(o,y),o++,f=l.next();else{i??=new Iu,r??=dv(n,o,s,t);let _=t(o,y);if(lm(n,i,o,_))n.updateValue(o,y),o++,s++,f=l.next();else if(!r.has(_))n.attach(o,n.create(o,y)),o++,s++,f=l.next();else{let E=t(o,m);i.set(E,n.detach(o)),s--}}}for(;!f.done;)cv(n,i,t,n.length,f.value),f=l.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(l=>{n.destroy(l)})}function lm(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function cv(n,e,t,i,r){if(lm(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function dv(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var Iu=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function B(n,e,t,i,r,o,s,a){ci("NgControlFlow");let l=ue(),f=Ke(),m=$n(f.consts,o);return Tu(l,f,n,e,t,i,r,m,256,s,a),zm}function zm(n,e,t,i,r,o,s,a){ci("NgControlFlow");let l=ue(),f=Ke(),m=$n(f.consts,o);return Tu(l,f,n,e,t,i,r,m,512,s,a),zm}function U(n,e){ci("NgControlFlow");let t=ue(),i=Ai(),r=t[i]!==St?t[i]:-1,o=r!==-1?Mu(t,at+r):void 0,s=0;if(mn(t,i,n)){let a=oe(null);try{if(o!==void 0&&A_(o,s),n!==-1){let l=at+n,f=Mu(t,l),m=fm(t[ee],l),y=N_(f,m,t),v=Uu(t,m,e,{dehydratedView:y});Hu(f,v,s,$s(m,y))}}finally{oe(a)}}else if(o!==void 0){let a=M_(o,s);a!==void 0&&(a[tt]=e)}}var um=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-Je}};function Mt(n){return n}function j(n,e){return e}var cm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function P(n,e,t,i,r,o,s,a,l,f,m,y,v){ci("NgControlFlow");let _=ue(),E=Ke(),b=l!==void 0,A=ue(),M=a?s.bind(A[Yt][tt]):s,O=new cm(b,M);A[at+n]=O,Tu(_,E,n+1,e,t,i,r,$n(E.consts,o),256),b&&Tu(_,E,n+2,l,f,m,y,$n(E.consts,v),512)}var dm=class extends am{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-Je}at(e){return this.getLView(e)[tt].$implicit}attach(e,t){let i=t[Zr];this.needsIndexUpdate||=e!==this.length,Hu(this.lContainer,t,e,$s(this.templateTNode,i)),ew(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,tw(this.lContainer,e),nw(this.lContainer,e)}create(e,t){let i=Zp(this.lContainer,this.templateTNode.tView.ssrId),r=Uu(this.hostLView,this.templateTNode,new um(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){Vu(e[ee],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[tt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[tt].$index=e}getLView(e){return iw(this.lContainer,e)}};function F(n){let e=oe(null),t=xn();try{let i=ue(),r=i[ee],o=i[t],s=t+1,a=Mu(i,s);if(o.liveCollection===void 0){let f=fm(r,s);o.liveCollection=new dm(a,i,f)}else o.liveCollection.reset();let l=o.liveCollection;if(Xb(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let f=Ai(),m=l.length===0;if(mn(i,f,m)){let y=t+2,v=Mu(i,y);if(m){let _=fm(r,y),E=N_(v,_,i),b=Uu(i,_,void 0,{dehydratedView:E});Hu(v,b,0,$s(_,E))}else r.firstUpdatePass&&zD(v),A_(v,0)}}}finally{oe(e)}}function Mu(n,e){return n[e]}function ew(n,e){if(n.length<=Je)return;let t=Je+e,i=n[t],r=i?i[or]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[ai];QS(o,r),dr.delete(i),r.detachedLeaveAnimationFns=void 0}}function tw(n,e){if(n.length<=Je)return;let t=Je+e,i=n[t],r=i?i[or]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function nw(n,e){return qs(n,e)}function iw(n,e){return M_(n,e)}function fm(n,e){return Rs(n,e)}function k(n,e,t){let i=ue(),r=Ai();if(mn(i,r,e)){let o=Ke(),s=Fs();h_(s,i,n,e,i[Oe],t)}return k}function pm(n,e,t,i,r){Om(e,n,t,r?"class":"style",i)}function d(n,e,t,i){let r=ue(),o=r[ee],s=n+at,a=o.firstCreatePass?O_(s,r,2,e,ED,Dy(),t,i):o.data[s];if(y_(a,r,n,e,Q_),zl(a)){let l=r[ee];m_(l,r,a),Gv(l,a,r)}return i!=null&&km(r,a),d}function c(){let n=Ke(),e=ft(),t=v_(e);return n.firstCreatePass&&L_(n,t),gp(t)&&yp(),hp(),t.classesWithoutHost!=null&&Y2(t)&&pm(n,t,ue(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&J2(t)&&pm(n,t,ue(),t.stylesWithoutHost,!1),c}function x(n,e,t,i){return d(n,e,t,i),c(),x}function Kt(n,e,t,i){let r=ue(),o=r[ee],s=n+at,a=o.firstCreatePass?ab(s,o,2,e,t,i):o.data[s];return y_(a,r,n,e,Q_),i!=null&&km(r,a),Kt}function Qt(){let n=ft(),e=v_(n);return gp(e)&&yp(),hp(),Qt}function ea(n,e,t,i){return Kt(n,e,t,i),Qt(),ea}var Q_=(n,e,t,i,r)=>(tu(!0),zv(e[Oe],i,Ly()));function $(){return ue()}function ju(n,e,t){let i=ue(),r=Ai();if(mn(i,r,e)){let o=Ke(),s=Fs();g_(s,i,n,e,i[Oe],t)}return ju}var ru=void 0;function rw(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var ow=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ru,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ru,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ru,"{1} 'at' {0}",ru],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",rw],Op={};function ta(n){let e=sw(n),t=fv(e);if(t)return t;let i=e.split("-")[0];if(t=fv(i),t)return t;if(i==="en")return ow;throw new W(701,!1)}function fv(n){return n in Op||(Op[n]=si.ng&&si.ng.common&&si.ng.common.locales&&si.ng.common.locales[n]),Op[n]}var Fi=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Fi||{});function sw(n){return n.toLowerCase().replace(/_/g,"-")}var na="en-US",aw="USD";var lw=na;function Z_(n){typeof n=="string"&&(lw=n.toLowerCase().replace(/_/g,"-"))}function D(n,e,t){let i=ue(),r=Ke(),o=ft();return X_(r,i,i[Oe],o,n,e,t),D}function mo(n,e,t){let i=ue(),r=Ke(),o=ft();return(o.type&3||t)&&V_(o,r,i,t,i[Oe],n,e,cu(o,i,e)),mo}function X_(n,e,t,i,r,o,s){let a=!0,l=null;if((i.type&3||s)&&(l??=cu(i,e,o),V_(i,n,e,s,t,r,o,l)&&(a=!1)),a){let f=i.outputs?.[r],m=i.hostDirectiveOutputs?.[r];if(m&&m.length)for(let y=0;y<m.length;y+=2){let v=m[y],_=m[y+1];l??=cu(i,e,o),sv(i,e,v,_,r,l)}if(f&&f.length)for(let y of f)l??=cu(i,e,o),sv(i,e,y,r,r,l)}}function C(n=1){return Oy(n)}function jm(n,e,t,i){Fb(n,e,t,i)}function Zt(n,e,t){Pb(n,e,t)}function Ft(n){let e=ue(),t=Ke(),i=xp();Ql(i+1);let r=Hm(t,i);if(n.dirty&&yy(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=Lb(e,i);n.reset(o,lS),n.notifyOnChanges()}return!0}return!1}function kt(){return Nb(ue(),xp())}function ou(n,e){return n<<17|e<<2}function mr(n){return n>>17&32767}function uw(n){return(n&2)==2}function cw(n,e){return n&131071|e<<17}function mm(n){return n|2}function fo(n){return(n&131068)>>2}function Lp(n,e){return n&-131069|e<<2}function dw(n){return(n&1)===1}function hm(n){return n|1}function fw(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=mr(s),l=fo(s);n[i]=t;let f=!1,m;if(Array.isArray(t)){let y=t;m=y[1],(m===null||Qr(y,m)>0)&&(f=!0)}else m=t;if(r)if(l!==0){let v=mr(n[a+1]);n[i+1]=ou(v,a),v!==0&&(n[v+1]=Lp(n[v+1],i)),n[a+1]=cw(n[a+1],i)}else n[i+1]=ou(a,0),a!==0&&(n[a+1]=Lp(n[a+1],i)),a=i;else n[i+1]=ou(l,0),a===0?a=i:n[l+1]=Lp(n[l+1],i),l=i;f&&(n[i+1]=mm(n[i+1])),pv(n,m,i,!0),pv(n,m,i,!1),pw(e,m,n,i,o),s=ou(a,l),o?e.classBindings=s:e.styleBindings=s}function pw(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Qr(o,e)>=0&&(t[i+1]=hm(t[i+1]))}function pv(n,e,t,i){let r=n[t+1],o=e===null,s=i?mr(r):fo(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],f=n[s+1];mw(l,e)&&(a=!0,n[s+1]=i?hm(f):mm(f)),s=i?mr(f):fo(f)}a&&(n[t+1]=i?mm(r):hm(r))}function mw(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Qr(n,e)>=0:!1}var Dn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function hw(n){return n.substring(Dn.key,Dn.keyEnd)}function gw(n){return yw(n),eC(n,tC(n,0,Dn.textEnd))}function eC(n,e){let t=Dn.textEnd;return t===e?-1:(e=Dn.keyEnd=vw(n,Dn.key=e,t),tC(n,e,t))}function yw(n){Dn.key=0,Dn.keyEnd=0,Dn.value=0,Dn.valueEnd=0,Dn.textEnd=n.length}function tC(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function vw(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Yu(n,e,t){return nC(n,e,t,!1),Yu}function J(n,e){return nC(n,e,null,!0),J}function _t(n){Cw(ww,_w,n,!0)}function _w(n,e){for(let t=gw(e);t>=0;t=eC(e,t))Gl(n,hw(e),!0)}function nC(n,e,t,i){let r=ue(),o=Ke(),s=Ps(2);if(o.firstUpdatePass&&rC(o,n,s,i),e!==St&&mn(r,s,e)){let a=o.data[xn()];oC(o,a,r,r[Oe],n,r[s+1]=Iw(e,t),i,s)}}function Cw(n,e,t,i){let r=Ke(),o=Ps(2);r.firstUpdatePass&&rC(r,null,o,i);let s=ue();if(t!==St&&mn(s,o,t)){let a=r.data[xn()];if(sC(a,i)&&!iC(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=Bl(l,t||"")),pm(r,a,s,t,i)}else Tw(r,a,s,s[Oe],s[o+1],s[o+1]=bw(n,e,t),i,o)}}function iC(n,e){return e>=n.expandoStartIndex}function rC(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[xn()],s=iC(n,t);sC(o,i)&&e===null&&!s&&(e=!1),e=Ew(r,o,e,i),fw(r,o,e,t,s,i)}}function Ew(n,e,t,i){let r=Ny(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=Vp(null,n,e,t,i),t=js(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=Vp(r,n,e,t,i),o===null){let l=xw(n,e,i);l!==void 0&&Array.isArray(l)&&(l=Vp(null,n,e,l[1],i),l=js(l,e.attrs,i),Sw(n,e,i,l))}else o=Dw(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function xw(n,e,t){let i=t?e.classBindings:e.styleBindings;if(fo(i)!==0)return n[mr(i)]}function Sw(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[mr(r)]=i}function Dw(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=js(i,s,t)}return js(i,e.attrs,t)}function Vp(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=js(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function js(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Gl(n,s,t?!0:e[++o]))}return n===void 0?null:n}function bw(n,e,t){if(t==null||t==="")return Nt;let i=[],r=Qs(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function ww(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Gl(n,i,t)}function Tw(n,e,t,i,r,o,s,a){r===St&&(r=Nt);let l=0,f=0,m=0<r.length?r[0]:null,y=0<o.length?o[0]:null;for(;m!==null||y!==null;){let v=l<r.length?r[l+1]:void 0,_=f<o.length?o[f+1]:void 0,E=null,b;m===y?(l+=2,f+=2,v!==_&&(E=y,b=_)):y===null||m!==null&&m<y?(l+=2,E=m):(f+=2,E=y,b=_),E!==null&&oC(n,e,t,i,E,b,s,a),m=l<r.length?r[l]:null,y=f<o.length?o[f]:null}}function oC(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let l=n.data,f=l[a+1],m=dw(f)?mv(l,e,t,r,fo(f),s):void 0;if(!Au(m)){Au(o)||uw(f)&&(o=mv(l,null,t,r,a,s));let y=ap(xn(),t);fD(i,s,y,r,o)}}function mv(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let l=n[r],f=Array.isArray(l),m=f?l[1]:l,y=m===null,v=t[r+1];v===St&&(v=y?Nt:void 0);let _=y?ql(v,i):m===i?v:void 0;if(f&&!Au(_)&&(_=ql(l,i)),Au(_)&&(a=_,s))return a;let E=n[r+1];r=s?mr(E):fo(E)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=ql(l,i))}return a}function Au(n){return n!==void 0}function Iw(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=oi(Qs(n)))),n}function sC(n,e){return(n.flags&(e?8:16))!==0}function h(n,e=""){let t=ue(),i=Ke(),r=n+at,o=i.firstCreatePass?$u(i,r,1,e,null):i.data[r],s=Mw(i,t,o,e,n);t[r]=s,eu()&&Pm(i,t,s,o),no(o,!1)}var Mw=(n,e,t,i,r)=>(tu(!0),ES(e[Oe],i));function Aw(n,e,t,i=""){return mn(n,Ai(),t)?e+Ln(t)+i:St}function Rw(n,e,t,i,r,o=""){let s=Ep(),a=Ws(n,s,t,r);return Ps(2),a?e+Ln(t)+i+Ln(r)+o:St}function Nw(n,e,t,i,r,o,s,a=""){let l=Ep(),f=ub(n,l,t,r,s);return Ps(3),f?e+Ln(t)+i+Ln(r)+o+Ln(s)+a:St}function S(n){return H("",n),S}function H(n,e,t){let i=ue(),r=Aw(i,n,e,t);return r!==St&&Ym(i,xn(),r),H}function Ot(n,e,t,i,r){let o=ue(),s=Rw(o,n,e,t,i,r);return s!==St&&Ym(o,xn(),s),Ot}function hn(n,e,t,i,r,o,s){let a=ue(),l=Nw(a,n,e,t,i,r,o,s);return l!==St&&Ym(a,xn(),l),hn}function Ym(n,e,t){let i=ap(e,n);xS(n[Oe],i,t)}function ce(n,e,t){Ip(e)&&(e=e());let i=ue(),r=Ai();if(mn(i,r,e)){let o=Ke(),s=Fs();h_(s,i,n,e,i[Oe],t)}return ce}function fe(n,e){let t=Ip(n);return t&&n.set(e),t}function de(n,e){let t=ue(),i=Ke(),r=ft();return X_(i,t,t[Oe],r,n,e),de}function Pw(n,e,t){let i=Ke();if(i.firstCreatePass){let r=Hn(n);gm(t,i.data,i.blueprint,r,!0),gm(e,i.data,i.blueprint,r,!1)}}function gm(n,e,t,i,r){if(n=xt(n),Array.isArray(n))for(let o=0;o<n.length;o++)gm(n[o],e,t,i,r);else{let o=Ke(),s=ue(),a=ft(),l=Zi(n)?n:xt(n.provide),f=np(n),m=a.providerIndexes&1048575,y=a.directiveStart,v=a.providerIndexes>>20;if(Zi(n)||!n.multi){let _=new cr(f,r,X,null),E=Up(l,e,r?m:m+v,y);E===-1?($p(hu(a,s),o,l),Bp(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[E]=_,s[E]=_)}else{let _=Up(l,e,m+v,y),E=Up(l,e,m,m+v),b=_>=0&&t[_],A=E>=0&&t[E];if(r&&!A||!r&&!b){$p(hu(a,s),o,l);let M=Ow(r?kw:Fw,t.length,r,i,f,n);!r&&A&&(t[E].providerFactory=M),Bp(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(M),s.push(M)}else{let M=aC(t[r?E:_],f,!r&&i);Bp(o,n,_>-1?_:E,M)}!r&&i&&A&&t[E].componentProviders++}}}function Bp(n,e,t,i){let r=Zi(e),o=fy(e);if(r||o){let l=(o?xt(e.useClass):e).prototype.ngOnDestroy;if(l){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let m=f.indexOf(t);m===-1?f.push(t,[i,l]):f[m+1].push(i,l)}else f.push(t,l)}}}function aC(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Up(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function Fw(n,e,t,i,r){return ym(this.multi,[])}function kw(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Us(i,i[ee],this.providerFactory.index,r);s=l.slice(0,a),ym(o,s);for(let f=a;f<l.length;f++)s.push(l[f])}else s=[],ym(o,s);return s}function ym(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function Ow(n,e,t,i,r,o){let s=new cr(n,t,X,null);return s.multi=[],s.index=e,s.componentProviders=0,aC(s,r,i&&!t),s}function Xt(n,e=[]){return t=>{t.providersResolver=(i,r)=>Pw(i,r?r(n):n,e)}}function qt(n,e,t){let i=Jl()+n,r=ue();return r[i]===St?Um(r,i,t?e.call(t):e()):lb(r,i)}function lC(n,e){let t=n[e];return t===St?void 0:t}function Lw(n,e,t,i,r,o,s){let a=e+t;return Ws(n,a,r,o)?Um(n,a+2,s?i.call(s,r,o):i(r,o)):lC(n,a+2)}function Vw(n,e,t,i,r,o,s,a,l){let f=e+t;return cb(n,f,r,o,s,a)?Um(n,f+4,l?i.call(l,r,o,s,a):i(r,o,s,a)):lC(n,f+4)}function ho(n,e){let t=Ke(),i,r=n+at;t.firstCreatePass?(i=Bw(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=Ci(i.type,!0)),s,a=Rt(X);try{let l=mu(!1),f=o();return mu(l),up(t,ue(),r,f),f}finally{Rt(a)}}function Bw(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Ju(n,e,t,i){let r=n+at,o=ue(),s=lp(o,r);return uC(o,r)?Lw(o,Jl(),e,s.transform,t,i,s):s.transform(t,i)}function Ku(n,e,t,i,r,o){let s=n+at,a=ue(),l=lp(a,s);return uC(a,s)?Vw(a,Jl(),e,l.transform,t,i,r,o,l):l.transform(t,i,r,o)}function uC(n,e){return n[ee].data[e].pure}var Ru=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Jm=(()=>{class n{compileModuleSync(t){return new wu(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=Zf(t),o=Xv(r.declarations).reduce((s,a)=>{let l=bi(a);return l&&s.push(new co(l)),s},[]);return new Ru(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Uw=(()=>{class n{zone=R(nt);changeDetectionScheduler=R(an);applicationRef=R(fi);applicationErrorHandler=R(Gt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cC({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new nt(q(N({},dC()),{scheduleInRootZone:t})),[{provide:nt,useFactory:n},{provide:Di,multi:!0,useFactory:()=>{let i=R(Uw,{optional:!0});return()=>i.initialize()}},{provide:Di,multi:!0,useFactory:()=>{let i=R(Hw);return()=>{i.initialize()}}},e===!0?{provide:Mp,useValue:!0}:[],{provide:nu,useValue:t??r_},{provide:Gt,useFactory:()=>{let i=R(nt),r=R(st),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(sn),o.handleError(s))})}}}]}function dC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Hw=(()=>{class n{subscription=new it;initialized=!1;zone=R(nt);pendingTasks=R(Gn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{nt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Km=(()=>{class n{applicationErrorHandler=R(Gt);appRef=R(fi);taskService=R(Gn);ngZone=R(nt);zonelessEnabled=R(ks);tracing=R(hr,{optional:!0});disableScheduling=R(Mp,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new it;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_u):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(nu,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Hs||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?Ky:o_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_u+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ky(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qm(){return ci("NgZoneless"),tr([{provide:an,useExisting:Km},{provide:nt,useClass:Hs},{provide:ks,useValue:!0},{provide:nu,useValue:!1},[]])}function $w(){return typeof $localize<"u"&&$localize.locale||na}var go=new Z("",{providedIn:"root",factory:()=>R(go,{optional:!0,skipSelf:!0})||$w()}),Zm=new Z("",{providedIn:"root",factory:()=>aw});function ht(n){return Jg(n)}function Y(n,e){return ul(n,e?.equal)}var Xm=class{[bt];constructor(e){this[bt]=e}destroy(){this[bt].destroy()}};function ia(n,e){let t=e?.injector??R(Tt),i=e?.manualCleanup!==!0?t.get(pn):null,r,o=t.get(ro,null,{optional:!0}),s=t.get(an);return o!==null?(r=Ww(o.view,s,n),i instanceof Ds&&i._lView===o.view&&(i=null)):r=zw(n,t.get(Ls),s),r.injector=t,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new Xm(r)}var fC=q(N({},Kg),{cleanupFns:void 0,zone:null,onDestroyFn:lr,run(){let n=io(!1);try{Qg(this)}finally{io(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=oe(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],oe(n)}}}),Gw=q(N({},fC),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Wi(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),qw=q(N({},fC),{consumerMarkedDirty(){this.view[se]|=8192,Mi(this.view),this.notifier.notify(13)},destroy(){Wi(this),this.onDestroyFn(),this.cleanup(),this.view[li]?.delete(this)}});function Ww(n,e,t){let i=Object.create(qw);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=pC(i,t),n[li]??=new Set,n[li].add(i),i.consumerMarkedDirty(i),i}function zw(n,e,t){let i=Object.create(Gw);return i.fn=pC(i,n),i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function pC(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}var hC=Symbol("InputSignalNode#UNSET"),sT=q(N({},cl),{transformFn:void 0,applyValueToInputSignal(n,e){Vr(n,e)}});function gC(n,e){let t=Object.create(sT);t.value=n,t.transformFn=e?.transform;function i(){if(Fr(t),t.value===hC){let r=null;throw new W(-950,r)}return t.value}return i[bt]=t,i}var Zu=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Js(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},aT=new Z("");aT.__NG_ELEMENT_ID__=n=>{let e=ft();if(e===null)throw new W(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new W(204,!1)};function mC(n,e){return gC(n,e)}function lT(n){return gC(hC,n)}var Xu=(mC.required=lT,mC);var eh=new Z(""),uT=new Z("");function ra(n){return!n.moduleRef}function cT(n){let e=ra(n)?n.r3Injector:n.moduleRef.injector,t=e.get(nt);return t.run(()=>{ra(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Gt),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),ra(n)){let o=()=>e.destroy(),s=n.platformInjector.get(eh);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(eh);s.add(o),n.moduleRef.onDestroy(()=>{Bs(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return fT(i,t,()=>{let o=e.get(Gn),s=o.add(),a=e.get(Wm);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(go,na);if(Z_(l||na),!e.get(uT,!0))return ra(n)?e.get(fi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ra(n)){let m=e.get(fi);return n.rootComponent!==void 0&&m.bootstrap(n.rootComponent),m}else return dT?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var dT;function fT(n,e,t){try{let i=t();return Pi(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var Qu=null;function pT(n=[],e){return Tt.create({name:e,providers:[{provide:Ts,useValue:"platform"},{provide:eh,useValue:new Set([()=>Qu=null])},...n]})}function mT(n=[]){if(Qu)return Qu;let e=pT(n);return Qu=e,J_(),hT(e),e}function hT(n){let e=n.get(Pu,null);dt(n,()=>{e?.forEach(t=>t())})}var ki=(()=>{class n{static __NG_ELEMENT_ID__=gT}return n})();function gT(n){return yT(ft(),ue(),(n&16)===16)}function yT(n,e,t){if(Ii(n)&&!t){let i=fn(n.index,e);return new Ni(i,i)}else if(n.type&175){let i=e[Yt];return new Ni(i,e)}return null}function yC(n){let{rootComponent:e,appProviders:t,platformProviders:i,platformRef:r}=n;Re(8);try{let o=r?.injector??mT(i),s=[cC({}),{provide:an,useExisting:Km},By,...t||[]],a=new zs({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return cT({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Re(9)}}function yo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var CC=null;function gn(){return CC}function th(n){CC??=n}var oa=class{},sa=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:()=>R(EC),providedIn:"platform"})}return n})();var EC=(()=>{class n extends sa{_location;_history;_doc=R(pt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gn().getBaseHref(this._doc)}onPopState(t){let i=gn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=gn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ec(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function vC(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Mn(n){return n&&n[0]!=="?"?`?${n}`:n}var zn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:()=>R(nh),providedIn:"root"})}return n})(),tc=new Z(""),nh=(()=>{class n extends zn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??R(pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ec(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Mn(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+Mn(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+Mn(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(ie(sa),ie(tc,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yr=(()=>{class n{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=CT(vC(_C(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Mn(i))}normalize(t){return n.stripTrailingSlash(_T(this._basePath,_C(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mn(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mn(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Mn;static joinWithSlash=ec;static stripTrailingSlash=vC;static \u0275fac=function(i){return new(i||n)(ie(zn))};static \u0275prov=K({token:n,factory:()=>vT(),providedIn:"root"})}return n})();function vT(){return new yr(ie(zn))}function _T(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function _C(n){return n.replace(/\/index.html$/,"")}function CT(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var sh=(()=>{class n extends zn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=ec(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+Mn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+Mn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(ie(sa),ie(tc,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),bC={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},ic=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(ic||{});var en={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function vr(n,e){let t=ta(n),i=t[Fi.NumberSymbols][e];if(typeof i>"u"){if(e===en.CurrencyDecimal)return t[Fi.NumberSymbols][en.Decimal];if(e===en.CurrencyGroup)return t[Fi.NumberSymbols][en.Group]}return i}function ah(n,e){return ta(n)[Fi.NumberFormats][e]}function ET(n){return ta(n)[Fi.Currencies]}function wC(n,e,t="en"){let i=ET(t)[n]||bC[n]||[],r=i[1];return e==="narrow"&&typeof r=="string"?r:i[0]||n}var xT=2;function TC(n){let e,t=bC[n];return t&&(e=t[2]),typeof e=="number"?e:xT}var ST=/^(\d+)?\.((\d+)(-(\d+))?)?$/,xC=22,nc=".",aa="0",DT=";",bT=",",ih="#",SC="\xA4";function IC(n,e,t,i,r,o,s=!1){let a="",l=!1;if(!isFinite(n))a=vr(t,en.Infinity);else{let f=TT(n);s&&(f=wT(f));let m=e.minInt,y=e.minFrac,v=e.maxFrac;if(o){let O=o.match(ST);if(O===null)throw new W(2306,!1);let L=O[1],G=O[3],Q=O[5];L!=null&&(m=rh(L)),G!=null&&(y=rh(G)),Q!=null?v=rh(Q):G!=null&&y>v&&(v=y)}IT(f,y,v);let _=f.digits,E=f.integerLen,b=f.exponent,A=[];for(l=_.every(O=>!O);E<m;E++)_.unshift(0);for(;E<0;E++)_.unshift(0);E>0?A=_.splice(E,_.length):(A=_,_=[0]);let M=[];for(_.length>=e.lgSize&&M.unshift(_.splice(-e.lgSize,_.length).join(""));_.length>e.gSize;)M.unshift(_.splice(-e.gSize,_.length).join(""));_.length&&M.unshift(_.join("")),a=M.join(vr(t,i)),A.length&&(a+=vr(t,r)+A.join("")),b&&(a+=vr(t,en.Exponential)+"+"+b)}return n<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function MC(n,e,t,i,r){let o=ah(e,ic.Currency),s=RC(o,vr(e,en.MinusSign));return s.minFrac=TC(i),s.maxFrac=s.minFrac,IC(n,s,e,en.CurrencyGroup,en.CurrencyDecimal,r).replace(SC,t).replace(SC,"").trim()}function AC(n,e,t){let i=ah(e,ic.Decimal),r=RC(i,vr(e,en.MinusSign));return IC(n,r,e,en.Group,en.Decimal,t)}function RC(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(DT),r=i[0],o=i[1],s=r.indexOf(nc)!==-1?r.split(nc):[r.substring(0,r.lastIndexOf(aa)+1),r.substring(r.lastIndexOf(aa)+1)],a=s[0],l=s[1]||"";t.posPre=a.substring(0,a.indexOf(ih));for(let m=0;m<l.length;m++){let y=l.charAt(m);y===aa?t.minFrac=t.maxFrac=m+1:y===ih?t.maxFrac=m+1:t.posSuf+=y}let f=a.split(bT);if(t.gSize=f[1]?f[1].length:0,t.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let m=r.length-t.posPre.length-t.posSuf.length,y=o.indexOf(ih);t.negPre=o.substring(0,y).replace(/'/g,""),t.negSuf=o.slice(y+m).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function wT(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function TT(n){let e=Math.abs(n)+"",t=0,i,r,o,s,a;for((r=e.indexOf(nc))>-1&&(e=e.replace(nc,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===aa;o++);if(o===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===aa;)a--;for(r-=o,i=[],s=0;o<=a;o++,s++)i[s]=Number(e.charAt(o))}return r>xC&&(i=i.splice(0,xC-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function IT(n,e,t){if(e>t)throw new W(2307,!1);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(e,r),t),s=o+n.integerLen,a=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let y=s;y<i.length;y++)i[y]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let y=1;y<s;y++)i[y]=0}if(a>=5)if(s-1<0){for(let y=0;y>s;y--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let l=o!==0,f=e+n.integerLen,m=i.reduceRight(function(y,v,_,E){return v=v+y,E[_]=v<10?v:v-10,l&&(E[_]===0&&_>=f?E.pop():l=!1),v>=10?1:0},0);m&&(i.unshift(m),n.integerLen++)}function rh(n){let e=parseInt(n);if(isNaN(e))throw new W(2305,!1);return e}var oh=/\s+/,DC=[],lh=(()=>{class n{_ngEl;_renderer;initialClasses=DC;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(oh):DC}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(oh):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(oh).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(X(Pt),X(Tn))};static \u0275dir=Pe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();function NC(n,e){return new W(2100,!1)}var uh=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!PC(t))return null;r||=this._locale;try{let o=FC(t);return AC(o,r,i)}catch(o){throw NC(n,o.message)}}static \u0275fac=function(i){return new(i||n)(X(go,16))};static \u0275pipe=Wu({name:"number",type:n,pure:!0})}return n})();var ch=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,i="USD"){this._locale=t,this._defaultCurrencyCode=i}transform(t,i=this._defaultCurrencyCode,r="symbol",o,s){if(!PC(t))return null;s||=this._locale,typeof r=="boolean"&&(r=r?"symbol":"code");let a=i||this._defaultCurrencyCode;r!=="code"&&(r==="symbol"||r==="symbol-narrow"?a=wC(a,r==="symbol"?"wide":"narrow",s):a=r);try{let l=FC(t);return MC(l,s,a,i,o)}catch(l){throw NC(n,l.message)}}static \u0275fac=function(i){return new(i||n)(X(go,16),X(Zm,16))};static \u0275pipe=Wu({name:"currency",type:n,pure:!0})}return n})();function PC(n){return!(n==null||n===""||n!==n)}function FC(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new W(2309,!1);return n}var ye=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=In({type:n});static \u0275inj=ln({})}return n})();function la(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var _r=class{};var kC="browser";var ua=class{_doc;constructor(e){this._doc=e}manager},rc=(()=>{class n extends ua{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(ie(pt))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),sc=new Z(""),gh=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(s=>{s.manager=this});let r=t.filter(s=>!(s instanceof rc));this._plugins=r.slice().reverse();let o=t.find(s=>s instanceof rc);o&&this._plugins.push(o)}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new W(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(ie(sc),ie(nt))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),fh="ng-app-id";function OC(n){for(let e of n)e.remove()}function LC(n,e){let t=e.createElement("style");return t.textContent=n,t}function RT(n,e,t,i){let r=n.head?.querySelectorAll(`style[${fh}="${e}"],link[${fh}="${e}"]`);if(r)for(let o of r)o.removeAttribute(fh),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function mh(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var yh=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,RT(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,LC);i?.forEach(r=>this.addUsage(r,this.external,mh))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(OC(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])OC(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,LC(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,mh(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(ie(pt),ie(Nu),ie(Fu,8),ie(Ks))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),ph={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},vh=/%COMP%/g;var BC="%COMP%",NT=`_nghost-${BC}`,PT=`_ngcontent-${BC}`,FT=!0,kT=new Z("",{providedIn:"root",factory:()=>FT});function OT(n){return PT.replace(vh,n)}function LT(n){return NT.replace(vh,n)}function UC(n,e){return e.map(t=>t.replace(vh,n))}var _h=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,l=null,f=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new ca(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof oc?r.applyToHost(t):r instanceof da&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,y=this.platformIsServer,v=this.tracingService;switch(i.encapsulation){case ui.Emulated:o=new oc(l,f,i,this.appId,m,s,a,y,v);break;case ui.ShadowDom:return new hh(l,f,t,i,s,a,this.nonce,y,v);default:o=new da(l,f,i,m,s,a,y,v);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(ie(gh),ie(yh),ie(Nu),ie(kT),ie(pt),ie(nt),ie(Fu),ie(hr,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),ca=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(ph[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(VC(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(VC(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new W(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=ph[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=ph[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Wn.DashCase|Wn.Important)?e.style.setProperty(t,i,r&Wn.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Wn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=gn().getGlobalEventTarget(this.doc,e),!e))throw new W(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function VC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hh=class extends ca{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,l,f){super(e,o,s,l,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=r.styles;m=UC(r.id,m);for(let v of m){let _=document.createElement("style");a&&_.setAttribute("nonce",a),_.textContent=v,this.shadowRoot.appendChild(_)}let y=r.getExternalStyles?.();if(y)for(let v of y){let _=mh(v,o);a&&_.setAttribute("nonce",a),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},da=class extends ca{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,l,f){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let m=i.styles;this.styles=f?UC(f,m):m,this.styleUrls=i.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&dr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},oc=class extends da{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,l,f){let m=r+"-"+i.id;super(e,t,i,o,s,a,l,f,m),this.contentAttr=OT(m),this.hostAttr=LT(m)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var ac=class n extends oa{supportsDOMEvents=!0;static makeCurrent(){th(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=VT();return t==null?null:BT(t)}resetBaseElement(){fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return la(document.cookie,e)}},fa=null;function VT(){return fa=fa||document.head.querySelector("base"),fa?fa.getAttribute("href"):null}function BT(n){return new URL(n,document.baseURI).pathname}var UT=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),HC=["alt","control","meta","shift"],HT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$T={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},$C=(()=>{class n extends ua{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),HC.forEach(f=>{let m=i.indexOf(f);m>-1&&(i.splice(m,1),s+=f+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=HT[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),HC.forEach(s=>{if(s!==r){let a=$T[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(ie(pt))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function Ch(n,e,t){let i=N({rootComponent:n,platformRef:t?.platformRef},GT(e));return yC(i)}function GT(n){return{appProviders:[...YT,...n?.providers??[]],platformProviders:jT}}function qT(){ac.makeCurrent()}function WT(){return new sn}function zT(){return Cm(document),document}var jT=[{provide:Ks,useValue:kC},{provide:Pu,useValue:qT,multi:!0},{provide:pt,useFactory:zT}];var YT=[{provide:Ts,useValue:"root"},{provide:sn,useFactory:WT},{provide:sc,useClass:rc,multi:!0,deps:[pt]},{provide:sc,useClass:$C,multi:!0,deps:[pt]},_h,yh,gh,{provide:fr,useExisting:_h},{provide:_r,useClass:UT},[]];var _o=class{},ha=class{},Cr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var uc=class{encodeKey(e){return GC(e)}encodeValue(e){return GC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function JT(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var KT=/%(\d[a-f0-9])/gi,QT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GC(n){return encodeURIComponent(n).replace(KT,(e,t)=>QT[t]??e)}function lc(n){return`${n}`}var Oi=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new uc,e.fromString){if(e.fromObject)throw new W(2805,!1);this.map=JT(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(lc):[lc(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(lc(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(lc(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var cc=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function ZT(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function qC(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function WC(n){return typeof Blob<"u"&&n instanceof Blob}function zC(n){return typeof FormData<"u"&&n instanceof FormData}function XT(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var jC="Content-Type",YC="Accept",JC="X-Request-URL",KC="text/plain",QC="application/json",eI=`${QC}, ${KC}, */*`,pa=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(ZT(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new W(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Cr,this.context??=new cc,!this.params)this.params=new Oi,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||qC(this.body)||WC(this.body)||zC(this.body)||XT(this.body)?this.body:this.body instanceof Oi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||zC(this.body)?null:WC(this.body)?this.body.type||null:qC(this.body)?null:typeof this.body=="string"?KC:this.body instanceof Oi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?QC:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,l=e.mode||this.mode,f=e.redirect||this.redirect,m=e.credentials||this.credentials,y=e.referrer||this.referrer,v=e.integrity||this.integrity,_=e.transferCache??this.transferCache,E=e.timeout??this.timeout,b=e.body!==void 0?e.body:this.body,A=e.withCredentials??this.withCredentials,M=e.reportProgress??this.reportProgress,O=e.headers||this.headers,L=e.params||this.params,G=e.context??this.context;return e.setHeaders!==void 0&&(O=Object.keys(e.setHeaders).reduce((Q,re)=>Q.set(re,e.setHeaders[re]),O)),e.setParams&&(L=Object.keys(e.setParams).reduce((Q,re)=>Q.set(re,e.setParams[re]),L)),new n(t,i,b,{params:L,headers:O,context:G,reportProgress:M,responseType:r,withCredentials:A,transferCache:_,keepalive:o,cache:a,priority:s,timeout:E,mode:l,redirect:f,credentials:m,referrer:y,integrity:v})}},vo=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(vo||{}),Co=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,i="OK"){this.headers=e.headers||new Cr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},dc=class n extends Co{constructor(e={}){super(e)}type=vo.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},fc=class n extends Co{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=vo.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},ma=class extends Co{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},tI=200,nI=204;function Eh(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var iI=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof pa)o=t;else{let l;r.headers instanceof Cr?l=r.headers:l=new Cr(r.headers);let f;r.params&&(r.params instanceof Oi?f=r.params:f=new Oi({fromObject:r.params})),o=new pa(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:f,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,integrity:r.integrity,timeout:r.timeout})}let s=ne(o).pipe(ti(l=>this.handler.handle(l)));if(t instanceof pa||r.observe==="events")return s;let a=s.pipe(ut(l=>l instanceof fc));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(le(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new W(2806,!1);return l.body}));case"blob":return a.pipe(le(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new W(2807,!1);return l.body}));case"text":return a.pipe(le(l=>{if(l.body!==null&&typeof l.body!="string")throw new W(2808,!1);return l.body}));case"json":default:return a.pipe(le(l=>l.body))}case"response":return a;default:throw new W(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Oi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Eh(r,i))}post(t,i,r={}){return this.request("POST",t,Eh(r,i))}put(t,i,r={}){return this.request("PUT",t,Eh(r,i))}static \u0275fac=function(i){return new(i||n)(ie(_o))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var rI=new Z("");function oI(n,e){return e(n)}function sI(n,e,t){return(i,r)=>dt(t,()=>e(i,o=>n(o,r)))}var ZC=new Z(""),aI=new Z(""),XC=new Z("",{providedIn:"root",factory:()=>!0});var pc=(()=>{class n extends _o{backend;injector;chain=null;pendingTasks=R(Os);contributeToStability=R(XC);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(ZC),...this.injector.get(aI,[])]));this.chain=i.reduceRight((r,o)=>sI(r,o,this.injector),oI)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Ji(i))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(ie(ha),ie(st))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var lI=/^\)\]\}',?\n/,uI=RegExp(`^${JC}:`,"m");function cI(n){return"responseURL"in n&&n.responseURL?n.responseURL:uI.test(n.getAllResponseHeaders())?n.getResponseHeader(JC):null}var xh=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new W(-2800,!1);let i=this.xhrFactory;return ne(null).pipe(wt(()=>new Ce(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((A,M)=>s.setRequestHeader(A,M.join(","))),t.headers.has(YC)||s.setRequestHeader(YC,eI),!t.headers.has(jC)){let A=t.detectContentTypeHeader();A!==null&&s.setRequestHeader(jC,A)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let A=t.responseType.toLowerCase();s.responseType=A!=="json"?A:"text"}let a=t.serializeBody(),l=null,f=()=>{if(l!==null)return l;let A=s.statusText||"OK",M=new Cr(s.getAllResponseHeaders()),O=cI(s)||t.url;return l=new dc({headers:M,status:s.status,statusText:A,url:O}),l},m=()=>{let{headers:A,status:M,statusText:O,url:L}=f(),G=null;M!==nI&&(G=typeof s.response>"u"?s.responseText:s.response),M===0&&(M=G?tI:0);let Q=M>=200&&M<300;if(t.responseType==="json"&&typeof G=="string"){let re=G;G=G.replace(lI,"");try{G=G!==""?JSON.parse(G):null}catch(te){G=re,Q&&(Q=!1,G={error:te,text:G})}}Q?(o.next(new fc({body:G,headers:A,status:M,statusText:O,url:L||void 0})),o.complete()):o.error(new ma({error:G,headers:A,status:M,statusText:O,url:L||void 0}))},y=A=>{let{url:M}=f(),O=new ma({error:A,status:s.status||0,statusText:s.statusText||"Unknown Error",url:M||void 0});o.error(O)},v=y;t.timeout&&(v=A=>{let{url:M}=f(),O=new ma({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:M||void 0});o.error(O)});let _=!1,E=A=>{_||(o.next(f()),_=!0);let M={type:vo.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(M.total=A.total),t.responseType==="text"&&s.responseText&&(M.partialText=s.responseText),o.next(M)},b=A=>{let M={type:vo.UploadProgress,loaded:A.loaded};A.lengthComputable&&(M.total=A.total),o.next(M)};return s.addEventListener("load",m),s.addEventListener("error",y),s.addEventListener("timeout",v),s.addEventListener("abort",y),t.reportProgress&&(s.addEventListener("progress",E),a!==null&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:vo.Sent}),()=>{s.removeEventListener("error",y),s.removeEventListener("abort",y),s.removeEventListener("load",m),s.removeEventListener("timeout",v),t.reportProgress&&(s.removeEventListener("progress",E),a!==null&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(ie(_r))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),eE=new Z(""),dI="XSRF-TOKEN",fI=new Z("",{providedIn:"root",factory:()=>dI}),pI="X-XSRF-TOKEN",mI=new Z("",{providedIn:"root",factory:()=>pI}),ga=class{},hI=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i){this.doc=t,this.cookieName=i}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=la(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(ie(pt),ie(fI))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),gI=/^(?:https?:)?\/\//i;function yI(n,e){if(!R(eE)||n.method==="GET"||n.method==="HEAD"||gI.test(n.url))return e(n);let t=R(ga).getToken(),i=R(mI);return t!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,t)})),e(n)}function Sh(...n){let e=[iI,xh,pc,{provide:_o,useExisting:pc},{provide:ha,useFactory:()=>R(rI,{optional:!0})??R(xh)},{provide:ZC,useValue:yI,multi:!0},{provide:eE,useValue:!0},{provide:ga,useClass:hI}];for(let t of n)e.push(...t.\u0275providers);return tr(e)}var tE=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(ie(pt))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var he="primary",Ra=Symbol("RouteTitle"),Ih=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Sr(n){return new Ih(n)}function uE(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function _I(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jn(n[t],e[t]))return!1;return!0}function jn(n,e){let t=n?Mh(n):void 0,i=e?Mh(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!cE(n[r],e[r]))return!1;return!0}function Mh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function cE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function dE(n){return n.length>0?n[n.length-1]:null}function mi(n){return bf(n)?n:Pi(n)?We(Promise.resolve(n)):ne(n)}var CI={exact:pE,subset:mE},fE={exact:EI,subset:xI,ignored:()=>!0};function nE(n,e,t){return CI[t.paths](n.root,e.root,t.matrixParams)&&fE[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function EI(n,e){return jn(n,e)}function pE(n,e,t){if(!Er(n.segments,e.segments)||!gc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!pE(n.children[i],e.children[i],t))return!1;return!0}function xI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cE(n[t],e[t]))}function mE(n,e,t){return hE(n,e,e.segments,t)}function hE(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Er(r,t)||e.hasChildren()||!gc(r,t,i))}else if(n.segments.length===t.length){if(!Er(n.segments,t)||!gc(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!mE(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Er(n.segments,r)||!gc(n.segments,r,i)||!n.children[he]?!1:hE(n.children[he],e,o,i)}}function gc(n,e,t){return e.every((i,r)=>fE[t](n[r].parameters,i.parameters))}var Jn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Me([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Sr(this.queryParams),this._queryParamMap}toString(){return bI.serialize(this)}},Me=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yc(this)}},Li=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Sr(this.parameters),this._parameterMap}toString(){return yE(this)}};function SI(n,e){return Er(n,e)&&n.every((t,i)=>jn(t.parameters,e[i].parameters))}function Er(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function DI(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===he&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==he&&(t=t.concat(e(r,i)))}),t}var Na=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:()=>new Dr,providedIn:"root"})}return n})(),Dr=class{parse(e){let t=new Rh(e);return new Jn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ya(e.root,!0)}`,i=II(e.queryParams),r=typeof e.fragment=="string"?`#${wI(e.fragment)}`:"";return`${t}${i}${r}`}},bI=new Dr;function yc(n){return n.segments.map(e=>yE(e)).join("/")}function ya(n,e){if(!n.hasChildren())return yc(n);if(e){let t=n.children[he]?ya(n.children[he],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==he&&i.push(`${r}:${ya(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=DI(n,(i,r)=>r===he?[ya(n.children[he],!1)]:[`${r}:${ya(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${yc(n)}/${t[0]}`:`${yc(n)}/(${t.join("//")})`}}function gE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mc(n){return gE(n).replace(/%3B/gi,";")}function wI(n){return encodeURI(n)}function Ah(n){return gE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vc(n){return decodeURIComponent(n)}function iE(n){return vc(n.replace(/\+/g,"%20"))}function yE(n){return`${Ah(n.path)}${TI(n.parameters)}`}function TI(n){return Object.entries(n).map(([e,t])=>`;${Ah(e)}=${Ah(t)}`).join("")}function II(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${mc(t)}=${mc(r)}`).join("&"):`${mc(t)}=${mc(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var MI=/^[^\/()?;#]+/;function Dh(n){let e=n.match(MI);return e?e[0]:""}var AI=/^[^\/()?;=#]+/;function RI(n){let e=n.match(AI);return e?e[0]:""}var NI=/^[^=?&#]+/;function PI(n){let e=n.match(NI);return e?e[0]:""}var FI=/^[^&#]+/;function kI(n){let e=n.match(FI);return e?e[0]:""}var Rh=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[he]=new Me(e,t)),i}parseSegment(){let e=Dh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new Li(vc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=RI(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Dh(this.remaining);r&&(i=r,this.capture(i))}e[vc(t)]=vc(i)}parseQueryParam(e){let t=PI(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=kI(this.remaining);s&&(i=s,this.capture(i))}let r=iE(t),o=iE(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Dh(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new W(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=he);let s=this.parseChildren();t[o??he]=Object.keys(s).length===1&&s[he]?s[he]:new Me([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function vE(n){return n.segments.length>0?new Me([],{[he]:n}):n}function _E(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=_E(r);if(i===he&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Me(n.segments,e);return OI(t)}function OI(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new Me(n.segments.concat(e.segments),e.children)}return n}function Vi(n){return n instanceof Jn}function CE(n,e,t=null,i=null){let r=EE(n);return xE(r,e,t,i)}function EE(n){let e;function t(o){let s={};for(let l of o.children){let f=t(l);s[l.outlet]=f}let a=new Me(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=vE(i);return e??r}function xE(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return bh(r,r,r,t,i);let o=LI(e);if(o.toRoot())return bh(r,r,new Me([],{}),t,i);let s=VI(o,r,n),a=s.processChildren?_a(s.segmentGroup,s.index,o.commands):DE(s.segmentGroup,s.index,o.commands);return bh(r,s.segmentGroup,a,t,i)}function _c(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function xa(n){return typeof n=="object"&&n!=null&&n.outlets}function bh(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,f])=>{o[l]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let s;n===e?s=t:s=SE(n,e,t);let a=vE(_E(s));return new Jn(a,o,r)}function SE(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=SE(o,e,t)}),new Me(n.segments,i)}var Cc=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&_c(i[0]))throw new W(4003,!1);let r=i.find(xa);if(r&&r!==dE(i))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function LI(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Cc(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,f])=>{a[l]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Cc(t,e,i)}var So=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function VI(n,e,t){if(n.isAbsolute)return new So(e,!0,0);if(!t)return new So(e,!1,NaN);if(t.parent===null)return new So(t,!0,0);let i=_c(n.commands[0])?0:1,r=t.segments.length-1+i;return BI(t,r,n.numberOfDoubleDots)}function BI(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new W(4005,!1);r=i.segments.length}return new So(i,!1,r-o)}function UI(n){return xa(n[0])?n[0].outlets:{[he]:n}}function DE(n,e,t){if(n??=new Me([],{}),n.segments.length===0&&n.hasChildren())return _a(n,e,t);let i=HI(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Me(n.segments.slice(0,i.pathIndex),{});return o.children[he]=new Me(n.segments.slice(i.pathIndex),n.children),_a(o,0,r)}else return i.match&&r.length===0?new Me(n.segments,{}):i.match&&!n.hasChildren()?Nh(n,e,t):i.match?_a(n,0,r):Nh(n,e,t)}function _a(n,e,t){if(t.length===0)return new Me(n.segments,{});{let i=UI(t),r={};if(Object.keys(i).some(o=>o!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let o=_a(n.children[he],e,t);return new Me(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=DE(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Me(n.segments,r)}}function HI(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(xa(a))break;let l=`${a}`,f=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&f&&typeof f=="object"&&f.outlets===void 0){if(!oE(l,f,s))return o;i+=2}else{if(!oE(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Nh(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(xa(o)){let l=$I(o.outlets);return new Me(i,l)}if(r===0&&_c(t[0])){let l=n.segments[e];i.push(new Li(l.path,rE(t[0]))),r++;continue}let s=xa(o)?o.outlets[he]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&_c(a)?(i.push(new Li(s,rE(a))),r+=2):(i.push(new Li(s,{})),r++)}return new Me(i,{})}function $I(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Nh(new Me([],{}),0,i))}),e}function rE(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function oE(n,e,t){return n==t.path&&jn(e,t.parameters)}var Ca="imperative",Ct=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ct||{}),nn=class{id;url;constructor(e,t){this.id=e,this.url=t}},br=class extends nn{type=Ct.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},rn=class extends nn{urlAfterRedirects;type=Ct.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Lt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Lt||{}),Sa=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Sa||{}),Yn=class extends nn{reason;code;type=Ct.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pi=class extends nn{reason;code;type=Ct.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},bo=class extends nn{error;target;type=Ct.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Da=class extends nn{urlAfterRedirects;state;type=Ct.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ec=class extends nn{urlAfterRedirects;state;type=Ct.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xc=class extends nn{urlAfterRedirects;state;shouldActivate;type=Ct.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sc=class extends nn{urlAfterRedirects;state;type=Ct.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dc=class extends nn{urlAfterRedirects;state;type=Ct.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bc=class{route;type=Ct.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wc=class{route;type=Ct.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Tc=class{snapshot;type=Ct.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ic=class{snapshot;type=Ct.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mc=class{snapshot;type=Ct.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ac=class{snapshot;type=Ct.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ba=class{},wo=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function GI(n){return!(n instanceof ba)&&!(n instanceof wo)}function qI(n,e){return n.providers&&!n._injector&&(n._injector=Xs(n.providers,e,`Route: ${n.path}`)),n._injector??e}function An(n){return n.outlet||he}function WI(n,e){let t=n.filter(i=>An(i)===e);return t.push(...n.filter(i=>An(i)!==e)),t}function Mo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Rc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Mo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ao(this.rootInjector)}},Ao=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Rc(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(ie(st))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nc=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ph(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Ph(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Fh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Fh(e,this._root).map(t=>t.value)}};function Ph(n,e){if(n===e.value)return e;for(let t of e.children){let i=Ph(n,t);if(i)return i}return null}function Fh(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Fh(n,t);if(i.length)return i.unshift(e),i}return[]}var tn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function xo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var wa=class extends Nc{snapshot;constructor(e,t){super(e),this.snapshot=t,$h(this,e)}toString(){return this.snapshot.toString()}};function bE(n){let e=zI(n),t=new Et([new Li("",{})]),i=new Et({}),r=new Et({}),o=new Et({}),s=new Et(""),a=new Vt(t,i,o,s,r,he,n,e.root);return a.snapshot=e.root,new wa(new tn(a,[]),e)}function zI(n){let e={},t={},i={},o=new xr([],e,i,"",t,he,n,null,{});return new Ta("",new tn(o,[]))}var Vt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(le(f=>f[Ra]))??ne(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Sr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Sr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pc(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),r?.data),n._resolvedData)}:i={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},r&&TE(r)&&(i.resolve[Ra]=r.title),i}var xr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ra]}constructor(e,t,i,r,o,s,a,l,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ta=class extends Nc{url;constructor(e,t){super(t),this.url=e,$h(this,t)}toString(){return wE(this._root)}};function $h(n,e){e.value._routerState=n,e.children.forEach(t=>$h(n,t))}function wE(n){let e=n.children.length>0?` { ${n.children.map(wE).join(", ")} } `:"";return`${n.value}${e}`}function wh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),jn(e.params,t.params)||n.paramsSubject.next(t.params),_I(e.url,t.url)||n.urlSubject.next(t.url),jn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function kh(n,e){let t=jn(n.params,e.params)&&SI(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||kh(n.parent,e.parent))}function TE(n){return typeof n.title=="string"||n.title===null}var IE=new Z(""),Pa=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=he;activateEvents=new ze;deactivateEvents=new ze;attachEvents=new ze;detachEvents=new ze;routerOutletData=Xu();parentContexts=R(Ao);location=R(gr);changeDetector=R(ki);inputBinder=R(Lc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Oh(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Pe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[bn]})}return n})(),Oh=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===Vt?this.route:e===Ao?this.childContexts:e===IE?this.outletData:this.parent.get(e,t)}},Lc=new Z("");var Gh=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ae({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&x(0,"router-outlet")},dependencies:[Pa],encapsulation:2})}return n})();function qh(n){let e=n.children&&n.children.map(qh),t=e?q(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=Gh),t}function jI(n,e,t){let i=Ia(n,e._root,t?t._root:void 0);return new wa(i,e)}function Ia(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=YI(n,e,t);return new tn(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ia(n,a)),s}}let i=JI(e.value),r=e.children.map(o=>Ia(n,o));return new tn(i,r)}}function YI(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ia(n,i,r);return Ia(n,i)})}function JI(n){return new Vt(new Et(n.url),new Et(n.params),new Et(n.queryParams),new Et(n.fragment),new Et(n.data),n.outlet,n.component,n)}var To=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ME="ngNavigationCancelingError";function Fc(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Vi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=AE(!1,Lt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function AE(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ME]=!0,t.cancellationCode=e,t}function KI(n){return RE(n)&&Vi(n.url)}function RE(n){return!!n&&n[ME]}var QI=(n,e,t,i)=>le(r=>(new Lh(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Lh=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),wh(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=xo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=xo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=xo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=xo(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Ac(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ic(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(wh(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),wh(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},kc=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Do=class{component;route;constructor(e,t){this.component=e,this.route=t}};function ZI(n,e,t){let i=n._root,r=e?e._root:null;return va(i,r,t,[i.value])}function XI(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ro(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Hf(n)?n:e.get(n):i}function va(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=xo(e);return n.children.forEach(s=>{eM(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ea(a,t.getContext(s),r)),r}function eM(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=tM(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new kc(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?va(n,e,a?a.children:null,i,r):va(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Do(a.outlet.component,s))}else s&&Ea(e,a,r),r.canActivateChecks.push(new kc(i)),o.component?va(n,null,a?a.children:null,i,r):va(n,null,t,i,r);return r}function tM(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Er(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Er(n.url,e.url)||!jn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kh(n,e)||!jn(n.queryParams,e.queryParams);case"paramsChange":default:return!kh(n,e)}}function Ea(n,e,t){let i=xo(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Ea(s,e.children.getContext(o),t):Ea(s,null,t):Ea(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Do(e.outlet.component,r)):t.canDeactivateChecks.push(new Do(null,r)):t.canDeactivateChecks.push(new Do(null,r))}function Fa(n){return typeof n=="function"}function nM(n){return typeof n=="boolean"}function iM(n){return n&&Fa(n.canLoad)}function rM(n){return n&&Fa(n.canActivate)}function oM(n){return n&&Fa(n.canActivateChild)}function sM(n){return n&&Fa(n.canDeactivate)}function aM(n){return n&&Fa(n.canMatch)}function NE(n){return n instanceof Xn||n?.name==="EmptyError"}var hc=Symbol("INITIAL_VALUE");function Io(){return wt(n=>Nl(n.map(e=>e.pipe(ni(1),Mf(hc)))).pipe(le(e=>{for(let t of e)if(t!==!0){if(t===hc)return hc;if(t===!1||lM(t))return t}return!0}),ut(e=>e!==hc),ni(1)))}function lM(n){return Vi(n)||n instanceof To}function uM(n,e){return ot(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ne(q(N({},t),{guardsResult:!0})):cM(s,i,r,n).pipe(ot(a=>a&&nM(a)?dM(i,o,n,e):ne(a)),le(a=>q(N({},t),{guardsResult:a})))})}function cM(n,e,t,i){return We(n).pipe(ot(r=>gM(r.component,r.route,t,e,i)),ii(r=>r!==!0,!0))}function dM(n,e,t,i){return We(e).pipe(ti(r=>Yr(pM(r.route.parent,i),fM(r.route,i),hM(n,r.path,t),mM(n,r.route,t))),ii(r=>r!==!0,!0))}function fM(n,e){return n!==null&&e&&e(new Mc(n)),ne(!0)}function pM(n,e){return n!==null&&e&&e(new Tc(n)),ne(!0)}function mM(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ne(!0);let r=i.map(o=>Cs(()=>{let s=Mo(e)??t,a=Ro(o,s),l=rM(a)?a.canActivate(e,n):dt(s,()=>a(e,n));return mi(l).pipe(ii())}));return ne(r).pipe(Io())}function hM(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>XI(s)).filter(s=>s!==null).map(s=>Cs(()=>{let a=s.guards.map(l=>{let f=Mo(s.node)??t,m=Ro(l,f),y=oM(m)?m.canActivateChild(i,n):dt(f,()=>m(i,n));return mi(y).pipe(ii())});return ne(a).pipe(Io())}));return ne(o).pipe(Io())}function gM(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ne(!0);let s=o.map(a=>{let l=Mo(e)??r,f=Ro(a,l),m=sM(f)?f.canDeactivate(n,e,t,i):dt(l,()=>f(n,e,t,i));return mi(m).pipe(ii())});return ne(s).pipe(Io())}function yM(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return ne(!0);let o=r.map(s=>{let a=Ro(s,n),l=iM(a)?a.canLoad(e,t):dt(n,()=>a(e,t));return mi(l)});return ne(o).pipe(Io(),PE(i))}function PE(n){return Ef(Ue(e=>{if(typeof e!="boolean")throw Fc(n,e)}),le(e=>e===!0))}function vM(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return ne(!0);let o=r.map(s=>{let a=Ro(s,n),l=aM(a)?a.canMatch(e,t):dt(n,()=>a(e,t));return mi(l)});return ne(o).pipe(Io(),PE(i))}var Ma=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Aa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Eo(n){return zr(new Ma(n))}function _M(n){return zr(new W(4e3,!1))}function CM(n){return zr(AE(!1,Lt.GuardRejected))}var Vh=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ne(i);if(r.numberOfChildren>1||!r.children[he])return _M(`${e.redirectTo}`);r=r.children[he]}}applyRedirectCommands(e,t,i,r,o){return EM(t,r,o).pipe(le(s=>{if(s instanceof Jn)throw new Aa(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,i);if(s[0]==="/")throw new Aa(a);return a}))}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new Jn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new Me(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new W(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}};function EM(n,e,t){if(typeof n=="string")return ne(n);let i=n,{queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,params:f,data:m,title:y}=e;return mi(dt(t,()=>i({params:f,data:m,queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,title:y})))}var Bh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xM(n,e,t,i,r){let o=FE(n,e,t);return o.matched?(i=qI(e,i),vM(i,e,t,r).pipe(le(s=>s===!0?o:N({},Bh)))):ne(o)}function FE(n,e,t){if(e.path==="**")return SM(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},Bh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||uE)(t,n,e);if(!r)return N({},Bh);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?N(N({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function SM(n){return{matched:!0,parameters:n.length>0?dE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function sE(n,e,t,i){return t.length>0&&wM(n,t,i)?{segmentGroup:new Me(e,bM(i,new Me(t,n.children))),slicedSegments:[]}:t.length===0&&TM(n,t,i)?{segmentGroup:new Me(n.segments,DM(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Me(n.segments,n.children),slicedSegments:t}}function DM(n,e,t,i){let r={};for(let o of t)if(Vc(n,e,o)&&!i[An(o)]){let s=new Me([],{});r[An(o)]=s}return N(N({},i),r)}function bM(n,e){let t={};t[he]=e;for(let i of n)if(i.path===""&&An(i)!==he){let r=new Me([],{});t[An(i)]=r}return t}function wM(n,e,t){return t.some(i=>Vc(n,e,i)&&An(i)!==he)}function TM(n,e,t){return t.some(i=>Vc(n,e,i))}function Vc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function IM(n,e,t){return e.length===0&&!n.children[t]}var Uh=class{};function MM(n,e,t,i,r,o,s="emptyOnly"){return new Hh(n,e,t,i,r,s,o).recognize()}var AM=31,Hh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Vh(this.urlSerializer,this.urlTree)}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=sE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(({children:t,rootSnapshot:i})=>{let r=new tn(i,t),o=new Ta("",r),s=CE(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new xr([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,t).pipe(le(i=>({children:i,rootSnapshot:t})),ei(i=>{if(i instanceof Aa)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ma?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(le(s=>s instanceof tn?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return We(o).pipe(ti(s=>{let a=i.children[s],l=WI(t,s);return this.processSegmentGroup(e,l,a,s,r)}),If((s,a)=>(s.push(...a),s)),_i(null),Tf(),ot(s=>{if(s===null)return Eo(i);let a=kE(s);return RM(a),ne(a)}))}processSegment(e,t,i,r,o,s,a){return We(t).pipe(ti(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,o,s,a).pipe(ei(f=>{if(f instanceof Ma)return ne(null);throw f}))),ii(l=>!!l),ei(l=>{if(NE(l))return IM(i,r,o)?ne(new Uh):Eo(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,l){return An(i)!==s&&(s===he||!Vc(r,o,i))?Eo(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,l):Eo(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:l,parameters:f,consumedSegments:m,positionalParamSegments:y,remainingSegments:v}=FE(t,r,o);if(!l)return Eo(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AM&&(this.allowRedirects=!1));let _=new xr(o,f,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,aE(r),An(r),r.component??r._loadedComponent??null,r,lE(r)),E=Pc(_,a,this.paramsInheritanceStrategy);return _.params=Object.freeze(E.params),_.data=Object.freeze(E.data),this.applyRedirects.applyRedirectCommands(m,r.redirectTo,y,_,e).pipe(wt(A=>this.applyRedirects.lineralizeSegments(r,A)),ot(A=>this.processSegment(e,i,t,A.concat(v),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=xM(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(wt(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(wt(({routes:f})=>{let m=i._loadedInjector??e,{parameters:y,consumedSegments:v,remainingSegments:_}=l,E=new xr(v,y,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,aE(i),An(i),i.component??i._loadedComponent??null,i,lE(i)),b=Pc(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(b.params),E.data=Object.freeze(b.data);let{segmentGroup:A,slicedSegments:M}=sE(t,v,_,f);if(M.length===0&&A.hasChildren())return this.processChildren(m,f,A,E).pipe(le(L=>new tn(E,L)));if(f.length===0&&M.length===0)return ne(new tn(E,[]));let O=An(i)===o;return this.processSegment(m,f,A,M,O?he:o,!0,E).pipe(le(L=>new tn(E,L instanceof tn?[L]:[])))}))):Eo(t)))}getChildConfig(e,t,i){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):yM(e,t,i,this.urlSerializer).pipe(ot(r=>r?this.configLoader.loadChildren(e,t).pipe(Ue(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):CM(t))):ne({routes:[],injector:e})}};function RM(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function NM(n){let e=n.value.routeConfig;return e&&e.path===""}function kE(n){let e=[],t=new Set;for(let i of n){if(!NM(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=kE(i.children);e.push(new tn(i.value,r))}return e.filter(i=>!t.has(i))}function aE(n){return n.data||{}}function lE(n){return n.resolve||{}}function PM(n,e,t,i,r,o){return ot(s=>MM(n,e,t,i,s.extractedUrl,r,o).pipe(le(({state:a,tree:l})=>q(N({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function FM(n,e){return ot(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ne(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let f of OE(l))s.add(f);let a=0;return We(s).pipe(ti(l=>o.has(l)?kM(l,i,n,e):(l.data=Pc(l,l.parent,n).resolve,ne(void 0))),Ue(()=>a++),Jr(1),ot(l=>a===s.size?ne(t):Ht))})}function OE(n){let e=n.children.map(t=>OE(t)).flat();return[n,...e]}function kM(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!TE(r)&&(o[Ra]=r.title),Cs(()=>(n.data=Pc(n,n.parent,t).resolve,OM(o,n,e,i).pipe(le(s=>(n._resolvedData=s,n.data=N(N({},n.data),s),null)))))}function OM(n,e,t,i){let r=Mh(n);if(r.length===0)return ne({});let o={};return We(r).pipe(ot(s=>LM(n[s],e,t,i).pipe(ii(),Ue(a=>{if(a instanceof To)throw Fc(new Dr,a);o[s]=a}))),Jr(1),le(()=>o),ei(s=>NE(s)?Ht:zr(s)))}function LM(n,e,t,i){let r=Mo(e)??i,o=Ro(n,r),s=o.resolve?o.resolve(e,t):dt(r,()=>o(e,t));return mi(s)}function Th(n){return wt(e=>{let t=n(e);return t?We(t).pipe(le(()=>e)):ne(e)})}var Wh=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===he);return i}getResolvedTitleForRoute(t){return t.data[Ra]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:()=>R(LE),providedIn:"root"})}return n})(),LE=(()=>{class n extends Wh{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(ie(tE))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),No=new Z("",{providedIn:"root",factory:()=>({})}),ka=new Z(""),VE=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(Jm);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ne(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=mi(dt(t,()=>i.loadComponent())).pipe(le(UE),wt(HE),Ue(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Ji(()=>{this.componentLoaders.delete(i)})),o=new Wr(r,()=>new et).pipe(qr());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ne({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=BE(i,this.compiler,t,this.onLoadEndListener).pipe(Ji(()=>{this.childrenLoaders.delete(i)})),s=new Wr(o,()=>new et).pipe(qr());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BE(n,e,t,i){return mi(dt(t,()=>n.loadChildren())).pipe(le(UE),wt(HE),ot(r=>r instanceof qu||Array.isArray(r)?ne(r):We(e.compileModuleAsync(r))),le(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(ka,[],{optional:!0,self:!0}).flat()),{routes:s.map(qh),injector:o}}))}function VM(n){return n&&typeof n=="object"&&"default"in n}function UE(n){return VM(n)?n.default:n}function HE(n){return ne(n)}var Bc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:()=>R(BM),providedIn:"root"})}return n})(),BM=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$E=new Z("");var GE=new Z(""),qE=(()=>{class n{currentNavigation=w(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new et;transitionAbortWithErrorSubject=new et;configLoader=R(VE);environmentInjector=R(st);destroyRef=R(pn);urlSerializer=R(Na);rootContexts=R(Ao);location=R(yr);inputBindingEnabled=R(Lc,{optional:!0})!==null;titleStrategy=R(Wh);options=R(No,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(Bc);createViewTransition=R($E,{optional:!0});navigationErrorHandler=R(GE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ne(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new bc(r)),i=r=>this.events.next(new wc(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;ht(()=>{this.transitions?.next(q(N({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(t){return this.transitions=new Et(null),this.transitions.pipe(ut(i=>i!==null),wt(i=>{let r=!1;return ne(i).pipe(wt(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Lt.SupersededByNewNavigation),Ht;this.currentTransition=i,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?q(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new pi(o.id,this.urlSerializer.serialize(o.rawUrl),"",Sa.IgnoredSameUrlNavigation)),o.resolve(!1),Ht;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ne(o).pipe(wt(l=>(this.events.next(new br(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Ht:Promise.resolve(l))),PM(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ue(l=>{i.targetSnapshot=l.targetSnapshot,i.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=l.urlAfterRedirects,m));let f=new Da(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:f,source:m,restoredState:y,extras:v}=o,_=new br(l,this.urlSerializer.serialize(f),m,y);this.events.next(_);let E=bE(this.rootComponentType).snapshot;return this.currentTransition=i=q(N({},o),{targetSnapshot:E,urlAfterRedirects:f,extras:q(N({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(b=>(b.finalUrl=f,b)),ne(i)}else return this.events.next(new pi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Sa.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ht}),Ue(o=>{let s=new Ec(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),le(o=>(this.currentTransition=i=q(N({},o),{guards:ZI(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),uM(this.environmentInjector,o=>this.events.next(o)),Ue(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Fc(this.urlSerializer,o.guardsResult);let s=new xc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ut(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Lt.GuardRejected),!1)),Th(o=>{if(o.guards.canActivateChecks.length!==0)return ne(o).pipe(Ue(s=>{let a=new Sc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),wt(s=>{let a=!1;return ne(s).pipe(FM(this.paramsInheritanceStrategy,this.environmentInjector),Ue({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Lt.NoDataFromResolver)}}))}),Ue(s=>{let a=new Dc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Th(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let f=Mo(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(f,a.routeConfig).pipe(Ue(m=>{a.component=m}),le(()=>{})))}for(let f of a.children)l.push(...s(f));return l};return Nl(s(o.targetSnapshot.root)).pipe(_i(null),ni(1))}),Th(()=>this.afterPreactivation()),wt(()=>{let{currentSnapshot:o,targetSnapshot:s}=i,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?We(a).pipe(le(()=>i)):ne(i)}),le(o=>{let s=jI(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=q(N({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),i}),Ue(()=>{this.events.next(new ba)}),QI(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ni(1),Fl(new Ce(o=>{let s=i.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ut(()=>!r&&!i.targetRouterState),Ue(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Lt.Aborted)}))),Ue({next:o=>{r=!0,this.lastSuccessfulNavigation=ht(this.currentNavigation),this.events.next(new rn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Fl(this.transitionAbortWithErrorSubject.pipe(Ue(o=>{throw o}))),Ji(()=>{r||this.cancelNavigationTransition(i,"",Lt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ei(o=>{if(this.destroyed)return i.resolve(!1),Ht;if(r=!0,RE(o))this.events.next(new Yn(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),KI(o)?this.events.next(new wo(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let s=new bo(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let a=dt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof To){let{message:l,cancellationCode:f}=Fc(this.urlSerializer,a);this.events.next(new Yn(i.id,this.urlSerializer.serialize(i.extractedUrl),l,f)),this.events.next(new wo(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(a)}}return Ht}))}))}cancelNavigationTransition(t,i,r){let o=new Yn(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=ht(this.currentNavigation),r=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==r?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UM(n){return n!==Ca}var WE=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:()=>R(HM),providedIn:"root"})}return n})(),Oc=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},HM=(()=>{class n extends Oc{static \u0275fac=(()=>{let t;return function(r){return(t||(t=wn(n)))(r||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zE=(()=>{class n{urlSerializer=R(Na);options=R(No,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(yr);urlHandlingStrategy=R(Bc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Jn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof Jn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=bE(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:()=>R($M),providedIn:"root"})}return n})(),$M=(()=>{class n extends zE{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof br?this.updateStateMemento():t instanceof pi?this.commitTransition(i):t instanceof Da?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof ba?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Yn&&t.code!==Lt.SupersededByNewNavigation&&t.code!==Lt.Redirect?this.restoreHistory(i):t instanceof bo?this.restoreHistory(i,!0):t instanceof rn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=N(N({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",l)}else{let a=N(N({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wn(n)))(r||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zh(n,e){n.events.pipe(ut(t=>t instanceof rn||t instanceof Yn||t instanceof bo||t instanceof pi),le(t=>t instanceof rn||t instanceof pi?0:(t instanceof Yn?t.code===Lt.Redirect||t.code===Lt.SupersededByNewNavigation:!1)?2:1),ut(t=>t!==2),ni(1)).subscribe(()=>{e()})}var GM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ze=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R($m);stateManager=R(zE);options=R(No,{optional:!0})||{};pendingTasks=R(Gn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(qE);urlSerializer=R(Na);location=R(yr);urlHandlingStrategy=R(Bc);injector=R(st);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(WE);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(ka,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(Lc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new it;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=ht(this.navigationTransitions.currentNavigation);if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Yn&&i.code!==Lt.Redirect&&i.code!==Lt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof rn)this.navigated=!0;else if(i instanceof wo){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=N({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UM(r.source)},s);this.scheduleNavigation(a,Ca,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}GI(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ca,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=N({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o).catch(l=>{this.disposed||this.injector.get(Gt)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ht(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(qh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,f=l?this.currentUrlTree.fragment:s,m=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":m=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let y;try{let v=r?r.snapshot:this.routerState.snapshot.root;y=EE(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return xE(y,t,m,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Vi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Ca,null,i)}navigate(t,i={skipLocationChange:!1}){return WM(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(xi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=N({},GM):i===!1?r=N({},qM):r=i,Vi(t))return nE(this.currentUrlTree,t,r);let o=this.parseUrl(t);return nE(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,f;s?(a=s.resolve,l=s.reject,f=s.promise):f=new Promise((y,v)=>{a=y,l=v});let m=this.pendingTasks.add();return zh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WM(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new W(4008,!1)}var Bi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=w(null);get href(){return ht(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new et;applicationErrorHandler=R(Gt);options=R(No,{optional:!0});constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new Zu("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,i=r=>r==="merge"||r==="preserve";t||=i(this.queryParamsHandling),t||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(r=>{r instanceof rn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Vi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Vi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(X(Ze),X(Vt),Js("tabindex"),X(Tn),X(Pt),X(zn))};static \u0275dir=Pe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&D("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&mt("href",r.reactiveHref(),Sm)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",yo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",yo],replaceUrl:[2,"replaceUrl","replaceUrl",yo],routerLink:"routerLink"},features:[bn]})}return n})(),jh=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new ze;constructor(t,i,r,o,s){this.router=t,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof rn&&this.update()})}ngAfterContentInit(){ne(this.links.changes,ne(null)).pipe(jr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=We(t).pipe(jr()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){let i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let i=jM(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?t.isActive(o,i):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(i){return new(i||n)(X(Ze),X(Pt),X(Tn),X(ki),X(Bi,8))};static \u0275dir=Pe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&jm(o,Bi,5),i&2){let s;Ft(s=kt())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[bn]})}return n})();function jM(n){return!!n.paths}var YM=new Z("");function Yh(n,...e){return tr([{provide:ka,multi:!0,useValue:n},[],{provide:Vt,useFactory:JM,deps:[Ze]},{provide:zu,multi:!0,useFactory:QM},e.map(t=>t.\u0275providers)])}function JM(n){return n.routerState.root}function KM(n,e){return{\u0275kind:n,\u0275providers:e}}function QM(){let n=R(Tt);return e=>{let t=n.get(fi);if(e!==t.components[0])return;let i=n.get(Ze),r=n.get(ZM);n.get(XM)===1&&i.initialNavigation(),n.get(eA,null,{optional:!0})?.setUpPreloading(),n.get(YM,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var ZM=new Z("",{factory:()=>new et}),XM=new Z("",{providedIn:"root",factory:()=>1});var eA=new Z("");function Jh(){return KM(6,[{provide:zn,useClass:sh}])}var jE=()=>({exact:!0}),tA=(n,e)=>e.name,nA=(n,e)=>e.path;function iA(n,e){if(n&1&&(d(0,"a",16),x(1,"ion-icon",17),d(2,"span",18),h(3),c()()),n&2){let t=e.$implicit;k("routerLink",t.path)("routerLinkActiveOptions",qt(4,jE)),g(),k("name",t.icon),g(2),S(t.name)}}function rA(n,e){if(n&1&&(d(0,"div",15),P(1,iA,4,5,"a",16,nA),c()),n&2){let t=C(2).$implicit;g(),F(t.children)}}function oA(n,e){if(n&1){let t=$();d(0,"div")(1,"button",10),D("click",function(){T(t);let r=C().$implicit,o=C();return I(o.toggleMenu(r.name))}),d(2,"div",11),x(3,"ion-icon",12),d(4,"span",13),h(5),c()(),x(6,"ion-icon",14),c(),B(7,rA,3,0,"div",15),c()}if(n&2){let t=C().$implicit,i=C();g(),J("text-indigo-600",i.isMenuActive(t.children))("font-semibold",i.isMenuActive(t.children)),g(2),k("name",t.icon),g(2),S(t.name),g(),J("rotate-180",i.openMenu()===t.name),g(),U(i.openMenu()===t.name?7:-1)}}function sA(n,e){if(n&1&&(d(0,"a",9),x(1,"ion-icon",12),d(2,"span",13),h(3),c()()),n&2){let t=C().$implicit;k("routerLink",t.path)("routerLinkActiveOptions",qt(4,jE)),g(),k("name",t.icon),g(2),S(t.name)}}function aA(n,e){if(n&1&&B(0,oA,8,9,"div")(1,sA,4,5,"a",9),n&2){let t=e.$implicit;U(t.children&&t.children.length>0?0:1)}}var Po=class Po{constructor(){this.router=R(Ze);this.openMenu=w(null);this.navLinks=w([{path:"/dashboard",icon:"grid-outline",name:"\u5100\u8868\u677F"},{name:"\u8CA1\u52D9\u8207\u5206\u6790",icon:"analytics-outline",children:[{path:"/daily-revenue",icon:"stats-chart-outline",name:"\u7576\u65E5\u71DF\u6536"},{path:"/financial-statements",icon:"document-text-outline",name:"\u8CA1\u52D9\u5831\u8868"},{path:"/customer-analysis",icon:"people-outline",name:"\u9867\u5BA2\u7BA1\u7406"},{path:"/product-analysis",icon:"cube-outline",name:"\u5546\u54C1\u5206\u6790"}]},{name:"\u6210\u672C\u8207\u5EE0\u5546",icon:"wallet-outline",children:[{path:"/product-cost",icon:"pricetags-outline",name:"\u5546\u54C1\u6210\u672C"},{path:"/purchase-orders",icon:"receipt-outline",name:"\u9032\u8CA8\u55AE\u7BA1\u7406"},{path:"/vendors",icon:"briefcase-outline",name:"\u5EE0\u5546\u7BA1\u7406"}]},{name:"\u4EA4\u6613\u8207\u5E33\u52D9",icon:"reader-outline",children:[{path:"/ledger",icon:"reader-outline",name:"\u6D41\u6C34\u5E33"}]},{name:"\u884C\u92B7\u8207\u6D3B\u52D5",icon:"megaphone-outline",children:[{path:"/events",icon:"calendar-outline",name:"\u6D3B\u52D5\u7BA1\u7406"}]},{name:"\u80A1\u6771\u8207\u85AA\u8CC7",icon:"people-circle-outline",children:[{path:"/payroll",icon:"card-outline",name:"\u6253\u5361\u85AA\u8CC7"},{path:"/shareholder-rebates",icon:"diamond-outline",name:"\u80A1\u6771\u56DE\u994B\u91D1"}]},{name:"\u5354\u4F5C\u7A7A\u9593",icon:"people-outline",children:[{path:"/meeting",icon:"chatbubbles-outline",name:"\u958B\u6703\u7D00\u9304"},{path:"/shareholder-records",icon:"document-text-outline",name:"\u80A1\u6771\u7D00\u9304"},{path:"/goal-progress",icon:"flag-outline",name:"\u76EE\u6A19\u9032\u5EA6"},{path:"/decision-log",icon:"key-outline",name:"\u6C7A\u7B56\u7D00\u9304"}]}]);this.router.events.pipe(ut(e=>e instanceof rn)).subscribe(()=>{let e=this.navLinks().find(t=>this.isMenuActive(t.children));e&&this.openMenu.set(e.name)})}toggleMenu(e){this.openMenu.update(t=>t===e?null:e)}isMenuActive(e){return e?e.some(t=>t.path&&this.router.isActive(t.path,{paths:"exact",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})):!1}};Po.\u0275fac=function(t){return new(t||Po)},Po.\u0275cmp=ae({type:Po,selectors:[["app-sidebar"]],decls:13,vars:0,consts:[[1,"w-64","flex-shrink-0","bg-white","border-r","border-gray-200","flex","flex-col"],[1,"h-16","flex","items-center","justify-center","border-b","border-gray-200"],[1,"flex","items-center","space-x-2"],["name","pulse-outline",1,"text-3xl","text-indigo-600"],[1,"text-xl","font-semibold","text-gray-800"],[1,"flex-1","flex","flex-col","overflow-y-auto"],[1,"flex-1","px-4","py-6","space-y-1"],[1,"px-4","py-6","border-t","border-gray-200"],[1,"text-xs","text-center","text-gray-500"],["routerLinkActive","bg-indigo-50 text-indigo-600",1,"flex","items-center","px-4","py-2.5","text-gray-600","transition-colors","duration-200","transform","rounded-lg","hover:bg-gray-100","hover:text-gray-800",3,"routerLink","routerLinkActiveOptions"],[1,"w-full","flex","items-center","justify-between","px-4","py-2.5","text-gray-600","transition-colors","duration-200","transform","rounded-lg","hover:bg-gray-100","hover:text-gray-800",3,"click"],[1,"flex","items-center"],[1,"text-xl",3,"name"],[1,"mx-4","font-medium"],["name","chevron-down-outline",1,"text-sm","transition-transform","duration-300"],[1,"mt-1","ml-4","pl-2","space-y-1","border-l","border-gray-200"],["routerLinkActive","bg-indigo-50 text-indigo-600 font-semibold",1,"flex","items-center","w-full","px-4","py-2","text-sm","text-gray-600","transition-colors","duration-200","transform","rounded-lg","hover:bg-gray-100","hover:text-gray-800",3,"routerLink","routerLinkActiveOptions"],[1,"text-lg",3,"name"],[1,"mx-4","font-normal"]],template:function(t,i){t&1&&(d(0,"aside",0)(1,"div",1)(2,"div",2),x(3,"ion-icon",3),d(4,"h1",4),h(5,"\u8CA1\u52D9 AI"),c()()(),d(6,"div",5)(7,"nav",6),P(8,aA,2,1,null,null,tA),c()(),d(10,"div",7)(11,"p",8),h(12,"\xA9 2024 \u5167\u90E8\u7CFB\u7D71"),c()()()),t&2&&(g(8),F(i.navLinks()))},dependencies:[Bi,jh],encapsulation:2,changeDetection:0});var Uc=Po;var Fo=class Fo{};Fo.\u0275fac=function(t){return new(t||Fo)},Fo.\u0275cmp=ae({type:Fo,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"flex","h-screen","bg-gray-100"],[1,"flex-1","flex","flex-col","overflow-hidden"],[1,"flex-1","overflow-x-hidden","overflow-y-auto","bg-gray-50"],[1,"container","mx-auto","px-6","py-8"]],template:function(t,i){t&1&&(d(0,"div",0),x(1,"app-sidebar"),d(2,"main",1)(3,"div",2)(4,"div",3),x(5,"router-outlet"),c()()()())},dependencies:[Pa,Uc],encapsulation:2,changeDetection:0});var Hc=Fo;var i1=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(X(Tn),X(Pt))};static \u0275dir=Pe({type:n})}return n})(),Ga=(()=>{class n extends i1{static \u0275fac=(()=>{let t;return function(r){return(t||(t=wn(n)))(r||n)}})();static \u0275dir=Pe({type:n,features:[vt]})}return n})(),Tr=new Z(""),lA={provide:Tr,useExisting:It(()=>qa),multi:!0},qa=(()=>{class n extends Ga{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wn(n)))(r||n)}})();static \u0275dir=Pe({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&D("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Xt([lA]),vt]})}return n})(),uA={provide:Tr,useExisting:It(()=>we),multi:!0};function cA(){let n=gn()?gn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var dA=new Z(""),we=(()=>{class n extends i1{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!cA())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(X(Tn),X(Pt),X(dA,8))};static \u0275dir=Pe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&D("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Xt([uA]),vt]})}return n})();function Xh(n){return n==null||e0(n)===0}function e0(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Bo=new Z(""),Uo=new Z(""),fA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,V=class{static min(e){return pA(e)}static max(e){return mA(e)}static required(e){return hA(e)}static requiredTrue(e){return gA(e)}static email(e){return yA(e)}static minLength(e){return vA(e)}static maxLength(e){return _A(e)}static pattern(e){return CA(e)}static nullValidator(e){return r1()}static compose(e){return c1(e)}static composeAsync(e){return d1(e)}};function pA(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function mA(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function hA(n){return Xh(n.value)?{required:!0}:null}function gA(n){return n.value===!0?null:{required:!0}}function yA(n){return Xh(n.value)||fA.test(n.value)?null:{email:!0}}function vA(n){return e=>{let t=e.value?.length??e0(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function _A(n){return e=>{let t=e.value?.length??e0(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function CA(n){if(!n)return r1;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Xh(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function r1(n){return null}function o1(n){return n!=null}function s1(n){return Pi(n)?We(n):n}function a1(n){let e={};return n.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function l1(n,e){return e.map(t=>t(n))}function EA(n){return!n.validate}function u1(n){return n.map(e=>EA(e)?e:t=>e.validate(t))}function c1(n){if(!n)return null;let e=n.filter(o1);return e.length==0?null:function(t){return a1(l1(t,e))}}function t0(n){return n!=null?c1(u1(n)):null}function d1(n){if(!n)return null;let e=n.filter(o1);return e.length==0?null:function(t){let i=l1(t,e).map(s1);return wf(i).pipe(le(a1))}}function n0(n){return n!=null?d1(u1(n)):null}function YE(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function f1(n){return n._rawValidators}function p1(n){return n._rawAsyncValidators}function Kh(n){return n?Array.isArray(n)?n:[n]:[]}function Gc(n,e){return Array.isArray(n)?n.includes(e):n===e}function JE(n,e){let t=Kh(e);return Kh(n).forEach(r=>{Gc(t,r)||t.push(r)}),t}function KE(n,e){return Kh(e).filter(t=>!Gc(n,t))}var qc=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=t0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=n0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Bt=class extends qc{name;get formDirective(){return null}get path(){return null}},wr=class extends qc{_parent=null;name=null;valueAccessor=null},Wc=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},xA={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},fX=q(N({},xA),{"[class.ng-submitted]":"isSubmitted"}),_e=(()=>{class n extends Wc{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(X(wr,2))};static \u0275dir=Pe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&J("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[vt]})}return n})(),$e=(()=>{class n extends Wc{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(X(Bt,10))};static \u0275dir=Pe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&J("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[vt]})}return n})();var Oa="VALID",$c="INVALID",ko="PENDING",La="DISABLED",Ui=class{},zc=class extends Ui{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ba=class extends Ui{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ua=class extends Ui{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Oo=class extends Ui{status;source;constructor(e,t){super(),this.status=e,this.source=t}},jc=class extends Ui{source;constructor(e){super(),this.source=e}},$a=class extends Ui{source;constructor(e){super(),this.source=e}};function i0(n){return(Qc(n)?n.validators:n)||null}function SA(n){return Array.isArray(n)?t0(n):n||null}function r0(n,e){return(Qc(e)?e.asyncValidators:n)||null}function DA(n){return Array.isArray(n)?n0(n):n||null}function Qc(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function m1(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new W(1e3,"");if(!i[t])throw new W(1001,"")}function h1(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new W(1002,"")})}var Lo=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ht(this.statusReactive)}set status(e){ht(()=>this.statusReactive.set(e))}_status=Y(()=>this.statusReactive());statusReactive=w(void 0);get valid(){return this.status===Oa}get invalid(){return this.status===$c}get pending(){return this.status==ko}get disabled(){return this.status===La}get enabled(){return this.status!==La}errors;get pristine(){return ht(this.pristineReactive)}set pristine(e){ht(()=>this.pristineReactive.set(e))}_pristine=Y(()=>this.pristineReactive());pristineReactive=w(!0);get dirty(){return!this.pristine}get touched(){return ht(this.touchedReactive)}set touched(e){ht(()=>this.touchedReactive.set(e))}_touched=Y(()=>this.touchedReactive());touchedReactive=w(!1);get untouched(){return!this.touched}_events=new et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(JE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(JE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(KE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(KE(e,this._rawAsyncValidators))}hasValidator(e){return Gc(this._rawValidators,e)}hasAsyncValidator(e){return Gc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(q(N({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ua(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ua(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(q(N({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ba(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ba(!0,i))}markAsPending(e={}){this.status=ko;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Oo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(q(N({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=La,this.errors=null,this._forEachChild(r=>{r.disable(q(N({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zc(this.value,i)),this._events.next(new Oo(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(q(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Oa,this._forEachChild(i=>{i.enable(q(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(q(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oa||this.status===ko)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zc(this.value,t)),this._events.next(new Oo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(q(N({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?La:Oa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ko,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=s1(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Oo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?La:this.errors?$c:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ko)?ko:this._anyControlsHaveStatus($c)?$c:Oa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Ba(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ua(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=SA(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=DA(this._rawAsyncValidators)}},Vo=class extends Lo{constructor(e,t,i){super(i0(t),r0(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){h1(this,!0,e),Object.keys(e).forEach(i=>{m1(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new $a(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Qh=class extends Vo{};var Wa=new Z("",{providedIn:"root",factory:()=>Zc}),Zc="always";function Xc(n,e){return[...e.path,n]}function Yc(n,e,t=Zc){o0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),wA(n,e),IA(n,e),TA(n,e),bA(n,e)}function QE(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Kc(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Jc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bA(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function o0(n,e){let t=f1(n);e.validator!==null?n.setValidators(YE(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=p1(n);e.asyncValidator!==null?n.setAsyncValidators(YE(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Jc(e._rawValidators,r),Jc(e._rawAsyncValidators,r)}function Kc(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=f1(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=p1(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Jc(e._rawValidators,i),Jc(e._rawAsyncValidators,i),t}function wA(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&g1(n,e)})}function TA(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&g1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function g1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function IA(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function y1(n,e){n==null,o0(n,e)}function MA(n,e){return Kc(n,e)}function v1(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function AA(n){return Object.getPrototypeOf(n.constructor)===Ga}function _1(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function C1(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===we?t=o:AA(o)?i=o:r=o}),r||i||t||null}function RA(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var NA={provide:Bt,useExisting:It(()=>s0)},Va=Promise.resolve(),s0=(()=>{class n extends Bt{callSetDisabledState;get submitted(){return ht(this.submittedReactive)}_submitted=Y(()=>this.submittedReactive());submittedReactive=w(!1);_directives=new Set;form;ngSubmit=new ze;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new Vo({},t0(t),n0(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Va.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Yc(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Va.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Va.then(()=>{let i=this._findContainer(t.path),r=new Vo({});y1(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Va.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Va.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),_1(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new jc(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(X(Bo,10),X(Uo,10),X(Wa,8))};static \u0275dir=Pe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&D("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Xt([NA]),vt]})}return n})();function ZE(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function XE(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ha=class extends Lo{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(i0(t),r0(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(XE(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new $a(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){XE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var PA=n=>n instanceof Ha,FA=(()=>{class n extends Bt{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Xc(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wn(n)))(r||n)}})();static \u0275dir=Pe({type:n,standalone:!1,features:[vt]})}return n})();var kA={provide:wr,useExisting:It(()=>Ne)},e1=Promise.resolve(),Ne=(()=>{class n extends wr{_changeDetectorRef;callSetDisabledState;control=new Ha;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ze;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=C1(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),v1(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Yc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){e1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&yo(i);e1.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Xc(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(X(Bt,9),X(Bo,10),X(Uo,10),X(Tr,10),X(ki,8),X(Wa,8))};static \u0275dir=Pe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Xt([kA]),vt,bn]})}return n})();var Xe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Pe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),OA={provide:Tr,useExisting:It(()=>on),multi:!0},on=(()=>{class n extends Ga{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wn(n)))(r||n)}})();static \u0275dir=Pe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&D("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Xt([OA]),vt]})}return n})();var E1=new Z("");var LA={provide:Bt,useExisting:It(()=>Le)},Le=(()=>{class n extends Bt{callSetDisabledState;get submitted(){return ht(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Y(()=>this._submittedReactive());_submittedReactive=w(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ze;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Kc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Yc(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){QE(t.control||null,t,!1),RA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),_1(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new jc(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(QE(i||null,t),PA(r)&&(Yc(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);y1(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&MA(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){o0(this.form,this),this._oldForm&&Kc(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(X(Bo,10),X(Uo,10),X(Wa,8))};static \u0275dir=Pe({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&D("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Xt([LA]),vt,bn]})}return n})(),VA={provide:Bt,useExisting:It(()=>Kn)},Kn=(()=>{class n extends FA{name=null;constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){x1(this._parent)}static \u0275fac=function(i){return new(i||n)(X(Bt,13),X(Bo,10),X(Uo,10))};static \u0275dir=Pe({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Xt([VA]),vt]})}return n})(),BA={provide:Bt,useExisting:It(()=>Qn)},Qn=(()=>{class n extends Bt{_parent;name=null;constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){x1(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Xc(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(i){return new(i||n)(X(Bt,13),X(Bo,10),X(Uo,10))};static \u0275dir=Pe({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Xt([BA]),vt]})}return n})();function x1(n){return!(n instanceof Kn)&&!(n instanceof Le)&&!(n instanceof Qn)}var UA={provide:wr,useExisting:It(()=>He)},He=(()=>{class n extends wr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new ze;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=C1(this,o)}ngOnChanges(t){this._added||this._setUpControl(),v1(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Xc(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(X(Bt,13),X(Bo,10),X(Uo,10),X(Tr,10),X(E1,8))};static \u0275dir=Pe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Xt([UA]),vt,bn]})}return n})();var HA={provide:Tr,useExisting:It(()=>Fe),multi:!0};function S1(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function $A(n){return n.split(":")[0]}var Fe=(()=>{class n extends Ga{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=R(fi).injector;destroyRef=R(pn);cdr=R(ki);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,di({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),r=S1(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=$A(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wn(n)))(r||n)}})();static \u0275dir=Pe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&D("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xt([HA]),vt]})}return n})(),Ve=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(S1(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(X(Pt),X(Tn),X(Fe,9))};static \u0275dir=Pe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),GA={provide:Tr,useExisting:It(()=>D1),multi:!0};function t1(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function qA(n){return n.split(":")[0]}var D1=(()=>{class n extends Ga{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],f=this._getOptionValue(l.value);r.push(f)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let f=this._getOptionValue(l.value);r.push(f)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=qA(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=wn(n)))(r||n)}})();static \u0275dir=Pe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&D("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xt([GA]),vt]})}return n})(),Be=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(t1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(t1(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(X(Pt),X(Tn),X(D1,9))};static \u0275dir=Pe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var b1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=In({type:n});static \u0275inj=ln({})}return n})(),Zh=class extends Lo{constructor(e,t,i){super(i0(t),r0(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(i=>{this.controls.push(i),this._registerControl(i)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){h1(this,!1,e),e.forEach((i,r)=>{m1(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new $a(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function n1(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Ge=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),o={};return n1(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Vo(r,o)}record(t,i=null){let r=this._reduceControls(t);return new Qh(r,i)}control(t,i,r){let o={};return this.useNonNullable?(n1(i)?o=i:(o.validators=i,o.asyncValidators=r),new Ha(t,q(N({},o),{nonNullable:!0}))):new Ha(t,i,r)}array(t,i,r){let o=t.map(s=>this._createControl(s));return new Zh(o,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof Ha)return t;if(t instanceof Lo)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,r,o)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ke=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wa,useValue:t.callSetDisabledState??Zc}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=In({type:n});static \u0275inj=ln({imports:[b1]})}return n})(),qe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:E1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Wa,useValue:t.callSetDisabledState??Zc}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=In({type:n});static \u0275inj=ln({imports:[b1]})}return n})();var Ir=class Ir{constructor(){this.mockEvents=w([{id:"EVT001",type:"\u5BB4\u5BA2",status:"active",date:"2024-10-03",name:"\u52DE\u502B\u65AF",attendees:"10~15",estimatedRevenue:19e3,actualRevenue:20980,notes:"\u9152\u5546\u8CBB: 9600/\u9910\u9EDE: \u4EBA600"},{id:"EVT002",type:"\u76AE\u5361",status:"active",date:"2024-10-04",time:"14:30~18:30",name:"\u5361\u724C",attendees:"10~15",estimatedRevenue:8e3,actualRevenue:8540},{id:"EVT003",type:"\u5546\u52D9\u3001\u5E97\u5167",status:"active",date:"2024-10-07",name:"\u6F2B\u9727",attendees:"6",estimatedRevenue:4200,actualRevenue:4900,notes:"\u662F\u5426\u8ABF\u6574"},{id:"EVT004",type:"\u5BB4\u5BA2",status:"active",date:"2024-10-13",name:"Dave",attendees:"8~10",estimatedRevenue:15e3,actualRevenue:24080,notes:"8000/\u4E2D\u5F0F"},{id:"EVT005",type:"\u76AE\u5361",status:"active",date:"2024-10-14",time:"14:30~18:00",name:"TCBA",organizer:"\u76AE\u5361",attendees:"8",estimatedRevenue:4e3,actualRevenue:4e3,notes:"\u4EBA/530"},{id:"EVT006",type:"\u5E97\u5167",status:"cancelled",date:"2024-10-17",name:"\u70C8\u9152\u54C1\u9152\u6703",attendees:"0",estimatedRevenue:0,actualRevenue:0},{id:"EVT007",type:"\u7DAD\u7DB8",status:"active",date:"2024-10-18",time:"\u665A\u4E0A18:00\u5F8C",name:"slp\u5275\u696D\u5B78\u9662",attendees:"70",estimatedRevenue:7e4,deposit:21e3,actualRevenue:77640,notes:"\u8A02\u91D1\u5DF2\u6536"},{id:"EVT008",type:"\u7D05\u767D\u806F\u8ABC",status:"active",date:"2024-10-19",time:"14:00~17:00",name:"\u5C0F\u745C",attendees:"7",estimatedRevenue:36e3,actualRevenue:7e3,notes:"\u9152\u5546\u8CBB: 12000~14000/\u4EBA\u6578: \u7537\u5973\u5C0D\u534A \u5C0F\u745C\u62BD500\u5143/\u4EBA"},{id:"EVT009",type:"\u5E97\u5167",status:"active",date:"2024-10-22",name:"\u7D05\u767D\u9152\u54C1\u6703",attendees:"4",estimatedRevenue:15e3,actualRevenue:6e3,notes:"\u9152\u5546\u8CBB: 12000 \u8CBB\u7528: 1,500\u5143/\u4EBA 4\u96BB\u9152/\u642D\u914D\u98A8\u5473\u98DF\u7269"},{id:"EVT010",type:"\u6D3B\u52D5",status:"cancelled",date:"2024-10-23",time:"19:00~22:00",name:"Scott",organizer:"Scott",attendees:"0",estimatedRevenue:0,actualRevenue:0,notes:"1\u4EBA/400"},{id:"EVT011",type:"\u7DAD\u7DB8",status:"active",date:"2024-10-25",time:"\u665A\u4E0A18:00\u5F8C",name:"slp\u5275\u696D\u5B78\u9662",attendees:"55",estimatedRevenue:7e4,deposit:21e3,actualRevenue:74010,notes:"\u8A02\u91D1\u5DF2\u6536"},{id:"EVT012",type:"Laurence",status:"active",date:"2024-10-26",time:"\u4E0B\u5348\u958B\u5E55",name:"\u516C\u53F8\u958B\u5E55",attendees:"30",estimatedRevenue:1e4,actualRevenue:1e4},{id:"EVT013",type:"\u80A1\u6771\u6703",status:"active",date:"2024-10-28",name:"\u80A1\u6771\u6703",attendees:"5",estimatedRevenue:0,actualRevenue:0},{id:"EVT014",type:"\u5BA2\u6236",status:"active",date:"2024-10-29",name:"Connyn",attendees:"20~25",estimatedRevenue:15e3,actualRevenue:15e3,notes:"\u83DC: 15000"},{id:"EVT015",type:"\u76AE\u5361",status:"active",date:"2024-10-30",time:"\u665A\u4E0A18:00\u5F8C",name:"\u5361\u724C",organizer:"\u76AE\u5361",attendees:"8",estimatedRevenue:4e3,actualRevenue:12890},{id:"EVT016",type:"\u5E97\u5167",status:"active",date:"2024-10-31",name:"\u6F2B\u9727",attendees:"6",estimatedRevenue:8400,actualRevenue:4900},{id:"EVT017",type:"\u5546\u52D9",status:"active",date:"2024-08-01",name:"\u6F2B\u9727",attendees:"20",estimatedRevenue:2e4,actualRevenue:21450},{id:"EVT018",type:"\u79C1\u4EBA",status:"active",date:"2024-08-09",name:"\u555F\u5E06",attendees:"5",estimatedRevenue:2e3,actualRevenue:1900},{id:"EVT019",type:"\u79C1\u4EBA",status:"active",date:"2024-08-13",name:"\u555F\u5E06",attendees:"10",estimatedRevenue:0,actualRevenue:0},{id:"EVT020",type:"\u5BB4\u5BA2",status:"active",date:"2024-08-14",name:"vic / jackle",attendees:"15",estimatedRevenue:18e3,actualRevenue:2e4},{id:"EVT021",type:"\u5546\u52D9",status:"active",date:"2024-08-22",name:"\u6F2B\u9727",attendees:"12",estimatedRevenue:1e4,actualRevenue:10155},{id:"EVT022",type:"\u79C1\u4EBA",status:"active",date:"2024-08-27",name:"\u555F\u5E06",attendees:"8",estimatedRevenue:8e3,actualRevenue:9300},{id:"EVT023",type:"\u54C1\u9152\u6703",status:"active",date:"2024-08-28",name:"\u5167\u90E8\u54C1\u9152",attendees:"10",estimatedRevenue:1e4,actualRevenue:10700}]);this.mockDailyRevenue=w([{date:"2024-08-01",nonEventRevenue:10520,isDayOff:!1},{date:"2024-08-02",nonEventRevenue:3340,isDayOff:!1},{date:"2024-08-03",nonEventRevenue:970,isDayOff:!1},{date:"2024-08-04",nonEventRevenue:0,isDayOff:!0},{date:"2024-08-05",nonEventRevenue:200,isDayOff:!1},{date:"2024-08-06",nonEventRevenue:0,isDayOff:!1},{date:"2024-08-07",nonEventRevenue:0,isDayOff:!1},{date:"2024-08-08",nonEventRevenue:17950,isDayOff:!1},{date:"2024-08-09",nonEventRevenue:6800,isDayOff:!1},{date:"2024-08-10",nonEventRevenue:8410,isDayOff:!1},{date:"2024-08-11",nonEventRevenue:0,isDayOff:!0},{date:"2024-08-12",nonEventRevenue:8970,isDayOff:!1},{date:"2024-08-13",nonEventRevenue:14900,isDayOff:!1},{date:"2024-08-14",nonEventRevenue:14130,isDayOff:!1},{date:"2024-08-15",nonEventRevenue:23630,isDayOff:!1},{date:"2024-08-16",nonEventRevenue:10740,isDayOff:!1},{date:"2024-08-17",nonEventRevenue:6090,isDayOff:!1},{date:"2024-08-18",nonEventRevenue:0,isDayOff:!0},{date:"2024-08-19",nonEventRevenue:7500,isDayOff:!1},{date:"2024-08-20",nonEventRevenue:1860,isDayOff:!1},{date:"2024-08-21",nonEventRevenue:700,isDayOff:!1},{date:"2024-08-22",nonEventRevenue:-845,isDayOff:!1},{date:"2024-08-23",nonEventRevenue:36100,isDayOff:!1},{date:"2024-08-24",nonEventRevenue:3140,isDayOff:!1},{date:"2024-08-25",nonEventRevenue:0,isDayOff:!0},{date:"2024-08-26",nonEventRevenue:2180,isDayOff:!1},{date:"2024-08-27",nonEventRevenue:4720,isDayOff:!1},{date:"2024-08-28",nonEventRevenue:17600,isDayOff:!1},{date:"2024-08-29",nonEventRevenue:18560,isDayOff:!1},{date:"2024-08-30",nonEventRevenue:11500,isDayOff:!1},{date:"2024-08-31",nonEventRevenue:4850,isDayOff:!1}]);this.mockEmployees=w([{id:"EMP001",name:"\u738B\u5C0F\u660E",type:"full-time",monthlySalary:55e3},{id:"EMP002",name:"\u9673\u7F8E\u9E97",type:"full-time",monthlySalary:62e3},{id:"EMP003",name:"\u674E\u5927\u885B",type:"part-time",hourlyRate:200},{id:"EMP004",name:"\u5F35\u4F73\u73B2",type:"part-time",hourlyRate:200},{id:"EMP005",name:"\u9EC3\u5FD7\u5F37",type:"part-time",hourlyRate:200}]);this.mockPunchRecords=w([{employeeId:"EMP003",date:"2024-08-01",clockIn:"10:00",clockOut:"18:30",isDoublePay:!1},{employeeId:"EMP003",date:"2024-08-02",clockIn:"10:05",clockOut:"17:55",isDoublePay:!1},{employeeId:"EMP003",date:"2024-08-05",clockIn:"14:00",clockOut:"22:15",isDoublePay:!1},{employeeId:"EMP003",date:"2024-08-06",clockIn:"13:58",clockOut:"22:05",isDoublePay:!1},{employeeId:"EMP003",date:"2024-08-08",clockIn:"10:00",clockOut:"14:00",isDoublePay:!1},{employeeId:"EMP003",date:"2024-08-09",clockIn:"09:55",clockOut:"18:00",isDoublePay:!0},{employeeId:"EMP003",date:"2024-08-12",clockIn:"10:00",clockOut:"18:00",isDoublePay:!1},{employeeId:"EMP003",date:"2024-08-13",clockIn:"10:00",clockOut:"18:00",isDoublePay:!1},{employeeId:"EMP003",date:"2024-08-15",clockIn:"10:00",clockOut:null,isDoublePay:!1},{employeeId:"EMP003",date:"2024-08-16",clockIn:"14:00",clockOut:"22:00",isDoublePay:!1},{employeeId:"EMP004",date:"2024-08-01",clockIn:"18:00",clockOut:"22:00",isDoublePay:!1},{employeeId:"EMP004",date:"2024-08-03",clockIn:"18:00",clockOut:"22:30",isDoublePay:!1},{employeeId:"EMP004",date:"2024-08-07",clockIn:"17:55",clockOut:"22:01",isDoublePay:!1},{employeeId:"EMP004",date:"2024-08-10",clockIn:"17:30",clockOut:"22:30",isDoublePay:!1},{employeeId:"EMP004",date:"2024-08-14",clockIn:"18:00",clockOut:"22:00",isDoublePay:!1},{employeeId:"EMP004",date:"2024-08-17",clockIn:"18:00",clockOut:"22:00",isDoublePay:!1},{employeeId:"EMP005",date:"2024-08-20",clockIn:"12:00",clockOut:"20:00",isDoublePay:!1},{employeeId:"EMP005",date:"2024-08-21",clockIn:"12:05",clockOut:"20:08",isDoublePay:!1},{employeeId:"EMP005",date:"2024-08-22",clockIn:null,clockOut:"20:00",isDoublePay:!1},{employeeId:"EMP005",date:"2024-08-24",clockIn:"11:58",clockOut:"20:03",isDoublePay:!1}]);this.mockTransactions=w([{id:"TXN001",date:"2025-12-16",item:"\u8CA0\u50B5",category:"\u61C9\u4ED8\u96EA\u8304\u9032\u8CA8",amount:-66350,approved:!0},{id:"TXN002",date:"2025-12-17",item:"\u71DF\u696D\u6536\u5165",category:"-\u92B7\u6216\u6298\u8B93",amount:0,approved:!0},{id:"TXN003",date:"2025-12-17",item:"\u71DF\u696D\u6536\u5165",category:"\u92B7\u8CA8\u6536\u5165",amount:1150,approved:!1},{id:"TXN004",date:"2025-12-17",item:"\u8CC7\u7522",category:"\u71DF\u696D\u8A2D\u5099",amount:-295,vendorName:"\u8766\u76AE",description:"\u53EF\u9E97\u9732\u70E4\u76E4",approved:!0},{id:"TXN005",date:"2025-12-18",item:"\u71DF\u696D\u6536\u5165",category:"-\u92B7\u6216\u6298\u8B93",amount:-2862,approved:!0},{id:"TXN006",date:"2025-12-18",item:"\u71DF\u696D\u6536\u5165",category:"\u92B7\u8CA8\u6536\u5165",amount:17440,approved:!0},{id:"TXN007",date:"2025-12-19",item:"\u71DF\u696D\u6536\u5165",category:"-\u92B7\u6216\u6298\u8B93",amount:-191,approved:!0},{id:"TXN008",date:"2025-12-19",item:"\u71DF\u696D\u8CBB\u7528",category:"\u6587\u5177\u7528\u54C1",amount:-100,vendorTaxId:"14713177",vendorName:"\u91D1\u5409\u523B\u5370\u884C",approved:!0},{id:"TXN009",date:"2025-12-19",item:"\u71DF\u696D\u8CBB\u7528",category:"\u6587\u5177\u7528\u54C1",amount:-7,invoiceNumber:"VF-79457330",vendorTaxId:"90113315",vendorName:"\u5168\u65B9\u4F4D\u6578\u4F4D\u8F38\u51FA\u6709\u9650\u516C\u53F8\u5357\u4EAC\u6771\u8DEF\u5206\u516C\u53F8",approved:!0},{id:"TXN010",date:"2025-12-19",item:"\u71DF\u696D\u8CBB\u7528",category:"\u6587\u5177\u7528\u54C1",amount:-114,invoiceNumber:"UB-05014356",vendorTaxId:"97616452",vendorName:"\u5168\u806F\u798F\u5229\u4E2D\u5FC3",approved:!1},{id:"TXN011",date:"2025-12-19",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9152\u6C34",amount:-5580,vendorName:"\u6DFB\u6F64\u6D0B\u884C",approved:!0},{id:"TXN012",date:"2025-12-19",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-189,invoiceNumber:"12170425",vendorName:"\u89AA\u6C11\u98DF\u54C1\u6709\u9650\u516C\u53F8",approved:!0},{id:"TXN013",date:"2025-12-19",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-427,vendorName:"\u6D0B\u83EF\u9BAE\u98DF\u5BE6\u696D\u6709\u9650\u516C\u53F8",approved:!0},{id:"TXN014",date:"2025-12-19",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-280,invoiceNumber:"UK88724800",vendorName:"\u958B\u5143\u98DF\u54C1\u5DE5\u696D\u80A1\u4EFD\u6709\u9650\u516C\u53F8",approved:!0},{id:"TXN015",date:"2025-12-19",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-45,invoiceNumber:"111412191194",vendorTaxId:"79997612",vendorName:"\u570B\u8C50\u5546\u884C\u6709\u9650\u516C\u53F8",approved:!0},{id:"TXN016",date:"2025-12-19",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-1874,vendorTaxId:"79997612",vendorName:"\u570B\u8C50\u5546\u884C\u6709\u9650\u516C\u53F8",approved:!0},{id:"TXN017",date:"2025-12-19",item:"\u71DF\u696D\u6536\u5165",category:"\u92B7\u8CA8\u6536\u5165",amount:9280,approved:!0},{id:"TXN018",date:"2025-12-20",item:"\u71DF\u696D\u6536\u5165",category:"-\u92B7\u6216\u6298\u8B93",amount:-4349,approved:!1},{id:"TXN019",date:"2025-12-20",item:"\u71DF\u696D\u8CBB\u7528",category:"\u6587\u5177\u7528\u54C1",amount:-240,vendorTaxId:"93138304",vendorName:"\u798F\u5BF6\u523B\u5370\u884C",approved:!0},{id:"TXN020",date:"2025-12-20",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-72,invoiceNumber:"UB-05015759",vendorTaxId:"97616452",vendorName:"\u5168\u806F\u798F\u5229\u4E2D\u5FC3",approved:!0},{id:"TXN021",date:"2025-12-20",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-568,invoiceNumber:"UB-05015750",vendorTaxId:"97616452",vendorName:"\u5168\u806F\u798F\u5229\u4E2D\u5FC3",approved:!0},{id:"TXN022",date:"2025-12-20",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-160,vendorName:"\u5E02\u5834",approved:!0},{id:"TXN023",date:"2025-12-20",item:"\u71DF\u696D\u8CBB\u7528",category:"\u62DC\u62DC\u8CBB\u7528",amount:-198,invoiceNumber:"UN-74686337",vendorTaxId:"28983777",vendorName:"7-ELEVEN",approved:!0},{id:"TXN024",date:"2025-12-20",item:"\u71DF\u696D\u6536\u5165",category:"\u92B7\u8CA8\u6536\u5165",amount:25310,approved:!0},{id:"TXN025",date:"2025-12-21",item:"\u71DF\u696D\u6536\u5165",category:"-\u92B7\u6216\u6298\u8B93",amount:-1612,approved:!0},{id:"TXN026",date:"2025-12-21",item:"\u71DF\u696D\u6536\u5165",category:"\u92B7\u8CA8\u6536\u5165",amount:14660,approved:!0},{id:"TXN027",date:"2025-12-22",item:"\u71DF\u696D\u8CBB\u7528",category:"\u8CB8\u6B3E\u5229\u606F",amount:-3824,approved:!0},{id:"TXN028",date:"2025-12-22",item:"\u71DF\u696D\u6536\u5165",category:"-\u92B7\u6216\u6298\u8B93",amount:0,approved:!0},{id:"TXN029",date:"2025-12-23",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-2020,invoiceNumber:"SO1412221261",vendorTaxId:"22161107",vendorName:"\u9F0E\u8000\u98DF\u54C1\u80A1\u4EFD\u6709\u9650\u516C\u53F8",approved:!0},{id:"TXN030",date:"2025-12-23",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-36,invoiceNumber:"UB-15207729",vendorTaxId:"97616452",vendorName:"\u5168\u806F\u798F\u5229\u4E2D\u5FC3",approved:!1},{id:"TXN031",date:"2025-12-23",item:"\u8CC7\u7522",category:"\u5B58\u8CA8-\u9910\u98F2",amount:-150,invoiceNumber:"UB-15209268",vendorTaxId:"97616452",vendorName:"\u5168\u806F\u798F\u5229\u4E2D\u5FC3",approved:!0},{id:"TXN032",date:"2025-12-23",item:"\u71DF\u696D\u6536\u5165",category:"\u92B7\u8CA8\u6536\u5165",amount:2650,approved:!0}]);this.mockVendors=w([{id:"V001",category:"\u98DF\u6750",name:"\u570B\u8C50",contactInfo:"\u696D\u52D9line @926yleos",restDays:"\u516D\u3001\u65E5",taxId:"79997612"},{id:"V002",category:"\u98DF\u6750",name:"\u570B\u6210",contactInfo:"(02)8671-9056",restDays:"\u516D\u3001\u65E5"},{id:"V003",category:"\u5976\u88FD/\u96DE\u7FC5",name:"\u958B\u5143",contactInfo:"\u696D\u52D9 MR.\u8F9C 0916-250-990",restDays:"\u516D\u3001\u65E5",taxId:"UK88724800"},{id:"V004",category:"\u51B0\u6DC7\u6DCB",name:"\u5408\u7A40",contactInfo:"(03)3578-130",restDays:"\u516D\u3001\u65E5"},{id:"V005",category:"\u53EF\u980C",name:"\u89AA\u6C11",contactInfo:"(02)2999-9381",restDays:"\u516D\u3001\u65E5"},{id:"V006",category:"\u8C9D\u679C",name:"\u5E03\u6717\u4E3B\u5EDA",contactInfo:"\u696D\u52D9line @928ebhwu",restDays:"\u516D\u3001\u65E5"},{id:"V007",category:"\u86CB\u7CD5",name:"\u897F\u9EDE\u5C0F\u8216",contactInfo:"\u7DB2\u9801\u4E0B\u55AE, (02)2995-0596",restDays:"\u4E8C\u3001\u4E09\u3001\u56DB\u3001\u516D\u3001\u65E5"},{id:"V008",category:"\u9152",name:"\u5229\u591A\u5409",contactInfo:"Line",restDays:"\u65E5\u3001\u4E00"},{id:"V009",category:"\u9152",name:"\u4E5D\u6A3D",contactInfo:"(02)7728-6670",restDays:"\u516D\u3001\u65E5"},{id:"V010",category:"\u9152",name:"\u9152\u9F0E",contactInfo:"(02)2578-1515",restDays:"\u516D\u3001\u65E5"},{id:"V011",category:"\u8017\u6750",name:"\u6613\u9054\u8C50",contactInfo:"\u696D\u52D9line 0926077730",restDays:"-"},{id:"V012",category:"\u5236\u670D",name:"\u570B\u8C6A",contactInfo:"\u738B\u5730\u7FA9 0932-036356",restDays:"-"},{id:"V013",category:"\u65B9\u51B0\u584A",name:"\u5FEB\u6A02\u51B0\u584A",contactInfo:"0932-357-696",restDays:"-"},{id:"V014",category:"\u83DC\u5546",name:"\u6D25\u83EF",contactInfo:"(02)2307-5255",restDays:"-"},{id:"V015",category:"\u6536\u5EE2\u6CB9",name:"\u5C24\u52A0\u5229",contactInfo:"0909-511-256 \u6797\u5955\u9716 02-8287 5522",restDays:"\u4E8C\u4E09\u56DB\u516D\u65E5"},{id:"V016",category:"\u6536\u5EE2\u6CB9",name:"\u6C38\u745E",contactInfo:"07-6161-580 \u8521\u4F73\u6210 0965-659-532",restDays:"\u9808\u63D0\u524D\u5B89\u6392"},{id:"V017",category:"\u725B\u8C6C\u8089",name:"\u7F8E\u798F",contactInfo:"(02)8791-9688",restDays:"\u516D\u3001\u65E5, \u5207\u8089\u52A01\u5929"},{id:"V018",category:"\u5496\u5561\u8C46",name:"\u4E0A\u7FA4",contactInfo:"(02)2504-2715",restDays:"\u516D\u3001\u65E5"},{id:"V019",category:"\u6D77\u9BAE",name:"\u81FB\u7FD4",contactInfo:"(02)2223-9647",restDays:"\u65E5\u3001\u4E00"},{id:"V020",category:"\u74E6\u65AF",name:"\u9806\u5B89",contactInfo:"(02)2765-7778",restDays:"-"},{id:"V021",category:"\u5E03",name:"\u69AE\u51A0\u5462\u7D68",contactInfo:"022556-6668 \u5468\u69AE\u4E7E 0931-337-876",restDays:"-"},{id:"V022",category:"\u98DF\u6750",name:"\u9F0E\u8000",contactInfo:"APP\u4E0B\u55AE, (02) 2910-6111",restDays:"\u65E5",taxId:"22161107"},{id:"V023",category:"\u9152",name:"\u5C1A\u5FB7",contactInfo:"Line",restDays:"\u516D\u3001\u65E5"},{id:"V024",category:"\u98DF\u6750",name:"COSTCO",contactInfo:"\u81EA\u884C\u63A1\u8CB7",restDays:"-"}]);this.mockPurchaseOrders=w([{id:"PO001",poNumber:"PO-2024-001",vendorId:"V001",date:"2024-08-05",items:[{productName:"\u7279\u7D1A\u521D\u69A8\u6A44\u6B16\u6CB9",quantity:10,unitPrice:350,total:3500},{productName:"\u7FA9\u5927\u5229\u9EB5",quantity:20,unitPrice:80,total:1600}],totalAmount:5100},{id:"PO002",poNumber:"PO-2024-002",vendorId:"V009",date:"2024-08-10",items:[{productName:"\u6CE2\u723E\u591A\u7D05\u9152",quantity:12,unitPrice:800,total:9600},{productName:"\u590F\u5E03\u5229\u767D\u9152",quantity:6,unitPrice:950,total:5700}],totalAmount:15300},{id:"PO003",poNumber:"PO-2024-003",vendorId:"V017",date:"2024-08-12",items:[{productName:"\u7F8E\u570B Prime \u7D1A\u808B\u773C\u725B\u6392",quantity:5,unitPrice:1200,total:6e3}],totalAmount:6e3}]);this.mockProductCosts=w([{id:"PC001",productId:"LIQ-001",productName:"\u544A\u767D",vendorId:"V023",category:"\u9152\u6C34",itemQuantity:700,itemUnit:"ml",totalUnit:"\u74F6",price:280},{id:"PC002",productId:"LIQ-002",productName:"\u73AB\u7470\u5564\u9152",vendorId:"V023",category:"\u9152\u6C34",itemQuantity:700,itemUnit:"ml",totalUnit:"\u74F6",price:420},{id:"PC003",productId:"LIQ-003",productName:"\u6A59\u9152",vendorId:"V023",category:"\u9152\u6C34",itemQuantity:700,itemUnit:"ml",totalUnit:"\u74F6",price:520},{id:"PC004",productId:"LIQ-004",productName:"\u91D1\u8CD3\u5A01\u58EB\u5FCC",vendorId:"V023",category:"\u9152\u6C34",itemQuantity:700,itemUnit:"ml",totalUnit:"\u74F6",price:330},{id:"PC005",productId:"LIQ-005",productName:"\u7259\u8CB7\u52A0\u9EA5\u65AF\u8FA3\u59C6\u9152",vendorId:"V023",category:"\u9152\u6C34",itemQuantity:1e3,itemUnit:"ml",totalUnit:"\u74F6",price:420},{id:"PC006",productId:"LIQ-006",productName:"\u99AC\u4E01\u5C3C\u767D\u9999\u827E\u9152",vendorId:"V023",category:"\u9152\u6C34",itemQuantity:750,itemUnit:"ml",totalUnit:"\u74F6",price:420},{id:"PC007",productId:"LIQ-007",productName:"Kahkua\u5496\u5561\u5229\u53E3\u9152",vendorId:"V023",category:"\u9152\u6C34",itemQuantity:750,itemUnit:"ml",totalUnit:"\u74F6",price:430},{id:"PC013",productId:"FOD-001",productName:"\u5BAE\u4FDD\u96DE\u4E01",vendorId:"V024",category:"\u98DF\u6750",itemQuantity:1200,itemUnit:"g",totalUnit:"\u5305",price:358},{id:"PC014",productId:"FOD-002",productName:"Swiss Delice 72%\u9ED1\u5DE7\u514B\u529B",vendorId:"V024",category:"\u98DF\u6750",itemQuantity:216,itemUnit:"\u9846",totalUnit:"\u5305",price:879},{id:"PC015",productId:"FOD-003",productName:"\u5805\u679C",vendorId:"V024",category:"\u98DF\u6750",itemQuantity:1070,itemUnit:"g",totalUnit:"\u7F50",price:659},{id:"PC016",productId:"LIQ-013",productName:"\u767E\u52A0\u5F97\u862D\u59C6\u9152",vendorId:"V024",category:"\u9152\u6C34",itemQuantity:1e3,itemUnit:"ml",totalUnit:"\u74F6",price:469},{id:"PC017",productId:"LIQ-014",productName:"\u7F8E\u570B\u4F0F\u7279\u52A0",vendorId:"V024",category:"\u9152\u6C34",itemQuantity:1750,itemUnit:"ml",totalUnit:"\u74F6",price:375},{id:"PC018",productId:"LIQ-015",productName:"\u79D1\u514B\u862D\u9F8D\u820C\u862D\u9152",vendorId:"V024",category:"\u9152\u6C34",itemQuantity:1750,itemUnit:"ml",totalUnit:"\u74F6",price:769},{id:"PC019",productId:"LIQ-016",productName:"\u79D1\u514B\u862D\u7434\u9152",vendorId:"V024",category:"\u9152\u6C34",itemQuantity:1750,itemUnit:"ml",totalUnit:"\u74F6",price:495},{id:"PC020",productId:"LIQ-017",productName:"\u9AD8\u767B\u7C89\u7D05\u7434\u9152",vendorId:"V024",category:"\u9152\u6C34",itemQuantity:1e3,itemUnit:"ml",totalUnit:"\u74F6",price:549}]);this.mockWineCosts=w([{id:"W01",vendor:"\u5C1A\u5FB7",productName:"\u544A\u767D",type:"\u767D\u6C23\u6CE1",cost:280,sellingPrice:1100},{id:"W02",vendor:"\u4E5D\u6A3D",productName:"Primo Amore Moscato Delle Venezie IGT \u521D\u6200",type:"\u751C\u767D",cost:450,sellingPrice:1100},{id:"W03",vendor:"\u4E5D\u6A3D",productName:"Francois Confuron Gindre Bourgogne (2020)",type:"\u767D\u9152",cost:1150,sellingPrice:2300},{id:"W04",vendor:"\u4E5D\u6A3D",productName:"Moet & Chandon",type:"\u9999\u6AB3",cost:1650,sellingPrice:3500},{id:"W05",vendor:"\u4E5D\u6A3D",productName:"McManis Cab. Sau (2022)",type:"\u7D05\u9152",cost:550,sellingPrice:1100},{id:"W06",vendor:"\u4E5D\u6A3D",productName:"Botter Cuvee16 Limited Edition Rosso Vino 16\u6A02\u7AE0",type:"\u7D05\u9152",cost:750,sellingPrice:2200},{id:"W07",vendor:"\u4E5D\u6A3D",productName:"Saint-Estephe Calon Segur \u5361\u9686\u8CFD\u683C\u4E09\u8ECD (2015)",type:"\u7D05\u9152",cost:1350,sellingPrice:3e3},{id:"W08",vendor:"\u9152\u9F0E",productName:"Adobe Reserva Sauvignon White (2018)",type:"\u767D\u9152",cost:550,sellingPrice:1600},{id:"W09",vendor:"\u9152\u9F0E",productName:"De Martino Estate Cabernet Sauvignon (2022)",type:"\u7D05\u9152",cost:480,sellingPrice:1800},{id:"W10",vendor:"\u9152\u9F0E",productName:"Adobe Reserva Sauvignon Red (2021)",type:"\u7D05\u9152",cost:550,sellingPrice:1600},{id:"W11",vendor:"\u5409\u591A\u5229",productName:"Santero Dile Moscato sweet\u5929\u4F7F\u4E4B\u624B",type:"\u767D\u6C23\u6CE1",cost:285,sellingPrice:1100},{id:"W12",vendor:"\u5409\u591A\u5229",productName:"Louis Eschenauer 24K Carat Gold Muscat Sparkling",type:"\u767D\u6C23\u6CE1",cost:520,sellingPrice:1600},{id:"W13",vendor:"\u5409\u591A\u5229",productName:"Joly de Tr\xE9buis R\xE9serve Brut Champagne",type:"\u9999\u6AB3",cost:1100,sellingPrice:2800},{id:"W14",vendor:"\u5409\u591A\u5229",productName:"Dark Horse Cabernet Sauvignon",type:"\u7D05\u9152",cost:480,sellingPrice:1450},{id:"W15",vendor:"\u5409\u591A\u5229",productName:"Domaine Viticole de la Ville de Colmar Signature de Colmar Pinot Noir",type:"\u7D05\u9152",cost:630,sellingPrice:1600},{id:"W16",vendor:"\u6DFB\u6F64",productName:"Glendronach \u683C\u862D\u591A\u7D0D12\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1150,sellingPrice:3200},{id:"W17",vendor:"\u6DFB\u6F64",productName:"Aberlour \u4E9E\u4F2F\u6A0212\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1100,sellingPrice:3200},{id:"W18",vendor:"\u6DFB\u6F64",productName:"Laphroaig \u62C9\u4F5B\u683C10\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1050,sellingPrice:3300},{id:"W19",vendor:"\u6DFB\u6F64",productName:"Fettercairn \u8CBB\u7279\u80AF12\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1050,sellingPrice:3300},{id:"W20",vendor:"\u6DFB\u6F64",productName:"Glenfiddich \u683C\u862D\u83F2\u8FEA12\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:950,sellingPrice:3500},{id:"W21",vendor:"\u6DFB\u6F64",productName:"Balvenie \u767E\u5BCC12\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1350,sellingPrice:3800},{id:"W22",vendor:"\u6DFB\u6F64",productName:"Mortlach \u6155\u8D6B12\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1350,sellingPrice:3800},{id:"W23",vendor:"\u6DFB\u6F64",productName:"Dalmore \u5927\u646912\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1396,sellingPrice:3900},{id:"W24",vendor:"\u6DFB\u6F64",productName:"Ardbeg \u96C5\u67CF10\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1350,sellingPrice:3900},{id:"W25",vendor:"\u6DFB\u6F64",productName:"Macallan \u9EA5\u5361\u502B12\u5E74",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1650,sellingPrice:4200},{id:"W26",vendor:"\u6DFB\u6F64",productName:"Hibiki \u97FF",type:"\u8ABF\u548C\u5A01\u58EB\u5FCC",cost:2300,sellingPrice:4900},{id:"W27",vendor:"\u6DFB\u6F64",productName:"Johnnie Walker \u7D04\u7FF0\u8D70\u8DEF \u9ED1\u724C 12\u5E74",type:"\u8ABF\u548C\u5A01\u58EB\u5FCC",cost:750,sellingPrice:2100},{id:"W28",vendor:"\u6DFB\u6F64",productName:"Johnnie Walker \u7D04\u7FF0\u8D70\u8DEFXR 21\u5E74",type:"\u8ABF\u548C\u5A01\u58EB\u5FCC",cost:2390,sellingPrice:4900},{id:"W29",vendor:"\u6DFB\u6F64",productName:"Royal Salute \u7687\u5BB6\u79AE\u70AE",type:"\u8ABF\u548C\u5A01\u58EB\u5FCC",cost:2500,sellingPrice:4900},{id:"W30",vendor:"\u5927\u6469",productName:"\u5927\u646915",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:2300,sellingPrice:5200},{id:"W31",vendor:"\u767E\u5BCC",productName:"\u767E\u5BCC14",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:1850,sellingPrice:4200},{id:"W32",vendor:"\u6155\u8D6B",productName:"\u6155\u8D6B16",type:"\u55AE\u4E00\u9EA5\u82BD\u5A01\u58EB\u5FCC",cost:2300,sellingPrice:4900},{id:"W33",vendor:"\u767E\u5BCC",productName:"\u767E\u9F61\u7F4830",type:"\u8ABF\u548C\u5A01\u58EB\u5FCC",cost:7800,sellingPrice:14e3}]);this.mockCigarCosts=w([{id:"C01",brand:"Allados",productName:"Robusto",size:"5*50",quantityPerBox:20,lishengCost:340,baijiaCost:370,sellingPrice:560},{id:"C02",brand:"Allados",productName:"Toro",size:"6*52",quantityPerBox:20,lishengCost:370,baijiaCost:390,sellingPrice:780},{id:"C03",brand:"Oliva",productName:"Flor De Oliva Robusto",size:"5*50",quantityPerBox:25,lishengCost:255,baijiaCost:285,sellingPrice:520},{id:"C04",brand:"Oliva",productName:"Flor De Oliva Toro",size:"6*50",quantityPerBox:25,lishengCost:270,baijiaCost:300,sellingPrice:580},{id:"C05",brand:"Oliva",productName:"Serie O Robusto",size:"5*50",quantityPerBox:20,lishengCost:375,baijiaCost:405,sellingPrice:750},{id:"C06",brand:"Oliva",productName:"Serie O Corona",size:"6*46",quantityPerBox:20,lishengCost:335,baijiaCost:365,sellingPrice:700},{id:"C07",brand:"Oliva",productName:"Serie V Lancero",size:"7*38",quantityPerBox:24,lishengCost:415,baijiaCost:430,sellingPrice:790},{id:"C08",brand:"Oliva",productName:"Serie V Belicoso",size:"5*54",quantityPerBox:24,lishengCost:415,baijiaCost:445,sellingPrice:800},{id:"C09",brand:"Oliva",productName:"Serie V DBL.Robusto",size:"5*54",quantityPerBox:24,lishengCost:450,baijiaCost:480,sellingPrice:820},{id:"C10",brand:"Oliva",productName:"Serie V DBL. Toro",size:"6*60",quantityPerBox:24,lishengCost:520,baijiaCost:550,sellingPrice:1100},{id:"C11",brand:"Oliva",productName:"Serie V Melanio Figurado",size:"6.5*52",quantityPerBox:10,lishengCost:570,baijiaCost:670,sellingPrice:1480},{id:"C12",brand:"Oliva",productName:"Serie V Melanio Toro",size:"6.5*52",quantityPerBox:10,lishengCost:690,baijiaCost:790,sellingPrice:1600},{id:"C13",brand:"Oliva",productName:"Connecticut Res.PETIT Corona",size:"4*38",quantityPerBox:30,lishengCost:270,baijiaCost:300,sellingPrice:540},{id:"C14",brand:"Oliva",productName:"Master Blender 3 Robusto",size:"5*50",quantityPerBox:20,lishengCost:440,baijiaCost:470,sellingPrice:950},{id:"C15",brand:"Oliva",productName:"Master Blender 3 Torpedo",size:"6.5*52",quantityPerBox:10,lishengCost:490,baijiaCost:520,sellingPrice:1e3},{id:"C16",brand:"Oliva",productName:"Oliva 135\u9031\u5E74\u7D00\u5FF5",size:"5.5*54",quantityPerBox:12,lishengCost:900,baijiaCost:1e3,sellingPrice:2e3},{id:"C17",brand:"Oliva",productName:"Oliva 2024\u9F8D\u5E74\u7CFB\u5217",size:"5.5*60",quantityPerBox:10,lishengCost:900,baijiaCost:1e3,sellingPrice:2e3},{id:"C18",brand:"Oliva",productName:"Serie V Melanio Torpedo",size:"6.5*52",quantityPerBox:10,lishengCost:690,baijiaCost:790,sellingPrice:1600}]);this.itemCategoryMap={\u8CC7\u7522:["\u73FE\u91D1","\u61C9\u6536\u5E33\u6B3E","\u5B58\u8CA8-\u9910\u98F2","\u5B58\u8CA8-\u9152\u6C34","\u5B58\u8CA8-\u96EA\u8304","\u88DD\u6F62","\u62BC\u91D1","\u71DF\u696D\u8A2D\u5099"],\u8CA0\u50B5:["\u61C9\u4ED8\u5E33\u6B3E","\u61C9\u4ED8\u88DD\u6F62\u6B3E","\u61C9\u4ED8\u85AA\u8CC7","\u61C9\u4ED8\u80A1\u6771\u56DE\u994B\u91D1","\u61C9\u4ED8\u96EA\u8304\u9032\u8CA8","\u9280\u884C\u501F\u6B3E"],\u696D\u4E3B\u6B0A\u76CA:["\u8CC7\u672C","\u696D\u4E3B\u5B58\u5165","\u696D\u4E3B\u63D0\u51FA","\u672C\u671F\u640D\u76CA"],\u71DF\u696D\u6536\u5165:["\u92B7\u8CA8\u6536\u5165","\u5176\u4ED6\u6536\u5165","-\u92B7\u6216\u6298\u8B93"],\u71DF\u696D\u8CBB\u7528:["\u85AA\u8CC7\u652F\u51FA","\u5065\u4FDD\u8CBB","\u52DE\u4FDD\u8CBB","\u56DE\u994B\u91D1\u652F\u51FA","\u79DF\u91D1\u652F\u51FA","\u4FDD\u96AA\u8CBB","\u8CB8\u6B3E\u5229\u606F","\u5EDA\u623F\u6D88\u8017\u54C1","\u6587\u5177\u7528\u54C1","\u7DB2\u8DEF\u8CBB","\u96FB\u8A71\u8CBB","\u5927\u6A13\u7BA1\u7406\u8CBB","\u6703\u8A08\u8CBB\u7528","\u734E\u91D1\u652F\u51FA","\u6C34\u8CBB","\u74E6\u65AF\u8CBB","\u96FB\u8CBB","\u50AD\u91D1\u8CBB\u7528","\u8A66\u83DC\u8CBB\u7528","\u62DC\u62DC\u8CBB\u7528","pos\u6A5F\u8CBB\u7528","\u5176\u4ED6\u8CBB\u7528","\u71DF\u696D\u7A05"]};this.mockCustomers=w([{id:"C101",name:"\u6797\u5C0F\u59D0",phone:"0912-345-678",gender:"\u5973\u6027",birthday:"1990-05-20",type:"VIP",points:1250},{id:"C102",name:"\u9673\u5148\u751F",phone:"0987-654-321",gender:"\u7537\u6027",birthday:"1985-11-12",type:"VIP",points:3400},{id:"C103",name:"\u9EC3\u5148\u751F",phone:"0928-111-222",gender:"\u7537\u6027",birthday:"1992-02-28",type:"\u4E00\u822C",points:320},{id:"C104",name:"\u5F35\u5C0F\u59D0",phone:"0933-444-555",gender:"\u5973\u6027",birthday:"1998-08-08",type:"\u4E00\u822C",points:880},{id:"C201",name:"\u5433\u5148\u751F",phone:"0955-666-777",gender:"\u7537\u6027",birthday:"1988-07-15",type:"\u4E00\u822C",points:150},{id:"C202",name:"\u5289\u5C0F\u59D0",phone:"0911-222-333",gender:"\u5973\u6027",birthday:"1995-03-30",type:"\u9ED1\u540D\u55AE",points:0}]);this.mockCustomerFeedback=w([{id:"F001",customerId:"C101",date:"2026-01-21",rating:5,comment:"\u5496\u5561\u5F88\u597D\u559D\uFF0C\u751C\u9EDE\u4E5F\u5F88\u68D2\uFF0C\u74B0\u5883\u8212\u9069\u3002"},{id:"F002",customerId:"C102",date:"2026-01-10",rating:4,comment:"\u5A01\u58EB\u5FCC\u9078\u64C7\u5F88\u591A\uFF0C\u96EA\u8304\u54C1\u8CEA\u4E0D\u932F\uFF0C\u4F46\u50F9\u683C\u504F\u9AD8\u3002"},{id:"F003",customerId:"C103",date:"2026-01-15",rating:5,comment:"\u7D05\u9152\u5F88\u9806\u53E3\uFF0C\u70B8\u7269\u62FC\u76E4\u8D85\u597D\u5403\uFF01"},{id:"F004",customerId:"C101",date:"2026-01-05",rating:4,comment:"\u9910\u9EDE\u597D\u5403\uFF0C\u4F46\u6C23\u6CE1\u98F2\u7684\u6C23\u6709\u9EDE\u4E0D\u8DB3\u3002"}]);this.mockLedger2024=[{date:"2024-01-15",description:"\u7DB2\u7AD9\u958B\u767C\u5C08\u6848 - A\u516C\u53F8",category:"\u92B7\u8CA8\u6536\u5165",income:15e4,expense:0},{date:"2024-01-20",description:"\u8FA6\u516C\u5BA4\u7528\u54C1\u63A1\u8CFC",category:"\u6587\u5177\u7528\u54C1",income:0,expense:4500},{date:"2024-02-10",description:"\u8A2D\u8A08\u670D\u52D9\u8CBB - B\u5BA2\u6236",category:"\u92B7\u8CA8\u6536\u5165",income:225e3,expense:0},{date:"2024-02-22",description:"SaaS \u8EDF\u9AD4\u8A02\u95B1\u8CBB",category:"\u5176\u4ED6\u8CBB\u7528",income:0,expense:6e3},{date:"2024-03-05",description:"\u96F2\u7AEF\u4F3A\u670D\u5668\u8CBB\u7528",category:"\u7DB2\u8DEF\u8CBB",income:0,expense:9e3},{date:"2024-03-18",description:"\u7DAD\u8B77\u5408\u7D04 - C\u516C\u53F8",category:"\u92B7\u8CA8\u6536\u5165",income:186e3,expense:0},{date:"2024-04-12",description:"\u6578\u4F4D\u5EE3\u544A\u6295\u653E",category:"\u884C\u92B7\u8CBB\u7528",income:0,expense:36e3},{date:"2024-04-25",description:"App\u958B\u767C\u5C08\u6848 - D\u5BA2\u6236",category:"\u92B7\u8CA8\u6536\u5165",income:243e3,expense:0},{date:"2024-05-15",description:"\u5916\u5305\u5C08\u6848\u8CBB\u7528",category:"\u50AD\u91D1\u8CBB\u7528",income:0,expense:45e3},{date:"2024-06-20",description:"\u9867\u554F\u670D\u52D9\u8CBB",category:"\u92B7\u8CA8\u6536\u5165",income:279e3,expense:0},{date:"2024-07-01",description:"\u8FA6\u516C\u5BA4\u79DF\u91D1 - Q3",category:"\u79DF\u91D1\u652F\u51FA",income:0,expense:6e4},{date:"2024-08-10",description:"\u7CFB\u7D71\u958B\u767C - E\u516C\u53F8",category:"\u92B7\u8CA8\u6536\u5165",income:165e3,expense:0}];this.mockLedger2025=[{date:"2025-01-15",description:"\u5E74\u5EA6\u7DAD\u8B77\u5408\u7D04 - A\u516C\u53F8",category:"\u92B7\u8CA8\u6536\u5165",income:18e4,expense:0},{date:"2025-01-20",description:"\u63A1\u8CFC\u65B0\u7B46\u96FB",category:"\u71DF\u696D\u8A2D\u5099",income:0,expense:75e3},{date:"2025-02-10",description:"\u54C1\u724C\u8A2D\u8A08\u5C08\u6848 - F\u5BA2\u6236",category:"\u92B7\u8CA8\u6536\u5165",income:255e3,expense:0},{date:"2025-02-22",description:"SaaS \u8EDF\u9AD4\u8A02\u95B1\u8CBB",category:"pos\u6A5F\u8CBB\u7528",income:0,expense:7500},{date:"2025-03-05",description:"\u96F2\u7AEF\u4F3A\u670D\u5668\u8CBB\u7528",category:"\u7DB2\u8DEF\u8CBB",income:0,expense:10500},{date:"2025-04-10",description:"\u6578\u4F4D\u5EE3\u544A\u6295\u653E - Q2",category:"\u884C\u92B7\u8CBB\u7528",income:0,expense:42e3},{date:"2025-05-20",description:"ERP \u7CFB\u7D71\u5C0E\u5165 - G \u516C\u53F8",category:"\u92B7\u8CA8\u6536\u5165",income:35e4,expense:0},{date:"2025-06-15",description:"\u8FA6\u516C\u5BA4\u64F4\u5EFA\u5DE5\u7A0B",category:"\u88DD\u6F62",income:0,expense:15e4},{date:"2025-07-01",description:"\u8FA6\u516C\u5BA4\u79DF\u91D1 - Q3",category:"\u79DF\u91D1\u652F\u51FA",income:0,expense:78e3},{date:"2025-08-18",description:"\u6CD5\u5F8B\u9867\u554F\u8CBB",category:"\u6703\u8A08\u8CBB\u7528",income:0,expense:25e3},{date:"2025-09-25",description:"\u96F2\u7AEF\u5E73\u53F0\u958B\u767C - H \u5BA2\u6236",category:"\u92B7\u8CA8\u6536\u5165",income:42e4,expense:0},{date:"2025-10-05",description:"\u4F3A\u670D\u5668\u786C\u9AD4\u5347\u7D1A",category:"\u71DF\u696D\u8A2D\u5099",income:0,expense:95e3},{date:"2025-11-12",description:"\u884C\u92B7\u6D3B\u52D5\u8CBB\u7528",category:"\u884C\u92B7\u8CBB\u7528",income:0,expense:65e3},{date:"2025-12-20",description:"\u5E74\u5EA6\u734E\u91D1\u767C\u653E",category:"\u734E\u91D1\u652F\u51FA",income:0,expense:25e4}];this.mockLedger2026=[{date:"2026-06-01",description:"VIP\u5305\u5EC2\u670D\u52D9\u8CBB",category:"\u92B7\u8CA8\u6536\u5165",income:88e3,expense:0},{date:"2026-06-05",description:"\u4F01\u696D\u5305\u5834\u6D3B\u52D5",category:"\u92B7\u8CA8\u6536\u5165",income:15e4,expense:0},{date:"2026-06-10",description:"\u7CFB\u7D71\u6574\u5408\u670D\u52D9 - M \u516C\u53F8",category:"\u92B7\u8CA8\u6536\u5165",income:22e4,expense:0},{date:"2026-06-12",description:"\u5834\u5730\u79DF\u8CC3\u6536\u5165",category:"\u5176\u4ED6\u6536\u5165",income:25e3,expense:0},{date:"2026-06-15",description:"\u9867\u5BA2\u8A02\u91D1\u6C92\u6536",category:"\u5176\u4ED6\u6536\u5165",income:5e3,expense:0},{date:"2026-06-20",description:"\u719F\u5BA2\u512A\u60E0\u6298\u8B93",category:"\u92B7\u8CA8\u6298\u8B93",income:12e3,expense:0},{date:"2026-06-02",description:"\u516D\u6708\u4EFD\u8FA6\u516C\u5BA4\u79DF\u91D1",category:"\u79DF\u91D1\u652F\u51FA",income:0,expense:8e4},{date:"2026-06-02",description:"\u516D\u6708\u4EFD\u5927\u6A13\u7BA1\u7406\u8CBB",category:"\u5927\u6A13\u7BA1\u7406\u8CBB",income:0,expense:5e3},{date:"2026-06-05",description:"\u54E1\u5DE5\u85AA\u8CC7",category:"\u85AA\u8CC7\u652F\u51FA",income:0,expense:18e4},{date:"2026-06-05",description:"\u52DE\u5065\u4FDD\u8CBB\u7528",category:"\u52DE\u4FDD\u8CBB",income:0,expense:15e3},{date:"2026-06-05",description:"\u52DE\u5065\u4FDD\u8CBB\u7528",category:"\u5065\u4FDD\u8CBB",income:0,expense:18e3},{date:"2026-06-08",description:"\u6C34\u96FB\u74E6\u65AF\u8CBB",category:"\u6C34\u8CBB",income:0,expense:2500},{date:"2026-06-08",description:"\u6C34\u96FB\u74E6\u65AF\u8CBB",category:"\u96FB\u8CBB",income:0,expense:12e3},{date:"2026-06-08",description:"\u6C34\u96FB\u74E6\u65AF\u8CBB",category:"\u74E6\u65AF\u8CBB",income:0,expense:3500},{date:"2026-06-10",description:"\u96FB\u4FE1\u7DB2\u8DEF\u8CBB",category:"\u7DB2\u8DEF\u8CBB",income:0,expense:2e3},{date:"2026-06-10",description:"\u96FB\u4FE1\u7DB2\u8DEF\u8CBB",category:"\u96FB\u8A71\u8CBB",income:0,expense:1500},{date:"2026-06-12",description:"\u5EDA\u623F\u98DF\u6750\u3001\u7D19\u5DFE\u7B49\u6D88\u8017\u54C1",category:"\u5EDA\u623F\u6D88\u8017\u54C1",income:0,expense:18e3},{date:"2026-06-15",description:"\u5F71\u5370\u7D19\u3001\u7B46\u7B49\u8FA6\u516C\u7528\u54C1",category:"\u6587\u5177\u7528\u54C1",income:0,expense:3e3},{date:"2026-06-18",description:"\u884C\u92B7\u6D3B\u52D5\u50AD\u91D1",category:"\u50AD\u91D1\u8CBB\u7528",income:0,expense:22e3},{date:"2026-06-20",description:"POS\u7CFB\u7D71\u6708\u8CBB",category:"pos\u6A5F\u8CBB\u7528",income:0,expense:5e3},{date:"2026-06-21",description:"\u7AEF\u5348\u7BC0\u62DC\u62DC\u7528\u54C1",category:"\u62DC\u62DC\u8CBB\u7528",income:0,expense:2e3},{date:"2026-06-22",description:"\u65B0\u83DC\u8272\u7814\u767C\u98DF\u6750",category:"\u8A66\u83DC\u8CBB\u7528",income:0,expense:8e3},{date:"2026-06-24",description:"\u71DF\u696D\u7528\u8CA1\u7522\u4FDD\u96AA",category:"\u4FDD\u96AA\u8CBB",income:0,expense:6e3},{date:"2026-06-25",description:"\u6703\u8A08\u5E2B\u8A18\u5E33\u8CBB",category:"\u6703\u8A08\u8CBB\u7528",income:0,expense:8e3},{date:"2026-06-25",description:"\u9280\u884C\u8CB8\u6B3E\u5229\u606F",category:"\u8CB8\u6B3E\u5229\u606F",income:0,expense:12e3}];this.mockPurchases=[{date:"2024-01-18",category:"\u9152\u6C34",amount:12e3},{date:"2024-02-05",category:"\u9910\u98F2",amount:8500},{date:"2024-02-25",category:"\u96EA\u8304",amount:25e3},{date:"2024-03-12",category:"\u9152\u6C34",amount:15e3},{date:"2024-04-20",category:"\u9910\u98F2",amount:9800},{date:"2024-05-10",category:"\u96EA\u8304",amount:32e3},{date:"2024-06-22",category:"\u9152\u6C34",amount:18e3},{date:"2024-07-15",category:"\u9910\u98F2",amount:11e3},{date:"2025-01-22",category:"\u9152\u6C34",amount:16e3},{date:"2025-02-15",category:"\u96EA\u8304",amount:45e3},{date:"2025-03-01",category:"\u9910\u98F2",amount:13500},{date:"2025-04-10",category:"\u9152\u6C34",amount:22e3},{date:"2025-05-15",category:"\u9910\u98F2",amount:15e3},{date:"2025-06-20",category:"\u96EA\u8304",amount:52e3},{date:"2025-08-05",category:"\u9152\u6C34",amount:25e3},{date:"2025-10-18",category:"\u9910\u98F2",amount:18e3},{date:"2025-12-01",category:"\u96EA\u8304",amount:65e3},{date:"2026-01-20",category:"\u9152\u6C34",amount:28e3},{date:"2026-02-18",category:"\u9910\u98F2",amount:25e3},{date:"2026-03-10",category:"\u9910\u98F2",amount:21e3},{date:"2026-03-25",category:"\u96EA\u8304",amount:82e3},{date:"2026-04-25",category:"\u96EA\u8304",amount:75e3},{date:"2026-05-15",category:"\u9152\u6C34",amount:35e3},{date:"2026-06-05",category:"\u9152\u6C34",amount:32e3},{date:"2026-06-12",category:"\u9910\u98F2",amount:28e3},{date:"2026-06-20",category:"\u96EA\u8304",amount:95e3}];this.mockPOSSales=[{transactionId:"T201",customerId:"C101",date:"2026-01-05",items:[{name:"\u4E3B\u98DF",price:350,quantity:2},{name:"\u6C23\u6CE1\u98F2",price:120,quantity:2}],total:940},{transactionId:"T202",customerId:"C102",date:"2026-01-10",items:[{name:"\u5A01\u58EB\u5FCC",price:2800,quantity:1},{name:"\u96EA\u8304",price:900,quantity:2}],total:4600},{transactionId:"T203",customerId:"C103",date:"2026-01-15",items:[{name:"\u7D05\u9152/\u767D\u9152",price:1800,quantity:1},{name:"\u70B8\u7269",price:250,quantity:1}],total:2050},{transactionId:"T204",customerId:"C101",date:"2026-01-20",items:[{name:"\u5496\u5561",price:150,quantity:2},{name:"\u751C\u9EDE",price:180,quantity:2}],total:660},{transactionId:"T205",customerId:"C104",date:"2026-01-25",items:[{name:"\u6D3B\u52D5",price:13e3,quantity:1}],total:13e3},{transactionId:"T301",customerId:"C201",date:"2026-02-03",items:[{name:"\u5564\u9152",price:200,quantity:4},{name:"\u70B8\u7269",price:250,quantity:2}],total:1300},{transactionId:"T302",customerId:"C202",date:"2026-02-12",items:[{name:"\u5A01\u58EB\u5FCC",price:3200,quantity:1}],total:3200},{transactionId:"T303",customerId:"C103",date:"2026-02-18",items:[{name:"\u4E3B\u98DF",price:400,quantity:1},{name:"\u8336\u98F2",price:130,quantity:1}],total:530},{transactionId:"T304",customerId:"C201",date:"2026-02-25",items:[{name:"\u96EA\u8304",price:1200,quantity:1}],total:1200},{transactionId:"T401",customerId:"C104",date:"2026-03-05",items:[{name:"\u5834\u5730\u4F7F\u7528\u8CBB",price:4e3,quantity:1}],total:4e3},{transactionId:"T402",customerId:"C101",date:"2026-03-10",items:[{name:"\u8ABF\u9152",price:450,quantity:2},{name:"\u55AE\u9EDE",price:300,quantity:1}],total:1200},{transactionId:"T403",customerId:"C102",date:"2026-03-20",items:[{name:"\u5A01\u58EB\u5FCC",price:2500,quantity:1},{name:"\u96EA\u8304",price:850,quantity:3}],total:5050},{transactionId:"T404",customerId:"C101",date:"2026-03-28",items:[{name:"\u4E0B\u5348\u8336\u5957\u9910",price:600,quantity:2}],total:1200},{transactionId:"T501",customerId:"C104",date:"2026-04-02",items:[{name:"\u5834\u5730\u4F7F\u7528\u8CBB",price:15e3,quantity:1}],total:15e3},{transactionId:"T502",customerId:"C101",date:"2026-04-10",items:[{name:"\u4E3B\u98DF",price:380,quantity:2},{name:"\u7D05\u9152/\u767D\u9152",price:2200,quantity:1}],total:2960},{transactionId:"T503",customerId:"C103",date:"2026-04-22",items:[{name:"\u96EA\u8304",price:1100,quantity:2}],total:2200}];this.productCategoryMap=new Map([["\u5834\u5730\u4F7F\u7528\u8CBB","\u6D3B\u52D5\u5834\u5730"],["\u6D3B\u52D5","\u6D3B\u52D5\u5834\u5730"],["\u8ABF\u9152","\u9152\u6C34"],["\u7D05\u9152/\u767D\u9152","\u9152\u6C34"],["\u5564\u9152","\u9152\u6C34"],["\u5A01\u58EB\u5FCC","\u9152\u6C34"],["\u4E3B\u98DF","\u9910\u98F2"],["\u70B8\u7269","\u9910\u98F2"],["\u5976\u6614","\u9910\u98F2"],["\u6C23\u6CE1\u98F2","\u9910\u98F2"],["\u55AE\u9EDE","\u9910\u98F2"],["\u8336\u98F2","\u9910\u98F2"],["\u8C9D\u679C/\u53EF\u980C","\u9910\u98F2"],["\u5496\u5561","\u9910\u98F2"],["\u751C\u9EDE","\u9910\u98F2"],["\u6C99\u62C9","\u9910\u98F2"],["\u4E0B\u5348\u8336\u5957\u9910","\u9910\u98F2"],["\u96EA\u8304","\u96EA\u8304"]]);this.mockCostRateMap=new Map([["\u6D3B\u52D5\u5834\u5730",.1],["\u9152\u6C34",.35],["\u9910\u98F2",.25],["\u96EA\u8304",.55]]);this.mockMonthlyBalanceSheetData2026={assets:{\u73FE\u91D1:{"2026-01":-60372,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u61C9\u6536\u5E33\u6B3E:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},"\u5B58\u8CA8-\u9910\u98F2":{"2026-01":42459,"2026-02":56424,"2026-03":63318,"2026-04":53737,"2026-05":41714,"2026-06":62941,"2026-07":55331,"2026-08":57454,"2026-09":42199,"2026-10":88353,"2026-11":56195,"2026-12":70131},"\u5B58\u8CA8-\u9152\u6C34":{"2026-01":4561,"2026-02":51162,"2026-03":28630,"2026-04":51807,"2026-05":26140,"2026-06":7117,"2026-07":5707,"2026-08":23549,"2026-09":40217,"2026-10":80083,"2026-11":38428,"2026-12":13344},"\u5B58\u8CA8-\u96EA\u8304":{"2026-01":106380,"2026-02":114733,"2026-03":150810,"2026-04":112936,"2026-05":79912,"2026-06":91653,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u88DD\u6F62:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":1700030,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u62BC\u91D1:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u71DF\u696D\u8A2D\u5099:{"2026-01":20472,"2026-02":9694,"2026-03":4235,"2026-04":25624,"2026-05":25084,"2026-06":1044,"2026-07":770,"2026-08":2876,"2026-09":6678,"2026-10":25840,"2026-11":5444,"2026-12":1589}},liabilities:{\u61C9\u4ED8\u5E33\u6B3E:{"2026-01":-116791,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u61C9\u4ED8\u88DD\u6F62\u6B3E:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":-34e4,"2026-07":-34e4,"2026-08":-34e4,"2026-09":-34e4,"2026-10":-26e4,"2026-11":0,"2026-12":0},\u61C9\u4ED8\u85AA\u8CC7:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":-73145,"2026-08":-53145,"2026-09":-38145,"2026-10":0,"2026-11":-67145,"2026-12":-50145},\u61C9\u4ED8\u80A1\u6771\u56DE\u994B\u91D1:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":-21181,"2026-09":-1830,"2026-10":0,"2026-11":0,"2026-12":0},\u61C9\u4ED8\u96EA\u8304\u9032\u8CA8:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":-99275,"2026-07":-78270,"2026-08":-224230,"2026-09":-113975,"2026-10":-118535,"2026-11":-71145,"2026-12":-66350},\u9280\u884C\u501F\u6B3E:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":2e6,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0}},equity:{\u8CC7\u672C:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u696D\u4E3B\u5B58\u5165:{"2026-01":0,"2026-02":3e5,"2026-03":15e4,"2026-04":5e4,"2026-05":1e5,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u696D\u4E3B\u63D0\u51FA:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0}}};this.mockMonthlyIncomeStatementData2026={revenue:{\u92B7\u8CA8\u6536\u5165:{"2026-01":515140,"2026-02":347057,"2026-03":327890,"2026-04":261350,"2026-05":256858,"2026-06":187580,"2026-07":200710,"2026-08":308020,"2026-09":224550,"2026-10":504140,"2026-11":236815,"2026-12":340853},\u5176\u4ED6\u6536\u5165:{"2026-01":100,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":27677,"2026-07":636,"2026-08":25e3,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u92B7\u8CA8\u6298\u8B93:{"2026-01":-111972,"2026-02":-84928,"2026-03":-59978,"2026-04":-58915,"2026-05":-35331,"2026-06":-29417,"2026-07":-22367,"2026-08":-30058,"2026-09":-36237,"2026-10":-55599,"2026-11":-22119,"2026-12":-35978}},expenses:{\u85AA\u8CC7\u652F\u51FA:{"2026-01":-117806,"2026-02":-97814,"2026-03":-110799,"2026-04":-105507,"2026-05":-110155,"2026-06":-109977,"2026-07":-25718,"2026-08":-52922,"2026-09":-70688,"2026-10":-95017,"2026-11":-35040,"2026-12":-37492},\u5065\u4FDD\u8CBB:{"2026-01":0,"2026-02":-2368,"2026-03":-2368,"2026-04":-2368,"2026-05":-2373,"2026-06":-2368,"2026-07":-2368,"2026-08":-2368,"2026-09":-2368,"2026-10":-2368,"2026-11":-2368,"2026-12":0},\u52DE\u4FDD\u8CBB:{"2026-01":-4447,"2026-02":-8883,"2026-03":-5382,"2026-04":-15787,"2026-05":-5138,"2026-06":-4827,"2026-07":-4827,"2026-08":-4827,"2026-09":-4827,"2026-10":-4827,"2026-11":-4827,"2026-12":-4827},\u56DE\u994B\u91D1\u652F\u51FA:{"2026-01":-1654,"2026-02":-1581,"2026-03":-1623,"2026-04":-3320,"2026-05":-9792,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":-15e3,"2026-12":0},\u79DF\u91D1\u652F\u51FA:{"2026-01":-72425,"2026-02":-72425,"2026-03":-72425,"2026-04":-72425,"2026-05":-72425,"2026-06":-72425,"2026-07":-72425,"2026-08":-72410,"2026-09":-72410,"2026-10":-72410,"2026-11":-72410,"2026-12":-72410},\u4FDD\u96AA\u8CBB:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":-21297,"2026-12":0},\u8CB8\u6B3E\u5229\u606F:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":-3824,"2026-07":-3824,"2026-08":-3824,"2026-09":-3824,"2026-10":-3824,"2026-11":-3824,"2026-12":-3824},\u5EDA\u623F\u6D88\u8017\u54C1:{"2026-01":-596,"2026-02":-834,"2026-03":-79,"2026-04":-3002,"2026-05":0,"2026-06":0,"2026-07":-641,"2026-08":-300,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":-1293},\u6587\u5177\u7528\u54C1:{"2026-01":-266,"2026-02":-590,"2026-03":-1263,"2026-04":-9358,"2026-05":-149,"2026-06":-1255,"2026-07":-207,"2026-08":-953,"2026-09":-152,"2026-10":-163,"2026-11":-1989,"2026-12":-621},\u7DB2\u8DEF\u8CBB:{"2026-01":-4794,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":-4794,"2026-06":0,"2026-07":-2397,"2026-08":0,"2026-09":0,"2026-10":-2553,"2026-11":-2302,"2026-12":-1344},\u96FB\u8A71\u8CBB:{"2026-01":0,"2026-02":-334,"2026-03":-1302,"2024-04":-338,"2026-05":-369,"2026-06":-359,"2026-07":-330,"2026-08":-316,"2026-09":-328,"2026-10":-310,"2026-11":-357,"2026-12":-340},\u5927\u6A13\u7BA1\u7406\u8CBB:{"2026-01":-1400,"2026-02":-1400,"2026-03":-1400,"2026-04":0,"2026-05":0,"2026-06":-1400,"2026-07":-1400,"2026-08":0,"2026-09":0,"2026-10":-1400,"2026-11":-1400,"2026-12":0},\u6703\u8A08\u8CBB\u7528:{"2026-01":0,"2026-02":-14730,"2026-03":-4e3,"2026-04":0,"2026-05":-4162,"2026-06":0,"2026-07":-4e3,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u734E\u91D1\u652F\u51FA:{"2026-01":0,"2026-02":-3e3,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u6C34\u8CBB:{"2026-01":-709,"2026-02":0,"2026-03":-696,"2026-04":0,"2026-05":-599,"2026-06":0,"2026-07":-525,"2026-08":0,"2026-09":-578,"2026-10":0,"2026-11":-1218,"2026-12":0},\u74E6\u65AF\u8CBB:{"2026-01":-300,"2026-02":0,"2026-03":0,"2026-04":-300,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":-2100,"2026-10":-600,"2026-11":-300,"2026-12":-1540},\u96FB\u8CBB:{"2026-01":0,"2026-02":-8811,"2026-03":-807,"2026-04":0,"2026-05":0,"2026-06":-12543,"2026-07":0,"2026-08":-24358,"2026-09":0,"2026-10":-24920,"2026-11":0,"2026-12":-14417},\u50AD\u91D1\u8CBB\u7528:{"2026-01":0,"2026-02":0,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":-3e3},\u8A66\u83DC\u8CBB\u7528:{"2026-01":-10530,"2026-02":-1070,"2026-03":-1403,"2026-04":0,"2026-05":0,"2026-06":-225,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u62DC\u62DC\u8CBB\u7528:{"2026-01":-3744,"2026-02":-6043,"2026-03":-1174,"2026-04":-838,"2026-05":-554,"2026-06":-1228,"2026-07":-608,"2026-08":-1258,"2026-09":-1216,"2026-10":-1216,"2026-11":-585,"2026-12":-806},pos\u6A5F\u8CBB\u7528:{"2026-01":0,"2026-02":-11700,"2026-03":0,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":0,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":0,"2026-12":0},\u5176\u4ED6\u8CBB\u7528:{"2026-01":-2030,"2026-02":-3058,"2026-03":-3570,"2026-04":0,"2026-05":-25418,"2026-06":-13010,"2026-07":-6445,"2026-08":-154,"2026-09":-1302,"2026-10":-6413,"2026-11":-1e3,"2026-12":-13126},\u71DF\u696D\u7A05:{"2026-01":0,"2026-02":0,"2026-03":-8421,"2026-04":0,"2026-05":0,"2026-06":0,"2026-07":-4915,"2026-08":0,"2026-09":0,"2026-10":0,"2026-11":-22930,"2026-12":0}}};this.mockProductGrossMarginReport={summary:{dining:{totalPurchases:830062,totalSales:1380391,grossMargin:550329,grossMarginRate:.3987},drinks:{totalPurchases:530800,totalSales:694780,grossMargin:163980,grossMarginRate:.236},cigars:{totalPurchases:1805360,totalSales:1540438,grossMargin:-264922,grossMarginRate:-.172},venue:{totalPurchases:0,totalSales:182029,grossMargin:182029,grossMarginRate:1},total:{totalPurchases:3166222,totalSales:3797638,grossMargin:631416,grossMarginRate:.1663}},monthlySales:[{month:"2024/12",dining:146413,drinks:68599,cigars:204111,venue:13803,total:432926},{month:"2025/01",dining:124145,drinks:75691,cigars:255082,venue:29027,total:483945},{month:"2025/02",dining:123697,drinks:93814,cigars:113903,venue:0,total:331414},{month:"2025/03",dining:107608,drinks:93526,cigars:108304,venue:4e3,total:313438},{month:"2025/04",dining:67319,drinks:43300,cigars:93588,venue:15e3,total:219207},{month:"2025/05",dining:80167,drinks:61613,cigars:91433,venue:9200,total:242413},{month:"2025/06",dining:62494,drinks:43842,cigars:63987,venue:9800,total:180123},{month:"2025/07",dining:76245,drinks:33652,cigars:70805,venue:5200,total:185902},{month:"2025/08",dining:85648,drinks:43609,cigars:135206,venue:19830,total:284293},{month:"2025/09",dining:80056,drinks:19128,cigars:74615,venue:30014,total:203813},{month:"2025/10",dining:223439,drinks:42130,cigars:146027,venue:20400,total:431996},{month:"2025/11",dining:74051,drinks:50992,cigars:75018,venue:18545,total:218606},{month:"2025/12",dining:129109,drinks:24884,cigars:108359,venue:7210,total:269562}]};this.mockShareholderRebates=w([{name:"\u8D85\u9716",currentMonthRebate:0,unpaidRebate:0,cumulativeRebate:0},{name:"\u9673\u7D39\u9293",currentMonthRebate:0,unpaidRebate:0,cumulativeRebate:0},{name:"\u65ED\u5049",currentMonthRebate:0,unpaidRebate:0,cumulativeRebate:4890},{name:"\u5A01\u81E3",currentMonthRebate:0,unpaidRebate:0,cumulativeRebate:0},{name:"\u912D\u51F1\u6587",currentMonthRebate:0,unpaidRebate:0,cumulativeRebate:0},{name:"\u967D\u653F\u9054",currentMonthRebate:0,unpaidRebate:0,cumulativeRebate:0},{name:"\u55AC\u5982",currentMonthRebate:500,unpaidRebate:1e3,cumulativeRebate:45e3},{name:"\u555F\u5E06",currentMonthRebate:15604,unpaidRebate:120,cumulativeRebate:77980},{name:"\u7D04\u745F\u592B",currentMonthRebate:0,unpaidRebate:0,cumulativeRebate:0},{name:"\u5F90\u5049\u502B",currentMonthRebate:15530,unpaidRebate:1523,cumulativeRebate:44987},{name:"Scott",currentMonthRebate:3662,unpaidRebate:2300,cumulativeRebate:11900},{name:"Kevin Lin",currentMonthRebate:0,unpaidRebate:0,cumulativeRebate:0},{name:"\u5967\u65AF\u4E01",currentMonthRebate:0,unpaidRebate:0,cumulativeRebate:0}]);this.mockRebateTransactions=w([{id:"RT001",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/03 20:30:06",discountDetails:"830",invoiceAmount:20,rebatePercentage:10,rebateAmount:2,discountUsed:"\u8CB4\u5BA2\u6298\u6263"},{id:"RT002",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/06 20:36:36",discountDetails:"1000",invoiceAmount:9440,rebatePercentage:10,rebateAmount:944,discountUsed:"\u7121"},{id:"RT003",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/06 23:53:24",discountDetails:"0",invoiceAmount:350,rebatePercentage:10,rebateAmount:35,discountUsed:"\u7121"},{id:"RT004",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/07 00:25:37",discountDetails:"1440",invoiceAmount:4200,rebatePercentage:10,rebateAmount:420,discountUsed:"\u7121"},{id:"RT005",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/07 00:44:37",discountDetails:"0",invoiceAmount:2800,rebatePercentage:10,rebateAmount:280,discountUsed:"\u7121"},{id:"RT006",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/08 01:19:31",discountDetails:"0",invoiceAmount:14560,rebatePercentage:10,rebateAmount:1456,discountUsed:"\u7121"},{id:"RT007",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/14 23:56:26",discountDetails:"400",invoiceAmount:2150,rebatePercentage:10,rebateAmount:215,discountUsed:"\u7121"},{id:"RT008",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/20 23:26:36",discountDetails:"97",invoiceAmount:873,rebatePercentage:10,rebateAmount:87,discountUsed:"\u7121"},{id:"RT009",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/21 00:06:36",discountDetails:"190",invoiceAmount:1710,rebatePercentage:10,rebateAmount:171,discountUsed:"\u7121"},{id:"RT010",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/21 22:50:01",discountDetails:"0",invoiceAmount:830,rebatePercentage:10,rebateAmount:83,discountUsed:"\u7121"},{id:"RT011",shareholderName:"\u555F\u5E06",checkoutTime:"2025/12/21 22:51:31",discountDetails:"1612",invoiceAmount:9138,rebatePercentage:5,rebateAmount:456,discountUsed:"\u9EC3\u91D1\u6703\u54E1 \u6574\u76D2\u96EA\u830485\u6298"},{id:"RT012",shareholderName:"\u555F\u5E06",checkoutTime:"2025/11/15 19:45:10",discountDetails:"500",invoiceAmount:5e3,rebatePercentage:10,rebateAmount:500,discountUsed:"\u7121"},{id:"RT013",shareholderName:"\u5F90\u5049\u502B",checkoutTime:"2025/12/10 21:00:00",discountDetails:"0",invoiceAmount:12e3,rebatePercentage:10,rebateAmount:1200,discountUsed:"\u7121"}])}getFilteredLedger(e,t){let i=[...this.mockLedger2024,...this.mockLedger2025,...this.mockLedger2026];return!e&&!t?i:i.filter(r=>{let o=r.date,s=e?o>=e:!0,a=t?o<=t:!0;return s&&a})}getFilteredPurchases(e,t){return!e&&!t?this.mockPurchases:this.mockPurchases.filter(i=>{let r=i.date,o=e?r>=e:!0,s=t?r<=t:!0;return o&&s})}getFilteredPOSSales(e,t,i){let r=this.mockPOSSales;return i&&(r=r.filter(o=>o.customerId===i)),!e&&!t?r:r.filter(o=>{let s=o.date,a=e?s>=e:!0,l=t?s<=t:!0;return a&&l})}getFinancialSummary(e,t){let i=this.getFilteredLedger(e,t),r=i.filter(E=>E.category!=="\u92B7\u8CA8\u6298\u8B93").reduce((E,b)=>E+b.income,0),o=i.filter(E=>E.category==="\u92B7\u8CA8\u6298\u8B93").reduce((E,b)=>E+b.income,0),s=r-o,a=i.reduce((E,b)=>E+b.expense,0),l=s-a,m=this.getFilteredPurchases(e,t).reduce((E,b)=>E+b.amount,0),y=1e6+l,v=3e5,_=y-v;return{totalRevenue:s,totalExpenses:a,netIncome:l,totalAssets:y,totalLiabilities:v,equity:_,totalPurchases:m,totalAllowance:o}}getPOSSales(e,t,i){return this.getFilteredPOSSales(e,t,i)}getMonthlyPerformance(e,t){let i=new Map;return this.getFilteredLedger(e,t).forEach(o=>{let s=o.date.substring(0,7);i.has(s)||i.set(s,{revenue:0,expenses:0,accountsPayable:0});let a=i.get(s);o.category==="\u92B7\u8CA8\u6298\u8B93"?a.revenue-=o.income:a.revenue+=o.income,a.expenses+=o.expense,a.accountsPayable=a.expenses*.4+a.revenue*.05}),Array.from(i.keys()).sort().map(o=>N({month:o},i.get(o)))}getExpensesByCategory(e,t){let i=new Map;return this.getFilteredLedger(e,t).forEach(o=>{o.expense>0&&o.category!=="\u8CC7\u672C\u652F\u51FA"&&i.set(o.category,(i.get(o.category)||0)+o.expense)}),Array.from(i.entries()).map(([o,s])=>({category:o,amount:s}))}getPurchasesByCategory(e,t){let i=new Map;return this.getFilteredPurchases(e,t).forEach(o=>{i.set(o.category,(i.get(o.category)||0)+o.amount)}),Array.from(i.entries()).map(([o,s])=>({category:o,amount:s}))}getTopSellingProducts(e,t){let i=new Map;return this.getFilteredPOSSales(e,t).forEach(r=>{r.items.forEach(o=>{let s=i.get(o.name)||{quantitySold:0,revenue:0};s.quantitySold+=o.quantity,s.revenue+=o.price*o.quantity,i.set(o.name,s)})}),Array.from(i.entries()).map(([r,o])=>N({name:r},o)).sort((r,o)=>o.revenue-r.revenue).slice(0,5)}getFilteredPOSSalesByMonth(e,t){return!e&&!t?this.mockPOSSales:this.mockPOSSales.filter(i=>{let r=i.date.substring(0,7),o=e?r>=e:!0,s=t?r<=t:!0;return o&&s})}getAllProductsAnalysis(e,t){let i=new Map,r=this.getFilteredPOSSalesByMonth(e,t),o=r.reduce((s,a)=>s+a.total,0);return r.forEach(s=>{s.items.forEach(a=>{let l=i.get(a.name)||{quantitySold:0,revenue:0,prices:[]};l.quantitySold+=a.quantity,l.revenue+=a.price*a.quantity,l.prices.push(a.price),i.set(a.name,l)})}),i.size===0?[]:Array.from(i.entries()).map(([s,a])=>{let l=a.prices.length>0?a.prices.reduce((m,y)=>m+y,0)/a.prices.length:0,f=o>0?a.revenue/o*100:0;return{name:s,category:this.productCategoryMap.get(s)||"\u5176\u4ED6",quantitySold:a.quantitySold,revenue:a.revenue,avgPrice:l,revenueShare:f}}).sort((s,a)=>a.revenue-s.revenue)}getProductAnalysisReport(e,t){let i=this.getFilteredPOSSalesByMonth(e,t);if(i.length===0)return null;let r=[...new Set(i.map(_=>_.date.substring(0,7)))].sort(),o=new Map,s=new Map;r.forEach(_=>s.set(_,{revenue:0}));for(let _ of i){let E=_.date.substring(0,7);s.get(E).revenue+=_.total;for(let b of _.items){o.has(b.name)||o.set(b.name,{category:this.productCategoryMap.get(b.name)||"\u5176\u4ED6",totalRevenue:0,totalQuantity:0,monthly:new Map});let A=o.get(b.name),M=b.price*b.quantity;A.totalRevenue+=M,A.totalQuantity+=b.quantity,A.monthly.has(E)||A.monthly.set(E,{revenue:0,quantity:0});let O=A.monthly.get(E);O.revenue+=M,O.quantity+=b.quantity}}let a=Array.from(s.values()).reduce((_,E)=>_+E.revenue,0);if(a===0)return null;let l=Array.from(o.entries()).map(([_,E])=>{let b={};for(let A of r){let M=E.monthly.get(A),O=s.get(A).revenue,L=this.mockCostRateMap.get(E.category)||0;b[A]={quantitySold:M?.quantity||0,revenue:M?.revenue||0,revenueShare:O>0?(M?.revenue||0)/O*100:0,costRate:L>0?L+(Math.random()-.5)*.1:0}}return{name:_,category:E.category,totalRevenue:E.totalRevenue,totalQuantity:E.totalQuantity,totalRevenueShare:E.totalRevenue/a*100,monthlyMetrics:b}}),f=["\u6D3B\u52D5\u5834\u5730","\u9152\u6C34","\u9910\u98F2","\u96EA\u8304"],m=[];for(let _ of f){let E=l.filter(O=>O.category===_).sort((O,L)=>L.totalRevenue-O.totalRevenue);if(E.length===0)continue;let b={};for(let O of r){let L=E.reduce((te,be)=>te+be.monthlyMetrics[O].quantitySold,0),G=E.reduce((te,be)=>te+be.monthlyMetrics[O].revenue,0),Q=s.get(O).revenue,re=E.reduce((te,be)=>te+be.monthlyMetrics[O].revenue*be.monthlyMetrics[O].costRate,0);b[O]={quantitySold:L,revenue:G,revenueShare:Q>0?G/Q*100:0,costRate:G>0?re/G:0}}let A=E.reduce((O,L)=>O+L.totalRevenue,0),M={name:"\u5C0F\u8A08",category:_,totalRevenue:A,totalQuantity:E.reduce((O,L)=>O+L.totalQuantity,0),totalRevenueShare:A/a*100,monthlyMetrics:b};m.push({category:_,products:E,subtotal:M})}let y={};for(let _ of r){let E=s.get(_).revenue,b=m.reduce((A,M)=>A+M.subtotal.monthlyMetrics[_].revenue*M.subtotal.monthlyMetrics[_].costRate,0);y[_]={quantitySold:m.reduce((A,M)=>A+M.subtotal.monthlyMetrics[_].quantitySold,0),revenue:E,revenueShare:100,costRate:E>0?b/E:0}}let v={name:"\u7E3D\u8A08",category:"",totalRevenue:a,totalQuantity:m.reduce((_,E)=>_+E.subtotal.totalQuantity,0),totalRevenueShare:100,monthlyMetrics:y};return{months:r,categoryGroups:m,grandTotal:v}}getIncomeStatement(e,t){let i=this.getFilteredLedger(e,t),r=new Map,o=new Map;i.forEach(y=>{y.income>0&&r.set(y.category,(r.get(y.category)||0)+y.income),y.expense>0&&o.set(y.category,(o.get(y.category)||0)+y.expense)});let s=r.get("\u92B7\u8CA8\u6536\u5165")||0,a=r.get("\u5176\u4ED6\u6536\u5165")||0,l=r.get("\u92B7\u8CA8\u6298\u8B93")||0,f={items:[{account:"\u92B7\u8CA8\u6536\u5165",amount:s},{account:"\u5176\u4ED6\u6536\u5165",amount:a},{account:"\u92B7\u8CA8\u6298\u8B93",amount:-l}],total:s+a-l},m={items:Array.from(o.entries()).map(([y,v])=>({account:y,amount:v})).sort((y,v)=>v.amount-y.amount),total:Array.from(o.values()).reduce((y,v)=>y+v,0)};return{operatingRevenue:f,operatingExpenses:m,netIncome:f.total-m.total}}getBalanceSheet(e,t){let i=this.getIncomeStatement(e,t),r=i.netIncome,o=this.getFilteredPurchases(e,t),a={items:[{account:"\u73FE\u91D1",amount:5e5+r},{account:"\u61C9\u6536\u5E33\u6B3E",amount:i.operatingRevenue.total*.15},{account:"\u5B58\u8CA8-\u9910\u98F2",amount:o.filter(_=>_.category==="\u9910\u98F2").reduce((_,E)=>_+E.amount,0)*.4},{account:"\u5B58\u8CA8-\u9152\u6C34",amount:o.filter(_=>_.category==="\u9152\u6C34").reduce((_,E)=>_+E.amount,0)*.5},{account:"\u5B58\u8CA8-\u96EA\u8304",amount:o.filter(_=>_.category==="\u96EA\u8304").reduce((_,E)=>_+E.amount,0)*.6},{account:"\u88DD\u6F62",amount:12e5},{account:"\u62BC\u91D1",amount:15e4},{account:"\u71DF\u696D\u8A2D\u5099",amount:45e4}],total:0};a.total=a.items.reduce((_,E)=>_+E.amount,0);let l={items:[{account:"\u61C9\u4ED8\u5E33\u6B3E",amount:i.operatingExpenses.total*.3},{account:"\u61C9\u4ED8\u88DD\u6F62\u6B3E",amount:25e4},{account:"\u61C9\u4ED8\u85AA\u8CC7",amount:45e3},{account:"\u61C9\u4ED8\u80A1\u6771\u56DE\u994B\u91D1",amount:15e3},{account:"\u61C9\u4ED8\u96EA\u8304\u9032\u8CA8",amount:35e3},{account:"\u9280\u884C\u501F\u6B3E",amount:8e5}],total:0};l.total=l.items.reduce((_,E)=>_+E.amount,0);let f={items:[{account:"\u8CC7\u672C",amount:1e6},{account:"\u696D\u4E3B\u5B58\u5165",amount:5e4},{account:"\u696D\u4E3B\u63D0\u51FA",amount:-2e4},{account:"\u672C\u671F\u640D\u76CA",amount:r}],total:0};f.total=f.items.reduce((_,E)=>_+E.amount,0);let m=l.total+f.total,y=a.total-m,v=f.items.find(_=>_.account==="\u8CC7\u672C");return v&&(v.amount+=y,f.total+=y),{assets:a,liabilities:l,equity:f,totalLiabilitiesAndEquity:a.total}}getMonthlyBalanceSheetReport(e,t){if(e!==2026)return null;let i=this.mockMonthlyBalanceSheetData2026,r=`${e}-`,o=Array.from({length:12},(_,E)=>r+String(E+1).padStart(2,"0")),s;if(t==="all")s=o;else{let _=(t-1)*3+1;s=o.slice(_-1,_+2)}let a=_=>{let E=[],b={};for(let M in _){let O=_[M],L=O[s[s.length-1]]||0;E.push({account:M,monthlyAmounts:O,total:L,percentage:0})}for(let M of o)b[M]=E.reduce((O,L)=>O+(L.monthlyAmounts[M]||0),0);let A=b[s[s.length-1]]||0;return{items:E,monthlyTotals:b,grandTotal:A}},l=a(i.assets),f=a(i.liabilities),m=a(i.equity);l.grandTotal!==0&&l.items.forEach(_=>_.percentage=_.total/l.grandTotal*100);let y=f.grandTotal+m.grandTotal;y!==0&&(f.items.forEach(_=>_.percentage=_.total/y*100),m.items.forEach(_=>_.percentage=_.total/y*100));let v={items:[],monthlyTotals:{},grandTotal:y};for(let _ of o)v.monthlyTotals[_]=(f.monthlyTotals[_]||0)+(m.monthlyTotals[_]||0);return{months:s,assets:l,liabilities:f,equity:m,totalLiabilitiesAndEquity:v}}getMonthlyIncomeStatementReport(e,t){if(e!==2026)return null;let i=this.mockMonthlyIncomeStatementData2026,r=`${e}-`,o=Array.from({length:12},(y,v)=>r+String(v+1).padStart(2,"0")),s;if(t==="all")s=o;else{let y=(t-1)*3+1;s=o.slice(y-1,y+2)}let a=y=>{let v=[],_={};for(let b in y){let A=y[b],M=s.reduce((O,L)=>O+(A[L]||0),0);v.push({account:b,monthlyAmounts:A,total:M,percentage:0})}for(let b of o)_[b]=v.reduce((A,M)=>A+(M.monthlyAmounts[b]||0),0);let E=s.reduce((b,A)=>b+(_[A]||0),0);return E!==0&&v.forEach(b=>b.percentage=b.total/E*100),{items:v,monthlyTotals:_,grandTotal:E}},l=a(i.revenue),f=a(i.expenses),m={monthlyTotals:{},grandTotal:l.grandTotal+f.grandTotal};for(let y of o)m.monthlyTotals[y]=(l.monthlyTotals[y]||0)+(f.monthlyTotals[y]||0);return{months:s,operatingRevenue:l,operatingExpenses:f,netIncome:m}}getTransactions(e){let t=this.mockTransactions();if(e.startDate&&(t=t.filter(i=>i.date>=e.startDate)),e.endDate&&(t=t.filter(i=>i.date<=e.endDate)),e.item&&(t=t.filter(i=>i.item===e.item)),e.category&&(t=t.filter(i=>i.category===e.category)),e.vendorName&&(t=t.filter(i=>i.vendorName===e.vendorName)),e.description){let i=e.description.toLowerCase();t=t.filter(r=>r.description?.toLowerCase().includes(i))}return t}addTransaction(e){let t=q(N({},e),{id:`TXN${Date.now()}`});this.mockTransactions.update(i=>[...i,t])}updateTransaction(e){this.mockTransactions.update(t=>t.map(i=>i.id===e.id?e:i))}getLedgerFilterOptions(){let e=this.mockTransactions(),t=[...new Set(e.map(o=>o.item))],i=[...new Set(e.map(o=>o.category))],r=[...new Set(e.map(o=>o.vendorName).filter(o=>!!o))];return{items:t.sort(),categories:i.sort(),vendorNames:r.sort()}}getEvents(){return this.mockEvents()}getEventById(e){return this.mockEvents().find(t=>t.id===e)}addEvent(e){let t=q(N({},e),{id:`EVT${Date.now()}`});this.mockEvents.update(i=>[...i,t])}updateEvent(e){this.mockEvents.update(t=>t.map(i=>i.id===e.id?e:i))}deleteEvent(e){this.mockEvents.update(t=>t.filter(i=>i.id!==e))}getDailyRevenueReport(e,t){let i=new Date(e,t-1,1),o=new Date(e,t,0).getDate(),s=`${e}-${String(t).padStart(2,"0")}`,a=[];for(let l=1;l<=o;l++){let f=`${s}-${String(l).padStart(2,"0")}`,m=this.mockDailyRevenue().find(b=>b.date===f)||{date:f,nonEventRevenue:0,isDayOff:!1},y=this.mockEvents().filter(b=>b.date===f&&b.status==="active"),v=y.reduce((b,A)=>b+A.actualRevenue,0),_=m.nonEventRevenue+v,E=y.map(b=>b.name);a.push({day:l,date:f,isDayOff:m.isDayOff,totalDailyRevenue:_,eventRevenue:v,eventNames:E})}return a}getDailyRevenueEntryByDate(e){return this.mockDailyRevenue().find(t=>t.date===e)||{date:e,nonEventRevenue:0,isDayOff:!1}}updateDailyRevenueEntry(e,t){this.mockDailyRevenue.update(i=>{let r=i.findIndex(o=>o.date===e);if(r>-1){let o=[...i];return o[r]=N(N({},o[r]),t),o}else return[...i,{date:e,nonEventRevenue:t.nonEventRevenue??0,isDayOff:t.isDayOff??!1}]})}getEmployees(e){let t=this.mockEmployees();return e?t.filter(i=>i.type===e):t}getEmployeeById(e){return this.mockEmployees().find(t=>t.id===e)}getPayrollSummary(e,t){let i=this.getEmployees("full-time"),r=this.getEmployees("part-time"),o=`${e}-${String(t).padStart(2,"0")}`,s=i.reduce((f,m)=>f+(m.monthlySalary||0),0),a=r.map(f=>{let m=this.mockPunchRecords().filter(E=>E.employeeId===f.id&&E.date.startsWith(o)),y=0,v=0,_=!1;return m.forEach(E=>{if(!E.clockIn||!E.clockOut){_=!0;return}let[b,A]=E.clockIn.split(":").map(Number),[M,O]=E.clockOut.split(":").map(Number),L=new Date(0,0,0,b,A),G=new Date(0,0,0,M,O);if(G<L)return;let re=(G.getTime()-L.getTime())/(1e3*60)/60,te=Math.floor(re*100)/100;y+=te;let be=te*(f.hourlyRate||0);E.isDoublePay&&(be*=2),v+=be}),{employeeId:f.id,name:f.name,totalHours:y,totalPay:v,hasMissingPunch:_}}),l=a.reduce((f,m)=>f+m.totalPay,0);return{fullTimePayroll:s,partTimePayroll:l,partTimeDetails:a}}getPunchRecordsForMonth(e,t,i){let r=`${t}-${String(i).padStart(2,"0")}`;return this.mockPunchRecords().filter(o=>o.employeeId===e&&o.date.startsWith(r))}updatePunchRecords(e,t,i,r){let o=`${t}-${String(i).padStart(2,"0")}`;this.mockPunchRecords.update(s=>{let a=s.filter(f=>!(f.employeeId===e&&f.date.startsWith(o))),l=r.filter(f=>f.clockIn||f.clockOut);return[...a,...l]})}getVendors(){return this.mockVendors()}addVendor(e){let t=q(N({},e),{id:`V${Date.now()}`});this.mockVendors.update(i=>[...i,t])}updateVendor(e){this.mockVendors.update(t=>t.map(i=>i.id===e.id?e:i))}deleteVendor(e){this.mockVendors.update(t=>t.filter(i=>i.id!==e))}getPurchaseOrders(){return this.mockPurchaseOrders()}addPurchaseOrder(e){let t=q(N({},e),{id:`PO${Date.now()}`});this.mockPurchaseOrders.update(i=>[...i,t])}updatePurchaseOrder(e){this.mockPurchaseOrders.update(t=>t.map(i=>i.id===e.id?e:i))}deletePurchaseOrder(e){this.mockPurchaseOrders.update(t=>t.filter(i=>i.id!==e))}getProductCosts(){return this.mockProductCosts()}addProductCost(e){let t=q(N({},e),{id:`PC${Date.now()}`});this.mockProductCosts.update(i=>[...i,t])}updateProductCost(e){this.mockProductCosts.update(t=>t.map(i=>i.id===e.id?e:i))}deleteProductCost(e){this.mockProductCosts.update(t=>t.filter(i=>i.id!==e))}getWineCosts(){return this.mockWineCosts()}addWineCost(e){let t=q(N({},e),{id:`W${Date.now()}`});this.mockWineCosts.update(i=>[...i,t])}updateWineCost(e){this.mockWineCosts.update(t=>t.map(i=>i.id===e.id?e:i))}deleteWineCost(e){this.mockWineCosts.update(t=>t.filter(i=>i.id!==e))}getCigarCosts(){return this.mockCigarCosts()}addCigarCost(e){let t=q(N({},e),{id:`C${Date.now()}`});this.mockCigarCosts.update(i=>[...i,t])}updateCigarCost(e){this.mockCigarCosts.update(t=>t.map(i=>i.id===e.id?e:i))}deleteCigarCost(e){this.mockCigarCosts.update(t=>t.filter(i=>i.id!==e))}getCustomers(){return this.mockCustomers()}getCustomerById(e){return this.mockCustomers().find(t=>t.id===e)}getFeedbackForCustomer(e){return this.mockCustomerFeedback().filter(t=>t.customerId===e)}getAnnualSummaryReport(e,t){let i={years:[2024,2025,2026],revenue:{2024:383831,2025:3181477,2026:87259,total:3652567},expense:{2024:1457989,2025:4085912,2026:93858,total:5637759},net:{2024:-1074158,2025:-904435,2026:-6599,total:-1985192},unpaid:{2024:0,2025:2803307,2026:73145,total:2876452}},r=e??Math.min(...i.years),o=t??Math.max(...i.years),s=i.years.filter(f=>f>=r&&f<=o).sort((f,m)=>f-m),a=f=>{let m={total:0};return s.forEach(y=>{let v=f[y]||0;m[y]=v,m.total+=v}),m};return{years:s,revenue:a(i.revenue),expense:a(i.expense),net:a(i.net),unpaid:a(i.unpaid)}}getMonthlyDetail(e,t){switch(e){case 2024:return this.getMonthlyDetailFor2024(t);case 2025:return this.getMonthlyDetailFor2025(t);case 2026:return this.getMonthlyDetailFor2026(t);default:return null}}getMonthlyDetailFor2024(e){let t={year:2024,type:"\u6536\u5165",data:[]};return e==="revenue"?(t.type="\u6536\u5165",t.data=[...Array.from({length:9},(i,r)=>({month:r+1,total:0,items:[{name:"\u92B7\u8CA8\u6536\u5165",amount:0},{name:"\u5176\u4ED6\u6536\u5165",amount:0},{name:"-\u92B7\u6216\u6298\u8B93",amount:0}]})),{month:10,total:32400,items:[{name:"\u92B7\u8CA8\u6536\u5165",amount:32400},{name:"\u5176\u4ED6\u6536\u5165",amount:0},{name:"-\u92B7\u6216\u6298\u8B93",amount:0}]},{month:11,total:13325,items:[{name:"\u92B7\u8CA8\u6536\u5165",amount:16273},{name:"\u5176\u4ED6\u6536\u5165",amount:0},{name:"-\u92B7\u6216\u6298\u8B93",amount:-2948}]},{month:12,total:338106,items:[{name:"\u92B7\u8CA8\u6536\u5165",amount:461439},{name:"\u5176\u4ED6\u6536\u5165",amount:2275},{name:"-\u92B7\u6216\u6298\u8B93",amount:-125608}]}]):e==="expense"?(t.type="\u652F\u51FA",t.data=[...Array.from({length:4},(i,r)=>({month:r+1,total:0,items:[{name:"\u5546\u54C1",amount:0},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:0}]})),{month:5,total:108675,items:[{name:"\u5546\u54C1",amount:0},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:108675}]},{month:6,total:1855,items:[{name:"\u5546\u54C1",amount:0},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:1855}]},{month:7,total:72779,items:[{name:"\u5546\u54C1",amount:0},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:72779}]},{month:8,total:90476,items:[{name:"\u5546\u54C1",amount:0},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:90476}]},{month:9,total:78393,items:[{name:"\u5546\u54C1",amount:0},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:78393}]},{month:10,total:98994,items:[{name:"\u5546\u54C1",amount:0},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:98994}]},{month:11,total:417e3,items:[{name:"\u5546\u54C1",amount:183797},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:233203}]},{month:12,total:589817,items:[{name:"\u5546\u54C1",amount:501865},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:87952}]}]):e==="unpaid"&&(t.type="\u672A\u4ED8",t.data=Array.from({length:12},(i,r)=>({month:r+1,total:0,items:[{name:"\u61C9\u4ED8\u5E33\u6B3E",amount:0},{name:"\u61C9\u4ED8\u88DD\u6F62\u6B3E",amount:0},{name:"\u61C9\u4ED8\u85AA\u8CC7",amount:0},{name:"\u61C9\u4ED8\u80A1\u6771\u56DE\u994B\u91D1",amount:0},{name:"\u61C9\u4ED8\u8CA8\u6B3E",amount:0}]}))),t}getMonthlyDetailFor2025(e){let t={year:2025,type:"\u6536\u5165",data:[]};return e==="revenue"?(t.type="\u6536\u5165",t.data=Array.from({length:12},(i,r)=>{let o=Math.random()*3e5+5e4,s=Math.random()*1e4,a=-Math.random()*2e4;return{month:r+1,total:o+s+a,items:[{name:"\u92B7\u8CA8\u6536\u5165",amount:o},{name:"\u5176\u4ED6\u6536\u5165",amount:s},{name:"-\u92B7\u6216\u6298\u8B93",amount:a}]}})):e==="expense"?(t.type="\u652F\u51FA",t.data=Array.from({length:12},(i,r)=>{let o=-Math.random()*15e4-2e4,s=-Math.random()*2e5-25e3;return{month:r+1,total:o+s,items:[{name:"\u5546\u54C1",amount:o},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:s}]}})):e==="unpaid"&&(t.type="\u672A\u4ED8",t.data=Array.from({length:12},(i,r)=>{let o=-Math.random()*1e5,s=r>5?-Math.random()*5e4-2e5:0,a=-Math.random()*8e4,l=-Math.random()*5e3,f=-Math.random()*12e4;return{month:r+1,total:o+s+a+l+f,items:[{name:"\u61C9\u4ED8\u5E33\u6B3E",amount:o},{name:"\u61C9\u4ED8\u88DD\u6F62\u6B3E",amount:s},{name:"\u61C9\u4ED8\u85AA\u8CC7",amount:a},{name:"\u61C9\u4ED8\u80A1\u6771\u56DE\u994B\u91D1",amount:l},{name:"\u61C9\u4ED8\u8CA8\u6B3E",amount:f}]}})),t}getMonthlyDetailFor2026(e){let t={year:2026,type:"\u6536\u5165",data:[]},i=Array.from({length:12},(r,o)=>`2026-${String(o+1).padStart(2,"0")}`);if(e==="revenue"){t.type="\u6536\u5165";let r=this.mockMonthlyIncomeStatementData2026.revenue;t.data=i.map((o,s)=>{let a=r.\u92B7\u8CA8\u6536\u5165[o]||0,l=r.\u5176\u4ED6\u6536\u5165[o]||0,f=r.\u92B7\u8CA8\u6298\u8B93[o]||0;return{month:s+1,total:a+l+f,items:[{name:"\u92B7\u8CA8\u6536\u5165",amount:a},{name:"\u5176\u4ED6\u6536\u5165",amount:l},{name:"-\u92B7\u6216\u6298\u8B93",amount:f}]}})}else if(e==="expense"){t.type="\u652F\u51FA";let r=this.mockMonthlyIncomeStatementData2026.expenses,o=["\u5EDA\u623F\u6D88\u8017\u54C1","\u8A66\u83DC\u8CBB\u7528"];t.data=i.map((s,a)=>{let l=0,f=0;for(let m in r){let y=r[m][s]||0;o.includes(m)?l+=y:f+=y}return{month:a+1,total:l+f,items:[{name:"\u5546\u54C1",amount:l},{name:"\u96DC\u9805&\u8B8A\u52D5",amount:f}]}})}else if(e==="unpaid"){t.type="\u672A\u4ED8";let r=this.mockMonthlyBalanceSheetData2026.liabilities;t.data=i.map((o,s)=>{let a=r.\u61C9\u4ED8\u5E33\u6B3E[o]||0,l=r.\u61C9\u4ED8\u88DD\u6F62\u6B3E[o]||0,f=r.\u61C9\u4ED8\u85AA\u8CC7[o]||0,m=r.\u61C9\u4ED8\u80A1\u6771\u56DE\u994B\u91D1[o]||0,y=r.\u61C9\u4ED8\u96EA\u8304\u9032\u8CA8[o]||0;return{month:s+1,total:a+l+f+m+y,items:[{name:"\u61C9\u4ED8\u5E33\u6B3E",amount:a},{name:"\u61C9\u4ED8\u88DD\u6F62\u6B3E",amount:l},{name:"\u61C9\u4ED8\u85AA\u8CC7",amount:f},{name:"\u61C9\u4ED8\u80A1\u6771\u56DE\u994B\u91D1",amount:m},{name:"\u61C9\u4ED8\u8CA8\u6B3E",amount:y}]}})}return t}getProductGrossMarginReport(e,t){let i=this.mockProductGrossMarginReport,r=i.monthlySales.filter(o=>{let s=e?o.month>=e:!0,a=t?o.month<=t:!0;return s&&a});return{summary:i.summary,monthlySales:r}}getShareholderRebates(e,t){let i=this.mockShareholderRebates();return e===2024&&t===8?i:i.map(r=>{if(r.cumulativeRebate===0&&r.currentMonthRebate===0&&r.unpaidRebate===0)return q(N({},r),{currentMonthRebate:0,unpaidRebate:0});let o=.8+Math.random()*.4;return q(N({},r),{currentMonthRebate:Math.floor(r.currentMonthRebate*o),unpaidRebate:Math.floor(r.unpaidRebate*o)})})}getMonthlyRebateHistory(e){let t=this.mockRebateTransactions().filter(r=>r.shareholderName===e),i=new Map;if(t.forEach(r=>{let[o]=r.checkoutTime.split(" "),[s,a]=o.split("/").map(Number),l=`${s}-${a}`;i.has(l)||i.set(l,{totalRebate:0,unpaidRebate:0});let f=i.get(l);f.totalRebate+=r.rebateAmount,f.unpaidRebate+=r.rebateAmount*(Math.random()>.8?1:0)}),e==="\u555F\u5E06"){let r=i.get("2025-12");if(r){let o=0;this.mockRebateTransactions().filter(s=>s.shareholderName==="\u555F\u5E06"&&s.checkoutTime.startsWith("2025/12")).forEach(s=>o+=s.rebateAmount),r.totalRebate=o}}return Array.from(i.entries()).map(([r,o])=>{let[s,a]=r.split("-").map(Number);return N({year:s,month:a},o)}).sort((r,o)=>o.year-r.year||o.month-r.month)}getRebateTransactions(e,t,i){return this.mockRebateTransactions().filter(r=>{let[o]=r.checkoutTime.split(" "),[s,a]=o.split("/").map(Number);return r.shareholderName===e&&s===t&&a===i}).sort((r,o)=>r.checkoutTime.localeCompare(o.checkoutTime))}updateRebateTransaction(e){this.mockRebateTransactions.update(t=>t.map(i=>i.id===e.id?q(N({},e),{isEdited:!0}):i))}};Ir.\u0275fac=function(t){return new(t||Ir)},Ir.\u0275prov=K({token:Ir,factory:Ir.\u0275fac,providedIn:"root"});var Te=Ir;var WA,zA;function jA(){return{geminiUrl:WA,vertexUrl:zA}}function YA(n,e,t,i){var r,o;if(!n?.baseUrl){let s=jA();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:t:(o=s.geminiUrl)!==null&&o!==void 0?o:i}return n.baseUrl}var Pn=class{};function z(n,e){let t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){let o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,t){for(let o=0;o<e.length-1;o++){let s=e[o];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(n[a])){let l=n[a];if(Array.isArray(t))for(let f=0;f<l.length;f++){let m=l[f];p(m,e.slice(o+1),t[f])}else for(let f of l)p(f,e.slice(o+1),t)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in n||(n[a]=[{}]);let l=n[a];p(l[0],e.slice(o+1),t);return}(!n[s]||typeof n[s]!="object")&&(n[s]={}),n=n[s]}let i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function u(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;let r=e[i];if(r.endsWith("[]")){let o=r.slice(0,-2);if(o in n){let s=n[o];return Array.isArray(s)?s.map(a=>u(a,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function JA(n,e){for(let[t,i]of Object.entries(e)){let r=t.split("."),o=i.split("."),s=new Set,a=-1;for(let l=0;l<r.length;l++)if(r[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){let f=o[l];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&s.add(f)}u0(n,r,o,0,s)}}function u0(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;let o=e[i];if(o.endsWith("[]")){let s=o.slice(0,-2),a=n;if(s in a&&Array.isArray(a[s]))for(let l of a[s])u0(l,e,t,i+1,r)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){let s=n,a=Object.keys(s).filter(f=>!f.startsWith("_")&&!r.has(f)),l={};for(let f of a)l[f]=s[f];for(let[f,m]of Object.entries(l)){let y=[];for(let v of t.slice(i))v==="*"?y.push(f):y.push(v);p(s,y,m)}for(let f of a)delete s[f]}}else{let s=n;o in s&&u0(s[o],e,t,i+1,r)}}function ag(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function KA(n){let e={},t=u(n,["operationName"]);t!=null&&p(e,["operationName"],t);let i=u(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function QA(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["metadata"]);i!=null&&p(e,["metadata"],i);let r=u(n,["done"]);r!=null&&p(e,["done"],r);let o=u(n,["error"]);o!=null&&p(e,["error"],o);let s=u(n,["response","generateVideoResponse"]);return s!=null&&p(e,["response"],XA(s)),e}function ZA(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["metadata"]);i!=null&&p(e,["metadata"],i);let r=u(n,["done"]);r!=null&&p(e,["done"],r);let o=u(n,["error"]);o!=null&&p(e,["error"],o);let s=u(n,["response"]);return s!=null&&p(e,["response"],eR(s)),e}function XA(n){let e={},t=u(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>tR(s))),p(e,["generatedVideos"],o)}let i=u(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);let r=u(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function eR(n){let e={},t=u(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>nR(s))),p(e,["generatedVideos"],o)}let i=u(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);let r=u(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function tR(n){let e={},t=u(n,["video"]);return t!=null&&p(e,["video"],lR(t)),e}function nR(n){let e={},t=u(n,["_self"]);return t!=null&&p(e,["video"],uR(t)),e}function iR(n){let e={},t=u(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function rR(n){let e={},t=u(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function oR(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["metadata"]);i!=null&&p(e,["metadata"],i);let r=u(n,["done"]);r!=null&&p(e,["done"],r);let o=u(n,["error"]);o!=null&&p(e,["error"],o);let s=u(n,["response"]);return s!=null&&p(e,["response"],sR(s)),e}function sR(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["parent"]);i!=null&&p(e,["parent"],i);let r=u(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function Q1(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["metadata"]);i!=null&&p(e,["metadata"],i);let r=u(n,["done"]);r!=null&&p(e,["done"],r);let o=u(n,["error"]);o!=null&&p(e,["error"],o);let s=u(n,["response"]);return s!=null&&p(e,["response"],aR(s)),e}function aR(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["parent"]);i!=null&&p(e,["parent"],i);let r=u(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function lR(n){let e={},t=u(n,["uri"]);t!=null&&p(e,["uri"],t);let i=u(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],ag(i));let r=u(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function uR(n){let e={},t=u(n,["gcsUri"]);t!=null&&p(e,["uri"],t);let i=u(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],ag(i));let r=u(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}var je=(function(n){return n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL",n})(je||{});var c0=(function(n){return n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO",n})(c0||{});var Z1=(function(n){return n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",n})(Z1||{});var ja=(function(n){return n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT",n})(ja||{});var Ja=class{constructor(e){let t={};for(let i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}};var Ar=class{get text(){var e,t,i,r,o,s,a,l;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",m=!1,y=[];for(let v of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[_,E]of Object.entries(v))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(E!==null||E!==void 0)&&y.push(_);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;m=!0,f+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?f:void 0}get data(){var e,t,i,r,o,s,a,l;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="",m=[];for(let y of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[v,_]of Object.entries(y))v!=="inlineData"&&(_!==null||_!==void 0)&&m.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,i,r,o,s,a,l;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let f=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if(f?.length!==0)return f}get executableCode(){var e,t,i,r,o,s,a,l,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let m=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if(m?.length!==0)return(f=m?.[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,i,r,o,s,a,l,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let m=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if(m?.length!==0)return(f=m?.[0])===null||f===void 0?void 0:f.output}},ad=class{},ld=class{},d0=class{},f0=class{},p0=class{},m0=class{},ud=class{},cd=class{},dd=class{},h0=class{};var fd=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,r,o=e;return t?r=ZA(o):r=QA(o),Object.assign(i,r),i}},pd=class{},md=class{},hd=class{},gd=class{},g0=class{},y0=class{},v0=class{};var _0=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,o=oR(e);return Object.assign(i,o),i}},C0=class{},E0=class{},x0=class{};var yd=class{};var S0=class{get text(){var e,t,i;let r="",o=!1,s=[];for(let a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[l,f]of Object.entries(a))l!=="text"&&l!=="thought"&&f!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,r+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,t,i;let r="",o=[];for(let s of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}};var D0=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var b0=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,o=Q1(e);return Object.assign(i,o),i}};function Ie(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function X1(n,e){let t=Ie(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function ex(n){return Array.isArray(n)?n.map(e=>vd(e)):[vd(n)]}function vd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function tx(n){let e=vd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nx(n){let e=vd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function w1(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function ix(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>w1(e)):[w1(n)]}function w0(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function T1(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function I1(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function At(n){if(n==null)throw new Error("ContentUnion is required");return w0(n)?n:{role:"user",parts:ix(n)}}function lg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{let i=At(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){let t=At(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>At(t)):[At(e)]}function yn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(T1(n)||I1(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[At(n)]}let e=[],t=[],i=w0(n[0]);for(let r of n){let o=w0(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(T1(r)||I1(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:ix(t)}),e}function cR(n,e){n.includes("null")&&(e.nullable=!0);let t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(je).includes(t[0].toUpperCase())?t[0].toUpperCase():je.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of t)e.anyOf.push({type:Object.values(je).includes(i.toUpperCase())?i.toUpperCase():je.TYPE_UNSPECIFIED})}}function $o(n){let e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");let o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&cR(n.type,e);for(let[s,a]of Object.entries(n))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(je).includes(a.toUpperCase())?a.toUpperCase():je.TYPE_UNSPECIFIED}else if(t.includes(s))e[s]=$o(a);else if(i.includes(s)){let l=[];for(let f of a){if(f.type=="null"){e.nullable=!0;continue}l.push($o(f))}e[s]=l}else if(r.includes(s)){let l={};for(let[f,m]of Object.entries(a))l[f]=$o(m);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function ug(n){return $o(n)}function cg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function dg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function zo(n){if(n.functionDeclarations)for(let e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$o(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$o(e.response));return n}function jo(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");let e=[];for(let t of n)e.push(t);return e}function dR(n,e,t,i=1){let r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function gi(n,e){if(typeof e!="string")throw new Error("name must be a string");return dR(n,e,"cachedContents")}function rx(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Hi(n){return ag(n)}function fR(n){return n!=null&&typeof n=="object"&&"name"in n}function pR(n){return n!=null&&typeof n=="object"&&"video"in n}function mR(n){return n!=null&&typeof n=="object"&&"uri"in n}function ox(n){var e;let t;if(fR(n)&&(t=n.name),!(mR(n)&&(t=n.uri,t===void 0))&&!(pR(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){let r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function sx(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function ax(n){for(let e of["models","tunedModels","publisherModels"])if(hR(n,e))return n[e];return[]}function hR(n,e){return n!==null&&typeof n=="object"&&e in n}function gR(n,e={}){let t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function yR(n,e={}){let t=[],i=new Set;for(let r of n){let o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);let s=gR(r,e);s.functionDeclarations&&t.push(...s.functionDeclarations)}return{functionDeclarations:t}}function lx(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;let i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function vR(n){if(typeof n!="string")return n;let e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ux(n){if(typeof n!="object"||n===null)return{};let e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;let r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let o=!1;for(let s of r){if(typeof s!="object"||s===null)continue;let l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Yo(n,e){let t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function cx(n){let e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function _R(n){let e={},t=u(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);let i=u(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>XR(s))),p(e,["inlinedResponses"],o)}let r=u(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["inlinedEmbedContentResponses"],o)}return e}function CR(n){let e={},t=u(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);let i=u(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);let r=u(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function ER(n){let e={},t=u(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);let i=u(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);let r=u(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function od(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);let r=u(n,["metadata","state"]);r!=null&&p(e,["state"],cx(r));let o=u(n,["metadata","createTime"]);o!=null&&p(e,["createTime"],o);let s=u(n,["metadata","endTime"]);s!=null&&p(e,["endTime"],s);let a=u(n,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);let l=u(n,["metadata","model"]);l!=null&&p(e,["model"],l);let f=u(n,["metadata","output"]);return f!=null&&p(e,["dest"],_R(ux(f))),e}function T0(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["displayName"]);i!=null&&p(e,["displayName"],i);let r=u(n,["state"]);r!=null&&p(e,["state"],cx(r));let o=u(n,["error"]);o!=null&&p(e,["error"],o);let s=u(n,["createTime"]);s!=null&&p(e,["createTime"],s);let a=u(n,["startTime"]);a!=null&&p(e,["startTime"],a);let l=u(n,["endTime"]);l!=null&&p(e,["endTime"],l);let f=u(n,["updateTime"]);f!=null&&p(e,["updateTime"],f);let m=u(n,["model"]);m!=null&&p(e,["model"],m);let y=u(n,["inputConfig"]);y!=null&&p(e,["src"],xR(y));let v=u(n,["outputConfig"]);v!=null&&p(e,["dest"],CR(ux(v)));let _=u(n,["completionStats"]);return _!=null&&p(e,["completionStats"],_),e}function xR(n){let e={},t=u(n,["instancesFormat"]);t!=null&&p(e,["format"],t);let i=u(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);let r=u(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function SR(n,e){let t={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=u(e,["fileName"]);i!=null&&p(t,["fileName"],i);let r=u(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ZR(n,s))),p(t,["requests","requests"],o)}return t}function DR(n){let e={},t=u(n,["format"]);t!=null&&p(e,["instancesFormat"],t);let i=u(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);let r=u(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function bR(n){let e={},t=u(n,["data"]);if(t!=null&&p(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function wR(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],Yo(n,i)),t}function TR(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],Yo(n,i)),t}function IR(n){let e={},t=u(n,["content"]);t!=null&&p(e,["content"],t);let i=u(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],MR(i));let r=u(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);let o=u(n,["finishReason"]);o!=null&&p(e,["finishReason"],o);let s=u(n,["avgLogprobs"]);s!=null&&p(e,["avgLogprobs"],s);let a=u(n,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);let l=u(n,["index"]);l!=null&&p(e,["index"],l);let f=u(n,["logprobsResult"]);f!=null&&p(e,["logprobsResult"],f);let m=u(n,["safetyRatings"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(_=>_)),p(e,["safetyRatings"],v)}let y=u(n,["urlContextMetadata"]);return y!=null&&p(e,["urlContextMetadata"],y),e}function MR(n){let e={},t=u(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function dx(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>sN(o))),p(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&p(e,["role"],i),e}function AR(n,e){let t={},i=u(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function RR(n,e){let t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);let r=u(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],ER(vR(r))),t}function M1(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["src"]);r!=null&&p(t,["batch","inputConfig"],SR(n,lx(n,r)));let o=u(e,["config"]);return o!=null&&AR(o,t),t}function NR(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["model"],Ie(n,i));let r=u(e,["src"]);r!=null&&p(t,["inputConfig"],DR(lx(n,r)));let o=u(e,["config"]);return o!=null&&RR(o,t),t}function PR(n,e){let t={},i=u(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function FR(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["src"]);r!=null&&p(t,["batch","inputConfig"],HR(n,r));let o=u(e,["config"]);return o!=null&&PR(o,t),t}function kR(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],Yo(n,i)),t}function OR(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],Yo(n,i)),t}function LR(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["name"]);i!=null&&p(e,["name"],i);let r=u(n,["done"]);r!=null&&p(e,["done"],r);let o=u(n,["error"]);return o!=null&&p(e,["error"],o),e}function VR(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["name"]);i!=null&&p(e,["name"],i);let r=u(n,["done"]);r!=null&&p(e,["done"],r);let o=u(n,["error"]);return o!=null&&p(e,["error"],o),e}function BR(n,e){let t={},i=u(e,["contents"]);if(i!=null){let o=lg(n,i);Array.isArray(o)&&(o=o.map(s=>s)),p(t,["requests[]","request","content"],o)}let r=u(e,["config"]);return r!=null&&(p(t,["_self"],UR(r,t)),JA(t,{"requests[].*":"requests[].request.*"})),t}function UR(n,e){let t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);let r=u(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);let o=u(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function HR(n,e){let t={},i=u(e,["fileName"]);i!=null&&p(t,["file_name"],i);let r=u(e,["inlinedRequests"]);return r!=null&&p(t,["requests"],BR(n,r)),t}function $R(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function GR(n){let e={},t=u(n,["id"]);t!=null&&p(e,["id"],t);let i=u(n,["args"]);i!=null&&p(e,["args"],i);let r=u(n,["name"]);if(r!=null&&p(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qR(n){let e={},t=u(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);let i=u(n,["mode"]);if(i!=null&&p(e,["mode"],i),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WR(n,e,t){let i={},r=u(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],dx(At(r)));let o=u(e,["temperature"]);o!=null&&p(i,["temperature"],o);let s=u(e,["topP"]);s!=null&&p(i,["topP"],s);let a=u(e,["topK"]);a!=null&&p(i,["topK"],a);let l=u(e,["candidateCount"]);l!=null&&p(i,["candidateCount"],l);let f=u(e,["maxOutputTokens"]);f!=null&&p(i,["maxOutputTokens"],f);let m=u(e,["stopSequences"]);m!=null&&p(i,["stopSequences"],m);let y=u(e,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);let v=u(e,["logprobs"]);v!=null&&p(i,["logprobs"],v);let _=u(e,["presencePenalty"]);_!=null&&p(i,["presencePenalty"],_);let E=u(e,["frequencyPenalty"]);E!=null&&p(i,["frequencyPenalty"],E);let b=u(e,["seed"]);b!=null&&p(i,["seed"],b);let A=u(e,["responseMimeType"]);A!=null&&p(i,["responseMimeType"],A);let M=u(e,["responseSchema"]);M!=null&&p(i,["responseSchema"],ug(M));let O=u(e,["responseJsonSchema"]);if(O!=null&&p(i,["responseJsonSchema"],O),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let L=u(e,["safetySettings"]);if(t!==void 0&&L!=null){let Ye=L;Array.isArray(Ye)&&(Ye=Ye.map(kn=>aN(kn))),p(t,["safetySettings"],Ye)}let G=u(e,["tools"]);if(t!==void 0&&G!=null){let Ye=jo(G);Array.isArray(Ye)&&(Ye=Ye.map(kn=>uN(zo(kn)))),p(t,["tools"],Ye)}let Q=u(e,["toolConfig"]);if(t!==void 0&&Q!=null&&p(t,["toolConfig"],lN(Q)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let re=u(e,["cachedContent"]);t!==void 0&&re!=null&&p(t,["cachedContent"],gi(n,re));let te=u(e,["responseModalities"]);te!=null&&p(i,["responseModalities"],te);let be=u(e,["mediaResolution"]);be!=null&&p(i,["mediaResolution"],be);let me=u(e,["speechConfig"]);if(me!=null&&p(i,["speechConfig"],cg(me)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let xe=u(e,["thinkingConfig"]);xe!=null&&p(i,["thinkingConfig"],xe);let yt=u(e,["imageConfig"]);yt!=null&&p(i,["imageConfig"],QR(yt));let yi=u(e,["enableEnhancedCivicAnswers"]);return yi!=null&&p(i,["enableEnhancedCivicAnswers"],yi),i}function zR(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>IR(f))),p(e,["candidates"],l)}let r=u(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);let o=u(n,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);let s=u(n,["responseId"]);s!=null&&p(e,["responseId"],s);let a=u(n,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function jR(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],Yo(n,i)),t}function YR(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],Yo(n,i)),t}function JR(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function KR(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function QR(n){let e={},t=u(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);let i=u(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),u(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ZR(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["request","model"],Ie(n,i));let r=u(e,["contents"]);if(r!=null){let a=yn(r);Array.isArray(a)&&(a=a.map(l=>dx(l))),p(t,["request","contents"],a)}let o=u(e,["metadata"]);o!=null&&p(t,["metadata"],o);let s=u(e,["config"]);return s!=null&&p(t,["request","generationConfig"],WR(n,s,u(t,["request"],{}))),t}function XR(n){let e={},t=u(n,["response"]);t!=null&&p(e,["response"],zR(t));let i=u(n,["error"]);return i!=null&&p(e,["error"],i),e}function eN(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function tN(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);let o=u(n,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),t}function nN(n){let e={},t=u(n,["config"]);return t!=null&&eN(t,e),e}function iN(n){let e={},t=u(n,["config"]);return t!=null&&tN(t,e),e}function rN(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);let r=u(n,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>od(s))),p(e,["batchJobs"],o)}return e}function oN(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);let r=u(n,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>T0(s))),p(e,["batchJobs"],o)}return e}function sN(n){let e={},t=u(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);let i=u(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&p(e,["fileData"],$R(o));let s=u(n,["functionCall"]);s!=null&&p(e,["functionCall"],GR(s));let a=u(n,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);let l=u(n,["inlineData"]);l!=null&&p(e,["inlineData"],bR(l));let f=u(n,["text"]);f!=null&&p(e,["text"],f);let m=u(n,["thought"]);m!=null&&p(e,["thought"],m);let y=u(n,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);let v=u(n,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function aN(n){let e={},t=u(n,["category"]);if(t!=null&&p(e,["category"],t),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function lN(n){let e={},t=u(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);let i=u(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],qR(i)),e}function uN(n){let e={};if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=u(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);let i=u(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);let r=u(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=u(n,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(y=>y)),p(e,["functionDeclarations"],m)}let s=u(n,["googleMaps"]);s!=null&&p(e,["googleMaps"],JR(s));let a=u(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],KR(a));let l=u(n,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);let f=u(n,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}var $i=(function(n){return n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents",n})($i||{}),hi=class{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=t.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var I0=class extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new hi($i.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){let t=M1(this.apiClient,e),i=t._url,r=z("{model}:batchGenerateContent",i),a=t.batch.inputConfig.requests,l=a.requests,f=[];for(let m of l){let y=Object.assign({},m);if(y.systemInstruction){let v=y.systemInstruction;delete y.systemInstruction;let _=y.request;_.systemInstruction=v,y.request=_}f.push(y)}return a.requests=f,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){let i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){let o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(s)i.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=NR(this.apiClient,e);return a=z("batchPredictionJobs",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>T0(m))}else{let f=M1(this.apiClient,e);return a=z("{model}:batchGenerateContent",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>od(m))}}async createEmbeddingsInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=FR(this.apiClient,e);return o=z("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>od(l))}}async get(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=YR(this.apiClient,e);return a=z("batchPredictionJobs/{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>T0(m))}else{let f=jR(this.apiClient,e);return a=z("batches/{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>od(m))}}async cancel(e){var t,i,r,o;let s="",a={};if(this.apiClient.isVertexAI()){let l=TR(this.apiClient,e);s=z("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let l=wR(this.apiClient,e);s=z("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=iN(e);return a=z("batchPredictionJobs",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=oN(m),v=new yd;return Object.assign(v,y),v})}else{let f=nN(e);return a=z("batches",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=rN(m),v=new yd;return Object.assign(v,y),v})}}async delete(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=OR(this.apiClient,e);return a=z("batchPredictionJobs/{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>VR(m))}else{let f=kR(this.apiClient,e);return a=z("batches/{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>LR(m))}}};function cN(n){let e={},t=u(n,["data"]);if(t!=null&&p(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function A1(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>PN(o))),p(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&p(e,["role"],i),e}function dN(n,e){let t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);let r=u(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);let o=u(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);let s=u(n,["contents"]);if(e!==void 0&&s!=null){let m=yn(s);Array.isArray(m)&&(m=m.map(y=>A1(y))),p(e,["contents"],m)}let a=u(n,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],A1(At(a)));let l=u(n,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>kN(y))),p(e,["tools"],m)}let f=u(n,["toolConfig"]);if(e!==void 0&&f!=null&&p(e,["toolConfig"],FN(f)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function fN(n,e){let t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);let r=u(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);let o=u(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);let s=u(n,["contents"]);if(e!==void 0&&s!=null){let y=yn(s);Array.isArray(y)&&(y=y.map(v=>v)),p(e,["contents"],y)}let a=u(n,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],At(a));let l=u(n,["tools"]);if(e!==void 0&&l!=null){let y=l;Array.isArray(y)&&(y=y.map(v=>ON(v))),p(e,["tools"],y)}let f=u(n,["toolConfig"]);e!==void 0&&f!=null&&p(e,["toolConfig"],f);let m=u(n,["kmsKeyName"]);return e!==void 0&&m!=null&&p(e,["encryption_spec","kmsKeyName"],m),t}function pN(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["model"],X1(n,i));let r=u(e,["config"]);return r!=null&&dN(r,t),t}function mN(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["model"],X1(n,i));let r=u(e,["config"]);return r!=null&&fN(r,t),t}function hN(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],gi(n,i)),t}function gN(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],gi(n,i)),t}function yN(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function vN(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function _N(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function CN(n){let e={},t=u(n,["id"]);t!=null&&p(e,["id"],t);let i=u(n,["args"]);i!=null&&p(e,["args"],i);let r=u(n,["name"]);if(r!=null&&p(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function EN(n){let e={},t=u(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);let i=u(n,["mode"]);if(i!=null&&p(e,["mode"],i),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xN(n){let e={},t=u(n,["description"]);t!=null&&p(e,["description"],t);let i=u(n,["name"]);i!=null&&p(e,["name"],i);let r=u(n,["parameters"]);r!=null&&p(e,["parameters"],r);let o=u(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);let s=u(n,["response"]);s!=null&&p(e,["response"],s);let a=u(n,["responseJsonSchema"]);if(a!=null&&p(e,["responseJsonSchema"],a),u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function SN(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],gi(n,i)),t}function DN(n,e){let t={},i=u(e,["name"]);return i!=null&&p(t,["_url","name"],gi(n,i)),t}function bN(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function wN(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function TN(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function IN(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function MN(n){let e={},t=u(n,["config"]);return t!=null&&TN(t,e),e}function AN(n){let e={},t=u(n,["config"]);return t!=null&&IN(t,e),e}function RN(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);let r=u(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["cachedContents"],o)}return e}function NN(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);let r=u(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["cachedContents"],o)}return e}function PN(n){let e={},t=u(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);let i=u(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&p(e,["fileData"],_N(o));let s=u(n,["functionCall"]);s!=null&&p(e,["functionCall"],CN(s));let a=u(n,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);let l=u(n,["inlineData"]);l!=null&&p(e,["inlineData"],cN(l));let f=u(n,["text"]);f!=null&&p(e,["text"],f);let m=u(n,["thought"]);m!=null&&p(e,["thought"],m);let y=u(n,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);let v=u(n,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function FN(n){let e={},t=u(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);let i=u(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],EN(i)),e}function kN(n){let e={};if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=u(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);let i=u(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);let r=u(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=u(n,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(y=>y)),p(e,["functionDeclarations"],m)}let s=u(n,["googleMaps"]);s!=null&&p(e,["googleMaps"],bN(s));let a=u(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],wN(a));let l=u(n,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);let f=u(n,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function ON(n){let e={},t=u(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);let i=u(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let r=u(n,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);let o=u(n,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);let s=u(n,["functionDeclarations"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(v=>xN(v))),p(e,["functionDeclarations"],y)}let a=u(n,["googleMaps"]);a!=null&&p(e,["googleMaps"],a);let l=u(n,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);let f=u(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);let m=u(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function LN(n,e){let t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);let r=u(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function VN(n,e){let t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);let r=u(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function BN(n,e){let t={},i=u(e,["name"]);i!=null&&p(t,["_url","name"],gi(n,i));let r=u(e,["config"]);return r!=null&&LN(r,t),t}function UN(n,e){let t={},i=u(e,["name"]);i!=null&&p(t,["_url","name"],gi(n,i));let r=u(e,["config"]);return r!=null&&VN(r,t),t}var M0=class extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new hi($i.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=mN(this.apiClient,e);return a=z("cachedContents",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}else{let f=pN(this.apiClient,e);return a=z("cachedContents",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async get(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=DN(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}else{let f=SN(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async delete(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=gN(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=vN(m),v=new hd;return Object.assign(v,y),v})}else{let f=hN(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=yN(m),v=new hd;return Object.assign(v,y),v})}}async update(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=UN(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}else{let f=BN(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>m)}}async listInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=AN(e);return a=z("cachedContents",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=NN(m),v=new gd;return Object.assign(v,y),v})}else{let f=MN(e);return a=z("cachedContents",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=RN(m),v=new gd;return Object.assign(v,y),v})}}};function _d(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function R1(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(n){return this instanceof pe?(this.v=n,this):new pe(n)}function Rn(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(_){return function(E){return Promise.resolve(E).then(_,y)}}function a(_,E){i[_]&&(r[_]=function(b){return new Promise(function(A,M){o.push([_,b,A,M])>1||l(_,b)})},E&&(r[_]=E(r[_])))}function l(_,E){try{f(i[_](E))}catch(b){v(o[0][3],b)}}function f(_){_.value instanceof pe?Promise.resolve(_.value.v).then(m,y):v(o[0][2],_)}function m(_){l("next",_)}function y(_){l("throw",_)}function v(_,E){_(E),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Nn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof R1=="function"?R1(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(f){o({value:f,done:a})},s)}}function HN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;let t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:fx(t)}function fx(n){if(n.parts===void 0||n.parts.length===0)return!1;for(let e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $N(n){if(n.length!==0){for(let e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function N1(n){if(n===void 0||n.length===0)return[];let e=[],t=n.length,i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{let r=[],o=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),o&&!fx(n[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}var A0=class{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new R0(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},R0=class{constructor(e,t,i,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),$N(o)}async sendMessage(e){var t;await this.sendPromise;let i=At(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,s,a;let l=await r,f=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,m=l.automaticFunctionCallingHistory,y=this.getHistory(!0).length,v=[];m!=null&&(v=(a=m.slice(y))!==null&&a!==void 0?a:[]);let _=f?[f]:[];this.recordHistory(i,_,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;let i=At(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});let o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){let t=e?N1(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Rn(this,arguments,function*(){var r,o,s,a,l,f;let m=[];try{for(var y=!0,v=Nn(e),_;_=yield pe(v.next()),r=_.done,!r;y=!0){a=_.value,y=!1;let E=a;if(HN(E)){let b=(f=(l=E.candidates)===null||l===void 0?void 0:l[0])===null||f===void 0?void 0:f.content;b!==void 0&&m.push(b)}yield yield pe(E)}}catch(E){o={error:E}}finally{try{!y&&!r&&(s=v.return)&&(yield pe(s.call(v)))}finally{if(o)throw o.error}}this.recordHistory(t,m)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(o=>o.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...N1(i)):this.history.push(e),this.history.push(...r)}};var Cd=class n extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,n.prototype)}};function GN(n){let e={},t=u(n,["file"]);return t!=null&&p(e,["file"],t),e}function qN(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function WN(n){let e={},t=u(n,["name"]);return t!=null&&p(e,["_url","file"],ox(t)),e}function zN(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function jN(n){let e={},t=u(n,["name"]);return t!=null&&p(e,["_url","file"],ox(t)),e}function YN(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function JN(n){let e={},t=u(n,["config"]);return t!=null&&YN(t,e),e}function KN(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);let r=u(n,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["files"],o)}return e}var N0=class extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new hi($i.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=JN(e);return o=z("files",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(f=>{let m=f;return m.sdkHttpResponse={headers:l.headers},m})),r.then(l=>{let f=KN(l),m=new C0;return Object.assign(m,f),m})}}async createInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=GN(e);return o=z("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let f=qN(l),m=new E0;return Object.assign(m,f),m})}}async get(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=jN(e);return o=z("files/{file}",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=WN(e);return o=z("files/{file}",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(f=>{let m=f;return m.sdkHttpResponse={headers:l.headers},m})),r.then(l=>{let f=zN(l),m=new x0;return Object.assign(m,f),m})}}};function sd(n){let e={},t=u(n,["data"]);if(t!=null&&p(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function QN(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>pP(o))),p(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&p(e,["role"],i),e}function ZN(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function XN(n){let e={},t=u(n,["id"]);t!=null&&p(e,["id"],t);let i=u(n,["args"]);i!=null&&p(e,["args"],i);let r=u(n,["name"]);if(r!=null&&p(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eP(n){let e={},t=u(n,["description"]);t!=null&&p(e,["description"],t);let i=u(n,["name"]);i!=null&&p(e,["name"],i);let r=u(n,["parameters"]);r!=null&&p(e,["parameters"],r);let o=u(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);let s=u(n,["response"]);s!=null&&p(e,["response"],s);let a=u(n,["responseJsonSchema"]);if(a!=null&&p(e,["responseJsonSchema"],a),u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function tP(n){let e={},t=u(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);let i=u(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);let r=u(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);let o=u(n,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);let s=u(n,["enableAffectiveDialog"]);s!=null&&p(e,["enableAffectiveDialog"],s);let a=u(n,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);let l=u(n,["logprobs"]);l!=null&&p(e,["logprobs"],l);let f=u(n,["maxOutputTokens"]);f!=null&&p(e,["maxOutputTokens"],f);let m=u(n,["mediaResolution"]);m!=null&&p(e,["mediaResolution"],m);let y=u(n,["presencePenalty"]);y!=null&&p(e,["presencePenalty"],y);let v=u(n,["responseLogprobs"]);v!=null&&p(e,["responseLogprobs"],v);let _=u(n,["responseMimeType"]);_!=null&&p(e,["responseMimeType"],_);let E=u(n,["responseModalities"]);E!=null&&p(e,["responseModalities"],E);let b=u(n,["responseSchema"]);b!=null&&p(e,["responseSchema"],b);let A=u(n,["routingConfig"]);A!=null&&p(e,["routingConfig"],A);let M=u(n,["seed"]);M!=null&&p(e,["seed"],M);let O=u(n,["speechConfig"]);O!=null&&p(e,["speechConfig"],O);let L=u(n,["stopSequences"]);L!=null&&p(e,["stopSequences"],L);let G=u(n,["temperature"]);G!=null&&p(e,["temperature"],G);let Q=u(n,["thinkingConfig"]);Q!=null&&p(e,["thinkingConfig"],Q);let re=u(n,["topK"]);re!=null&&p(e,["topK"],re);let te=u(n,["topP"]);if(te!=null&&p(e,["topP"],te),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nP(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function iP(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function rP(n,e){let t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);let r=u(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);let o=u(n,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);let s=u(n,["topP"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topP"],s);let a=u(n,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);let l=u(n,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);let f=u(n,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);let m=u(n,["seed"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","seed"],m);let y=u(n,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],dg(y));let v=u(n,["thinkingConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","thinkingConfig"],v);let _=u(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],_);let E=u(n,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],QN(At(E)));let b=u(n,["tools"]);if(e!==void 0&&b!=null){let re=jo(b);Array.isArray(re)&&(re=re.map(te=>hP(zo(te)))),p(e,["setup","tools"],re)}let A=u(n,["sessionResumption"]);e!==void 0&&A!=null&&p(e,["setup","sessionResumption"],mP(A));let M=u(n,["inputAudioTranscription"]);e!==void 0&&M!=null&&p(e,["setup","inputAudioTranscription"],M);let O=u(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&p(e,["setup","outputAudioTranscription"],O);let L=u(n,["realtimeInputConfig"]);e!==void 0&&L!=null&&p(e,["setup","realtimeInputConfig"],L);let G=u(n,["contextWindowCompression"]);e!==void 0&&G!=null&&p(e,["setup","contextWindowCompression"],G);let Q=u(n,["proactivity"]);if(e!==void 0&&Q!=null&&p(e,["setup","proactivity"],Q),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function oP(n,e){let t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],tP(i));let r=u(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);let o=u(n,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);let s=u(n,["topP"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topP"],s);let a=u(n,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);let l=u(n,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);let f=u(n,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);let m=u(n,["seed"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","seed"],m);let y=u(n,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],dg(y));let v=u(n,["thinkingConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","thinkingConfig"],v);let _=u(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],_);let E=u(n,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],At(E));let b=u(n,["tools"]);if(e!==void 0&&b!=null){let te=jo(b);Array.isArray(te)&&(te=te.map(be=>gP(zo(be)))),p(e,["setup","tools"],te)}let A=u(n,["sessionResumption"]);e!==void 0&&A!=null&&p(e,["setup","sessionResumption"],A);let M=u(n,["inputAudioTranscription"]);e!==void 0&&M!=null&&p(e,["setup","inputAudioTranscription"],M);let O=u(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&p(e,["setup","outputAudioTranscription"],O);let L=u(n,["realtimeInputConfig"]);e!==void 0&&L!=null&&p(e,["setup","realtimeInputConfig"],L);let G=u(n,["contextWindowCompression"]);e!==void 0&&G!=null&&p(e,["setup","contextWindowCompression"],G);let Q=u(n,["proactivity"]);e!==void 0&&Q!=null&&p(e,["setup","proactivity"],Q);let re=u(n,["explicitVadSignal"]);return e!==void 0&&re!=null&&p(e,["setup","explicitVadSignal"],re),t}function sP(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["setup","model"],Ie(n,i));let r=u(e,["config"]);return r!=null&&p(t,["config"],rP(r,t)),t}function aP(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["setup","model"],Ie(n,i));let r=u(e,["config"]);return r!=null&&p(t,["config"],oP(r,t)),t}function lP(n){let e={},t=u(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function uP(n){let e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function cP(n){let e={},t=u(n,["media"]);if(t!=null){let f=ex(t);Array.isArray(f)&&(f=f.map(m=>sd(m))),p(e,["mediaChunks"],f)}let i=u(n,["audio"]);i!=null&&p(e,["audio"],sd(nx(i)));let r=u(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);let o=u(n,["video"]);o!=null&&p(e,["video"],sd(tx(o)));let s=u(n,["text"]);s!=null&&p(e,["text"],s);let a=u(n,["activityStart"]);a!=null&&p(e,["activityStart"],a);let l=u(n,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function dP(n){let e={},t=u(n,["media"]);if(t!=null){let f=ex(t);Array.isArray(f)&&(f=f.map(m=>m)),p(e,["mediaChunks"],f)}let i=u(n,["audio"]);i!=null&&p(e,["audio"],nx(i));let r=u(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);let o=u(n,["video"]);o!=null&&p(e,["video"],tx(o));let s=u(n,["text"]);s!=null&&p(e,["text"],s);let a=u(n,["activityStart"]);a!=null&&p(e,["activityStart"],a);let l=u(n,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function fP(n){let e={},t=u(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);let i=u(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);let r=u(n,["toolCall"]);r!=null&&p(e,["toolCall"],r);let o=u(n,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],o);let s=u(n,["usageMetadata"]);s!=null&&p(e,["usageMetadata"],yP(s));let a=u(n,["goAway"]);a!=null&&p(e,["goAway"],a);let l=u(n,["sessionResumptionUpdate"]);l!=null&&p(e,["sessionResumptionUpdate"],l);let f=u(n,["voiceActivityDetectionSignal"]);f!=null&&p(e,["voiceActivityDetectionSignal"],f);let m=u(n,["voiceActivity"]);return m!=null&&p(e,["voiceActivity"],vP(m)),e}function pP(n){let e={},t=u(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);let i=u(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&p(e,["fileData"],ZN(o));let s=u(n,["functionCall"]);s!=null&&p(e,["functionCall"],XN(s));let a=u(n,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);let l=u(n,["inlineData"]);l!=null&&p(e,["inlineData"],sd(l));let f=u(n,["text"]);f!=null&&p(e,["text"],f);let m=u(n,["thought"]);m!=null&&p(e,["thought"],m);let y=u(n,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);let v=u(n,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function mP(n){let e={},t=u(n,["handle"]);if(t!=null&&p(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function hP(n){let e={};if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=u(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);let i=u(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);let r=u(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=u(n,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(y=>y)),p(e,["functionDeclarations"],m)}let s=u(n,["googleMaps"]);s!=null&&p(e,["googleMaps"],nP(s));let a=u(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],iP(a));let l=u(n,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);let f=u(n,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function gP(n){let e={},t=u(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);let i=u(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let r=u(n,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);let o=u(n,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);let s=u(n,["functionDeclarations"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(v=>eP(v))),p(e,["functionDeclarations"],y)}let a=u(n,["googleMaps"]);a!=null&&p(e,["googleMaps"],a);let l=u(n,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);let f=u(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);let m=u(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function yP(n){let e={},t=u(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);let i=u(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);let r=u(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);let o=u(n,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);let s=u(n,["thoughtsTokenCount"]);s!=null&&p(e,["thoughtsTokenCount"],s);let a=u(n,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);let l=u(n,["promptTokensDetails"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["promptTokensDetails"],_)}let f=u(n,["cacheTokensDetails"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["cacheTokensDetails"],_)}let m=u(n,["candidatesTokensDetails"]);if(m!=null){let _=m;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["responseTokensDetails"],_)}let y=u(n,["toolUsePromptTokensDetails"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["toolUsePromptTokensDetails"],_)}let v=u(n,["trafficType"]);return v!=null&&p(e,["trafficType"],v),e}function vP(n){let e={},t=u(n,["type"]);return t!=null&&p(e,["voiceActivityType"],t),e}function _P(n){let e={},t=u(n,["data"]);if(t!=null&&p(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function CP(n){let e={},t=u(n,["content"]);t!=null&&p(e,["content"],t);let i=u(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],EP(i));let r=u(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);let o=u(n,["finishReason"]);o!=null&&p(e,["finishReason"],o);let s=u(n,["avgLogprobs"]);s!=null&&p(e,["avgLogprobs"],s);let a=u(n,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);let l=u(n,["index"]);l!=null&&p(e,["index"],l);let f=u(n,["logprobsResult"]);f!=null&&p(e,["logprobsResult"],f);let m=u(n,["safetyRatings"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(_=>_)),p(e,["safetyRatings"],v)}let y=u(n,["urlContextMetadata"]);return y!=null&&p(e,["urlContextMetadata"],y),e}function EP(n){let e={},t=u(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function xP(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["contents"]);if(r!=null){let o=yn(r);Array.isArray(o)&&(o=o.map(s=>s)),p(t,["contents"],o)}return t}function SP(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),p(e,["tokensInfo"],r)}return e}function DP(n){let e={},t=u(n,["values"]);t!=null&&p(e,["values"],t);let i=u(n,["statistics"]);return i!=null&&p(e,["statistics"],bP(i)),e}function bP(n){let e={},t=u(n,["truncated"]);t!=null&&p(e,["truncated"],t);let i=u(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function kd(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>FF(o))),p(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&p(e,["role"],i),e}function wP(n){let e={},t=u(n,["controlType"]);t!=null&&p(e,["controlType"],t);let i=u(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function TP(n){let e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function IP(n,e){let t={},i=u(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],At(i));let r=u(n,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>gx(a))),p(e,["tools"],s)}let o=u(n,["generationConfig"]);return e!==void 0&&o!=null&&p(e,["generationConfig"],_F(o)),t}function MP(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["contents"]);if(r!=null){let s=yn(r);Array.isArray(s)&&(s=s.map(a=>kd(a))),p(t,["contents"],s)}let o=u(e,["config"]);return o!=null&&TP(o),t}function AP(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["contents"]);if(r!=null){let s=yn(r);Array.isArray(s)&&(s=s.map(a=>a)),p(t,["contents"],s)}let o=u(e,["config"]);return o!=null&&IP(o,t),t}function RP(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);let r=u(n,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function NP(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function PP(n,e){let t={},i=u(e,["model"]);return i!=null&&p(t,["_url","name"],Ie(n,i)),t}function FP(n,e){let t={},i=u(e,["model"]);return i!=null&&p(t,["_url","name"],Ie(n,i)),t}function kP(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function OP(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function LP(n,e){let t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);let r=u(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);let o=u(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);let s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);let a=u(n,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);let l=u(n,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);let f=u(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);let m=u(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);let y=u(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&p(e,["parameters","includeSafetyAttributes"],y);let v=u(n,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);let _=u(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);let E=u(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);let b=u(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","compressionQuality"],b);let A=u(n,["addWatermark"]);e!==void 0&&A!=null&&p(e,["parameters","addWatermark"],A);let M=u(n,["labels"]);e!==void 0&&M!=null&&p(e,["labels"],M);let O=u(n,["editMode"]);e!==void 0&&O!=null&&p(e,["parameters","editMode"],O);let L=u(n,["baseSteps"]);return e!==void 0&&L!=null&&p(e,["parameters","editConfig","baseSteps"],L),t}function VP(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);let o=u(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>UF(l))),p(t,["instances[0]","referenceImages"],a)}let s=u(e,["config"]);return s!=null&&LP(s,t),t}function BP(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Od(o))),p(e,["generatedImages"],r)}return e}function UP(n,e){let t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);let r=u(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);let o=u(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function HP(n,e){let t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);let r=u(n,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);let o=u(n,["outputDimensionality"]);e!==void 0&&o!=null&&p(e,["parameters","outputDimensionality"],o);let s=u(n,["mimeType"]);e!==void 0&&s!=null&&p(e,["instances[]","mimeType"],s);let a=u(n,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),t}function $P(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["contents"]);if(r!=null){let a=lg(n,r);Array.isArray(a)&&(a=a.map(l=>l)),p(t,["requests[]","content"],a)}let o=u(e,["config"]);o!=null&&UP(o,t);let s=u(e,["model"]);return s!==void 0&&p(t,["requests[]","model"],Ie(n,s)),t}function GP(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["contents"]);if(r!=null){let s=lg(n,r);Array.isArray(s)&&(s=s.map(a=>a)),p(t,["instances[]","content"],s)}let o=u(e,["config"]);return o!=null&&HP(o,t),t}function qP(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["embeddings"],o)}let r=u(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function WP(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>DP(s))),p(e,["embeddings"],o)}let r=u(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function zP(n){let e={},t=u(n,["endpoint"]);t!=null&&p(e,["name"],t);let i=u(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function jP(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function YP(n){let e={},t=u(n,["id"]);t!=null&&p(e,["id"],t);let i=u(n,["args"]);i!=null&&p(e,["args"],i);let r=u(n,["name"]);if(r!=null&&p(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JP(n){let e={},t=u(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);let i=u(n,["mode"]);if(i!=null&&p(e,["mode"],i),u(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function KP(n){let e={},t=u(n,["description"]);t!=null&&p(e,["description"],t);let i=u(n,["name"]);i!=null&&p(e,["name"],i);let r=u(n,["parameters"]);r!=null&&p(e,["parameters"],r);let o=u(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);let s=u(n,["response"]);s!=null&&p(e,["response"],s);let a=u(n,["responseJsonSchema"]);if(a!=null&&p(e,["responseJsonSchema"],a),u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function QP(n,e,t){let i={},r=u(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],kd(At(r)));let o=u(e,["temperature"]);o!=null&&p(i,["temperature"],o);let s=u(e,["topP"]);s!=null&&p(i,["topP"],s);let a=u(e,["topK"]);a!=null&&p(i,["topK"],a);let l=u(e,["candidateCount"]);l!=null&&p(i,["candidateCount"],l);let f=u(e,["maxOutputTokens"]);f!=null&&p(i,["maxOutputTokens"],f);let m=u(e,["stopSequences"]);m!=null&&p(i,["stopSequences"],m);let y=u(e,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);let v=u(e,["logprobs"]);v!=null&&p(i,["logprobs"],v);let _=u(e,["presencePenalty"]);_!=null&&p(i,["presencePenalty"],_);let E=u(e,["frequencyPenalty"]);E!=null&&p(i,["frequencyPenalty"],E);let b=u(e,["seed"]);b!=null&&p(i,["seed"],b);let A=u(e,["responseMimeType"]);A!=null&&p(i,["responseMimeType"],A);let M=u(e,["responseSchema"]);M!=null&&p(i,["responseSchema"],ug(M));let O=u(e,["responseJsonSchema"]);if(O!=null&&p(i,["responseJsonSchema"],O),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let L=u(e,["safetySettings"]);if(t!==void 0&&L!=null){let Ye=L;Array.isArray(Ye)&&(Ye=Ye.map(kn=>HF(kn))),p(t,["safetySettings"],Ye)}let G=u(e,["tools"]);if(t!==void 0&&G!=null){let Ye=jo(G);Array.isArray(Ye)&&(Ye=Ye.map(kn=>YF(zo(kn)))),p(t,["tools"],Ye)}let Q=u(e,["toolConfig"]);if(t!==void 0&&Q!=null&&p(t,["toolConfig"],jF(Q)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let re=u(e,["cachedContent"]);t!==void 0&&re!=null&&p(t,["cachedContent"],gi(n,re));let te=u(e,["responseModalities"]);te!=null&&p(i,["responseModalities"],te);let be=u(e,["mediaResolution"]);be!=null&&p(i,["mediaResolution"],be);let me=u(e,["speechConfig"]);if(me!=null&&p(i,["speechConfig"],cg(me)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let xe=u(e,["thinkingConfig"]);xe!=null&&p(i,["thinkingConfig"],xe);let yt=u(e,["imageConfig"]);yt!=null&&p(i,["imageConfig"],DF(yt));let yi=u(e,["enableEnhancedCivicAnswers"]);return yi!=null&&p(i,["enableEnhancedCivicAnswers"],yi),i}function ZP(n,e,t){let i={},r=u(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],At(r));let o=u(e,["temperature"]);o!=null&&p(i,["temperature"],o);let s=u(e,["topP"]);s!=null&&p(i,["topP"],s);let a=u(e,["topK"]);a!=null&&p(i,["topK"],a);let l=u(e,["candidateCount"]);l!=null&&p(i,["candidateCount"],l);let f=u(e,["maxOutputTokens"]);f!=null&&p(i,["maxOutputTokens"],f);let m=u(e,["stopSequences"]);m!=null&&p(i,["stopSequences"],m);let y=u(e,["responseLogprobs"]);y!=null&&p(i,["responseLogprobs"],y);let v=u(e,["logprobs"]);v!=null&&p(i,["logprobs"],v);let _=u(e,["presencePenalty"]);_!=null&&p(i,["presencePenalty"],_);let E=u(e,["frequencyPenalty"]);E!=null&&p(i,["frequencyPenalty"],E);let b=u(e,["seed"]);b!=null&&p(i,["seed"],b);let A=u(e,["responseMimeType"]);A!=null&&p(i,["responseMimeType"],A);let M=u(e,["responseSchema"]);M!=null&&p(i,["responseSchema"],ug(M));let O=u(e,["responseJsonSchema"]);O!=null&&p(i,["responseJsonSchema"],O);let L=u(e,["routingConfig"]);L!=null&&p(i,["routingConfig"],L);let G=u(e,["modelSelectionConfig"]);G!=null&&p(i,["modelConfig"],G);let Q=u(e,["safetySettings"]);if(t!==void 0&&Q!=null){let Zn=Q;Array.isArray(Zn)&&(Zn=Zn.map(af=>af)),p(t,["safetySettings"],Zn)}let re=u(e,["tools"]);if(t!==void 0&&re!=null){let Zn=jo(re);Array.isArray(Zn)&&(Zn=Zn.map(af=>gx(zo(af)))),p(t,["tools"],Zn)}let te=u(e,["toolConfig"]);t!==void 0&&te!=null&&p(t,["toolConfig"],te);let be=u(e,["labels"]);t!==void 0&&be!=null&&p(t,["labels"],be);let me=u(e,["cachedContent"]);t!==void 0&&me!=null&&p(t,["cachedContent"],gi(n,me));let xe=u(e,["responseModalities"]);xe!=null&&p(i,["responseModalities"],xe);let yt=u(e,["mediaResolution"]);yt!=null&&p(i,["mediaResolution"],yt);let yi=u(e,["speechConfig"]);yi!=null&&p(i,["speechConfig"],cg(yi));let Ye=u(e,["audioTimestamp"]);Ye!=null&&p(i,["audioTimestamp"],Ye);let kn=u(e,["thinkingConfig"]);kn!=null&&p(i,["thinkingConfig"],kn);let hg=u(e,["imageConfig"]);if(hg!=null&&p(i,["imageConfig"],bF(hg)),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function P1(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["contents"]);if(r!=null){let s=yn(r);Array.isArray(s)&&(s=s.map(a=>kd(a))),p(t,["contents"],s)}let o=u(e,["config"]);return o!=null&&p(t,["generationConfig"],QP(n,o,t)),t}function F1(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["contents"]);if(r!=null){let s=yn(r);Array.isArray(s)&&(s=s.map(a=>a)),p(t,["contents"],s)}let o=u(e,["config"]);return o!=null&&p(t,["generationConfig"],ZP(n,o,t)),t}function k1(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>CP(f))),p(e,["candidates"],l)}let r=u(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);let o=u(n,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);let s=u(n,["responseId"]);s!=null&&p(e,["responseId"],s);let a=u(n,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function O1(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>m)),p(e,["candidates"],f)}let r=u(n,["createTime"]);r!=null&&p(e,["createTime"],r);let o=u(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);let s=u(n,["promptFeedback"]);s!=null&&p(e,["promptFeedback"],s);let a=u(n,["responseId"]);a!=null&&p(e,["responseId"],a);let l=u(n,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function XP(n,e){let t={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);let r=u(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);let o=u(n,["guidanceScale"]);if(e!==void 0&&o!=null&&p(e,["parameters","guidanceScale"],o),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=u(n,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);let a=u(n,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);let l=u(n,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);let f=u(n,["includeRaiReason"]);e!==void 0&&f!=null&&p(e,["parameters","includeRaiReason"],f);let m=u(n,["language"]);e!==void 0&&m!=null&&p(e,["parameters","language"],m);let y=u(n,["outputMimeType"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","mimeType"],y);let v=u(n,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let _=u(n,["imageSize"]);if(e!==void 0&&_!=null&&p(e,["parameters","sampleImageSize"],_),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function eF(n,e){let t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);let r=u(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);let o=u(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);let s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);let a=u(n,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);let l=u(n,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);let f=u(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);let m=u(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);let y=u(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&p(e,["parameters","includeSafetyAttributes"],y);let v=u(n,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);let _=u(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);let E=u(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);let b=u(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","compressionQuality"],b);let A=u(n,["addWatermark"]);e!==void 0&&A!=null&&p(e,["parameters","addWatermark"],A);let M=u(n,["labels"]);e!==void 0&&M!=null&&p(e,["labels"],M);let O=u(n,["imageSize"]);e!==void 0&&O!=null&&p(e,["parameters","sampleImageSize"],O);let L=u(n,["enhancePrompt"]);return e!==void 0&&L!=null&&p(e,["parameters","enhancePrompt"],L),t}function tF(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);let o=u(e,["config"]);return o!=null&&XP(o,t),t}function nF(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);let o=u(e,["config"]);return o!=null&&eF(o,t),t}function iF(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>hF(s))),p(e,["generatedImages"],o)}let r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],mx(r)),e}function rF(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Od(s))),p(e,["generatedImages"],o)}let r=u(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],hx(r)),e}function oF(n,e){let t={},i=u(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let r=u(n,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let o=u(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);let s=u(n,["resolution"]);e!==void 0&&s!=null&&p(e,["parameters","resolution"],s);let a=u(n,["personGeneration"]);if(e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let l=u(n,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);let f=u(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&p(e,["parameters","enhancePrompt"],f),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let m=u(n,["lastFrame"]);e!==void 0&&m!=null&&p(e,["instances[0]","lastFrame"],Ld(m));let y=u(n,["referenceImages"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(_=>ak(_))),p(e,["instances[0]","referenceImages"],v)}if(u(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function sF(n,e){let t={},i=u(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);let r=u(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);let o=u(n,["fps"]);e!==void 0&&o!=null&&p(e,["parameters","fps"],o);let s=u(n,["durationSeconds"]);e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s);let a=u(n,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);let l=u(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);let f=u(n,["resolution"]);e!==void 0&&f!=null&&p(e,["parameters","resolution"],f);let m=u(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);let y=u(n,["pubsubTopic"]);e!==void 0&&y!=null&&p(e,["parameters","pubsubTopic"],y);let v=u(n,["negativePrompt"]);e!==void 0&&v!=null&&p(e,["parameters","negativePrompt"],v);let _=u(n,["enhancePrompt"]);e!==void 0&&_!=null&&p(e,["parameters","enhancePrompt"],_);let E=u(n,["generateAudio"]);e!==void 0&&E!=null&&p(e,["parameters","generateAudio"],E);let b=u(n,["lastFrame"]);e!==void 0&&b!=null&&p(e,["instances[0]","lastFrame"],Fn(b));let A=u(n,["referenceImages"]);if(e!==void 0&&A!=null){let L=A;Array.isArray(L)&&(L=L.map(G=>lk(G))),p(e,["instances[0]","referenceImages"],L)}let M=u(n,["mask"]);e!==void 0&&M!=null&&p(e,["instances[0]","mask"],sk(M));let O=u(n,["compressionQuality"]);return e!==void 0&&O!=null&&p(e,["parameters","compressionQuality"],O),t}function aF(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["metadata"]);i!=null&&p(e,["metadata"],i);let r=u(n,["done"]);r!=null&&p(e,["done"],r);let o=u(n,["error"]);o!=null&&p(e,["error"],o);let s=u(n,["response","generateVideoResponse"]);return s!=null&&p(e,["response"],dF(s)),e}function lF(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["metadata"]);i!=null&&p(e,["metadata"],i);let r=u(n,["done"]);r!=null&&p(e,["done"],r);let o=u(n,["error"]);o!=null&&p(e,["error"],o);let s=u(n,["response"]);return s!=null&&p(e,["response"],fF(s)),e}function uF(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);let o=u(e,["image"]);o!=null&&p(t,["instances[0]","image"],Ld(o));let s=u(e,["video"]);s!=null&&p(t,["instances[0]","video"],yx(s));let a=u(e,["source"]);a!=null&&pF(a,t);let l=u(e,["config"]);return l!=null&&oF(l,t),t}function cF(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);let o=u(e,["image"]);o!=null&&p(t,["instances[0]","image"],Fn(o));let s=u(e,["video"]);s!=null&&p(t,["instances[0]","video"],vx(s));let a=u(e,["source"]);a!=null&&mF(a,t);let l=u(e,["config"]);return l!=null&&sF(l,t),t}function dF(n){let e={},t=u(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>yF(s))),p(e,["generatedVideos"],o)}let i=u(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);let r=u(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function fF(n){let e={},t=u(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(s=>vF(s))),p(e,["generatedVideos"],o)}let i=u(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);let r=u(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function pF(n,e){let t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);let r=u(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Ld(r));let o=u(n,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],yx(o)),t}function mF(n,e){let t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);let r=u(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Fn(r));let o=u(n,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],vx(o)),t}function hF(n){let e={},t=u(n,["_self"]);t!=null&&p(e,["image"],wF(t));let i=u(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);let r=u(n,["_self"]);return r!=null&&p(e,["safetyAttributes"],mx(r)),e}function Od(n){let e={},t=u(n,["_self"]);t!=null&&p(e,["image"],px(t));let i=u(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);let r=u(n,["_self"]);r!=null&&p(e,["safetyAttributes"],hx(r));let o=u(n,["prompt"]);return o!=null&&p(e,["enhancedPrompt"],o),e}function gF(n){let e={},t=u(n,["_self"]);t!=null&&p(e,["mask"],px(t));let i=u(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),p(e,["labels"],r)}return e}function yF(n){let e={},t=u(n,["video"]);return t!=null&&p(e,["video"],rk(t)),e}function vF(n){let e={},t=u(n,["_self"]);return t!=null&&p(e,["video"],ok(t)),e}function _F(n){let e={},t=u(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);let i=u(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);let r=u(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);let o=u(n,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);let s=u(n,["enableAffectiveDialog"]);s!=null&&p(e,["enableAffectiveDialog"],s);let a=u(n,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);let l=u(n,["logprobs"]);l!=null&&p(e,["logprobs"],l);let f=u(n,["maxOutputTokens"]);f!=null&&p(e,["maxOutputTokens"],f);let m=u(n,["mediaResolution"]);m!=null&&p(e,["mediaResolution"],m);let y=u(n,["presencePenalty"]);y!=null&&p(e,["presencePenalty"],y);let v=u(n,["responseLogprobs"]);v!=null&&p(e,["responseLogprobs"],v);let _=u(n,["responseMimeType"]);_!=null&&p(e,["responseMimeType"],_);let E=u(n,["responseModalities"]);E!=null&&p(e,["responseModalities"],E);let b=u(n,["responseSchema"]);b!=null&&p(e,["responseSchema"],b);let A=u(n,["routingConfig"]);A!=null&&p(e,["routingConfig"],A);let M=u(n,["seed"]);M!=null&&p(e,["seed"],M);let O=u(n,["speechConfig"]);O!=null&&p(e,["speechConfig"],O);let L=u(n,["stopSequences"]);L!=null&&p(e,["stopSequences"],L);let G=u(n,["temperature"]);G!=null&&p(e,["temperature"],G);let Q=u(n,["thinkingConfig"]);Q!=null&&p(e,["thinkingConfig"],Q);let re=u(n,["topK"]);re!=null&&p(e,["topK"],re);let te=u(n,["topP"]);if(te!=null&&p(e,["topP"],te),u(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function CF(n,e){let t={},i=u(e,["model"]);return i!=null&&p(t,["_url","name"],Ie(n,i)),t}function EF(n,e){let t={},i=u(e,["model"]);return i!=null&&p(t,["_url","name"],Ie(n,i)),t}function xF(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function SF(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function DF(n){let e={},t=u(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);let i=u(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),u(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function bF(n){let e={},t=u(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);let i=u(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);let r=u(n,["personGeneration"]);r!=null&&p(e,["personGeneration"],r);let o=u(n,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);let s=u(n,["outputCompressionQuality"]);return s!=null&&p(e,["imageOutputOptions","compressionQuality"],s),e}function wF(n){let e={},t=u(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],Hi(t));let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function px(n){let e={},t=u(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);let i=u(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Hi(i));let r=u(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Ld(n){let e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let t=u(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],Hi(t));let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Fn(n){let e={},t=u(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);let i=u(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Hi(i));let r=u(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function TF(n,e,t){let i={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);t!==void 0&&o!=null&&p(t,["_query","pageToken"],o);let s=u(e,["filter"]);t!==void 0&&s!=null&&p(t,["_query","filter"],s);let a=u(e,["queryBase"]);return t!==void 0&&a!=null&&p(t,["_url","models_url"],sx(n,a)),i}function IF(n,e,t){let i={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);t!==void 0&&o!=null&&p(t,["_query","pageToken"],o);let s=u(e,["filter"]);t!==void 0&&s!=null&&p(t,["_query","filter"],s);let a=u(e,["queryBase"]);return t!==void 0&&a!=null&&p(t,["_url","models_url"],sx(n,a)),i}function MF(n,e){let t={},i=u(e,["config"]);return i!=null&&TF(n,i,t),t}function AF(n,e){let t={},i=u(e,["config"]);return i!=null&&IF(n,i,t),t}function RF(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);let r=u(n,["_self"]);if(r!=null){let o=ax(r);Array.isArray(o)&&(o=o.map(s=>P0(s))),p(e,["models"],o)}return e}function NF(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);let r=u(n,["_self"]);if(r!=null){let o=ax(r);Array.isArray(o)&&(o=o.map(s=>F0(s))),p(e,["models"],o)}return e}function PF(n){let e={},t=u(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);let i=u(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);let r=u(n,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function P0(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["displayName"]);i!=null&&p(e,["displayName"],i);let r=u(n,["description"]);r!=null&&p(e,["description"],r);let o=u(n,["version"]);o!=null&&p(e,["version"],o);let s=u(n,["_self"]);s!=null&&p(e,["tunedModelInfo"],JF(s));let a=u(n,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);let l=u(n,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);let f=u(n,["supportedGenerationMethods"]);f!=null&&p(e,["supportedActions"],f);let m=u(n,["temperature"]);m!=null&&p(e,["temperature"],m);let y=u(n,["maxTemperature"]);y!=null&&p(e,["maxTemperature"],y);let v=u(n,["topP"]);v!=null&&p(e,["topP"],v);let _=u(n,["topK"]);_!=null&&p(e,["topK"],_);let E=u(n,["thinking"]);return E!=null&&p(e,["thinking"],E),e}function F0(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["displayName"]);i!=null&&p(e,["displayName"],i);let r=u(n,["description"]);r!=null&&p(e,["description"],r);let o=u(n,["versionId"]);o!=null&&p(e,["version"],o);let s=u(n,["deployedModels"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(v=>zP(v))),p(e,["endpoints"],y)}let a=u(n,["labels"]);a!=null&&p(e,["labels"],a);let l=u(n,["_self"]);l!=null&&p(e,["tunedModelInfo"],KF(l));let f=u(n,["defaultCheckpointId"]);f!=null&&p(e,["defaultCheckpointId"],f);let m=u(n,["checkpoints"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["checkpoints"],y)}return e}function FF(n){let e={},t=u(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);let i=u(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&p(e,["fileData"],jP(o));let s=u(n,["functionCall"]);s!=null&&p(e,["functionCall"],YP(s));let a=u(n,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);let l=u(n,["inlineData"]);l!=null&&p(e,["inlineData"],_P(l));let f=u(n,["text"]);f!=null&&p(e,["text"],f);let m=u(n,["thought"]);m!=null&&p(e,["thought"],m);let y=u(n,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);let v=u(n,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function kF(n){let e={},t=u(n,["productImage"]);return t!=null&&p(e,["image"],Fn(t)),e}function OF(n,e){let t={},i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);let r=u(n,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);let o=u(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);let s=u(n,["seed"]);e!==void 0&&s!=null&&p(e,["parameters","seed"],s);let a=u(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);let l=u(n,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);let f=u(n,["addWatermark"]);e!==void 0&&f!=null&&p(e,["parameters","addWatermark"],f);let m=u(n,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);let y=u(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","compressionQuality"],y);let v=u(n,["enhancePrompt"]);e!==void 0&&v!=null&&p(e,["parameters","enhancePrompt"],v);let _=u(n,["labels"]);return e!==void 0&&_!=null&&p(e,["labels"],_),t}function LF(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["source"]);r!=null&&BF(r,t);let o=u(e,["config"]);return o!=null&&OF(o,t),t}function VF(n){let e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Od(r))),p(e,["generatedImages"],i)}return e}function BF(n,e){let t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);let r=u(n,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Fn(r));let o=u(n,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>kF(a))),p(e,["instances[0]","productImages"],s)}return t}function UF(n){let e={},t=u(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Fn(t));let i=u(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);let r=u(n,["referenceType"]);r!=null&&p(e,["referenceType"],r);let o=u(n,["maskImageConfig"]);o!=null&&p(e,["maskImageConfig"],PF(o));let s=u(n,["controlImageConfig"]);s!=null&&p(e,["controlImageConfig"],wP(s));let a=u(n,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],a);let l=u(n,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],l),e}function mx(n){let e={},t=u(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);let i=u(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);let r=u(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function hx(n){let e={},t=u(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);let i=u(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);let r=u(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function HF(n){let e={},t=u(n,["category"]);if(t!=null&&p(e,["category"],t),u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function $F(n){let e={},t=u(n,["image"]);return t!=null&&p(e,["image"],Fn(t)),e}function GF(n,e){let t={},i=u(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);let r=u(n,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);let o=u(n,["confidenceThreshold"]);e!==void 0&&o!=null&&p(e,["parameters","confidenceThreshold"],o);let s=u(n,["maskDilation"]);e!==void 0&&s!=null&&p(e,["parameters","maskDilation"],s);let a=u(n,["binaryColorThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","binaryColorThreshold"],a);let l=u(n,["labels"]);return e!==void 0&&l!=null&&p(e,["labels"],l),t}function qF(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["source"]);r!=null&&zF(r,t);let o=u(e,["config"]);return o!=null&&GF(o,t),t}function WF(n){let e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>gF(r))),p(e,["generatedMasks"],i)}return e}function zF(n,e){let t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);let r=u(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Fn(r));let o=u(n,["scribbleImage"]);return e!==void 0&&o!=null&&p(e,["instances[0]","scribble"],$F(o)),t}function jF(n){let e={},t=u(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);let i=u(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],JP(i)),e}function YF(n){let e={};if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=u(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);let i=u(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);let r=u(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=u(n,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(y=>y)),p(e,["functionDeclarations"],m)}let s=u(n,["googleMaps"]);s!=null&&p(e,["googleMaps"],xF(s));let a=u(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],SF(a));let l=u(n,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);let f=u(n,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function gx(n){let e={},t=u(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);let i=u(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),u(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let r=u(n,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);let o=u(n,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);let s=u(n,["functionDeclarations"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(v=>KP(v))),p(e,["functionDeclarations"],y)}let a=u(n,["googleMaps"]);a!=null&&p(e,["googleMaps"],a);let l=u(n,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);let f=u(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);let m=u(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function JF(n){let e={},t=u(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);let i=u(n,["createTime"]);i!=null&&p(e,["createTime"],i);let r=u(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function KF(n){let e={},t=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);let i=u(n,["createTime"]);i!=null&&p(e,["createTime"],i);let r=u(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function QF(n,e){let t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);let r=u(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);let o=u(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),t}function ZF(n,e){let t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);let r=u(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);let o=u(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),t}function XF(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","name"],Ie(n,i));let r=u(e,["config"]);return r!=null&&QF(r,t),t}function ek(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["config"]);return r!=null&&ZF(r,t),t}function tk(n,e){let t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);let r=u(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);let o=u(n,["personGeneration"]);e!==void 0&&o!=null&&p(e,["parameters","personGeneration"],o);let s=u(n,["includeRaiReason"]);e!==void 0&&s!=null&&p(e,["parameters","includeRaiReason"],s);let a=u(n,["outputMimeType"]);e!==void 0&&a!=null&&p(e,["parameters","outputOptions","mimeType"],a);let l=u(n,["outputCompressionQuality"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","compressionQuality"],l);let f=u(n,["enhanceInputImage"]);e!==void 0&&f!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],f);let m=u(n,["imagePreservationFactor"]);e!==void 0&&m!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],m);let y=u(n,["labels"]);e!==void 0&&y!=null&&p(e,["labels"],y);let v=u(n,["numberOfImages"]);e!==void 0&&v!=null&&p(e,["parameters","sampleCount"],v);let _=u(n,["mode"]);return e!==void 0&&_!=null&&p(e,["parameters","mode"],_),t}function nk(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["_url","model"],Ie(n,i));let r=u(e,["image"]);r!=null&&p(t,["instances[0]","image"],Fn(r));let o=u(e,["upscaleFactor"]);o!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],o);let s=u(e,["config"]);return s!=null&&tk(s,t),t}function ik(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Od(o))),p(e,["generatedImages"],r)}return e}function rk(n){let e={},t=u(n,["uri"]);t!=null&&p(e,["uri"],t);let i=u(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Hi(i));let r=u(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function ok(n){let e={},t=u(n,["gcsUri"]);t!=null&&p(e,["uri"],t);let i=u(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Hi(i));let r=u(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function sk(n){let e={},t=u(n,["image"]);t!=null&&p(e,["_self"],Fn(t));let i=u(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function ak(n){let e={},t=u(n,["image"]);t!=null&&p(e,["image"],Ld(t));let i=u(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function lk(n){let e={},t=u(n,["image"]);t!=null&&p(e,["image"],Fn(t));let i=u(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function yx(n){let e={},t=u(n,["uri"]);t!=null&&p(e,["uri"],t);let i=u(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Hi(i));let r=u(n,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function vx(n){let e={},t=u(n,["uri"]);t!=null&&p(e,["gcsUri"],t);let i=u(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Hi(i));let r=u(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function uk(n,e){let t={},i=u(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function ck(n){let e={},t=u(n,["config"]);return t!=null&&uk(t,e),e}function dk(n,e){let t={},i=u(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function fk(n){let e={},t=u(n,["name"]);t!=null&&p(e,["_url","name"],t);let i=u(n,["config"]);return i!=null&&dk(i,e),e}function pk(n){let e={},t=u(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function mk(n,e){let t={},i=u(n,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["customMetadata"],o)}let r=u(n,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),t}function hk(n){let e={},t=u(n,["name"]);t!=null&&p(e,["name"],t);let i=u(n,["metadata"]);i!=null&&p(e,["metadata"],i);let r=u(n,["done"]);r!=null&&p(e,["done"],r);let o=u(n,["error"]);o!=null&&p(e,["error"],o);let s=u(n,["response"]);return s!=null&&p(e,["response"],yk(s)),e}function gk(n){let e={},t=u(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);let i=u(n,["fileName"]);i!=null&&p(e,["fileName"],i);let r=u(n,["config"]);return r!=null&&mk(r,e),e}function yk(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["parent"]);i!=null&&p(e,["parent"],i);let r=u(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function vk(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function _k(n){let e={},t=u(n,["config"]);return t!=null&&vk(t,e),e}function Ck(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);let r=u(n,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["fileSearchStores"],o)}return e}function _x(n,e){let t={},i=u(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);let r=u(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);let o=u(n,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["customMetadata"],a)}let s=u(n,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),t}function Ek(n){let e={},t=u(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);let i=u(n,["config"]);return i!=null&&_x(i,e),e}function xk(n){let e={},t=u(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}var Sk="Content-Type",Dk="X-Server-Timeout",bk="User-Agent",k0="x-goog-api-client",wk="1.37.0",Tk=`google-genai-sdk/${wk}`,Ik="v1beta1",Mk="v1beta",O0=class{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Ik,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Mk,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){let r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(let[s,a]of Object.entries(e.queryParams))r.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){let i=JSON.parse(JSON.stringify(e));for(let[r,o]of Object.entries(t))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){let o=new AbortController,s=o.signal;if(t.timeout&&t?.timeout>0){let a=setTimeout(()=>o.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=s}return t&&t.extraBody!==null&&Ak(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await L1(r),new Ja(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await L1(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Rn(this,arguments,function*(){var i;let r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="",a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:f,value:m}=yield pe(r.read());if(f){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let y=o.decode(m,{stream:!0});try{let E=JSON.parse(y);if("error"in E){let b=JSON.parse(JSON.stringify(E.error)),A=b.status,M=b.code,O=`got status: ${A}. ${JSON.stringify(E)}`;if(M>=400&&M<600)throw new Cd({message:O,status:M})}}catch(E){if(E.name==="ApiError")throw E}s+=y;let v=-1,_=0;for(;;){v=-1,_=0;for(let A of l){let M=s.indexOf(A);M!==-1&&(v===-1||M<v)&&(v=M,_=A.length)}if(v===-1)break;let E=s.substring(0,v);s=s.substring(v+_);let b=E.trim();if(b.startsWith(a)){let A=b.substring(a.length).trim();try{let M=new Response(A,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield pe(new Ja(M))}catch(M){throw new Error(`exception parsing stream chunk ${A}. ${M}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},t=Tk+" "+this.clientOptions.userAgentExtra;return e[bk]=t,e[k0]=t,e[Sk]="application/json",e}async getHeadersInternal(e,t){let i=new Headers;if(e&&e.headers){for(let[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(Dk,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;let r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);let o=this.clientOptions.uploader,s=await o.stat(e);r.sizeBytes=String(s.size);let a=(i=t?.mimeType)!==null&&i!==void 0?i:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;let l={file:r},f=this.getFileName(e),m=z("upload/v1beta/files",l._url),y=await this.fetchUploadUrl(m,r.sizeBytes,r.mimeType,f,l,t?.httpOptions);return o.upload(e,y,this)}async uploadFileToFileSearchStore(e,t,i){var r;let o=this.clientOptions.uploader,s=await o.stat(t),a=String(s.size),l=(r=i?.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let f=`upload/v1beta/${e}:uploadToFileSearchStore`,m=this.getFileName(t),y={};i!=null&&_x(i,y);let v=await this.fetchUploadUrl(f,a,l,m,y,i?.httpOptions);return o.uploadToFileSearchStore(t,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};let f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!f||!f?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let m=(a=f?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(m===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return m}};async function L1(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){let t=n.status,i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};let r=JSON.stringify(i);throw t>=400&&t<600?new Cd({message:r,status:t}):new Error(r)}}function Ak(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{let o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,s){let a=Object.assign({},o);for(let l in s)if(Object.prototype.hasOwnProperty.call(s,l)){let f=s[l],m=a[l];f&&typeof f=="object"&&!Array.isArray(f)&&m&&typeof m=="object"&&!Array.isArray(m)?a[l]=i(m,f):(m&&f&&typeof m!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof m}, New type: ${typeof f}. Overwriting.`),a[l]=f)}return a}let r=i(t,e);n.body=JSON.stringify(r)}var Rk="mcp_used/unknown",Nk=!1;function Cx(n){for(let e of n)if(Pk(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Nk}function Ex(n){var e;let t=(e=n[k0])!==null&&e!==void 0?e:"";n[k0]=(t+` ${Rk}`).trimStart()}function Pk(n){return n!==null&&typeof n=="object"&&n instanceof L0}function Fk(n){return Rn(this,arguments,function*(t,i=100){let r,o=0;for(;o<i;){let s=yield pe(t.listTools({cursor:r}));for(let a of s.tools)yield yield pe(a),o++;if(!s.nextCursor)break;r=s.nextCursor}})}var L0=class n{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new n(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;let o={},s=[];for(let m of this.mcpClients)try{for(var a=!0,l=(t=void 0,Nn(Fk(m))),f;f=await l.next(),e=f.done,!e;a=!0){r=f.value,a=!1;let y=r;s.push(y);let v=y.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=m}}catch(y){t={error:y}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(t)throw t.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),yR(this.mcpTools,this.config)}async callTool(e){await this.initialize();let t=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let r=this.functionNameToMcpClient[i.name],o;this.config.timeout&&(o={timeout:this.config.timeout});let s=await r.callTool({name:i.name,arguments:i.args},void 0,o);t.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return t}};async function kk(n,e,t){let i=new D0,r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}var V0=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=Lk(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`,f=()=>{},m=new Promise(L=>{f=L}),y=e.callbacks,v=function(){f({})},_=this.apiClient,E={onopen:v,onmessage:L=>{kk(_,y.onmessage,L)},onerror:(t=y?.onerror)!==null&&t!==void 0?t:function(L){},onclose:(i=y?.onclose)!==null&&i!==void 0?i:function(L){}},b=this.webSocketFactory.create(l,Ok(s),E);b.connect(),await m;let O={setup:{model:Ie(this.apiClient,e.model)}};return b.send(JSON.stringify(O)),new B0(b,this.apiClient)}},B0=class{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let t=uP(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let t=lP(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){let t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ja.PLAY)}pause(){this.sendPlaybackControl(ja.PAUSE)}stop(){this.sendPlaybackControl(ja.STOP)}resetContext(){this.sendPlaybackControl(ja.RESET_CONTEXT)}close(){this.conn.close()}};function Ok(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function Lk(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var Vk="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Bk(n,e,t){let i=new S0,r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;let o=JSON.parse(r);if(n.isVertexAI()){let s=fP(o);Object.assign(i,s)}else Object.assign(i,o);e(i)}var U0=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new V0(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),m,y=this.apiClient.getHeaders();e.config&&e.config.tools&&Cx(e.config.tools)&&Ex(y);let v=$k(y);if(this.apiClient.isVertexAI())m=`${l}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,m);else{let me=this.apiClient.getApiKey(),xe="BidiGenerateContent",yt="key";me?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),xe="BidiGenerateContentConstrained",yt="access_token"),m=`${l}/ws/google.ai.generativelanguage.${f}.GenerativeService.${xe}?${yt}=${me}`}let _=()=>{},E=new Promise(me=>{_=me}),b=e.callbacks,A=function(){var me;(me=b?.onopen)===null||me===void 0||me.call(b),_({})},M=this.apiClient,O={onopen:A,onmessage:me=>{Bk(M,b.onmessage,me)},onerror:(t=b?.onerror)!==null&&t!==void 0?t:function(me){},onclose:(i=b?.onclose)!==null&&i!==void 0?i:function(me){}},L=this.webSocketFactory.create(m,Hk(v),O);L.connect(),await E;let G=Ie(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){let me=this.apiClient.getProject(),xe=this.apiClient.getLocation();G=`projects/${me}/locations/${xe}/`+G}let Q={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[c0.AUDIO]}:e.config.responseModalities=[c0.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let re=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],te=[];for(let me of re)if(this.isCallableTool(me)){let xe=me;te.push(await xe.tool())}else te.push(me);te.length>0&&(e.config.tools=te);let be={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Q=aP(this.apiClient,be):Q=sP(this.apiClient,be),delete Q.config,L.send(JSON.stringify(Q)),new H0(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},Uk={turnComplete:!0},H0=class{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=yn(t.turns),e.isVertexAI()||(i=i.map(r=>kd(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(Vk)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Uk),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:dP(e)}:t={realtimeInput:cP(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}};function Hk(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function $k(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var V1=10;function B1(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(let s of(t=n?.tools)!==null&&t!==void 0?t:[])if(Go(s)){r=!0;break}if(!r)return!0;let o=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Go(n){return"callTool"in n&&typeof n.callTool=="function"}function Gk(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Go(r)))!==null&&i!==void 0?i:!1}function U1(n){var e;let t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(Go(i))return;let o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(r)}),t}function H1(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var $0=class extends Pn{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,o,s,a;let l=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Gk(t)||B1(t.config))return await this.generateContentInternal(l);let f=U1(t);if(f.length>0){let b=f.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let m,y,v=yn(l.contents),_=(o=(r=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:V1,E=0;for(;E<_&&(m=await this.generateContentInternal(l),!(!m.functionCalls||m.functionCalls.length===0));){let b=m.candidates[0].content,A=[];for(let M of(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Go(M)){let L=await M.callTool(m.functionCalls);A.push(...L)}E++,y={role:"user",parts:A},l.contents=yn(l.contents),l.contents.push(b),l.contents.push(y),H1(l.config)&&(v.push(b),v.push(y))}return H1(l.config)&&(m.automaticFunctionCallingHistory=v),m},this.generateContentStream=async t=>{var i,r,o,s,a;if(this.maybeMoveToResponseJsonSchem(t),B1(t.config)){let y=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(y)}let l=U1(t);if(l.length>0){let y=l.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let f=(o=(r=(i=t?.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,m=(a=(s=t?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(f&&!m)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let o,s=[];if(i?.generatedImages)for(let l of i.generatedImages)l&&l?.safetyAttributes&&((r=l?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=l?.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async t=>{var i;let s={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new hi($i.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async t=>{let i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));let r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,o,s,a,l;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((s=(o=t.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;let o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;let s=await Promise.all(o.map(async l=>Go(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&Cx(e.config.tools)){let l=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{},f=Object.assign({},l);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Ex(f),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return a}async initAfcToolsMap(e){var t,i,r;let o=new Map;for(let s of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Go(s)){let a=s,l=await a.tool();for(let f of(r=l.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,a)}}return o}async processAfcStream(e){var t,i,r;let o=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:V1,s=!1,a=0,l=await this.initAfcToolsMap(e);return(function(f,m,y){return Rn(this,arguments,function*(){for(var v,_,E,b,A,M;a<o;){s&&(a++,s=!1);let Q=yield pe(f.processParamsMaybeAddMcpUsage(y)),re=yield pe(f.generateContentStreamInternal(Q)),te=[],be=[];try{for(var O=!0,L=(_=void 0,Nn(re)),G;G=yield pe(L.next()),v=G.done,!v;O=!0){b=G.value,O=!1;let me=b;if(yield yield pe(me),me.candidates&&(!((A=me.candidates[0])===null||A===void 0)&&A.content)){be.push(me.candidates[0].content);for(let xe of(M=me.candidates[0].content.parts)!==null&&M!==void 0?M:[])if(a<o&&xe.functionCall){if(!xe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(xe.functionCall.name)){let yt=yield pe(m.get(xe.functionCall.name).callTool([xe.functionCall]));te.push(...yt)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${xe.functionCall.name}`)}}}}catch(me){_={error:me}}finally{try{!O&&!v&&(E=L.return)&&(yield pe(E.call(L)))}finally{if(_)throw _.error}}if(te.length>0){s=!0;let me=new Ar;me.candidates=[{content:{role:"user",parts:te}}],yield yield pe(me);let xe=[];xe.push(...be),xe.push({role:"user",parts:te});let yt=yn(y.contents).concat(xe);y.contents=yt}else break}})})(this,l,e)}async generateContentInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=F1(this.apiClient,e);return a=z("{model}:generateContent",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=O1(m),v=new Ar;return Object.assign(v,y),v})}else{let f=P1(this.apiClient,e);return a=z("{model}:generateContent",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=k1(m),v=new Ar;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=F1(this.apiClient,e);return a=z("{model}:streamGenerateContent?alt=sse",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(y){return Rn(this,arguments,function*(){var v,_,E,b;try{for(var A=!0,M=Nn(y),O;O=yield pe(M.next()),v=O.done,!v;A=!0){b=O.value,A=!1;let L=b,G=O1(yield pe(L.json()));G.sdkHttpResponse={headers:L.headers};let Q=new Ar;Object.assign(Q,G),yield yield pe(Q)}}catch(L){_={error:L}}finally{try{!A&&!v&&(E=M.return)&&(yield pe(E.call(M)))}finally{if(_)throw _.error}}})})}else{let f=P1(this.apiClient,e);return a=z("{model}:streamGenerateContent?alt=sse",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(y){return Rn(this,arguments,function*(){var v,_,E,b;try{for(var A=!0,M=Nn(y),O;O=yield pe(M.next()),v=O.done,!v;A=!0){b=O.value,A=!1;let L=b,G=k1(yield pe(L.json()));G.sdkHttpResponse={headers:L.headers};let Q=new Ar;Object.assign(Q,G),yield yield pe(Q)}}catch(L){_={error:L}}finally{try{!A&&!v&&(E=M.return)&&(yield pe(E.call(M)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=GP(this.apiClient,e);return a=z("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=WP(m),v=new ad;return Object.assign(v,y),v})}else{let f=$P(this.apiClient,e);return a=z("{model}:batchEmbedContents",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=qP(m),v=new ad;return Object.assign(v,y),v})}}async generateImagesInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=nF(this.apiClient,e);return a=z("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=rF(m),v=new ld;return Object.assign(v,y),v})}else{let f=tF(this.apiClient,e);return a=z("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=iF(m),v=new ld;return Object.assign(v,y),v})}}async editImageInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=VP(this.apiClient,e);return o=z("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(f=>{let m=f;return m.sdkHttpResponse={headers:l.headers},m})),r.then(l=>{let f=BP(l),m=new d0;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=nk(this.apiClient,e);return o=z("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(f=>{let m=f;return m.sdkHttpResponse={headers:l.headers},m})),r.then(l=>{let f=ik(l),m=new f0;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=LF(this.apiClient,e);return o=z("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let f=VF(l),m=new p0;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=qF(this.apiClient,e);return o=z("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let f=WF(l),m=new m0;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=EF(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>F0(m))}else{let f=CF(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>P0(m))}}async listInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=AF(this.apiClient,e);return a=z("{models_url}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=NF(m),v=new ud;return Object.assign(v,y),v})}else{let f=MF(this.apiClient,e);return a=z("{models_url}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=RF(m),v=new ud;return Object.assign(v,y),v})}}async update(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=ek(this.apiClient,e);return a=z("{model}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>F0(m))}else{let f=XF(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>P0(m))}}async delete(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=FP(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=OP(m),v=new cd;return Object.assign(v,y),v})}else{let f=PP(this.apiClient,e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=kP(m),v=new cd;return Object.assign(v,y),v})}}async countTokens(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=AP(this.apiClient,e);return a=z("{model}:countTokens",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=NP(m),v=new dd;return Object.assign(v,y),v})}else{let f=MP(this.apiClient,e);return a=z("{model}:countTokens",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=RP(m),v=new dd;return Object.assign(v,y),v})}}async computeTokens(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=xP(this.apiClient,e);return o=z("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(f=>{let m=f;return m.sdkHttpResponse={headers:l.headers},m})),r.then(l=>{let f=SP(l),m=new h0;return Object.assign(m,f),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=cF(this.apiClient,e);return a=z("{model}:predictLongRunning",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{let y=lF(m),v=new fd;return Object.assign(v,y),v})}else{let f=uF(this.apiClient,e);return a=z("{model}:predictLongRunning",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s.then(m=>{let y=aF(m),v=new fd;return Object.assign(v,y),v})}}};var G0=class extends Pn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=t.name.split("/operations/")[0],o;i&&"httpOptions"in i&&(o=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=t.name.split("/operations/")[0],o;i&&"httpOptions"in i&&(o=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=rR(e);return a=z("{operationName}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s}else{let f=iR(e);return a=z("{operationName}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),s}}async fetchPredictVideosOperationInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=KA(e);return o=z("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}};function qk(n){let e={},t=u(n,["data"]);if(t!=null&&p(e,["data"],t),u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Wk(n){let e={},t=u(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>e6(o))),p(e,["parts"],r)}let i=u(n,["role"]);return i!=null&&p(e,["role"],i),e}function zk(n,e,t){let i={},r=u(e,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);let o=u(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&p(t,["newSessionExpireTime"],o);let s=u(e,["uses"]);t!==void 0&&s!=null&&p(t,["uses"],s);let a=u(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&p(t,["bidiGenerateContentSetup"],Xk(n,a));let l=u(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&p(t,["fieldMask"],l),i}function jk(n,e){let t={},i=u(e,["config"]);return i!=null&&p(t,["config"],zk(n,i,t)),t}function Yk(n){let e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=u(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);let i=u(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Jk(n){let e={},t=u(n,["id"]);t!=null&&p(e,["id"],t);let i=u(n,["args"]);i!=null&&p(e,["args"],i);let r=u(n,["name"]);if(r!=null&&p(e,["name"],r),u(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Kk(n){let e={};if(u(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=u(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Qk(n){let e={};if(u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=u(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Zk(n,e){let t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);let r=u(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);let o=u(n,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);let s=u(n,["topP"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topP"],s);let a=u(n,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);let l=u(n,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);let f=u(n,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);let m=u(n,["seed"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","seed"],m);let y=u(n,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],dg(y));let v=u(n,["thinkingConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","thinkingConfig"],v);let _=u(n,["enableAffectiveDialog"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],_);let E=u(n,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],Wk(At(E)));let b=u(n,["tools"]);if(e!==void 0&&b!=null){let re=jo(b);Array.isArray(re)&&(re=re.map(te=>n6(zo(te)))),p(e,["setup","tools"],re)}let A=u(n,["sessionResumption"]);e!==void 0&&A!=null&&p(e,["setup","sessionResumption"],t6(A));let M=u(n,["inputAudioTranscription"]);e!==void 0&&M!=null&&p(e,["setup","inputAudioTranscription"],M);let O=u(n,["outputAudioTranscription"]);e!==void 0&&O!=null&&p(e,["setup","outputAudioTranscription"],O);let L=u(n,["realtimeInputConfig"]);e!==void 0&&L!=null&&p(e,["setup","realtimeInputConfig"],L);let G=u(n,["contextWindowCompression"]);e!==void 0&&G!=null&&p(e,["setup","contextWindowCompression"],G);let Q=u(n,["proactivity"]);if(e!==void 0&&Q!=null&&p(e,["setup","proactivity"],Q),u(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function Xk(n,e){let t={},i=u(e,["model"]);i!=null&&p(t,["setup","model"],Ie(n,i));let r=u(e,["config"]);return r!=null&&p(t,["config"],Zk(r,t)),t}function e6(n){let e={},t=u(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);let i=u(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);let r=u(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);let o=u(n,["fileData"]);o!=null&&p(e,["fileData"],Yk(o));let s=u(n,["functionCall"]);s!=null&&p(e,["functionCall"],Jk(s));let a=u(n,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);let l=u(n,["inlineData"]);l!=null&&p(e,["inlineData"],qk(l));let f=u(n,["text"]);f!=null&&p(e,["text"],f);let m=u(n,["thought"]);m!=null&&p(e,["thought"],m);let y=u(n,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);let v=u(n,["videoMetadata"]);return v!=null&&p(e,["videoMetadata"],v),e}function t6(n){let e={},t=u(n,["handle"]);if(t!=null&&p(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function n6(n){let e={};if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let t=u(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);let i=u(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);let r=u(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let o=u(n,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(y=>y)),p(e,["functionDeclarations"],m)}let s=u(n,["googleMaps"]);s!=null&&p(e,["googleMaps"],Kk(s));let a=u(n,["googleSearch"]);a!=null&&p(e,["googleSearch"],Qk(a));let l=u(n,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);let f=u(n,["urlContext"]);return f!=null&&p(e,["urlContext"],f),e}function i6(n){let e=[];for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let r=Object.keys(i).map(o=>`${t}.${o}`);e.push(...r)}else e.push(t)}return e.join(",")}function r6(n,e){let t=null,i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let o=i.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;let r=n.fieldMask;if(t){let o=i6(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?n.fieldMask=o:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];r.length>0&&(a=r.map(f=>s.includes(f)?`generationConfig.${f}`:f));let l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}var q0=class extends Pn{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=jk(this.apiClient,e);o=z("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let l=r6(a,e.config);return r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}};function o6(n,e){let t={},i=u(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function s6(n){let e={},t=u(n,["name"]);t!=null&&p(e,["_url","name"],t);let i=u(n,["config"]);return i!=null&&o6(i,e),e}function a6(n){let e={},t=u(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function l6(n,e){let t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);let r=u(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function u6(n){let e={},t=u(n,["parent"]);t!=null&&p(e,["_url","parent"],t);let i=u(n,["config"]);return i!=null&&l6(i,e),e}function c6(n){let e={},t=u(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);let i=u(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);let r=u(n,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["documents"],o)}return e}var W0=class extends Pn{constructor(e){super(),this.apiClient=e,this.list=async t=>new hi($i.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=a6(e);return o=z("{name}",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var t,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=s6(e);r=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=u6(e);return o=z("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let f=c6(l),m=new g0;return Object.assign(m,f),m})}}};var z0=class extends Pn{constructor(e,t=new W0(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new hi($i.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=ck(e);return o=z("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async get(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=pk(e);return o=z("{name}",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var t,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=fk(e);r=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=_k(e);return o=z("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let f=Ck(l),m=new y0;return Object.assign(m,f),m})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Ek(e);return o=z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let f=xk(l),m=new v0;return Object.assign(m,f),m})}}async importFile(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=gk(e);return o=z("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{let f=hk(l),m=new _0;return Object.assign(m,f),m})}}};var xx=function(){let{crypto:n}=globalThis;if(n?.randomUUID)return xx=n.randomUUID.bind(n),n.randomUUID();let e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))},d6=()=>xx();function j0(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}var Y0=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){let e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};var Wt=class extends Error{},zt=class n extends Wt{constructor(e,t,i,r){super(`${n.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){let r=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new qo({message:i,cause:Y0(t)});let o=t;return e===400?new xd(e,o,i,r):e===401?new Sd(e,o,i,r):e===403?new Dd(e,o,i,r):e===404?new bd(e,o,i,r):e===409?new wd(e,o,i,r):e===422?new Td(e,o,i,r):e===429?new Id(e,o,i,r):e>=500?new Md(e,o,i,r):new n(e,o,i,r)}},Ka=class extends zt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},qo=class extends zt{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},Ed=class extends qo{constructor({message:e}={}){super({message:e??"Request timed out."})}},xd=class extends zt{},Sd=class extends zt{},Dd=class extends zt{},bd=class extends zt{},wd=class extends zt{},Td=class extends zt{},Id=class extends zt{},Md=class extends zt{};var f6=/^[a-z][a-z0-9+.-]*:/i,p6=n=>f6.test(n),J0=n=>(J0=Array.isArray,J0(n)),m6=J0,h6=m6,$1=h6;function g6(n){if(!n)return!0;for(let e in n)return!1;return!0}function y6(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var v6=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Wt(`${n} must be an integer`);if(e<0)throw new Wt(`${n} must be a positive integer`);return e},_6=n=>{try{return JSON.parse(n)}catch{return}};var C6=n=>new Promise(e=>setTimeout(e,n));var Ho="0.0.1";function E6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var x6=()=>{var n,e,t,i,r;let o=E6();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":q1(Deno.build.os),"X-Stainless-Arch":G1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":q1((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":G1((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};let s=S6();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function S6(){if(typeof navigator>"u"||!navigator)return null;let n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:t}of n){let i=t.exec(navigator.userAgent);if(i){let r=i[1]||0,o=i[2]||0,s=i[3]||0;return{browser:e,version:`${r}.${o}.${s}`}}}return null}var G1=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",q1=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown"),ed,D6=()=>ed??(ed=x6());function b6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Sx(...n){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function w6(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Sx({start(){},async pull(t){let{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function Dx(n){if(n[Symbol.asyncIterator])return n;let e=n.getReader();return{async next(){try{let t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){let t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function T6(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}let i=n.getReader(),r=i.cancel();i.releaseLock(),await r}var I6=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var bx=()=>{var n;if(typeof File>"u"){let{process:e}=globalThis,t=typeof((n=e?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function a0(n,e,t){return bx(),new File(n,e??"unknown_file",t)}function M6(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}var A6=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";var wx=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",R6=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&wx(n),N6=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function P6(n,e,t){if(bx(),n=await n,R6(n))return n instanceof File?n:a0([await n.arrayBuffer()],n.name);if(N6(n)){let r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),a0(await K0(r),e,t)}let i=await K0(n);if(e||(e=M6(n)),!t?.type){let r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return a0(i,e,t)}async function K0(n){var e,t,i,r,o;let s=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)s.push(n);else if(wx(n))s.push(n instanceof Blob?n:await n.arrayBuffer());else if(A6(n))try{for(var a=!0,l=Nn(n),f;f=await l.next(),e=f.done,!e;a=!0){r=f.value,a=!1;let m=r;s.push(...await K0(m))}}catch(m){t={error:m}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(t)throw t.error}}else{let m=(o=n?.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${m?`; constructor: ${m}`:""}${F6(n)}`)}return s}function F6(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}var k6=(()=>{class n{constructor(t){this._client=t}}n._key=[];return n})();function Tx(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var W1=Object.freeze(Object.create(null)),O6=(n=Tx)=>function(t,...i){if(t.length===1)return t[0];let r=!1,o=[],s=t.reduce((m,y,v)=>{var _,E,b;/[?#]/.test(y)&&(r=!0);let A=i[v],M=(r?encodeURIComponent:n)(""+A);return v!==i.length&&(A==null||typeof A=="object"&&A.toString===((b=Object.getPrototypeOf((E=Object.getPrototypeOf((_=A.hasOwnProperty)!==null&&_!==void 0?_:W1))!==null&&E!==void 0?E:W1))===null||b===void 0?void 0:b.toString))&&(M=A+"",o.push({start:m.length+y.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),m+y+(v===i.length?"":M)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi"),f;for(;(f=l.exec(a))!==null;)o.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(o.sort((m,y)=>m.start-y.start),o.length>0){let m=0,y=o.reduce((v,_)=>{let E=" ".repeat(_.start-m),b="^".repeat(_.length);return m=_.start+_.length,v+E+b},"");throw new Wt(`Path parameters result in path with invalid segments:
${o.map(v=>v.error).join(`
`)}
${s}
${y}`)}return s},td=O6(Tx);var Ad=class extends k6{create(e,t){var i;let{api_version:r=this._client.apiVersion}=e,o=_d(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Wt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Wt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(td`/${r}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){let{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(td`/${r}/interactions/${e}`,i)}cancel(e,t={},i){let{api_version:r=this._client.apiVersion}=t??{};return this._client.post(td`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;let o=t??{},{api_version:s=this._client.apiVersion}=o,a=_d(o,["api_version"]);return this._client.get(td`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},i),{stream:(r=t?.stream)!==null&&r!==void 0?r:!1}))}};Ad._key=Object.freeze(["interactions"]);var Rd=class extends Ad{};function L6(n){let e=0;for(let r of n)e+=r.length;let t=new Uint8Array(e),i=0;for(let r of n)t.set(r,i),i+=r.length;return t}var nd;function fg(n){let e;return(nd??(e=new globalThis.TextEncoder,nd=e.encode.bind(e)))(n)}var id;function z1(n){let e;return(id??(e=new globalThis.TextDecoder,id=e.decode.bind(e)))(n)}var Wo=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?fg(e):e;this.buffer=L6([this.buffer,t]);let i=[],r;for(;(r=V6(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(z1(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=z1(this.buffer.subarray(0,o));i.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};Wo.NEWLINE_CHARS=new Set([`
`,"\r"]);Wo.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function V6(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function B6(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}var Nd={off:0,error:200,warn:300,info:400,debug:500},j1=(n,e,t)=>{if(n){if(y6(Nd,n))return n;Ut(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Nd))}`)}};function Ya(){}function rd(n,e,t){return!e||Nd[n]>Nd[t]?Ya:e[n].bind(e)}var U6={error:Ya,warn:Ya,info:Ya,debug:Ya},Y1=new WeakMap;function Ut(n){var e;let t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return U6;let r=Y1.get(t);if(r&&r[0]===i)return r[1];let o={error:rd("error",t,i),warn:rd("warn",t,i),info:rd("info",t,i),debug:rd("debug",t,i)};return Y1.set(t,[i,o]),o}var Mr=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var Q0=class n{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1,o=i?Ut(i):console;function s(){return Rn(this,arguments,function*(){var l,f,m,y;if(r)throw new Wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var _=!0,E=Nn(H6(e,t)),b;b=yield pe(E.next()),l=b.done,!l;_=!0){y=b.value,_=!1;let A=y;if(!v)if(A.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield pe(JSON.parse(A.data))}catch(M){throw o.error("Could not parse message into JSON:",A.data),o.error("From chunk:",A.raw),M}}}catch(A){f={error:A}}finally{try{!_&&!l&&(m=E.return)&&(yield pe(m.call(E)))}finally{if(f)throw f.error}}v=!0}catch(A){if(j0(A))return yield pe(void 0);throw A}finally{v||t.abort()}})}return new n(s,t,i)}static fromReadableStream(e,t,i){let r=!1;function o(){return Rn(this,arguments,function*(){var l,f,m,y;let v=new Wo,_=Dx(e);try{for(var E=!0,b=Nn(_),A;A=yield pe(b.next()),l=A.done,!l;E=!0){y=A.value,E=!1;let M=y;for(let O of v.decode(M))yield yield pe(O)}}catch(M){f={error:M}}finally{try{!E&&!l&&(m=b.return)&&(yield pe(m.call(b)))}finally{if(f)throw f.error}}for(let M of v.flush())yield yield pe(M)})}function s(){return Rn(this,arguments,function*(){var l,f,m,y;if(r)throw new Wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let v=!1;try{try{for(var _=!0,E=Nn(o()),b;b=yield pe(E.next()),l=b.done,!l;_=!0){y=b.value,_=!1;let A=y;v||A&&(yield yield pe(JSON.parse(A)))}}catch(A){f={error:A}}finally{try{!_&&!l&&(m=E.return)&&(yield pe(m.call(E)))}finally{if(f)throw f.error}}v=!0}catch(A){if(j0(A))return yield pe(void 0);throw A}finally{v||t.abort()}})}return new n(s,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){let s=i.next();e.push(s),t.push(s)}return o.shift()}});return[new n(()=>r(e),this.controller,this.client),new n(()=>r(t),this.controller,this.client)]}toReadableStream(){let e=this,t;return Sx({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{let{value:r,done:o}=await t.next();if(o)return i.close();let s=fg(JSON.stringify(r)+`
`);i.enqueue(s)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}};function H6(n,e){return Rn(this,arguments,function*(){var i,r,o,s;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Wt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Wt("Attempted to iterate over a response with no body");let a=new Z0,l=new Wo,f=Dx(n.body);try{for(var m=!0,y=Nn($6(f)),v;v=yield pe(y.next()),i=v.done,!i;m=!0){s=v.value,m=!1;let _=s;for(let E of l.decode(_)){let b=a.decode(E);b&&(yield yield pe(b))}}}catch(_){r={error:_}}finally{try{!m&&!i&&(o=y.return)&&(yield pe(o.call(y)))}finally{if(r)throw r.error}}for(let _ of l.flush()){let E=a.decode(_);E&&(yield yield pe(E))}})}function $6(n){return Rn(this,arguments,function*(){var t,i,r,o;let s=new Uint8Array;try{for(var a=!0,l=Nn(n),f;f=yield pe(l.next()),t=f.done,!t;a=!0){o=f.value,a=!1;let m=o;if(m==null)continue;let y=m instanceof ArrayBuffer?new Uint8Array(m):typeof m=="string"?fg(m):m,v=new Uint8Array(s.length+y.length);v.set(s),v.set(y,s.length),s=v;let _;for(;(_=B6(s))!==-1;)yield yield pe(s.slice(0,_)),s=s.slice(_)}}catch(m){i={error:m}}finally{try{!a&&!t&&(r=l.return)&&(yield pe(r.call(l)))}finally{if(i)throw i.error}}s.length>0&&(yield yield pe(s))})}var Z0=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=G6(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}};function G6(n,e){let t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function q6(n,e){let{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return Ut(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Q0.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;let l=t.headers.get("content-type"),f=(a=l?.split(";")[0])===null||a===void 0?void 0:a.trim();return f?.includes("application/json")||f?.endsWith("+json")?await t.json():await t.text()})();return Ut(n).debug(`[${i}] response parsed`,Mr({retryOfRequestLogID:r,url:t.url,status:t.status,body:s,durationMs:Date.now()-o})),s}var X0=class n extends Promise{constructor(e,t,i=q6){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new n(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var Ix=Symbol("brand.privateNullableHeaders");function*W6(n){if(!n)return;if(Ix in n){let{values:i,nulls:r}=n;yield*i.entries();for(let o of r)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():$1(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){let r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");let o=$1(i[1])?i[1]:[i[1]],s=!1;for(let a of o)a!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,a])}}var za=n=>{let e=new Headers,t=new Set;for(let i of n){let r=new Set;for(let[o,s]of W6(i)){let a=o.toLowerCase();r.has(a)||(e.delete(o),r.add(a)),s===null?(e.delete(o),t.add(a)):(e.append(o,s),t.delete(a))}}return{[Ix]:!0,values:e,nulls:t}};var l0=n=>{var e,t,i,r,o,s;if(typeof globalThis.process<"u")return(i=(t=(e=globalThis.process.env)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,n))===null||s===void 0?void 0:s.trim()};var Mx,z6=(()=>{class n{constructor(t){var i,r,o,s,a,l,f,{baseURL:m=l0("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(i=l0("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:v="v1beta"}=t,_=_d(t,["baseURL","apiKey","apiVersion"]);let E=Object.assign(Object.assign({apiKey:y,apiVersion:v},_),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(r=E.timeout)!==null&&r!==void 0?r:n.DEFAULT_TIMEOUT,this.logger=(o=E.logger)!==null&&o!==void 0?o:console;let b="warn";this.logLevel=b,this.logLevel=(a=(s=j1(E.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:j1(l0("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:b,this.fetchOptions=E.fetchOptions,this.maxRetries=(l=E.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(f=E.fetch)!==null&&f!==void 0?f:b6(),this.encoder=I6,this._options=E,this.apiKey=y,this.apiVersion=v,this.clientAdapter=E.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:i}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){let i=za([t.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return za([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return za([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([i,r])=>typeof r<"u").map(([i,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(i)}=`;throw new Wt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ho}`}defaultIdempotencyKey(){return`stainless-node-retry-${d6()}`}makeStatusError(t,i,r,o){return zt.generate(t,i,r,o)}buildURL(t,i,r){let o=!this.baseURLOverridden()&&r||this.baseURL,s=p6(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return g6(a)||(i=Object.assign(Object.assign({},a),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(s.search=this.stringifyQuery(i)),s.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){let i=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(t,{url:i,options:r}){}get(t,i){return this.methodRequest("get",t,i)}post(t,i){return this.methodRequest("post",t,i)}patch(t,i){return this.methodRequest("patch",t,i)}put(t,i){return this.methodRequest("put",t,i)}delete(t,i){return this.methodRequest("delete",t,i)}methodRequest(t,i,r){return this.request(Promise.resolve(r).then(o=>Object.assign({method:t,path:i},o)))}request(t,i=null){return new X0(this,this.makeRequest(t,i,void 0))}async makeRequest(t,i,r){var o,s,a;let l=await t,f=(o=l.maxRetries)!==null&&o!==void 0?o:this.maxRetries;i==null&&(i=f),await this.prepareOptions(l);let{req:m,url:y,timeout:v}=await this.buildRequest(l,{retryCount:f-i});await this.prepareRequest(m,{url:y,options:l});let _="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=r===void 0?"":`, retryOf: ${r}`,b=Date.now();if(Ut(this).debug(`[${_}] sending request`,Mr({retryOfRequestLogID:r,method:l.method,url:y,options:l,headers:m.headers})),!((s=l.signal)===null||s===void 0)&&s.aborted)throw new Ka;let A=new AbortController,M=await this.fetchWithTimeout(y,m,v,A).catch(Y0),O=Date.now();if(M instanceof globalThis.Error){let G=`retrying, ${i} attempts remaining`;if(!((a=l.signal)===null||a===void 0)&&a.aborted)throw new Ka;let Q=j0(M)||/timed? ?out/i.test(String(M)+("cause"in M?String(M.cause):""));if(i)return Ut(this).info(`[${_}] connection ${Q?"timed out":"failed"} - ${G}`),Ut(this).debug(`[${_}] connection ${Q?"timed out":"failed"} (${G})`,Mr({retryOfRequestLogID:r,url:y,durationMs:O-b,message:M.message})),this.retryRequest(l,i,r??_);throw Ut(this).info(`[${_}] connection ${Q?"timed out":"failed"} - error; no more retries left`),Ut(this).debug(`[${_}] connection ${Q?"timed out":"failed"} (error; no more retries left)`,Mr({retryOfRequestLogID:r,url:y,durationMs:O-b,message:M.message})),Q?new Ed:new qo({cause:M})}let L=`[${_}${E}] ${m.method} ${y} ${M.ok?"succeeded":"failed"} with status ${M.status} in ${O-b}ms`;if(!M.ok){let G=await this.shouldRetry(M);if(i&&G){let xe=`retrying, ${i} attempts remaining`;return await T6(M.body),Ut(this).info(`${L} - ${xe}`),Ut(this).debug(`[${_}] response error (${xe})`,Mr({retryOfRequestLogID:r,url:M.url,status:M.status,headers:M.headers,durationMs:O-b})),this.retryRequest(l,i,r??_,M.headers)}let Q=G?"error; no more retries left":"error; not retryable";Ut(this).info(`${L} - ${Q}`);let re=await M.text().catch(xe=>Y0(xe).message),te=_6(re),be=te?void 0:re;throw Ut(this).debug(`[${_}] response error (${Q})`,Mr({retryOfRequestLogID:r,url:M.url,status:M.status,headers:M.headers,message:be,durationMs:Date.now()-b})),this.makeStatusError(M.status,te,be,M.headers)}return Ut(this).info(L),Ut(this).debug(`[${_}] response start`,Mr({retryOfRequestLogID:r,url:M.url,status:M.status,headers:M.headers,durationMs:O-b})),{response:M,options:l,controller:A,requestLogID:_,retryOfRequestLogID:r,startTime:b}}async fetchWithTimeout(t,i,r,o){let s=i||{},{signal:a,method:l}=s,f=_d(s,["signal","method"]);a&&a.addEventListener("abort",()=>o.abort());let m=setTimeout(()=>o.abort(),r),y=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,v=Object.assign(Object.assign(Object.assign({signal:o.signal},y?{duplex:"half"}:{}),{method:"GET"}),f);l&&(v.method=l.toUpperCase());try{return await this.fetch.call(void 0,t,v)}finally{clearTimeout(m)}}async shouldRetry(t){let i=t.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,i,r,o){var s;let a,l=o?.get("retry-after-ms");if(l){let m=parseFloat(l);Number.isNaN(m)||(a=m)}let f=o?.get("retry-after");if(f&&!a){let m=parseFloat(f);Number.isNaN(m)?a=Date.parse(f)-Date.now():a=m*1e3}if(!(a&&0<=a&&a<60*1e3)){let m=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(i,m)}return await C6(a),this.makeRequest(t,i-1,r)}calculateDefaultRetryTimeoutMillis(t,i){let s=i-t,a=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(t,{retryCount:i=0}={}){var r,o,s;let a=Object.assign({},t),{method:l,path:f,query:m,defaultBaseURL:y}=a,v=this.buildURL(f,m,y);"timeout"in a&&v6("timeout",a.timeout),a.timeout=(r=a.timeout)!==null&&r!==void 0?r:this.timeout;let{bodyHeaders:_,body:E}=this.buildBody({options:a}),b=await this.buildHeaders({options:t,method:l,bodyHeaders:_,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:b},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:v,timeout:a.timeout}}async buildHeaders({options:t,method:i,bodyHeaders:r,retryCount:o}){let s={};this.idempotencyHeader&&i!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);let a=await this.authHeaders(t),l=za([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),D6()),this._options.defaultHeaders,r,t.headers,a]);return this.validateHeaders(l),l.values}buildBody({options:{body:t,headers:i}}){if(!t)return{bodyHeaders:void 0,body:void 0};let r=za([i]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:w6(t)}:this.encoder({body:t,headers:r})}}return n.DEFAULT_TIMEOUT=6e4,n})(),lt=class extends z6{constructor(){super(...arguments),this.interactions=new Rd(this)}};Mx=lt;lt.GeminiNextGenAPIClient=Mx;lt.GeminiNextGenAPIClientError=Wt;lt.APIError=zt;lt.APIConnectionError=qo;lt.APIConnectionTimeoutError=Ed;lt.APIUserAbortError=Ka;lt.NotFoundError=bd;lt.ConflictError=wd;lt.RateLimitError=Id;lt.BadRequestError=xd;lt.AuthenticationError=Sd;lt.InternalServerError=Md;lt.PermissionDeniedError=Dd;lt.UnprocessableEntityError=Td;lt.toFile=P6;lt.Interactions=Rd;function j6(n,e){let t={},i=u(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function Y6(n,e){let t={},i=u(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function J6(n,e){let t={},i=u(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function K6(n,e){let t={},i=u(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function Q6(n,e,t){let i={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let r=u(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let o=u(n,["epochCount"]);e!==void 0&&o!=null&&p(e,["tuningTask","hyperparameters","epochCount"],o);let s=u(n,["learningRateMultiplier"]);if(s!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let a=u(n,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);let l=u(n,["learningRate"]);if(e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","learningRate"],l),u(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function Z6(n,e,t){let i={},r=u(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let _=u(n,["validationDataset"]);e!==void 0&&_!=null&&p(e,["supervisedTuningSpec"],J1(_))}else if(r==="PREFERENCE_TUNING"){let _=u(n,["validationDataset"]);e!==void 0&&_!=null&&p(e,["preferenceOptimizationSpec"],J1(_))}let o=u(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&p(e,["tunedModelDisplayName"],o);let s=u(n,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);let a=u(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let _=u(n,["epochCount"]);e!==void 0&&_!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(a==="PREFERENCE_TUNING"){let _=u(n,["epochCount"]);e!==void 0&&_!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let l=u(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let _=u(n,["learningRateMultiplier"]);e!==void 0&&_!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(l==="PREFERENCE_TUNING"){let _=u(n,["learningRateMultiplier"]);e!==void 0&&_!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let f=u(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let _=u(n,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(f==="PREFERENCE_TUNING"){let _=u(n,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let m=u(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){let _=u(n,["adapterSize"]);e!==void 0&&_!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(m==="PREFERENCE_TUNING"){let _=u(n,["adapterSize"]);e!==void 0&&_!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let y=u(n,["labels"]);e!==void 0&&y!=null&&p(e,["labels"],y);let v=u(n,["beta"]);return e!==void 0&&v!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),i}function X6(n,e){let t={},i=u(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);let r=u(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);let o=u(n,["trainingDataset"]);o!=null&&c5(o);let s=u(n,["config"]);return s!=null&&Q6(s,t),t}function e5(n,e){let t={},i=u(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);let r=u(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);let o=u(n,["trainingDataset"]);o!=null&&d5(o,t,e);let s=u(n,["config"]);return s!=null&&Z6(s,t,e),t}function t5(n,e){let t={},i=u(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function n5(n,e){let t={},i=u(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function i5(n,e,t){let i={},r=u(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);let o=u(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);let s=u(n,["filter"]);return e!==void 0&&s!=null&&p(e,["_query","filter"],s),i}function r5(n,e,t){let i={},r=u(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);let o=u(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);let s=u(n,["filter"]);return e!==void 0&&s!=null&&p(e,["_query","filter"],s),i}function o5(n,e){let t={},i=u(n,["config"]);return i!=null&&i5(i,t),t}function s5(n,e){let t={},i=u(n,["config"]);return i!=null&&r5(i,t),t}function a5(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);let r=u(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);let o=u(n,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Ax(a))),p(t,["tuningJobs"],s)}return t}function l5(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);let r=u(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);let o=u(n,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>eg(a))),p(t,["tuningJobs"],s)}return t}function u5(n,e){let t={},i=u(n,["name"]);i!=null&&p(t,["model"],i);let r=u(n,["name"]);return r!=null&&p(t,["endpoint"],r),t}function c5(n,e){let t={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=u(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),p(t,["examples","examples"],r)}return t}function d5(n,e,t){let i={},r=u(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let s=u(n,["gcsUri"]);e!==void 0&&s!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){let s=u(n,["gcsUri"]);e!==void 0&&s!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=u(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=u(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=u(n,["vertexDatasetResource"]);e!==void 0&&s!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Ax(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);let r=u(n,["name"]);r!=null&&p(t,["name"],r);let o=u(n,["state"]);o!=null&&p(t,["state"],rx(o));let s=u(n,["createTime"]);s!=null&&p(t,["createTime"],s);let a=u(n,["tuningTask","startTime"]);a!=null&&p(t,["startTime"],a);let l=u(n,["tuningTask","completeTime"]);l!=null&&p(t,["endTime"],l);let f=u(n,["updateTime"]);f!=null&&p(t,["updateTime"],f);let m=u(n,["description"]);m!=null&&p(t,["description"],m);let y=u(n,["baseModel"]);y!=null&&p(t,["baseModel"],y);let v=u(n,["_self"]);return v!=null&&p(t,["tunedModel"],u5(v)),t}function eg(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);let r=u(n,["name"]);r!=null&&p(t,["name"],r);let o=u(n,["state"]);o!=null&&p(t,["state"],rx(o));let s=u(n,["createTime"]);s!=null&&p(t,["createTime"],s);let a=u(n,["startTime"]);a!=null&&p(t,["startTime"],a);let l=u(n,["endTime"]);l!=null&&p(t,["endTime"],l);let f=u(n,["updateTime"]);f!=null&&p(t,["updateTime"],f);let m=u(n,["error"]);m!=null&&p(t,["error"],m);let y=u(n,["description"]);y!=null&&p(t,["description"],y);let v=u(n,["baseModel"]);v!=null&&p(t,["baseModel"],v);let _=u(n,["tunedModel"]);_!=null&&p(t,["tunedModel"],_);let E=u(n,["preTunedModel"]);E!=null&&p(t,["preTunedModel"],E);let b=u(n,["supervisedTuningSpec"]);b!=null&&p(t,["supervisedTuningSpec"],b);let A=u(n,["preferenceOptimizationSpec"]);A!=null&&p(t,["preferenceOptimizationSpec"],A);let M=u(n,["tuningDataStats"]);M!=null&&p(t,["tuningDataStats"],M);let O=u(n,["encryptionSpec"]);O!=null&&p(t,["encryptionSpec"],O);let L=u(n,["partnerModelTuningSpec"]);L!=null&&p(t,["partnerModelTuningSpec"],L);let G=u(n,["customBaseModel"]);G!=null&&p(t,["customBaseModel"],G);let Q=u(n,["experiment"]);Q!=null&&p(t,["experiment"],Q);let re=u(n,["labels"]);re!=null&&p(t,["labels"],re);let te=u(n,["outputUri"]);te!=null&&p(t,["outputUri"],te);let be=u(n,["pipelineJob"]);be!=null&&p(t,["pipelineJob"],be);let me=u(n,["serviceAccount"]);me!=null&&p(t,["serviceAccount"],me);let xe=u(n,["tunedModelDisplayName"]);xe!=null&&p(t,["tunedModelDisplayName"],xe);let yt=u(n,["veoTuningSpec"]);return yt!=null&&p(t,["veoTuningSpec"],yt),t}function f5(n,e){let t={},i=u(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);let r=u(n,["name"]);r!=null&&p(t,["name"],r);let o=u(n,["metadata"]);o!=null&&p(t,["metadata"],o);let s=u(n,["done"]);s!=null&&p(t,["done"],s);let a=u(n,["error"]);return a!=null&&p(t,["error"],a),t}function J1(n,e){let t={},i=u(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);let r=u(n,["vertexDatasetResource"]);return r!=null&&p(t,["validationDatasetUri"],r),t}var tg=class extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new hi($i.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){let r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);let o=Object.assign(Object.assign({},t),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{let r=Object.assign({},t);return await this.tuneInternal(r)}else{let r=Object.assign({},t),o=await this.tuneMldevInternal(r),s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Z1.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=n5(e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>eg(m))}else{let f=t5(e);return a=z("{name}",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>Ax(m))}}async listInternal(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=s5(e);return a=z("tuningJobs",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=l5(m),v=new pd;return Object.assign(v,y),v})}else{let f=o5(e);return a=z("tunedModels",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=a5(m),v=new pd;return Object.assign(v,y),v})}}async cancel(e){var t,i,r,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let f=Y6(e);return a=z("{name}:cancel",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=K6(m),v=new md;return Object.assign(v,y),v})}else{let f=j6(e);return a=z("{name}:cancel",f._url),l=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json().then(y=>{let v=y;return v.sdkHttpResponse={headers:m.headers},v})),s.then(m=>{let y=J6(m),v=new md;return Object.assign(v,y),v})}}async tuneInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let a=e5(e,e);return o=z("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(f=>{let m=f;return m.sdkHttpResponse={headers:l.headers},m})),r.then(l=>eg(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=X6(e);return o=z("tunedModels",a._url),s=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(f=>{let m=f;return m.sdkHttpResponse={headers:l.headers},m})),r.then(l=>f5(l))}}};var ng=class{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},p5=1024*1024*8,m5=3,h5=1e3,g5=2,Pd="x-goog-upload-status";async function y5(n,e,t){var i;let r=await Rx(n,e,t),o=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function v5(n,e,t){var i;let r=await Rx(n,e,t),o=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=Q1(o),a=new b0;return Object.assign(a,s),a}async function Rx(n,e,t){var i,r;let o=0,s=0,a=new Ja(new Response),l="upload";for(o=n.size;s<o;){let f=Math.min(p5,o-s),m=n.slice(s,s+f);s+f>=o&&(l+=", finalize");let y=0,v=h5;for(;y<m5&&(a=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(f)}}}),!(!((i=a?.headers)===null||i===void 0)&&i[Pd]));)y++,await C5(v),v=v*g5;if(s+=f,((r=a?.headers)===null||r===void 0?void 0:r[Pd])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function _5(n){return{size:n.size,type:n.type}}function C5(n){return new Promise(e=>setTimeout(e,n))}var ig=class{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await y5(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await v5(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _5(e)}};var rg=class{create(e,t,i){return new og(e,t,i)}},og=class{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var K1="x-goog-api-key",sg=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(K1)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(K1,this.apiKey)}}};var E5="gl-node/",Fd=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let t=new lt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;let i=YA(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let r=new sg(this.apiKey);this.apiClient=new O0({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:E5+"web",uploader:new ig,downloader:new ng}),this.models=new $0(this.apiClient),this.live=new U0(this.apiClient,r,new rg),this.batches=new I0(this.apiClient),this.chats=new A0(this.models,this.apiClient),this.caches=new M0(this.apiClient),this.files=new N0(this.apiClient),this.operations=new G0(this.apiClient),this.authTokens=new q0(this.apiClient),this.tunings=new tg(this.apiClient),this.fileSearchStores=new z0(this.apiClient)}};var Rr=class Rr{constructor(){this.ai=null;this.financialInsightState=w("idle");this.financialInsight=w(null);this.financialInsightError=w(null);this.basketAnalysisState=w("idle");this.basketAnalysis=w(null);this.basketAnalysisError=w(null);let e=typeof process<"u"&&process.env?process.env.API_KEY:void 0;e?this.ai=new Fd({apiKey:e}):console.error("API_KEY environment variable not set. AI features will not be available.")}async generateFinancialInsights(e,t){if(!this.ai){this.financialInsightError.set("Gemini AI \u5BA2\u6236\u7AEF\u672A\u521D\u59CB\u5316\u3002\u8ACB\u6AA2\u67E5 API \u91D1\u9470\u3002"),this.financialInsightState.set("error");return}this.financialInsightState.set("loading"),this.financialInsightError.set(null),this.financialInsight.set(null);let i=`
      Analyze the following financial data for a small business.
      IMPORTANT: All textual analysis and recommendations in the response must be in Traditional Chinese. The JSON keys must remain in English as specified in the schema.

      Financial Summary:
      - Total Revenue: ${e.totalRevenue.toFixed(2)}
      - Total Expenses: ${e.totalExpenses.toFixed(2)}
      - Net Income: ${e.netIncome.toFixed(2)}

      Monthly Performance (Revenue vs Expenses):
      ${t.map(r=>`- ${r.month}: Revenue ${r.revenue.toFixed(2)}, Expenses ${r.expenses.toFixed(2)}`).join(`
`)}

      Based on this data, provide:
      1. Two key positive trends.
      2. Two potential areas for improvement or concern.
      3. Two actionable strategic recommendations.
    `;try{let r=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{positive_trends:{type:je.ARRAY,items:{type:je.STRING}},areas_for_improvement:{type:je.ARRAY,items:{type:je.STRING}},strategic_recommendations:{type:je.ARRAY,items:{type:je.STRING}}}}}}),o=JSON.parse(r.text);this.financialInsight.set(o),this.financialInsightState.set("success")}catch(r){console.error(r),this.financialInsightError.set("\u5F9E AI \u6A21\u578B\u751F\u6210\u8CA1\u52D9\u6D1E\u5BDF\u5931\u6557\u3002"),this.financialInsightState.set("error")}}async analyzeShoppingBaskets(e){if(!this.ai){this.basketAnalysisError.set("Gemini AI \u5BA2\u6236\u7AEF\u672A\u521D\u59CB\u5316\u3002\u8ACB\u6AA2\u67E5 API \u91D1\u9470\u3002"),this.basketAnalysisState.set("error");return}this.basketAnalysisState.set("loading"),this.basketAnalysisError.set(null),this.basketAnalysis.set(null);let t=e.map(r=>r.items.map(o=>o.name)),i=`
      Perform a market basket analysis on the following list of customer transactions. Each inner list represents one transaction.
      Transactions: ${JSON.stringify(t)}

      IMPORTANT: All textual analysis, suggestions, and insights in the response must be in Traditional Chinese. The JSON keys must remain in English as specified in the schema.

      Identify up to 3 sets of items that are frequently bought together. For each set, provide a marketing or upselling suggestion.
      Also, provide 2 general insights into customer purchasing behavior based on this data.
    `;try{let r=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{frequently_bought_together:{type:je.ARRAY,items:{type:je.OBJECT,properties:{items:{type:je.ARRAY,items:{type:je.STRING}},suggestion:{type:je.STRING}}}},customer_behavior_insights:{type:je.ARRAY,items:{type:je.STRING}}}}}}),o=JSON.parse(r.text);this.basketAnalysis.set(o),this.basketAnalysisState.set("success")}catch(r){console.error(r),this.basketAnalysisError.set("\u5F9E AI \u6A21\u578B\u751F\u6210\u8CFC\u7269\u7C43\u5206\u6790\u5931\u6557\u3002"),this.basketAnalysisState.set("error")}}};Rr.\u0275fac=function(t){return new(t||Rr)},Rr.\u0275prov=K({token:Rr,factory:Rr.\u0275fac,providedIn:"root"});var Jo=Rr;var x5=["monthlyChart"],S5=["purchaseChart"],Ko=()=>({style:"currency",currency:"TWD",minimumFractionDigits:0});function D5(n,e){if(n&1&&(d(0,"div",16)(1,"div",33)(2,"div",34),x(3,"ion-icon",35),c(),d(4,"div")(5,"p",36),h(6,"\u6536\u5165"),c(),d(7,"p",37),h(8),c()()(),d(9,"div",33)(10,"div",38),x(11,"ion-icon",39),c(),d(12,"div")(13,"p",36),h(14,"\u5E73\u5747\u6BCF\u65E5\u6536\u5165"),c(),d(15,"p",37),h(16),c()()(),d(17,"div",33)(18,"div",40),x(19,"ion-icon",41),c(),d(20,"div")(21,"p",36),h(22,"\u8CBB\u7528"),c(),d(23,"p",37),h(24),c()()(),d(25,"div",33)(26,"div",42),x(27,"ion-icon",43),c(),d(28,"div")(29,"p",36),h(30,"\u6298\u8B93"),c(),d(31,"p",37),h(32),c()()(),d(33,"div",33)(34,"div",44),x(35,"ion-icon",45),c(),d(36,"div")(37,"p",36),h(38,"\u9032\u8CA8"),c(),d(39,"p",37),h(40),c()()(),d(41,"div",33)(42,"div",46),x(43,"ion-icon",47),c(),d(44,"div")(45,"p",36),h(46,"\u6BDB\u5229"),c(),d(47,"p",37),h(48),c()()()()),n&2){let t=e,i=C();g(8),S(t.totalRevenue.toLocaleString("zh-TW",qt(6,Ko))),g(8),S(i.averageDailyRevenue().toLocaleString("zh-TW",qt(7,Ko))),g(8),S(t.totalExpenses.toLocaleString("zh-TW",qt(8,Ko))),g(8),S(t.totalAllowance.toLocaleString("zh-TW",qt(9,Ko))),g(8),S(t.totalPurchases.toLocaleString("zh-TW",qt(10,Ko))),g(8),S(t.netIncome.toLocaleString("zh-TW",qt(11,Ko)))}}function b5(n,e){n&1&&(d(0,"div",17),h(1,"\u5728\u6B64\u65E5\u671F\u7BC4\u570D\u5167\u6C92\u6709\u6578\u64DA\u3002"),c())}function w5(n,e){n&1&&x(0,"div",29)}function T5(n,e){n&1&&(d(0,"p",30),h(1,"\u9EDE\u64CA\u6309\u9215\u4EE5\u751F\u6210\u7531 AI \u9A45\u52D5\u7684\u8CA1\u52D9\u6578\u64DA\u6D1E\u5BDF\u3002"),c())}function I5(n,e){n&1&&(d(0,"p",31),h(1,"AI \u6B63\u5728\u5206\u6790\u60A8\u7684\u6578\u64DA... \u9019\u53EF\u80FD\u9700\u8981\u4E00\u4E9B\u6642\u9593\u3002"),c())}function M5(n,e){if(n&1&&(d(0,"div",32)(1,"p",48),h(2,"\u767C\u751F\u932F\u8AA4"),c(),d(3,"p"),h(4),c()()),n&2){let t=C();g(4),S(t.geminiService.financialInsightError())}}function A5(n,e){if(n&1&&(d(0,"li"),h(1),c()),n&2){let t=e.$implicit;g(),S(t)}}function R5(n,e){if(n&1&&(d(0,"li"),h(1),c()),n&2){let t=e.$implicit;g(),S(t)}}function N5(n,e){if(n&1&&(d(0,"li"),h(1),c()),n&2){let t=e.$implicit;g(),S(t)}}function P5(n,e){if(n&1&&(d(0,"div",49)(1,"div",50)(2,"h4",51),h(3,"\u6B63\u9762\u8DA8\u52E2"),c(),d(4,"ul",52),P(5,A5,2,1,"li",null,Mt),c()(),d(7,"div",53)(8,"h4",54),h(9,"\u5F85\u6539\u9032\u9818\u57DF"),c(),d(10,"ul",55),P(11,R5,2,1,"li",null,Mt),c()(),d(13,"div",56)(14,"h4",57),h(15,"\u7B56\u7565\u5EFA\u8B70"),c(),d(16,"ul",58),P(17,N5,2,1,"li",null,Mt),c()()()),n&2){let t=e;g(5),F(t.positive_trends),g(6),F(t.areas_for_improvement),g(6),F(t.strategic_recommendations)}}function F5(n,e){if(n&1&&B(0,P5,19,0,"div",49),n&2){let t,i=C();U((t=i.geminiService.financialInsight())?0:-1,t)}}var Qo=class Qo{constructor(){this.dataService=R(Te);this.geminiService=R(Jo);this.summary=w(null);this.monthlyData=w([]);this.purchaseData=w([]);this.formatDate=e=>e.toISOString().split("T")[0];this.today=new Date("2026-06-25");this.firstDayOfMonth=new Date(this.today.getFullYear(),this.today.getMonth(),1);this.startDate=w(this.formatDate(this.firstDayOfMonth));this.endDate=w(this.formatDate(this.today));this.averageDailyRevenue=Y(()=>{let e=this.summary();if(!e||!this.startDate()||!this.endDate())return 0;let t=new Date(this.startDate()),i=new Date(this.endDate());if(isNaN(t.getTime())||isNaN(i.getTime())||t>i)return 0;let r=i.getTime()-t.getTime(),o=Math.round(r/(1e3*60*60*24))+1;return o<=0?e.totalRevenue:e.totalRevenue/o});this.loadData(this.startDate(),this.endDate()),ia(()=>{let e=this.monthlyData(),t=this.purchaseData();this.monthlyChart&&this.purchaseChart&&this.updateCharts(e,t)}),di(()=>{this.createCharts()})}loadData(e,t){this.summary.set(this.dataService.getFinancialSummary(e,t)),this.monthlyData.set(this.dataService.getMonthlyPerformance(e,t)),this.purchaseData.set(this.dataService.getPurchasesByCategory(e,t))}applyFilter(){let e=this.startDate(),t=this.endDate();if(e&&t&&e>t){alert("\u8D77\u59CB\u65E5\u671F\u4E0D\u80FD\u665A\u65BC\u7D50\u675F\u65E5\u671F\u3002");return}this.loadData(e,t),this.resetAI()}resetFilter(){this.startDate.set(this.formatDate(this.firstDayOfMonth)),this.endDate.set(this.formatDate(this.today)),this.loadData(this.startDate(),this.endDate()),this.resetAI()}getAIInsights(){this.summary()&&this.monthlyData().length>0&&this.geminiService.generateFinancialInsights(this.summary(),this.monthlyData())}resetAI(){this.geminiService.financialInsight.set(null),this.geminiService.financialInsightState.set("idle"),this.geminiService.financialInsightError.set(null)}formatCurrency(e){return e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}createPurchaseTooltipCallback(e){let t=e.reduce((i,r)=>i+r.amount,0);return i=>{let r=i.label||"",o=i.raw||0;if(t===0)return`${r}: ${this.formatCurrency(o)} (0.00%)`;let s=(o/t*100).toFixed(2);return`${r}: ${this.formatCurrency(o)} (${s}%)`}}createCharts(){let e=this.monthlyChartRef.nativeElement.getContext("2d"),t=this.monthlyData();this.monthlyChart=new Chart(e,{type:"line",data:{labels:t.map(o=>o.month),datasets:[{label:"\u6536\u5165",data:t.map(o=>o.revenue),borderColor:"#4f46e5",backgroundColor:"rgba(79, 70, 229, 0.1)",fill:!0,tension:.4},{label:"\u652F\u51FA",data:t.map(o=>o.expenses),borderColor:"#f43f5e",backgroundColor:"rgba(244, 63, 94, 0.1)",fill:!0,tension:.4},{label:"\u61C9\u4ED8\u5E33\u6B3E",data:t.map(o=>o.accountsPayable),borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}});let i=this.purchaseChartRef.nativeElement.getContext("2d"),r=this.purchaseData();this.purchaseChart=new Chart(i,{type:"doughnut",data:{labels:r.map(o=>o.category),datasets:[{label:"\u7E3D\u9032\u8CA8",data:r.map(o=>o.amount),backgroundColor:["#3b82f6","#8b5cf6","#10b981","#f59e0b","#4f46e5","#f43f5e"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:this.createPurchaseTooltipCallback(r)}}}}})}updateCharts(e,t){this.monthlyChart.data.labels=e.map(i=>i.month),this.monthlyChart.data.datasets[0].data=e.map(i=>i.revenue),this.monthlyChart.data.datasets[1].data=e.map(i=>i.expenses),this.monthlyChart.data.datasets[2].data=e.map(i=>i.accountsPayable),this.monthlyChart.update(),this.purchaseChart.data.labels=t.map(i=>i.category),this.purchaseChart.data.datasets[0].data=t.map(i=>i.amount),this.purchaseChart.options.plugins.tooltip.callbacks.label=this.createPurchaseTooltipCallback(t),this.purchaseChart.update()}};Qo.\u0275fac=function(t){return new(t||Qo)},Qo.\u0275cmp=ae({type:Qo,selectors:[["app-dashboard"]],viewQuery:function(t,i){if(t&1&&(Zt(x5,5),Zt(S5,5)),t&2){let r;Ft(r=kt())&&(i.monthlyChartRef=r.first),Ft(r=kt())&&(i.purchaseChartRef=r.first)}},decls:49,vars:6,consts:[["monthlyChart",""],["purchaseChart",""],[1,"space-y-8"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","flex-col","sm:flex-row","items-center","gap-2","bg-white","p-3","rounded-xl","shadow-md","border","border-gray-200"],[1,"flex","items-center","gap-2"],["for","startDate",1,"text-sm","font-medium","text-gray-600"],["type","date","id","startDate",1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100",3,"ngModelChange","ngModel"],["for","endDate",1,"text-sm","font-medium","text-gray-600"],["type","date","id","endDate",1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-2","mt-2","sm:mt-0"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","filter-outline"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-6"],[1,"text-center","py-8","text-gray-500"],[1,"grid","grid-cols-1","lg:grid-cols-5","gap-6"],[1,"lg:col-span-3","bg-white","p-6","rounded-xl","shadow-md"],[1,"text-lg","font-semibold","text-gray-800","mb-4"],[1,"h-80"],[1,"lg:col-span-2","bg-white","p-6","rounded-xl","shadow-md"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"flex","justify-between","items-center","mb-4"],[1,"flex","items-center","space-x-3"],["name","sparkles-outline",1,"text-2xl","text-indigo-600"],[1,"text-lg","font-semibold","text-gray-800"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","disabled:bg-indigo-300","disabled:cursor-not-allowed","flex","items-center","space-x-2",3,"click","disabled"],[1,"w-5","h-5","border-2","border-white","border-t-transparent","rounded-full","animate-spin"],[1,"text-gray-500"],[1,"text-gray-500","animate-pulse"],[1,"bg-red-50","text-red-700","p-4","rounded-lg"],[1,"bg-white","p-6","rounded-xl","shadow-md","flex","items-center","space-x-4"],[1,"bg-green-100","p-3","rounded-full"],["name","cash-outline",1,"text-2xl","text-green-600"],[1,"text-sm","text-gray-500"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"bg-blue-100","p-3","rounded-full"],["name","calendar-outline",1,"text-2xl","text-blue-600"],[1,"bg-red-100","p-3","rounded-full"],["name","trending-down-outline",1,"text-2xl","text-red-600"],[1,"bg-yellow-100","p-3","rounded-full"],["name","pricetag-outline",1,"text-2xl","text-yellow-600"],[1,"bg-purple-100","p-3","rounded-full"],["name","cart-outline",1,"text-2xl","text-purple-600"],[1,"bg-indigo-100","p-3","rounded-full"],["name","pie-chart-outline",1,"text-2xl","text-indigo-600"],[1,"font-semibold"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","text-sm"],[1,"bg-green-50","p-4","rounded-lg"],[1,"font-semibold","text-green-800","mb-2"],[1,"list-disc","list-inside","space-y-1","text-green-700"],[1,"bg-yellow-50","p-4","rounded-lg"],[1,"font-semibold","text-yellow-800","mb-2"],[1,"list-disc","list-inside","space-y-1","text-yellow-700"],[1,"bg-blue-50","p-4","rounded-lg"],[1,"font-semibold","text-blue-800","mb-2"],[1,"list-disc","list-inside","space-y-1","text-blue-700"]],template:function(t,i){if(t&1){let r=$();d(0,"div",2)(1,"div",3)(2,"h1",4),h(3,"\u5100\u8868\u677F"),c(),d(4,"div",5)(5,"div",6)(6,"label",7),h(7,"\u5F9E:"),c(),d(8,"input",8),de("ngModelChange",function(s){return T(r),fe(i.startDate,s)||(i.startDate=s),I(s)}),c()(),d(9,"div",6)(10,"label",9),h(11,"\u81F3:"),c(),d(12,"input",10),de("ngModelChange",function(s){return T(r),fe(i.endDate,s)||(i.endDate=s),I(s)}),c()(),d(13,"div",11)(14,"button",12),D("click",function(){return T(r),I(i.applyFilter())}),x(15,"ion-icon",13),d(16,"span"),h(17,"\u5957\u7528"),c()(),d(18,"button",14),D("click",function(){return T(r),I(i.resetFilter())}),x(19,"ion-icon",15),c()()()(),B(20,D5,49,12,"div",16)(21,b5,2,0,"div",17),d(22,"div",18)(23,"div",19)(24,"h3",20),h(25,"\u6708\u5EA6\u8868\u73FE"),c(),d(26,"div",21),x(27,"canvas",null,0),c()(),d(29,"div",22)(30,"h3",20),h(31,"\u7E3D\u9032\u8CA8\u5206\u6790"),c(),d(32,"div",21),x(33,"canvas",null,1),c()()(),d(35,"div",23)(36,"div",24)(37,"div",25),x(38,"ion-icon",26),d(39,"h3",27),h(40,"AI \u8CA1\u52D9\u6D1E\u5BDF"),c()(),d(41,"button",28),D("click",function(){return T(r),I(i.getAIInsights())}),B(42,w5,1,0,"div",29),d(43,"span"),h(44,"\u751F\u6210\u6D1E\u5BDF\u5831\u544A"),c()()(),B(45,T5,2,0,"p",30)(46,I5,2,0,"p",31)(47,M5,5,1,"div",32)(48,F5,1,1),c()()}if(t&2){let r,o;g(8),ce("ngModel",i.startDate),g(4),ce("ngModel",i.endDate),g(8),U((r=i.summary())?20:21,r),g(21),k("disabled",i.geminiService.financialInsightState()==="loading"),g(),U(i.geminiService.financialInsightState()==="loading"?42:-1),g(3),U((o=i.geminiService.financialInsightState())==="idle"?45:o==="loading"?46:o==="error"?47:o==="success"?48:-1)}},dependencies:[ye,ke,we,_e,Ne],encapsulation:2,changeDetection:0});var Vd=Qo;var k5=["detailChart"],O5=(n,e)=>e.value,Qa=(n,e)=>e.account,pg=(n,e)=>e.name,L5=(n,e)=>e.month;function V5(n,e){if(n&1&&(d(0,"option",14),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function B5(n,e){if(n&1&&(d(0,"option",14),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function U5(n,e){if(n&1){let t=$();d(0,"div",4)(1,"div",11)(2,"label",12),h(3,"\u5F9E:"),c(),d(4,"select",13),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedStartYearSummary,r)||(o.selectedStartYearSummary=r),I(r)}),P(5,V5,2,2,"option",14,j),c()(),d(7,"div",11)(8,"label",15),h(9,"\u81F3:"),c(),d(10,"select",16),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedEndYearSummary,r)||(o.selectedEndYearSummary=r),I(r)}),P(11,B5,2,2,"option",14,j),c()(),d(13,"div",17)(14,"button",18),D("click",function(){T(t);let r=C();return I(r.applySummaryFilter())}),x(15,"ion-icon",19),d(16,"span"),h(17,"\u5957\u7528"),c()(),d(18,"button",20),D("click",function(){T(t);let r=C();return I(r.resetSummaryFilter())}),x(19,"ion-icon",21),c()()()}if(n&2){let t=C();g(4),ce("ngModel",t.selectedStartYearSummary),g(),F(t.years()),g(5),ce("ngModel",t.selectedEndYearSummary),g(),F(t.years())}}function H5(n,e){if(n&1&&(d(0,"option",14),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function $5(n,e){if(n&1&&(d(0,"option",14),h(1),c()),n&2){let t=e.$implicit;k("value",t.value),g(),S(t.label)}}function G5(n,e){if(n&1){let t=$();d(0,"div",4)(1,"div",11)(2,"label",22),h(3,"\u5E74\u5EA6:"),c(),d(4,"select",23),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedYear,r)||(o.selectedYear=r),I(r)}),P(5,H5,2,2,"option",14,j),c()(),d(7,"div",11)(8,"label",24),h(9,"\u5B63\u5EA6:"),c(),d(10,"select",25),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedQuarter,r)||(o.selectedQuarter=r),I(r)}),P(11,$5,2,2,"option",14,O5),c()(),d(13,"div",17)(14,"button",18),D("click",function(){T(t);let r=C();return I(r.applyFilter())}),x(15,"ion-icon",19),d(16,"span"),h(17,"\u5957\u7528"),c()(),d(18,"button",20),D("click",function(){T(t);let r=C();return I(r.resetFilter())}),x(19,"ion-icon",21),c()()()}if(n&2){let t=C();g(4),ce("ngModel",t.selectedYear),g(),F(t.years()),g(5),ce("ngModel",t.selectedQuarter),g(),F(t.quarters())}}function q5(n,e){if(n&1&&(d(0,"th",30),h(1),c()),n&2){let t=e.$implicit;g(),H("",t,"\u5E74")}}function W5(n,e){if(n&1){let t=$();d(0,"td",39),D("click",function(){let r=T(t).$implicit,o=C(3);return I(o.openDetailModal(r,"revenue"))}),h(1),c()}if(n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.revenue[t]))}}function z5(n,e){if(n&1){let t=$();d(0,"td",40),D("click",function(){let r=T(t).$implicit,o=C(3);return I(o.openDetailModal(r,"expense"))}),h(1),c()}if(n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.expense[t]))}}function j5(n,e){if(n&1&&(d(0,"td",30),h(1),c()),n&2){let t=e.$implicit,i=C(),r=C(2);J("text-red-600",i.net[t]<0),g(),S(r.formatCurrency(i.net[t]))}}function Y5(n,e){if(n&1){let t=$();d(0,"td",41),D("click",function(){let r=T(t).$implicit,o=C(3);return I(o.openDetailModal(r,"unpaid"))}),h(1),c()}if(n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.unpaid[t]))}}function J5(n,e){if(n&1&&(d(0,"table",26)(1,"thead",28)(2,"tr"),x(3,"th",29),P(4,q5,2,1,"th",30,j),d(6,"th",30),h(7,"\u7E3D\u8A08"),c()()(),d(8,"tbody")(9,"tr",31)(10,"td",32),h(11,"\u6536\u5165"),c(),P(12,W5,2,1,"td",33,j),d(14,"td",34),h(15),c()(),d(16,"tr",31)(17,"td",32),h(18,"\u652F\u51FA"),c(),P(19,z5,2,1,"td",35,j),d(21,"td",34),h(22),c()(),d(23,"tr",36)(24,"td",29),h(25,"\u7E3D\u8A08"),c(),P(26,j5,2,3,"td",37,j),d(28,"td",30),h(29),c()(),d(30,"tr",31)(31,"td",32),h(32,"\u672A\u4ED8"),c(),P(33,Y5,2,1,"td",38,j),d(35,"td",34),h(36),c()()()()),n&2){let t=e,i=C(2);g(4),F(t.years),g(8),F(t.years),g(3),S(i.formatCurrency(t.revenue.total)),g(4),F(t.years),g(3),S(i.formatCurrency(t.expense.total)),g(4),F(t.years),g(2),J("text-red-600",t.net.total<0),g(),S(i.formatCurrency(t.net.total)),g(4),F(t.years),g(3),S(i.formatCurrency(t.unpaid.total))}}function K5(n,e){n&1&&(d(0,"div",27),h(1,"\u7121\u6CD5\u8F09\u5165\u7E3D\u8868\u6578\u64DA\u3002"),c())}function Q5(n,e){if(n&1&&B(0,J5,37,6,"table",26)(1,K5,2,0,"div",27),n&2){let t,i=C();U((t=i.annualSummary())?0:1,t)}}function Z5(n,e){if(n&1&&(d(0,"th",30),h(1),c()),n&2){let t=e.$implicit,i=C(3);g(),S(i.formatMonth(t))}}function X5(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C().$implicit,r=C(3);g(),S(r.formatCurrency(i.monthlyAmounts[t]||0))}}function e3(n,e){if(n&1&&(d(0,"tr",48),x(1,"td",59),d(2,"td",60),h(3),c(),d(4,"td",61),h(5),c(),d(6,"td",62),h(7),c(),P(8,X5,2,1,"td",53,j),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(3),S(t.account),g(2),S(r.formatCurrency(t.total)),g(2),H("",t.percentage==null?null:t.percentage.toFixed(2),"%"),g(),F(i.months)}}function t3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.operatingRevenue.monthlyTotals[t]||0))}}function n3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C().$implicit,r=C(3);g(),S(r.formatCurrency(i.monthlyAmounts[t]||0))}}function i3(n,e){if(n&1&&(d(0,"tr",48),x(1,"td",59),d(2,"td",60),h(3),c(),d(4,"td",61),h(5),c(),d(6,"td",62),h(7),c(),P(8,n3,2,1,"td",53,j),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(3),S(t.account),g(2),S(r.formatCurrency(t.total)),g(2),H("",t.percentage==null?null:t.percentage.toFixed(2),"%"),g(),F(i.months)}}function r3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.operatingExpenses.monthlyTotals[t]||0))}}function o3(n,e){if(n&1&&(d(0,"td",30),h(1),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.netIncome.monthlyTotals[t]||0))}}function s3(n,e){if(n&1&&(d(0,"table",26)(1,"thead",28)(2,"tr")(3,"th",42),h(4,"\u9805\u76EE"),c(),d(5,"th",43),h(6,"\u79D1\u76EE"),c(),d(7,"th",44),h(8,"\u7E3D\u8A08"),c(),d(9,"th",45),h(10,"\u767E\u5206\u6BD4"),c(),P(11,Z5,2,1,"th",30,j),c()(),d(13,"tbody")(14,"tr",46)(15,"td",47),h(16,"\u71DF\u696D\u6536\u5165"),c(),x(17,"td"),c(),P(18,e3,10,3,"tr",48,Qa),d(20,"tr",49)(21,"td",50),h(22,"\u71DF\u696D\u6536\u5165\u5C0F\u8A08"),c(),d(23,"td",51),h(24),c(),d(25,"td",52),h(26,"100.00%"),c(),P(27,t3,2,1,"td",53,j),c(),d(29,"tr"),x(30,"td",54),c(),d(31,"tr",46)(32,"td",47),h(33,"\u71DF\u696D\u8CBB\u7528"),c(),x(34,"td"),c(),P(35,i3,10,3,"tr",48,Qa),d(37,"tr",49)(38,"td",50),h(39,"\u71DF\u696D\u8CBB\u7528\u5C0F\u8A08"),c(),d(40,"td",51),h(41),c(),d(42,"td",52),h(43,"100.00%"),c(),P(44,r3,2,1,"td",53,j),c(),d(46,"tr"),x(47,"td",54),c(),d(48,"tr",55)(49,"td",56),h(50,"\u7E3D\u8A08 (\u672C\u671F\u640D\u76CA)"),c(),d(51,"td",57),h(52),c(),x(53,"td",58),P(54,o3,2,1,"td",30,j),c()()()),n&2){let t=e,i=C(2);g(11),F(t.months),g(6),mt("colspan",t.months.length),g(),F(t.operatingRevenue.items),g(6),S(i.formatCurrency(t.operatingRevenue.grandTotal)),g(3),F(t.months),g(3),mt("colspan",t.months.length+4),g(4),mt("colspan",t.months.length),g(),F(t.operatingExpenses.items),g(6),S(i.formatCurrency(t.operatingExpenses.grandTotal)),g(3),F(t.months),g(3),mt("colspan",t.months.length+4),g(5),S(i.formatCurrency(t.netIncome.grandTotal)),g(2),F(t.months)}}function a3(n,e){n&1&&(d(0,"div",27),h(1,"\u7121\u6CD5\u8F09\u5165\u640D\u76CA\u8868\u6578\u64DA\u3002"),c())}function l3(n,e){if(n&1&&B(0,s3,56,7,"table",26)(1,a3,2,0,"div",27),n&2){let t,i=C();U((t=i.monthlyIncomeStatement())?0:1,t)}}function u3(n,e){if(n&1&&(d(0,"th",30),h(1),c()),n&2){let t=e.$implicit,i=C(3);g(),S(i.formatMonth(t))}}function c3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C().$implicit,r=C(3);g(),S(r.formatCurrency(i.monthlyAmounts[t]||0))}}function d3(n,e){if(n&1&&(d(0,"tr",48),x(1,"td",59),d(2,"td",60),h(3),c(),d(4,"td",61),h(5),c(),d(6,"td",62),h(7),c(),P(8,c3,2,1,"td",53,j),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(3),S(t.account),g(2),S(r.formatCurrency(t.total)),g(2),H("",t.percentage==null?null:t.percentage.toFixed(2),"%"),g(),F(i.months)}}function f3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.assets.monthlyTotals[t]||0))}}function p3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C().$implicit,r=C(3);g(),S(r.formatCurrency(i.monthlyAmounts[t]||0))}}function m3(n,e){if(n&1&&(d(0,"tr",48),x(1,"td",59),d(2,"td",60),h(3),c(),d(4,"td",61),h(5),c(),d(6,"td",62),h(7),c(),P(8,p3,2,1,"td",53,j),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(3),S(t.account),g(2),S(r.formatCurrency(t.total)),g(2),H("",t.percentage==null?null:t.percentage.toFixed(2),"%"),g(),F(i.months)}}function h3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.liabilities.monthlyTotals[t]||0))}}function g3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C().$implicit,r=C(3);g(),S(r.formatCurrency(i.monthlyAmounts[t]||0))}}function y3(n,e){if(n&1&&(d(0,"tr",48),x(1,"td",59),d(2,"td",60),h(3),c(),d(4,"td",61),h(5),c(),d(6,"td",62),h(7),c(),P(8,g3,2,1,"td",53,j),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(3),S(t.account),g(2),S(r.formatCurrency(t.total)),g(2),H("",t.percentage==null?null:t.percentage.toFixed(2),"%"),g(),F(i.months)}}function v3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.equity.monthlyTotals[t]||0))}}function _3(n,e){if(n&1&&(d(0,"td",53),h(1),c()),n&2){let t=e.$implicit,i=C(),r=C(2);g(),S(r.formatCurrency(i.totalLiabilitiesAndEquity.monthlyTotals[t]||0))}}function C3(n,e){if(n&1&&(d(0,"table",26)(1,"thead",28)(2,"tr")(3,"th",42),h(4,"\u9805\u76EE"),c(),d(5,"th",43),h(6,"\u79D1\u76EE"),c(),d(7,"th",44),h(8,"\u7E3D\u8A08"),c(),d(9,"th",45),h(10,"\u767E\u5206\u6BD4"),c(),P(11,u3,2,1,"th",30,j),c()(),d(13,"tbody")(14,"tr",46)(15,"td",47),h(16,"\u8CC7\u7522"),c(),x(17,"td"),c(),P(18,d3,10,3,"tr",48,Qa),d(20,"tr",49)(21,"td",50),h(22,"\u8CC7\u7522\u5C0F\u8A08"),c(),d(23,"td",63),h(24),c(),d(25,"td",52),h(26,"100.00%"),c(),P(27,f3,2,1,"td",53,j),c(),d(29,"tr"),x(30,"td",54),c(),d(31,"tr",46)(32,"td",47),h(33,"\u8CA0\u50B5"),c(),x(34,"td"),c(),P(35,m3,10,3,"tr",48,Qa),d(37,"tr",64)(38,"td",65),h(39,"\u8CA0\u50B5\u5C0F\u8A08"),c(),d(40,"td",66),h(41),c(),x(42,"td",67),P(43,h3,2,1,"td",53,j),c(),d(45,"tr"),x(46,"td",54),c(),d(47,"tr",46)(48,"td",47),h(49,"\u696D\u4E3B\u6B0A\u76CA"),c(),x(50,"td"),c(),P(51,y3,10,3,"tr",48,Qa),d(53,"tr",64)(54,"td",65),h(55,"\u696D\u4E3B\u6B0A\u76CA\u5C0F\u8A08"),c(),d(56,"td",66),h(57),c(),x(58,"td",67),P(59,v3,2,1,"td",53,j),c(),d(61,"tr"),x(62,"td",54),c(),d(63,"tr",49)(64,"td",50),h(65,"\u8CA0\u50B5\u53CA\u696D\u4E3B\u6B0A\u76CA\u7E3D\u8A08"),c(),d(66,"td",63),h(67),c(),x(68,"td",68),P(69,_3,2,1,"td",53,j),c()()()),n&2){let t=e,i=C(2);g(11),F(t.months),g(6),mt("colspan",t.months.length),g(),F(t.assets.items),g(6),S(i.formatCurrency(t.assets.grandTotal)),g(3),F(t.months),g(3),mt("colspan",t.months.length+4),g(4),mt("colspan",t.months.length),g(),F(t.liabilities.items),g(6),S(i.formatCurrency(t.liabilities.grandTotal)),g(2),F(t.months),g(3),mt("colspan",t.months.length+4),g(4),mt("colspan",t.months.length),g(),F(t.equity.items),g(6),S(i.formatCurrency(t.equity.grandTotal)),g(2),F(t.months),g(3),mt("colspan",t.months.length+4),g(5),S(i.formatCurrency(t.totalLiabilitiesAndEquity.grandTotal)),g(2),F(t.months)}}function E3(n,e){n&1&&(d(0,"div",27),h(1,"\u7121\u6CD5\u8F09\u5165\u8CC7\u7522\u8CA0\u50B5\u8868\u6578\u64DA\u3002"),c())}function x3(n,e){if(n&1&&B(0,C3,71,10,"table",26)(1,E3,2,0,"div",27),n&2){let t,i=C();U((t=i.monthlyBalanceSheet())?0:1,t)}}function S3(n,e){if(n&1&&(d(0,"th",78),h(1),c(),d(2,"th",79),h(3,"\u91D1\u984D"),c()),n&2){let t=e.$implicit;g(),S(t.name)}}function D3(n,e){if(n&1&&(d(0,"td",78),h(1),c(),d(2,"td",79),h(3),c()),n&2){let t=e.$implicit,i=C(4);g(),S(t.name),g(2),S(i.formatCurrency(t.amount))}}function b3(n,e){if(n&1&&(d(0,"tr",80)(1,"td",85),h(2),c(),d(3,"td",86),h(4),c(),P(5,D3,4,2,null,null,pg),c()),n&2){let t=e.$implicit,i=C(3);g(2),H("",t.month,"\u6708"),g(2),S(i.formatCurrency(t.total)),g(),F(t.items)}}function w3(n,e){if(n&1&&(d(0,"td",83),h(1),c(),d(2,"td",84),h(3),c()),n&2){let t=e.$implicit,i=C(3);g(),S(t.name),g(2),S(i.formatCurrency(i.calculateMonthlyItemTotal(t.name)))}}function T3(n,e){if(n&1){let t=$();d(0,"div",69)(1,"div",70)(2,"h3",71),h(3),c(),d(4,"button",72),D("click",function(){T(t);let r=C(2);return I(r.closeDetailModal())}),x(5,"ion-icon",73),c()(),d(6,"div",74)(7,"div",75),x(8,"canvas",null,0),c(),d(10,"div",76)(11,"table",26)(12,"thead",77)(13,"tr")(14,"th",78),h(15,"\u6708\u4EFD"),c(),d(16,"th",79),h(17,"\u91D1\u984D"),c(),P(18,S3,4,1,null,null,pg),c()(),d(20,"tbody"),P(21,b3,7,2,"tr",80,L5),c(),d(23,"tfoot",81)(24,"tr",82)(25,"td",83),h(26,"\u5C0F\u8A08"),c(),d(27,"td",84),h(28),c(),P(29,w3,4,2,null,null,pg),c()()()()()()}if(n&2){let t=e,i=C(2);g(3),hn("",t.year," \u5E74 ",t.type,"\u660E\u7D30 (\u7E3D\u8A08: ",i.formatCurrency(i.detailModalTotal()),")"),g(15),F(t.data[0].items),g(3),F(t.data),g(7),S(i.formatCurrency(i.detailModalTotal())),g(),F(t.data[0].items)}}function I3(n,e){if(n&1&&(d(0,"div",10),B(1,T3,31,4,"div",69),c()),n&2){let t,i=C();g(),U((t=i.detailModalData())?1:-1,t)}}var Zo=class Zo{constructor(){this.dataService=R(Te);this.activeStatement=w("summary");this.annualSummary=w(null);this.monthlyIncomeStatement=w(null);this.monthlyBalanceSheet=w(null);this.isDetailModalOpen=w(!1);this.detailModalData=w(null);this.years=w([2026,2025,2024]);this.quarters=w([{value:"all",label:"\u5168\u5E74"},{value:1,label:"\u7B2C\u4E00\u5B63"},{value:2,label:"\u7B2C\u4E8C\u5B63"},{value:3,label:"\u7B2C\u4E09\u5B63"},{value:4,label:"\u7B2C\u56DB\u5B63"}]);this.selectedYear=w(2026);this.selectedQuarter=w("all");this.selectedStartYearSummary=w(2024);this.selectedEndYearSummary=w(2026);this.detailModalTotal=Y(()=>{let e=this.detailModalData();return e?e.data.reduce((t,i)=>t+i.total,0):0});this.applySummaryFilter(),this.applyFilter()}set detailChartRef(e){this.destroyDetailChart(),e&&this.detailModalData()&&this.createDetailChart(e)}setActiveStatement(e){this.activeStatement.set(e)}applyFilter(){let e=this.selectedYear(),t=this.selectedQuarter();this.monthlyIncomeStatement.set(this.dataService.getMonthlyIncomeStatementReport(e,t)),this.monthlyBalanceSheet.set(this.dataService.getMonthlyBalanceSheetReport(e,t))}resetFilter(){this.selectedYear.set(2026),this.selectedQuarter.set("all"),this.applyFilter()}applySummaryFilter(){let e=this.selectedStartYearSummary(),t=this.selectedEndYearSummary();e>t&&(this.selectedStartYearSummary.set(t),this.selectedEndYearSummary.set(e)),this.annualSummary.set(this.dataService.getAnnualSummaryReport(this.selectedStartYearSummary(),this.selectedEndYearSummary()))}resetSummaryFilter(){this.selectedStartYearSummary.set(2024),this.selectedEndYearSummary.set(2026),this.applySummaryFilter()}openDetailModal(e,t){let i=this.dataService.getMonthlyDetail(e,t);i?(this.detailModalData.set(i),this.isDetailModalOpen.set(!0)):console.warn(`No detail data available for ${e} - ${t}`)}closeDetailModal(){this.isDetailModalOpen.set(!1),this.detailModalData.set(null),this.destroyDetailChart()}createDetailChart(e){let t=this.detailModalData();if(!e||!t||t.data.length===0)return;let i=t.data,r=i.map(f=>`${f.month}\u6708`),o=["#4f46e5","#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6"],s=[{label:"\u6708\u5EA6\u7E3D\u8A08",data:i.map(f=>f.total),borderColor:o[0],backgroundColor:"rgba(79, 70, 229, 0.1)",fill:!0,tension:.4,borderWidth:3,pointRadius:4}];(t.data[0]?.items.map(f=>f.name)||[]).forEach((f,m)=>{let y=i.map(v=>v.items.find(E=>E.name===f)?.amount||0);s.push({label:f,data:y,borderColor:o[(m+1)%o.length],backgroundColor:"transparent",fill:!1,tension:.4,borderDash:[5,5],borderWidth:2,pointRadius:3})});let l=e.nativeElement.getContext("2d");this.detailChart=new Chart(l,{type:"line",data:{labels:r,datasets:s},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!1,ticks:{callback:f=>this.formatCurrency(f)}}},plugins:{tooltip:{callbacks:{label:f=>`${f.dataset.label}: ${this.formatCurrency(f.raw)}`}}}}})}destroyDetailChart(){this.detailChart&&(this.detailChart.destroy(),this.detailChart=null)}calculateMonthlyItemTotal(e){let t=this.detailModalData();return t?t.data.reduce((i,r)=>{let o=r.items.find(s=>s.name===e);return i+(o?.amount||0)},0):0}formatCurrency(e){return e==null?"NT$0":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}formatMonth(e){return`${parseInt(e.split("-")[1],10)}\u6708`}};Zo.\u0275fac=function(t){return new(t||Zo)},Zo.\u0275cmp=ae({type:Zo,selectors:[["app-financial-statements"]],viewQuery:function(t,i){if(t&1&&Zt(k5,5),t&2){let r;Ft(r=kt())&&(i.detailChartRef=r.first)}},decls:20,vars:10,consts:[["detailChart",""],[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","flex-col","sm:flex-row","items-center","gap-2","bg-white","p-3","rounded-xl","shadow-md","border","border-gray-200"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-6"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"pt-6","overflow-x-auto"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50","transition-opacity"],[1,"flex","items-center","gap-2"],["for","startYear",1,"text-sm","font-medium","text-gray-600"],["id","startYear",1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100","pr-8",3,"ngModelChange","ngModel"],[3,"value"],["for","endYear",1,"text-sm","font-medium","text-gray-600"],["id","endYear",1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100","pr-8",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-2","mt-2","sm:mt-0"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","filter-outline"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],["for","year",1,"text-sm","font-medium","text-gray-600"],["id","year",1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100","pr-8",3,"ngModelChange","ngModel"],["for","quarter",1,"text-sm","font-medium","text-gray-600"],["id","quarter",1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100","pr-8",3,"ngModelChange","ngModel"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-center","py-8","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],[1,"py-3","px-4"],[1,"py-3","px-4","text-right"],[1,"border-b","border-gray-100"],[1,"py-3","px-4","font-semibold","text-gray-800"],[1,"py-3","px-4","text-right","font-medium","text-blue-600","hover:bg-blue-50","cursor-pointer","rounded-md","transition-colors"],[1,"py-3","px-4","text-right","font-bold"],[1,"py-3","px-4","text-right","font-medium","text-red-600","hover:bg-red-50","cursor-pointer","rounded-md","transition-colors"],[1,"border-b-2","border-gray-200","bg-gray-50","font-bold"],[1,"py-3","px-4","text-right",3,"text-red-600"],[1,"py-3","px-4","text-right","font-medium","text-orange-600","hover:bg-orange-50","cursor-pointer","rounded-md","transition-colors"],[1,"py-3","px-4","text-right","font-medium","text-blue-600","hover:bg-blue-50","cursor-pointer","rounded-md","transition-colors",3,"click"],[1,"py-3","px-4","text-right","font-medium","text-red-600","hover:bg-red-50","cursor-pointer","rounded-md","transition-colors",3,"click"],[1,"py-3","px-4","text-right","font-medium","text-orange-600","hover:bg-orange-50","cursor-pointer","rounded-md","transition-colors",3,"click"],[1,"py-3","px-4","w-32","sticky","left-0","bg-gray-50","z-20"],[1,"py-3","px-4","w-48","sticky","left-[8rem]","bg-gray-50","z-20"],[1,"py-3","px-4","w-36","text-right","sticky","left-[20rem]","bg-gray-50","z-20"],[1,"py-3","px-4","w-24","text-right","sticky","left-[29rem]","bg-gray-50","z-20"],[1,"font-semibold","text-gray-800","bg-gray-100"],["colspan","4",1,"py-2","px-4","sticky","left-0","bg-gray-100","z-10"],[1,"border-b","border-gray-100","hover:bg-gray-50"],[1,"font-semibold","text-gray-900","bg-gray-50","border-t-2","border-gray-200"],["colspan","2",1,"py-2","px-4","sticky","left-0","bg-gray-50","z-10"],[1,"py-2","px-4","text-right","font-medium","sticky","left-[20rem]","bg-gray-50","z-10"],[1,"py-2","px-4","text-right","sticky","left-[29rem]","bg-gray-50","z-10"],[1,"py-2","px-4","text-right"],[1,"py-2"],[1,"font-bold","text-base","text-white","bg-indigo-600"],["colspan","2",1,"py-3","px-4","sticky","left-0","bg-indigo-600","z-10"],[1,"py-3","px-4","text-right","sticky","left-[20rem]","bg-indigo-600","z-10"],[1,"py-3","px-4","sticky","left-[29rem]","bg-indigo-600","z-10"],[1,"py-2","px-4","sticky","left-0","bg-white","hover:bg-gray-50","z-10"],[1,"py-2","px-4","sticky","left-[8rem]","bg-white","hover:bg-gray-50","z-10"],[1,"py-2","px-4","text-right","font-medium","sticky","left-[20rem]","bg-white","hover:bg-gray-50","z-10"],[1,"py-2","px-4","text-right","sticky","left-[29rem]","bg-white","hover:bg-gray-50","z-10"],[1,"py-2","px-4","text-right","font-bold","text-indigo-600","sticky","left-[20rem]","bg-gray-50","z-10"],[1,"font-semibold","text-gray-900","border-t-2","border-gray-200"],["colspan","2",1,"py-2","px-4","sticky","left-0","bg-white","z-10"],[1,"py-2","px-4","text-right","font-medium","sticky","left-[20rem]","bg-white","z-10"],[1,"sticky","left-[29rem]","bg-white","z-10"],[1,"sticky","left-[29rem]","bg-gray-50","z-10"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-6xl","max-h-[90vh]","flex","flex-col","m-4"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600","p-1","rounded-full","hover:bg-gray-100",3,"click"],["name","close-outline",1,"text-2xl"],[1,"flex-1","flex","flex-col","p-6","overflow-hidden"],[1,"h-64","mb-6"],[1,"flex-1","overflow-y-auto"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","sticky","top-0"],[1,"px-4","py-2"],[1,"px-4","py-2","text-right"],[1,"border-b","hover:bg-gray-50"],[1,"font-bold","bg-gray-100","sticky","bottom-0"],[1,"border-t-2"],[1,"px-4","py-3"],[1,"px-4","py-3","text-right"],[1,"px-4","py-2","font-medium"],[1,"px-4","py-2","text-right","font-semibold"]],template:function(t,i){if(t&1&&(d(0,"div",1)(1,"div",2)(2,"h1",3),h(3,"\u8CA1\u52D9\u5831\u8868"),c(),B(4,U5,20,2,"div",4),B(5,G5,20,2,"div",4),c(),d(6,"div",5)(7,"div",6)(8,"nav",7)(9,"button",8),D("click",function(){return i.setActiveStatement("summary")}),h(10," \u7E3D\u8868 "),c(),d(11,"button",8),D("click",function(){return i.setActiveStatement("income")}),h(12," \u640D\u76CA\u8868 "),c(),d(13,"button",8),D("click",function(){return i.setActiveStatement("balance")}),h(14," \u8CC7\u7522\u8CA0\u50B5\u8868 "),c()()(),d(15,"div",9),B(16,Q5,2,1)(17,l3,2,1)(18,x3,2,1),c()()(),B(19,I3,2,1,"div",10)),t&2){let r;g(4),U(i.activeStatement()==="summary"?4:-1),g(),U(i.activeStatement()==="income"||i.activeStatement()==="balance"?5:-1),g(4),_t(i.activeStatement()==="summary"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(2),_t(i.activeStatement()==="income"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(2),_t(i.activeStatement()==="balance"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(3),U((r=i.activeStatement())==="summary"?16:r==="income"?17:r==="balance"?18:-1),g(3),U(i.isDetailModalOpen()?19:-1)}},dependencies:[ye,ke,Ve,Be,Fe,_e,Ne],encapsulation:2,changeDetection:0});var Bd=Zo;var Nx=(n,e)=>e.id,M3=(n,e)=>e.transactionId;function A3(n,e){if(n&1){let t=$();d(0,"div",36),D("click",function(){let r=T(t).$implicit,o=C();return I(o.selectCustomer(r))}),d(1,"div",37)(2,"p",38),h(3),c(),d(4,"span",39),h(5),c()(),d(6,"p",6),h(7),c()()}if(n&2){let t,i,r=e.$implicit,o=C();J("bg-indigo-100",((t=o.selectedCustomer())==null?null:t.id)===r.id)("hover:bg-gray-100",((i=o.selectedCustomer())==null?null:i.id)!==r.id),g(3),S(r.name),g(),_t(o.getCustomerTypeClass(r.type)),g(),S(r.type),g(2),S(r.phone)}}function R3(n,e){n&1&&(d(0,"p",23),h(1,"\u627E\u4E0D\u5230\u9867\u5BA2\u3002"),c())}function N3(n,e){if(n&1&&(d(0,"tr",57)(1,"td",55),h(2),c(),d(3,"td",55),h(4),c(),d(5,"td",58),h(6),c()()),n&2){let t=e.$implicit,i=C(3);g(2),S(t.date),g(2),S(i.formatSaleItems(t.items)),g(2),S(i.formatCurrency(t.total))}}function P3(n,e){if(n&1&&(d(0,"table",51)(1,"thead",54)(2,"tr")(3,"th",55),h(4,"\u65E5\u671F"),c(),d(5,"th",55),h(6,"\u54C1\u9805"),c(),d(7,"th",56),h(8,"\u7E3D\u91D1\u984D"),c()()(),d(9,"tbody"),P(10,N3,7,3,"tr",57,M3),c()()),n&2){let t=C(2);g(10),F(t.customerSales())}}function F3(n,e){n&1&&(d(0,"p",23),h(1,"\u7121\u4EA4\u6613\u7D00\u9304\u3002"),c())}function k3(n,e){n&1&&x(0,"ion-icon",61)}function O3(n,e){n&1&&x(0,"ion-icon",62)}function L3(n,e){if(n&1&&(d(0,"div",53)(1,"div",59)(2,"div",60),P(3,k3,1,0,"ion-icon",61,Mt),P(5,O3,1,0,"ion-icon",62,Mt),c(),d(7,"span",63),h(8),c()(),d(9,"p",64),h(10),c()()),n&2){let t=e.$implicit,i=C(2);g(3),F(i.getStars(t.rating)),g(2),F(i.getEmptyStars(t.rating)),g(3),S(t.date),g(2),S(t.comment)}}function V3(n,e){n&1&&(d(0,"p",23),h(1,"\u7121\u56DE\u994B\u7D00\u9304\u3002"),c())}function B3(n,e){if(n&1){let t=$();d(0,"div")(1,"div",26)(2,"div",40)(3,"div")(4,"h2",41),h(5),c(),d(6,"span",42),h(7),c()(),d(8,"button",43),D("click",function(){T(t);let r=C();return I(r.clearSelection())}),x(9,"ion-icon",44),c()(),d(10,"div",45)(11,"div")(12,"strong",46),h(13,"\u96FB\u8A71"),c(),d(14,"span",47),h(15),c()(),d(16,"div")(17,"strong",46),h(18,"\u6027\u5225"),c(),d(19,"span",47),h(20),c()(),d(21,"div")(22,"strong",46),h(23,"\u751F\u65E5"),c(),d(24,"span",47),h(25),c()(),d(26,"div")(27,"strong",46),h(28,"\u53EF\u7528\u9EDE\u6578"),c(),d(29,"span",48),h(30),c()()()(),d(31,"div",49)(32,"h3",16),h(33,"\u4EA4\u6613\u6B77\u53F2"),c(),d(34,"div",50),B(35,P3,12,0,"table",51)(36,F3,2,0,"p",23),c()(),d(37,"div",49)(38,"h3",16),h(39,"\u9867\u5BA2\u56DE\u994B"),c(),d(40,"div",52),P(41,L3,11,2,"div",53,Nx,!1,V3,2,0,"p",23),c()()()}if(n&2){let t=e,i=C();g(5),S(t.name),g(),_t(i.getCustomerTypeClass(t.type)),g(),S(t.type),g(8),S(t.phone),g(5),S(t.gender),g(5),S(t.birthday),g(5),H("",t.points," \u9EDE"),g(5),U(i.customerSales().length>0?35:36),g(6),F(i.customerFeedback())}}function U3(n,e){n&1&&(d(0,"div",25)(1,"div",65),x(2,"ion-icon",66),d(3,"p",67),h(4,"\u8ACB\u5F9E\u5DE6\u5074\u9078\u64C7\u4E00\u4F4D\u9867\u5BA2\u4EE5\u67E5\u770B\u8A73\u7D30\u8CC7\u8A0A\u3002"),c()()())}function H3(n,e){n&1&&x(0,"div",32)}function $3(n,e){n&1&&(d(0,"p",33),h(1,"\u9EDE\u64CA\u6309\u9215\u4EE5\u5C0D\u5168\u9AD4\u9867\u5BA2\u7684 POS \u6578\u64DA\u904B\u884C AI \u8CFC\u7269\u7C43\u5206\u6790\u3002"),c())}function G3(n,e){n&1&&(d(0,"p",34),h(1,"AI \u6B63\u5728\u5206\u6790\u4EA4\u6613\u7D00\u9304..."),c())}function q3(n,e){if(n&1&&(d(0,"div",35)(1,"p",68),h(2,"\u767C\u751F\u932F\u8AA4"),c(),d(3,"p"),h(4),c()()),n&2){let t=C();g(4),S(t.geminiService.basketAnalysisError())}}function W3(n,e){if(n&1&&(d(0,"div",71)(1,"p",73),h(2),c(),d(3,"p",74)(4,"span",75),h(5,"\u5EFA\u8B70\uFF1A"),c(),h(6),c()()),n&2){let t=e.$implicit;g(2),S(t.items.join(" + ")),g(4),H(" ",t.suggestion)}}function z3(n,e){n&1&&(d(0,"p",33),h(1,"\u672A\u627E\u5230\u986F\u8457\u7684\u5546\u54C1\u7D44\u5408\u3002"),c())}function j3(n,e){if(n&1&&(d(0,"li"),h(1),c()),n&2){let t=e.$implicit;g(),S(t)}}function Y3(n,e){if(n&1&&(d(0,"div",69)(1,"div")(2,"h4",70),h(3,"\u7D93\u5E38\u4E00\u8D77\u8CFC\u8CB7\u7684\u5546\u54C1"),c(),P(4,W3,7,2,"div",71,Mt,!1,z3,2,0,"p",33),c(),d(7,"div")(8,"h4",70),h(9,"\u9867\u5BA2\u884C\u70BA\u6D1E\u5BDF"),c(),d(10,"ul",72),P(11,j3,2,1,"li",null,Mt),c()()()),n&2){let t=e;g(4),F(t.frequently_bought_together),g(7),F(t.customer_behavior_insights)}}function J3(n,e){if(n&1&&B(0,Y3,13,1,"div",69),n&2){let t,i=C();U((t=i.geminiService.basketAnalysis())?0:-1,t)}}var Xo=class Xo{constructor(){this.dataService=R(Te);this.geminiService=R(Jo);this.customers=w([]);this.searchTerm=w("");this.selectedCustomer=w(null);this.customerSales=w([]);this.customerFeedback=w([]);this.filteredCustomers=Y(()=>{let e=this.searchTerm().toLowerCase();return e?this.customers().filter(t=>t.name.toLowerCase().includes(e)||t.phone.includes(e)):this.customers()});this.customerStats=Y(()=>{let e=this.customers(),t=e.length,i=e.filter(s=>s.type==="VIP").length,r=e.filter(s=>s.type==="\u4E00\u822C").length,o=e.filter(s=>s.type==="\u9ED1\u540D\u55AE").length;return{total:t,vipCount:i,regularCount:r,blacklistedCount:o}});this.loadCustomers()}loadCustomers(){this.customers.set(this.dataService.getCustomers())}selectCustomer(e){this.selectedCustomer.set(e),this.customerSales.set(this.dataService.getPOSSales(void 0,void 0,e.id)),this.customerFeedback.set(this.dataService.getFeedbackForCustomer(e.id))}clearSelection(){this.selectedCustomer.set(null),this.customerSales.set([]),this.customerFeedback.set([])}runBasketAnalysis(){let e=this.dataService.getPOSSales();e.length>0&&this.geminiService.analyzeShoppingBaskets(e)}getCustomerTypeClass(e){switch(e){case"VIP":return"bg-yellow-100 text-yellow-800";case"\u9ED1\u540D\u55AE":return"bg-red-100 text-red-800";default:return"bg-blue-100 text-blue-800"}}formatSaleItems(e){return e.map(t=>t.name).join(", ")}formatCurrency(e){return e==null?"":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}getStars(e){return Array(e).fill(0)}getEmptyStars(e){return Array(5-e).fill(0)}};Xo.\u0275fac=function(t){return new(t||Xo)},Xo.\u0275cmp=ae({type:Xo,selectors:[["app-customer-analysis"]],decls:65,vars:10,consts:[[1,"space-y-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-6"],[1,"bg-white","p-6","rounded-xl","shadow-md","flex","items-center","space-x-4"],[1,"bg-blue-100","p-3","rounded-full"],["name","people-outline",1,"text-2xl","text-blue-600"],[1,"text-sm","text-gray-500"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"bg-yellow-100","p-3","rounded-full"],["name","star-outline",1,"text-2xl","text-yellow-600"],[1,"bg-green-100","p-3","rounded-full"],["name","person-outline",1,"text-2xl","text-green-600"],[1,"bg-red-100","p-3","rounded-full"],["name","remove-circle-outline",1,"text-2xl","text-red-600"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-1","bg-white","p-6","rounded-xl","shadow-md","flex","flex-col"],[1,"text-lg","font-semibold","text-gray-800","mb-4"],[1,"relative","mb-4"],["type","text","placeholder","\u4F9D\u59D3\u540D\u6216\u96FB\u8A71\u641C\u5C0B...",1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","pl-10","bg-gray-50",3,"ngModelChange","ngModel"],["name","search-outline",1,"absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],[1,"flex-1","overflow-y-auto","-mx-2","px-2"],[1,"space-y-2"],[1,"p-3","rounded-lg","cursor-pointer","transition-colors",3,"bg-indigo-100","hover:bg-gray-100"],[1,"text-center","text-gray-500","py-4"],[1,"lg:col-span-2","space-y-8"],[1,"h-full","flex","items-center","justify-center","bg-white","p-6","rounded-xl","shadow-md"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"flex","justify-between","items-center","mb-4"],[1,"flex","items-center","space-x-3"],["name","basket-outline",1,"text-2xl","text-indigo-600"],[1,"text-lg","font-semibold","text-gray-800"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","disabled:bg-indigo-300","disabled:cursor-not-allowed","flex","items-center","space-x-2",3,"click","disabled"],[1,"w-5","h-5","border-2","border-white","border-t-transparent","rounded-full","animate-spin"],[1,"text-gray-500"],[1,"text-gray-500","animate-pulse"],[1,"bg-red-50","text-red-700","p-4","rounded-lg"],[1,"p-3","rounded-lg","cursor-pointer","transition-colors",3,"click"],[1,"flex","justify-between","items-center"],[1,"font-medium","text-gray-800"],[1,"text-xs","font-semibold","px-2","py-1","rounded-full"],[1,"flex","justify-between","items-start"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","font-semibold","px-2","py-1","rounded-full","mt-1","inline-block"],[1,"text-gray-500","hover:text-gray-700",3,"click"],["name","close-circle-outline",1,"text-2xl"],[1,"mt-4","grid","grid-cols-2","md:grid-cols-3","gap-4","text-sm","border-t","pt-4"],[1,"block","text-gray-500"],[1,"text-gray-800"],[1,"text-gray-800","font-bold"],[1,"bg-white","p-6","rounded-xl","shadow-md","mt-8"],[1,"overflow-x-auto","max-h-60"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"space-y-4","max-h-60","overflow-y-auto"],[1,"p-4","border","rounded-lg","bg-gray-50"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","sticky","top-0"],[1,"px-4","py-2"],[1,"px-4","py-2","text-right"],[1,"bg-white","border-b","hover:bg-gray-50"],[1,"px-4","py-2","text-right","font-medium"],[1,"flex","justify-between","items-center","mb-1"],[1,"flex","text-yellow-500"],["name","star"],["name","star-outline"],[1,"text-xs","text-gray-500"],[1,"text-gray-700"],[1,"text-center"],["name","person-add-outline",1,"text-5xl","text-gray-400"],[1,"mt-2","text-gray-500"],[1,"font-semibold"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","text-sm"],[1,"font-semibold","text-gray-800","mb-2"],[1,"bg-indigo-50","p-4","rounded-lg","mb-4"],[1,"list-disc","list-inside","space-y-2","text-gray-600","bg-gray-50","p-4","rounded-lg"],[1,"font-semibold","text-indigo-800"],[1,"text-indigo-700","mt-1"],[1,"font-medium"]],template:function(t,i){if(t&1&&(d(0,"div",0)(1,"h1",1),h(2,"\u9867\u5BA2\u7BA1\u7406"),c(),d(3,"div",2)(4,"div",3)(5,"div",4),x(6,"ion-icon",5),c(),d(7,"div")(8,"p",6),h(9,"\u7E3D\u9867\u5BA2\u6578"),c(),d(10,"p",7),h(11),c()()(),d(12,"div",3)(13,"div",8),x(14,"ion-icon",9),c(),d(15,"div")(16,"p",6),h(17,"VIP \u9867\u5BA2"),c(),d(18,"p",7),h(19),c()()(),d(20,"div",3)(21,"div",10),x(22,"ion-icon",11),c(),d(23,"div")(24,"p",6),h(25,"\u4E00\u822C\u9867\u5BA2"),c(),d(26,"p",7),h(27),c()()(),d(28,"div",3)(29,"div",12),x(30,"ion-icon",13),c(),d(31,"div")(32,"p",6),h(33,"\u9ED1\u540D\u55AE\u9867\u5BA2"),c(),d(34,"p",7),h(35),c()()()(),d(36,"div",14)(37,"div",15)(38,"h3",16),h(39,"\u9867\u5BA2\u5217\u8868"),c(),d(40,"div",17)(41,"input",18),de("ngModelChange",function(o){return fe(i.searchTerm,o)||(i.searchTerm=o),o}),c(),x(42,"ion-icon",19),c(),d(43,"div",20)(44,"div",21),P(45,A3,8,9,"div",22,Nx,!1,R3,2,0,"p",23),c()()(),d(48,"div",24),B(49,B3,44,10,"div")(50,U3,5,0,"div",25),c()(),d(51,"div",26)(52,"div",27)(53,"div",28),x(54,"ion-icon",29),d(55,"h3",30),h(56,"\u9867\u5BA2\u884C\u70BA\u5206\u6790 (\u6574\u9AD4)"),c()(),d(57,"button",31),D("click",function(){return i.runBasketAnalysis()}),B(58,H3,1,0,"div",32),d(59,"span"),h(60,"\u5206\u6790\u8CFC\u7269\u7C43"),c()()(),B(61,$3,2,0,"p",33)(62,G3,2,0,"p",34)(63,q3,5,1,"div",35)(64,J3,1,1),c()()),t&2){let r,o;g(11),S(i.customerStats().total),g(8),S(i.customerStats().vipCount),g(8),S(i.customerStats().regularCount),g(8),S(i.customerStats().blacklistedCount),g(6),ce("ngModel",i.searchTerm),g(4),F(i.filteredCustomers()),g(4),U((r=i.selectedCustomer())?49:50,r),g(8),k("disabled",i.geminiService.basketAnalysisState()==="loading"),g(),U(i.geminiService.basketAnalysisState()==="loading"?58:-1),g(3),U((o=i.geminiService.basketAnalysisState())==="idle"?61:o==="loading"?62:o==="error"?63:o==="success"?64:-1)}},dependencies:[ye,ke,we,_e,Ne],encapsulation:2,changeDetection:0});var Ud=Xo;var K3=["mainCategoryChart"],Q3=["diningChart"],Z3=["drinksChart"],X3=["monthlyTrendChart"],e4=(n,e)=>e.category,t4=(n,e)=>e.name,n4=(n,e)=>e.month;function i4(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function r4(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u6708")}}function o4(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function s4(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u6708")}}function a4(n,e){if(n&1){let t=$();d(0,"div",7)(1,"div",13)(2,"label",14),h(3,"\u5F9E:"),c(),d(4,"select",15),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedStartYear,r)||(o.selectedStartYear=r),I(r)}),P(5,i4,2,2,"option",16,j),c(),d(7,"select",15),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedStartMonth,r)||(o.selectedStartMonth=r),I(r)}),P(8,r4,2,2,"option",16,j),c()(),d(10,"div",13)(11,"label",14),h(12,"\u81F3:"),c(),d(13,"select",15),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedEndYear,r)||(o.selectedEndYear=r),I(r)}),P(14,o4,2,2,"option",16,j),c(),d(16,"select",15),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedEndMonth,r)||(o.selectedEndMonth=r),I(r)}),P(17,s4,2,2,"option",16,j),c()(),d(19,"div",17)(20,"button",18),D("click",function(){T(t);let r=C();return I(r.applyAnalysisFilter())}),x(21,"ion-icon",19),d(22,"span"),h(23,"\u5957\u7528"),c()(),d(24,"button",20),D("click",function(){T(t);let r=C();return I(r.resetAnalysisFilter())}),x(25,"ion-icon",21),c()()()}if(n&2){let t=C();g(4),ce("ngModel",t.selectedStartYear),g(),F(t.analysisYears()),g(2),ce("ngModel",t.selectedStartMonth),g(),F(t.analysisMonths()),g(5),ce("ngModel",t.selectedEndYear),g(),F(t.analysisYears()),g(2),ce("ngModel",t.selectedEndMonth),g(),F(t.analysisMonths())}}function l4(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function u4(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u6708")}}function c4(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function d4(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u6708")}}function f4(n,e){if(n&1){let t=$();d(0,"div",7)(1,"div",13)(2,"label",14),h(3,"\u5F9E:"),c(),d(4,"select",15),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedMarginStartYear,r)||(o.selectedMarginStartYear=r),I(r)}),P(5,l4,2,2,"option",16,j),c(),d(7,"select",15),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedMarginStartMonth,r)||(o.selectedMarginStartMonth=r),I(r)}),P(8,u4,2,2,"option",16,j),c()(),d(10,"div",13)(11,"label",14),h(12,"\u81F3:"),c(),d(13,"select",15),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedMarginEndYear,r)||(o.selectedMarginEndYear=r),I(r)}),P(14,c4,2,2,"option",16,j),c(),d(16,"select",15),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedMarginEndMonth,r)||(o.selectedMarginEndMonth=r),I(r)}),P(17,d4,2,2,"option",16,j),c()(),d(19,"div",17)(20,"button",18),D("click",function(){T(t);let r=C();return I(r.applyMarginFilter())}),x(21,"ion-icon",19),d(22,"span"),h(23,"\u5957\u7528"),c()(),d(24,"button",20),D("click",function(){T(t);let r=C();return I(r.resetMarginFilter())}),x(25,"ion-icon",21),c()()()}if(n&2){let t=C();g(4),ce("ngModel",t.selectedMarginStartYear),g(),F(t.marginYears()),g(2),ce("ngModel",t.selectedMarginStartMonth),g(),F(t.marginAllMonths()),g(5),ce("ngModel",t.selectedMarginEndYear),g(),F(t.marginYears()),g(2),ce("ngModel",t.selectedMarginEndMonth),g(),F(t.marginAllMonths())}}function p4(n,e){n&1&&(d(0,"div",40)(1,"div",43),x(2,"canvas",null,2),c()())}function m4(n,e){n&1&&(d(0,"div",40)(1,"div",43),x(2,"canvas",null,3),c()())}function h4(n,e){if(n&1&&(d(0,"div",37)(1,"div",38),x(2,"canvas",null,0),c()(),d(4,"div",39),B(5,p4,4,0,"div",40),B(6,m4,4,0,"div",40),c(),d(7,"div",41)(8,"h3",33),h(9,"\u6BCF\u6708\u54C1\u9805\u71DF\u6536\u8DA8\u52E2"),c(),d(10,"div",42),x(11,"canvas",null,1),c()()),n&2){let t=C(2);g(5),U(t.chartData().dining.length>0?5:-1),g(),U(t.chartData().drinks.length>0?6:-1)}}function g4(n,e){if(n&1&&(d(0,"th",47),h(1),c()),n&2){let t=e.$implicit,i=C(3);mt("colspan",4),g(),S(i.formatMonth(t))}}function y4(n,e){n&1&&(d(0,"th",52),h(1,"\u92B7\u552E\u91CF"),c(),d(2,"th",52),h(3,"\u71DF\u696D\u984D"),c(),d(4,"th",52),h(5,"\u71DF\u696D\u984D\u4F54\u6BD4"),c(),d(6,"th",52),h(7,"\u6210\u672C\u7387"),c())}function v4(n,e){if(n&1&&(d(0,"td",57),h(1),c()),n&2){let t=C(2).$implicit;mt("rowspan",t.products.length),g(),S(t.category)}}function _4(n,e){if(n&1&&(d(0,"td",59),h(1),c(),d(2,"td",59),h(3),c(),d(4,"td",59),h(5),c(),d(6,"td",59),h(7),c()),n&2){let t=e,i=C(6);g(),S(t.quantitySold),g(2),S(i.formatCurrency(t.revenue)),g(2),H("",t.revenueShare.toFixed(2),"%"),g(2),H("",(t.costRate*100).toFixed(2),"%")}}function C4(n,e){if(n&1&&(d(0,"td",59),h(1,"0"),c(),d(2,"td",59),h(3),c(),d(4,"td",59),h(5,"0.00%"),c(),d(6,"td",59),h(7,"0.00%"),c()),n&2){let t=C(6);g(3),S(t.formatCurrency(0))}}function E4(n,e){if(n&1&&B(0,_4,8,4)(1,C4,8,1),n&2){let t,i=e.$implicit,r=C().$implicit;U((t=r.monthlyMetrics[i])?0:1,t)}}function x4(n,e){if(n&1&&(d(0,"tr",53),B(1,v4,2,2,"td",57),d(2,"td",58),h(3),c(),d(4,"td",59),h(5),c(),d(6,"td",59),h(7),c(),P(8,E4,2,1,null,null,j),c()),n&2){let t=e.$implicit,i=e.$index,r=C(2),o=C(2);g(),U(i===0?1:-1),g(2),S(t.name),g(2),S(o.formatCurrency(t.totalRevenue)),g(2),H("",t.totalRevenueShare.toFixed(2),"%"),g(),F(r.months)}}function S4(n,e){if(n&1&&(d(0,"td",56),h(1),c(),d(2,"td",56),h(3),c(),d(4,"td",56),h(5),c(),d(6,"td",56),h(7),c()),n&2){let t=e,i=C(5);g(),S(t.quantitySold),g(2),S(i.formatCurrency(t.revenue)),g(2),H("",t.revenueShare.toFixed(2),"%"),g(2),H("",(t.costRate*100).toFixed(2),"%")}}function D4(n,e){n&1&&x(0,"td",60)}function b4(n,e){if(n&1&&B(0,S4,8,4)(1,D4,1,0,"td",60),n&2){let t,i=e.$implicit,r=C().$implicit;U((t=r.subtotal.monthlyMetrics[i])?0:1,t)}}function w4(n,e){if(n&1&&(P(0,x4,10,4,"tr",53,t4),d(2,"tr",54)(3,"td",55),h(4,"\u5C0F\u8A08"),c(),d(5,"td",56),h(6),c(),d(7,"td",56),h(8),c(),P(9,b4,2,1,null,null,j),c()),n&2){let t=e.$implicit,i=C(),r=C(2);F(t.products),g(6),S(r.formatCurrency(t.subtotal.totalRevenue)),g(2),H("",t.subtotal.totalRevenueShare.toFixed(2),"%"),g(),F(i.months)}}function T4(n,e){if(n&1&&(d(0,"td",51),h(1),c(),d(2,"td",51),h(3),c(),d(4,"td",51),h(5),c(),d(6,"td",51),h(7),c()),n&2){let t=e,i=C(4);g(),S(t.quantitySold),g(2),S(i.formatCurrency(t.revenue)),g(2),H("",t.revenueShare.toFixed(2),"%"),g(2),H("",(t.costRate*100).toFixed(2),"%")}}function I4(n,e){n&1&&x(0,"td",61)}function M4(n,e){if(n&1&&B(0,T4,8,4)(1,I4,1,0,"td",61),n&2){let t,i=e.$implicit,r=C();U((t=r.grandTotal.monthlyMetrics[i])?0:1,t)}}function A4(n,e){if(n&1&&(d(0,"table",35)(1,"thead",44)(2,"tr")(3,"th",45),h(4,"\u5206\u985E"),c(),d(5,"th",45),h(6,"\u54C1\u9805"),c(),d(7,"th",46),h(8,"\u71DF\u696D\u984D"),x(9,"br"),h(10,"\u5C0F\u8A08"),c(),d(11,"th",46),h(12,"\u71DF\u696D\u984D"),x(13,"br"),h(14,"\u4F54\u6BD4"),c(),P(15,g4,2,2,"th",47,j),c(),d(17,"tr"),P(18,y4,8,0,null,null,j),c()(),d(20,"tbody"),P(21,w4,11,2,null,null,e4),c(),d(23,"tfoot",48)(24,"tr",49)(25,"td",50),h(26,"\u7E3D\u8A08"),c(),d(27,"td",51),h(28),c(),d(29,"td",51),h(30),c(),P(31,M4,2,1,null,null,j),c()()()),n&2){let t=e,i=C(2);g(15),F(t.months),g(3),F(t.months),g(3),F(t.categoryGroups),g(7),S(i.formatCurrency(t.grandTotal.totalRevenue)),g(2),H("",t.grandTotal.totalRevenueShare.toFixed(2),"%"),g(),F(t.months)}}function R4(n,e){n&1&&(d(0,"div",36),h(1,"\u5728\u6B64\u65E5\u671F\u7BC4\u570D\u5167\u6C92\u6709\u92B7\u552E\u6578\u64DA\u3002"),c())}function N4(n,e){if(n&1&&(d(0,"div",4)(1,"div",22)(2,"div",23)(3,"div",24),x(4,"ion-icon",25),c(),d(5,"div")(6,"p",26),h(7,"\u7E3D\u92B7\u552E\u54C1\u9805\u6578"),c(),d(8,"p",27),h(9),c()()(),d(10,"div",23)(11,"div",28),x(12,"ion-icon",29),c(),d(13,"div")(14,"p",26),h(15,"\u7E3D\u92B7\u552E\u5546\u54C1\u7E3D\u91CF"),c(),d(16,"p",27),h(17),c()()(),d(18,"div",23)(19,"div",30),x(20,"ion-icon",31),c(),d(21,"div")(22,"p",26),h(23,"\u6700\u4F73\u8CA2\u737B\u5546\u54C1"),c(),d(24,"p",27),h(25),c()()()(),d(26,"div",32),B(27,h4,13,2),c(),d(28,"div")(29,"h3",33),h(30,"\u8A73\u7D30\u5546\u54C1\u6578\u64DA"),c(),d(31,"div",34),B(32,A4,33,2,"table",35)(33,R4,2,0,"div",36),c()()()),n&2){let t,i=C();g(9),S(i.summaryMetrics().uniqueProducts),g(8),S(i.summaryMetrics().totalItemsSold),g(8),S(i.summaryMetrics().bestContributor),g(2),U(i.report()&&i.report().grandTotal.totalRevenue>0?27:-1),g(5),U((t=i.report())?32:33,t)}}function P4(n,e){if(n&1&&(d(0,"tr",72)(1,"td",73),h(2),c(),d(3,"td"),h(4),c(),d(5,"td"),h(6),c(),d(7,"td"),h(8),c(),d(9,"td"),h(10),c(),d(11,"td",74),h(12),c()()),n&2){let t=e.$implicit,i=C(3);g(2),S(t.month),g(2),S(i.formatCurrency(t.dining)),g(2),S(i.formatCurrency(t.drinks)),g(2),S(i.formatCurrency(t.cigars)),g(2),S(i.formatCurrency(t.venue)),g(2),S(i.formatCurrency(t.total))}}function F4(n,e){n&1&&(d(0,"tr")(1,"td",75),h(2,"\u6B64\u6642\u9593\u5340\u9593\u7121\u8CC7\u6599\u3002"),c()())}function k4(n,e){if(n&1&&(d(0,"div",34)(1,"table",62)(2,"thead",63)(3,"tr",64),x(4,"th",65),d(5,"th",66),h(6,"\u9910\u98F2"),c(),d(7,"th",66),h(8,"\u9152\u6C34"),c(),d(9,"th",66),h(10,"\u96EA\u8304"),c(),d(11,"th",66),h(12,"\u6D3B\u52D5\u5834\u5730"),c(),d(13,"th",66),h(14,"\u5C0F\u8A08"),c()()(),d(15,"tbody")(16,"tr",67)(17,"td",68),h(18,"\u9032\u8CA8\u7E3D\u8A08"),c(),d(19,"td"),h(20),c(),d(21,"td"),h(22),c(),d(23,"td"),h(24),c(),d(25,"td"),h(26),c(),d(27,"td",69),h(28),c()(),d(29,"tr",67)(30,"td",68),h(31,"\u92B7\u8CA8\u7E3D\u8A08(\u6263\u6298\u8B93)"),c(),d(32,"td"),h(33),c(),d(34,"td"),h(35),c(),d(36,"td"),h(37),c(),d(38,"td"),h(39),c(),d(40,"td",69),h(41),c()(),d(42,"tr",70)(43,"td",68),h(44,"\u6BDB\u5229"),c(),d(45,"td"),h(46),c(),d(47,"td"),h(48),c(),d(49,"td"),h(50),c(),d(51,"td"),h(52),c(),d(53,"td",69),h(54),c()(),d(55,"tr",71)(56,"td",68),h(57,"\u6BDB\u5229\u7387"),c(),d(58,"td"),h(59),c(),d(60,"td"),h(61),c(),d(62,"td"),h(63),c(),d(64,"td"),h(65),c(),d(66,"td",69),h(67),c()(),P(68,P4,13,6,"tr",72,n4,!1,F4,3,0,"tr"),c()()()),n&2){let t=e,i=C(2);g(20),S(i.formatCurrency(t.summary.dining.totalPurchases)),g(2),S(i.formatCurrency(t.summary.drinks.totalPurchases)),g(2),S(i.formatCurrency(t.summary.cigars.totalPurchases)),g(2),S(i.formatCurrency(t.summary.venue.totalPurchases)),g(2),S(i.formatCurrency(t.summary.total.totalPurchases)),g(5),S(i.formatCurrency(t.summary.dining.totalSales)),g(2),S(i.formatCurrency(t.summary.drinks.totalSales)),g(2),S(i.formatCurrency(t.summary.cigars.totalSales)),g(2),S(i.formatCurrency(t.summary.venue.totalSales)),g(2),S(i.formatCurrency(t.summary.total.totalSales)),g(4),J("text-red-600",t.summary.dining.grossMargin<0),g(),S(i.formatCurrency(t.summary.dining.grossMargin)),g(),J("text-red-600",t.summary.drinks.grossMargin<0),g(),S(i.formatCurrency(t.summary.drinks.grossMargin)),g(),J("text-red-600",t.summary.cigars.grossMargin<0),g(),S(i.formatCurrency(t.summary.cigars.grossMargin)),g(),J("text-red-600",t.summary.venue.grossMargin<0),g(),S(i.formatCurrency(t.summary.venue.grossMargin)),g(),J("text-red-600",t.summary.total.grossMargin<0),g(),S(i.formatCurrency(t.summary.total.grossMargin)),g(4),J("text-red-600",t.summary.dining.grossMarginRate<0),g(),H("",(t.summary.dining.grossMarginRate*100).toFixed(2),"%"),g(),J("text-red-600",t.summary.drinks.grossMarginRate<0),g(),H("",(t.summary.drinks.grossMarginRate*100).toFixed(2),"%"),g(),J("text-red-600",t.summary.cigars.grossMarginRate<0),g(),H("",(t.summary.cigars.grossMarginRate*100).toFixed(2),"%"),g(),J("text-red-600",t.summary.venue.grossMarginRate<0),g(),H("",(t.summary.venue.grossMarginRate*100).toFixed(2),"%"),g(),J("text-red-600",t.summary.total.grossMarginRate<0),g(),H("",(t.summary.total.grossMarginRate*100).toFixed(2),"%"),g(),F(t.monthlySales)}}function O4(n,e){n&1&&(d(0,"div",36),h(1,"\u7121\u6CD5\u8F09\u5165\u5546\u54C1\u6BDB\u5229\u6578\u64DA\u3002"),c())}function L4(n,e){if(n&1&&B(0,k4,71,41,"div",34)(1,O4,2,0,"div",36),n&2){let t,i=C();U((t=i.productGrossMarginReport())?0:1,t)}}var es=class es{constructor(){this.dataService=R(Te);this.injector=R(Tt);this.activeView=w("analysis");this.report=w(null);this.analysisYears=w([2026,2025,2024]);this.analysisMonths=w(Array.from({length:12},(e,t)=>t+1));this.selectedStartYear=w(2026);this.selectedStartMonth=w(1);this.selectedEndYear=w(2026);this.selectedEndMonth=w(4);this.productGrossMarginReport=w(null);this.marginYears=w([2025,2024]);this.marginAllMonths=w(Array.from({length:12},(e,t)=>t+1));this.selectedMarginStartYear=w(2024);this.selectedMarginStartMonth=w(12);this.selectedMarginEndYear=w(2025);this.selectedMarginEndMonth=w(12);this.summaryMetrics=Y(()=>{let e=this.report();if(!e)return{uniqueProducts:0,totalItemsSold:0,bestContributor:"N/A"};let t=e.categoryGroups.flatMap(r=>r.products),i=t.sort((r,o)=>o.totalRevenue-r.totalRevenue)[0];return{uniqueProducts:t.length,totalItemsSold:e.grandTotal.totalQuantity,bestContributor:i?.name||"N/A"}});this.chartData=Y(()=>{let e=this.report(),t=["\u9910\u98F2","\u9152\u6C34","\u96EA\u8304","\u5176\u4ED6"];if(!e)return{main:[],dining:[],drinks:[],cigars:[],other:[]};let i=e.categoryGroups.map(o=>({name:o.category,value:o.subtotal.totalRevenue})),r=o=>{let s=e.categoryGroups.find(a=>a.category===o);return s?s.products.map(a=>({name:a.name,value:a.totalRevenue})):[]};return{main:i,dining:r("\u9910\u98F2"),drinks:r("\u9152\u6C34"),cigars:r("\u96EA\u8304"),other:r("\u6D3B\u52D5\u5834\u5730")}});this.monthlyTrendChartData=Y(()=>{let e=this.report();if(!e)return{labels:[],datasets:[]};let t=e.months.map(s=>this.formatMonth(s)),i=["\u9910\u98F2","\u9152\u6C34","\u96EA\u8304","\u6D3B\u52D5\u5834\u5730"],r={\u9910\u98F2:"#3b82f6",\u9152\u6C34:"#8b5cf6",\u96EA\u8304:"#ef4444",\u6D3B\u52D5\u5834\u5730:"#10b981"},o=i.map(s=>{let a=e.categoryGroups.find(f=>f.category===s),l=e.months.map(f=>a?.subtotal.monthlyMetrics[f]?.revenue||0);return{label:s,data:l,borderColor:r[s],backgroundColor:`${r[s]}1A`,fill:!0,tension:.4}});return{labels:t,datasets:o}});this.chartInstances=[];this.colors={main:["#3b82f6","#8b5cf6","#ef4444","#f59e0b"],sub:["#1d4ed8","#3b82f6","#60a5fa","#93c5fd","#bfdbfe"]};this.applyAnalysisFilter(),this.applyMarginFilter(),di(()=>{this.activeView()==="analysis"&&this.createAllCharts(this.chartData())}),ia(()=>{let e=this.activeView();dt(this.injector,()=>{di(()=>{e==="analysis"?this.updateAllCharts(this.chartData()):this.destroyCharts()})})})}changeView(e){this.activeView.set(e)}applyAnalysisFilter(){let e=`${this.selectedStartYear()}-${String(this.selectedStartMonth()).padStart(2,"0")}`,t=`${this.selectedEndYear()}-${String(this.selectedEndMonth()).padStart(2,"0")}`;if(e>t){alert("\u8D77\u59CB\u5E74\u6708\u4E0D\u80FD\u665A\u65BC\u7D50\u675F\u5E74\u6708\u3002");return}this.report.set(this.dataService.getProductAnalysisReport(e,t))}resetAnalysisFilter(){this.selectedStartYear.set(2026),this.selectedStartMonth.set(1),this.selectedEndYear.set(2026),this.selectedEndMonth.set(4),this.applyAnalysisFilter()}applyMarginFilter(){let e=`${this.selectedMarginStartYear()}/${String(this.selectedMarginStartMonth()).padStart(2,"0")}`,t=`${this.selectedMarginEndYear()}/${String(this.selectedMarginEndMonth()).padStart(2,"0")}`;if(e>t){alert("\u8D77\u59CB\u5E74\u6708\u4E0D\u80FD\u665A\u65BC\u7D50\u675F\u5E74\u6708\u3002");return}this.productGrossMarginReport.set(this.dataService.getProductGrossMarginReport(e,t))}resetMarginFilter(){this.selectedMarginStartYear.set(2024),this.selectedMarginStartMonth.set(12),this.selectedMarginEndYear.set(2025),this.selectedMarginEndMonth.set(12),this.applyMarginFilter()}formatMonth(e){return`${parseInt(e.split("-")[1],10)}\u6708`}formatCurrency(e){return e==null?"NT$0":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}createAllCharts(e){this.destroyCharts(),this.mainCategoryChart=this.createDonutChart(this.mainCategoryChartRef,e.main,"\u4E3B\u8981\u5206\u985E\u71DF\u6536\u4F54\u6BD4",this.colors.main),this.diningChart=this.createDonutChart(this.diningChartRef,e.dining,"\u9910\u98F2\u985E\u54C1\u9805\u4F54\u6BD4",this.colors.sub),this.drinksChart=this.createDonutChart(this.drinksChartRef,e.drinks,"\u9152\u6C34\u985E\u54C1\u9805\u4F54\u6BD4",this.colors.sub),this.monthlyTrendChart=this.createMonthlyTrendChart(this.monthlyTrendChartRef,this.monthlyTrendChartData()),this.chartInstances=[this.mainCategoryChart,this.diningChart,this.drinksChart,this.monthlyTrendChart].filter(t=>t)}updateAllCharts(e){this.destroyCharts(),this.createAllCharts(e)}destroyCharts(){this.chartInstances.forEach(e=>e?.destroy()),this.chartInstances=[]}createTooltipCallback(e){return t=>{let i=t.label||"",r=t.raw||0,o=e>0?(r/e*100).toFixed(2):0,s=new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(r);return`${i}: ${s} (${o}%)`}}createDonutChart(e,t,i,r){if(!e||!e.nativeElement||t.length===0)return null;let o=e.nativeElement.getContext("2d");if(!o)return null;let s=t.reduce((a,l)=>a+l.value,0);return new Chart(o,{type:"doughnut",data:{labels:t.map(a=>a.name),datasets:[{data:t.map(a=>a.value),backgroundColor:r,hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:i,font:{size:16}},legend:{display:!0,position:"bottom",labels:{boxWidth:12,padding:15}},tooltip:{callbacks:{label:this.createTooltipCallback(s)}}}}})}createMonthlyTrendChart(e,t){if(!e||!e.nativeElement||t.datasets.length===0)return null;let i=e.nativeElement.getContext("2d");return i?new Chart(i,{type:"line",data:t,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:r=>this.formatCurrency(r)}}},plugins:{title:{display:!0,text:"\u6BCF\u6708\u54C1\u9805\u71DF\u6536\u8DA8\u52E2",font:{size:16}},legend:{display:!0,position:"bottom"},tooltip:{callbacks:{label:r=>`${r.dataset.label}: ${this.formatCurrency(r.raw)}`}}}}}):null}};es.\u0275fac=function(t){return new(t||es)},es.\u0275cmp=ae({type:es,selectors:[["app-product-analysis"]],viewQuery:function(t,i){if(t&1&&(Zt(K3,5),Zt(Q3,5),Zt(Z3,5),Zt(X3,5)),t&2){let r;Ft(r=kt())&&(i.mainCategoryChartRef=r.first),Ft(r=kt())&&(i.diningChartRef=r.first),Ft(r=kt())&&(i.drinksChartRef=r.first),Ft(r=kt())&&(i.monthlyTrendChartRef=r.first)}},decls:16,vars:8,consts:[["mainCategoryChart",""],["monthlyTrendChart",""],["diningChart",""],["drinksChart",""],[1,"space-y-8"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","flex-col","sm:flex-row","items-center","gap-2","bg-white","p-3","rounded-xl","shadow-md","border","border-gray-200"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-6"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"pt-6"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-600"],[1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","items-center","gap-2","mt-2","sm:mt-0"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","filter-outline"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-white","p-6","rounded-xl","shadow-inner","border","flex","items-center","space-x-4"],[1,"bg-blue-100","p-3","rounded-full"],["name","layers-outline",1,"text-2xl","text-blue-600"],[1,"text-sm","text-gray-500"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"bg-green-100","p-3","rounded-full"],["name","bag-handle-outline",1,"text-2xl","text-green-600"],[1,"bg-indigo-100","p-3","rounded-full"],["name","star-outline",1,"text-2xl","text-indigo-600"],[1,"space-y-6"],[1,"text-lg","font-semibold","text-gray-800","mb-4"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap","border-collapse"],[1,"text-center","py-8","text-gray-500"],[1,"bg-white","py-6","rounded-xl"],[1,"h-80","mx-auto","max-w-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bg-white","p-4","rounded-xl","shadow-inner","border"],[1,"bg-white","p-6","rounded-xl","shadow-inner","border"],[1,"h-80"],[1,"h-64"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],["scope","col","rowspan","2",1,"px-2","py-2","border","border-gray-300"],["scope","col","rowspan","2",1,"px-2","py-2","border","border-gray-300","text-center"],["scope","col",1,"px-2","py-2","border","border-gray-300","text-center","font-semibold"],[1,"font-bold","text-white"],[1,"bg-red-500"],["colspan","2",1,"px-2","py-2","border","border-red-600"],[1,"px-2","py-2","border","border-red-600","text-right"],["scope","col",1,"px-2","py-2","border","border-gray-300","text-center"],[1,"hover:bg-gray-50"],[1,"bg-yellow-100","font-bold"],["colspan","2",1,"px-2","py-2","border","border-gray-300"],[1,"px-2","py-2","border","border-gray-300","text-right"],[1,"px-2","py-2","border","border-gray-200","font-medium"],[1,"px-2","py-2","border","border-gray-200"],[1,"px-2","py-2","border","border-gray-200","text-right"],["colspan","4",1,"px-2","py-2","border","border-gray-300"],["colspan","4",1,"px-2","py-2","border","border-red-600"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],[1,"text-center"],[1,"py-3","px-4","text-left"],[1,"py-3","px-4"],[1,"border-b","text-right"],[1,"py-3","px-4","font-semibold","text-gray-800","text-left"],[1,"font-bold"],[1,"border-b","text-right","font-medium"],[1,"border-b","text-right","font-medium","bg-gray-50"],[1,"border-b","text-right","hover:bg-gray-50"],[1,"py-2","px-4","text-gray-500","text-left"],[1,"font-semibold"],["colspan","6",1,"text-center","py-8","text-gray-500"]],template:function(t,i){t&1&&(d(0,"div",4)(1,"div",5)(2,"h1",6),h(3,"\u5546\u54C1\u5206\u6790"),c(),B(4,a4,26,4,"div",7),B(5,f4,26,4,"div",7),c(),d(6,"div",8)(7,"div",9)(8,"nav",10)(9,"button",11),D("click",function(){return i.changeView("analysis")}),h(10," \u5546\u54C1\u5206\u6790 "),c(),d(11,"button",11),D("click",function(){return i.changeView("margin")}),h(12," \u5546\u54C1\u6BDB\u5229 "),c()()(),d(13,"div",12),B(14,N4,34,5,"div",4),B(15,L4,2,1),c()()()),t&2&&(g(4),U(i.activeView()==="analysis"?4:-1),g(),U(i.activeView()==="margin"?5:-1),g(4),_t(i.activeView()==="analysis"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(2),_t(i.activeView()==="margin"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(3),U(i.activeView()==="analysis"?14:-1),g(),U(i.activeView()==="margin"?15:-1))},dependencies:[ye,ke,Ve,Be,Fe,_e,Ne],encapsulation:2,changeDetection:0});var Hd=es;var V4=(n,e)=>e.id;function B4(n,e){if(n&1&&(d(0,"option",21),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function U4(n,e){if(n&1&&(d(0,"option",21),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function H4(n,e){if(n&1&&(d(0,"option",21),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function $4(n,e){if(n&1){let t=$();d(0,"tr",37),D("click",function(){let r=T(t).$implicit,o=C(2);return I(o.openEditModal(r))}),d(1,"td",38),x(2,"input",39),c(),d(3,"td",40),h(4),c(),d(5,"td",40),h(6),c(),d(7,"td",40),h(8),c(),d(9,"td",41),h(10),c(),d(11,"td",40),h(12),c(),d(13,"td",40),h(14),c(),d(15,"td",40),h(16),c(),d(17,"td",42),h(18),c()()}if(n&2){let t=e.$implicit,i=C(2);J("bg-red-50",!t.approved),g(2),k("checked",t.approved),g(2),S(t.date),g(2),S(t.item),g(2),S(t.category),g(2),S(i.formatCurrency(t.amount)),g(2),S(t.invoiceNumber),g(2),S(t.vendorTaxId),g(2),S(t.vendorName),g(2),S(t.description)}}function G4(n,e){n&1&&(d(0,"tr")(1,"td",43),h(2,"\u7121\u7B26\u5408\u689D\u4EF6\u7684\u6D41\u6C34\u5E33\u8CC7\u6599\u3002"),c()())}function q4(n,e){if(n&1){let t=$();d(0,"div",7)(1,"div",10)(2,"div",11)(3,"label",12),h(4,"\u5F9E:"),c(),d(5,"div",13)(6,"input",14),de("ngModelChange",function(r){T(t);let o=C();return fe(o.startDate,r)||(o.startDate=r),I(r)}),c(),d(7,"div",15),x(8,"ion-icon",16),c()()(),d(9,"div",11)(10,"label",17),h(11,"\u81F3:"),c(),d(12,"div",13)(13,"input",18),de("ngModelChange",function(r){T(t);let o=C();return fe(o.endDate,r)||(o.endDate=r),I(r)}),c(),d(14,"div",15),x(15,"ion-icon",16),c()()(),d(16,"div")(17,"select",19),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedItem,r)||(o.selectedItem=r),I(r)}),d(18,"option",20),h(19,"\u6240\u6709\u9805\u76EE"),c(),P(20,B4,2,2,"option",21,j),c()(),d(22,"div")(23,"select",19),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedCategory,r)||(o.selectedCategory=r),I(r)}),d(24,"option",20),h(25,"\u6240\u6709\u79D1\u76EE"),c(),P(26,U4,2,2,"option",21,j),c()(),d(28,"div",22)(29,"select",19),de("ngModelChange",function(r){T(t);let o=C();return fe(o.selectedVendor,r)||(o.selectedVendor=r),I(r)}),d(30,"option",20),h(31,"\u6240\u6709\u8CE3\u65B9"),c(),P(32,H4,2,2,"option",21,j),c()(),d(34,"div",22)(35,"input",23),de("ngModelChange",function(r){T(t);let o=C();return fe(o.descriptionFilter,r)||(o.descriptionFilter=r),I(r)}),c()(),d(36,"div",24)(37,"button",25),D("click",function(){T(t);let r=C();return I(r.applyFilters())}),x(38,"ion-icon",26),d(39,"span"),h(40,"\u5957\u7528"),c()(),d(41,"button",27),D("click",function(){T(t);let r=C();return I(r.resetFilters())}),x(42,"ion-icon",28),c()()(),d(43,"div",29)(44,"table",30)(45,"thead",31)(46,"tr")(47,"th",32),h(48,"\u7C3D\u6838"),c(),d(49,"th",33),D("click",function(){T(t);let r=C();return I(r.sortData("date"))}),h(50,"\u65E5\u671F "),x(51,"ion-icon",34),c(),d(52,"th",33),D("click",function(){T(t);let r=C();return I(r.sortData("item"))}),h(53,"\u9805\u76EE "),x(54,"ion-icon",34),c(),d(55,"th",33),D("click",function(){T(t);let r=C();return I(r.sortData("category"))}),h(56,"\u79D1\u76EE "),x(57,"ion-icon",34),c(),d(58,"th",35),D("click",function(){T(t);let r=C();return I(r.sortData("amount"))}),h(59,"\u7E3D\u91D1\u984D "),x(60,"ion-icon",34),c(),d(61,"th",33),D("click",function(){T(t);let r=C();return I(r.sortData("invoiceNumber"))}),h(62,"\u767C\u7968\u865F\u78BC "),x(63,"ion-icon",34),c(),d(64,"th",33),D("click",function(){T(t);let r=C();return I(r.sortData("vendorTaxId"))}),h(65,"\u8CE3\u65B9\u7D71\u7DE8 "),x(66,"ion-icon",34),c(),d(67,"th",33),D("click",function(){T(t);let r=C();return I(r.sortData("vendorName"))}),h(68,"\u8CE3\u65B9\u540D\u7A31 "),x(69,"ion-icon",34),c(),d(70,"th",32),h(71,"\u8AAA\u660E"),c()()(),d(72,"tbody"),P(73,$4,19,11,"tr",36,V4,!1,G4,3,0,"tr"),c()()()()}if(n&2){let t=C();g(6),ce("ngModel",t.startDate),g(7),ce("ngModel",t.endDate),g(4),ce("ngModel",t.selectedItem),g(3),F(t.filterOptions().items),g(3),ce("ngModel",t.selectedCategory),g(3),F(t.filterOptions().categories),g(3),ce("ngModel",t.selectedVendor),g(3),F(t.filterOptions().vendorNames),g(3),ce("ngModel",t.descriptionFilter),g(38),F(t.filteredTransactions())}}function W4(n,e){if(n&1&&(d(0,"option",21),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function z4(n,e){if(n&1&&(d(0,"option",21),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function j4(n,e){if(n&1){let t=$();d(0,"form",44),D("ngSubmit",function(){T(t);let r=C();return I(r.handleFormSubmit())}),d(1,"div",45)(2,"div")(3,"label",46),h(4,"\u65E5\u671F*"),c(),d(5,"div",47),x(6,"input",48),d(7,"div",15),x(8,"ion-icon",16),c()()(),d(9,"div")(10,"label",49),h(11,"\u9805\u76EE*"),c(),d(12,"select",50)(13,"option",51),h(14,"\u8ACB\u9078\u64C7\u9805\u76EE"),c(),P(15,W4,2,2,"option",21,j),c()(),d(17,"div")(18,"label",52),h(19,"\u79D1\u76EE*"),c(),d(20,"select",53)(21,"option",51),h(22,"\u8ACB\u9078\u64C7\u79D1\u76EE"),c(),P(23,z4,2,2,"option",21,j),c()(),d(25,"div")(26,"label",54),h(27,"\u7E3D\u91D1\u984D*"),c(),x(28,"input",55),c(),d(29,"div")(30,"label",56),h(31,"\u767C\u7968\u865F\u78BC"),c(),x(32,"input",57),c(),d(33,"div")(34,"label",58),h(35,"\u8CE3\u65B9\u7D71\u7DE8"),c(),x(36,"input",59),c(),d(37,"div",60)(38,"label",61),h(39,"\u8CE3\u65B9\u540D\u7A31"),c(),x(40,"input",62),c(),d(41,"div",60)(42,"label",63),h(43,"\u8AAA\u660E"),c(),x(44,"textarea",64),c()(),d(45,"div",65)(46,"button",66),D("click",function(){T(t);let r=C();return I(r.resetForm())}),h(47,"\u53D6\u6D88"),c(),d(48,"button",67),h(49,"\u9001\u51FA"),c()()()}if(n&2){let t=C();k("formGroup",t.ledgerForm),g(6),J("border-red-500",t.isInvalid("date")),g(6),J("border-red-500",t.isInvalid("item")),g(3),F(t.filterOptions().items),g(5),J("border-red-500",t.isInvalid("category")),g(3),F(t.availableCategories()),g(5),J("border-red-500",t.isInvalid("amount"))}}function Y4(n,e){if(n&1&&(d(0,"option",21),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function J4(n,e){if(n&1&&(d(0,"option",21),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function K4(n,e){if(n&1){let t=$();d(0,"div",9)(1,"div",68)(2,"div",69)(3,"h3",70),h(4,"\u4FEE\u6539\u6D41\u6C34\u5E33"),c(),d(5,"button",71),D("click",function(){T(t);let r=C();return I(r.closeModal())}),x(6,"ion-icon",72),c()(),d(7,"div",73)(8,"form",74),D("ngSubmit",function(){T(t);let r=C();return I(r.handleFormSubmit())}),d(9,"div",45)(10,"div")(11,"label",75),h(12,"\u65E5\u671F*"),c(),d(13,"div",47),x(14,"input",76),d(15,"div",15),x(16,"ion-icon",16),c()()(),d(17,"div")(18,"label",77),h(19,"\u9805\u76EE*"),c(),d(20,"select",78),P(21,Y4,2,2,"option",21,j),c()(),d(23,"div")(24,"label",79),h(25,"\u79D1\u76EE*"),c(),d(26,"select",80),P(27,J4,2,2,"option",21,j),c()(),d(29,"div")(30,"label",81),h(31,"\u7E3D\u91D1\u984D*"),c(),x(32,"input",82),c(),d(33,"div")(34,"label",83),h(35,"\u767C\u7968\u865F\u78BC"),c(),x(36,"input",84),c(),d(37,"div")(38,"label",85),h(39,"\u8CE3\u65B9\u7D71\u7DE8"),c(),x(40,"input",86),c(),d(41,"div",60)(42,"label",87),h(43,"\u8CE3\u65B9\u540D\u7A31"),c(),x(44,"input",88),c(),d(45,"div",60)(46,"label",89),h(47,"\u8AAA\u660E"),c(),x(48,"textarea",90),c(),d(49,"div",60)(50,"label",91),x(51,"input",92),d(52,"span",93),h(53,"\u5DF2\u7C3D\u6838"),c()()()(),d(54,"div",94)(55,"button",66),D("click",function(){T(t);let r=C();return I(r.closeModal())}),h(56,"\u53D6\u6D88"),c(),d(57,"button",67),h(58,"\u4FEE\u6539"),c()()()()()()}if(n&2){let t=C();g(8),k("formGroup",t.ledgerForm),g(6),J("border-red-500",t.isInvalid("date")),g(6),J("border-red-500",t.isInvalid("item")),g(),F(t.filterOptions().items),g(5),J("border-red-500",t.isInvalid("category")),g(),F(t.availableCategories()),g(5),J("border-red-500",t.isInvalid("amount"))}}var ts=class ts{constructor(){this.dataService=R(Te);this.fb=R(Ge);this.activeView=w("details");this.allTransactions=w([]);this.filterOptions=w({items:[],categories:[],vendorNames:[]});this.editingTransaction=w(null);this.isModalOpen=w(!1);this.today=new Date("2025-12-31");this.firstDayOfMonth=new Date(this.today.getFullYear(),this.today.getMonth(),1);this.startDate=w(this.formatDate(this.firstDayOfMonth));this.endDate=w(this.formatDate(this.today));this.selectedItem=w("");this.selectedCategory=w("");this.selectedVendor=w("");this.descriptionFilter=w("");this.sortColumn=w("date");this.sortDirection=w("desc");this.submitted=w(!1);this.ledgerForm=this.fb.group({id:[""],date:["",V.required],item:["",V.required],category:["",V.required],amount:[null,V.required],invoiceNumber:[""],vendorTaxId:[""],vendorName:[""],description:[""],approved:[!0]});this.availableCategories=Y(()=>{let e=this.ledgerForm.get("item")?.value;return e?this.dataService.itemCategoryMap[e]||[]:[]});this.filteredTransactions=Y(()=>{let e=[...this.allTransactions()],t=this.sortColumn(),i=this.sortDirection();return t&&e.sort((r,o)=>{let s=r[t],a=o[t];return s==null&&a!=null?1:s!=null&&a==null?-1:s==null&&a==null?0:s<a?i==="asc"?-1:1:s>a?i==="asc"?1:-1:0}),e});this.loadInitialData(),this.ledgerForm.get("item")?.valueChanges.subscribe(()=>{this.ledgerForm.get("category")?.setValue("")})}loadInitialData(){this.applyFilters(),this.filterOptions.set(this.dataService.getLedgerFilterOptions())}applyFilters(){let e={startDate:this.startDate(),endDate:this.endDate(),item:this.selectedItem(),category:this.selectedCategory(),vendorName:this.selectedVendor(),description:this.descriptionFilter()};this.allTransactions.set(this.dataService.getTransactions(e))}resetFilters(){this.startDate.set(this.formatDate(this.firstDayOfMonth)),this.endDate.set(this.formatDate(this.today)),this.selectedItem.set(""),this.selectedCategory.set(""),this.selectedVendor.set(""),this.descriptionFilter.set(""),this.applyFilters()}changeView(e){this.activeView.set(e),e==="add"&&this.resetForm()}sortData(e){this.sortColumn()===e?this.sortDirection.update(t=>t==="asc"?"desc":"asc"):(this.sortColumn.set(e),this.sortDirection.set("asc"))}openEditModal(e){this.editingTransaction.set(e),this.ledgerForm.patchValue(q(N({},e),{amount:e.amount})),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.editingTransaction.set(null),this.resetForm()}handleFormSubmit(){if(this.submitted.set(!0),this.ledgerForm.invalid)return;let e=this.ledgerForm.value,t={date:e.date,item:e.item,category:e.category,amount:Number(e.amount),invoiceNumber:e.invoiceNumber,vendorTaxId:e.vendorTaxId,vendorName:e.vendorName,description:e.description,approved:e.approved};if(this.editingTransaction()){let i=q(N({},t),{id:this.editingTransaction().id});this.dataService.updateTransaction(i),this.closeModal()}else this.dataService.addTransaction(t),this.resetForm(),this.changeView("details");this.applyFilters()}resetForm(){this.ledgerForm.reset({approved:!0}),this.submitted.set(!1)}formatCurrency(e){if(e==null)return"";let t=Math.abs(e);return isNaN(t)?"":t.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}formatDate(e){return e.toISOString().split("T")[0]}isInvalid(e){let t=this.ledgerForm.get(e);return!!t&&t.invalid&&(t.touched||this.submitted())}};ts.\u0275fac=function(t){return new(t||ts)},ts.\u0275cmp=ae({type:ts,selectors:[["app-ledger"]],decls:14,vars:7,consts:[[1,"space-y-6"],[1,"text-3xl","font-bold","text-gray-900"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-6"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"pt-6"],[1,"space-y-4"],["novalidate","",1,"space-y-6","max-w-4xl","mx-auto",3,"formGroup"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","p-4","bg-gray-50","rounded-lg"],[1,"flex","items-center","gap-2"],["for","startDate",1,"text-sm","font-medium","text-gray-600","shrink-0"],[1,"relative","w-full"],["type","date","id","startDate",1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white","pr-10",3,"ngModelChange","ngModel"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","pointer-events-none"],["name","calendar-outline",1,"text-gray-400"],["for","endDate",1,"text-sm","font-medium","text-gray-600","shrink-0"],["type","date","id","endDate",1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white","pr-10",3,"ngModelChange","ngModel"],[1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"lg:col-span-2"],["type","text","placeholder","\u641C\u5C0B\u8AAA\u660E\u95DC\u9375\u5B57...",1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-2","lg:col-span-4","justify-end"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","filter-outline"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],[1,"px-4","py-3"],[1,"px-4","py-3","cursor-pointer",3,"click"],["name","swap-vertical-outline"],[1,"px-4","py-3","cursor-pointer","text-right",3,"click"],[1,"border-b","hover:bg-gray-50","cursor-pointer",3,"bg-red-50"],[1,"border-b","hover:bg-gray-50","cursor-pointer",3,"click"],[1,"px-4","py-2","text-center"],["type","checkbox","disabled","",1,"rounded","h-4","w-4","text-indigo-500","border-gray-300","cursor-not-allowed",3,"checked"],[1,"px-4","py-2"],[1,"px-4","py-2","text-right"],[1,"px-4","py-2","truncate","max-w-xs"],["colspan","9",1,"text-center","py-8","text-gray-500"],["novalidate","",1,"space-y-6","max-w-4xl","mx-auto",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],[1,"relative","mt-1"],["type","date","id","date","formControlName","date",1,"block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2","pr-10"],["for","item",1,"block","text-sm","font-medium","text-gray-700"],["id","item","formControlName","item",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["value","","disabled",""],["for","category",1,"block","text-sm","font-medium","text-gray-700"],["id","category","formControlName","category",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","amount",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","amount","formControlName","amount","placeholder","\u6B63\u6578\u70BA\u6536\u5165\uFF0C\u8CA0\u6578\u70BA\u652F\u51FA",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2","text-right"],["for","invoiceNumber",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","invoiceNumber","formControlName","invoiceNumber",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","vendorTaxId",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","vendorTaxId","formControlName","vendorTaxId",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],[1,"md:col-span-2"],["for","vendorName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","vendorName","formControlName","vendorName",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","formControlName","description","rows","3",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],[1,"flex","justify-end","gap-4"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","close-outline",1,"text-2xl"],[1,"p-6","overflow-y-auto"],["novalidate","",1,"space-y-6",3,"ngSubmit","formGroup"],["for","modal-date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","modal-date","formControlName","date",1,"block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2","pr-10"],["for","modal-item",1,"block","text-sm","font-medium","text-gray-700"],["id","modal-item","formControlName","item",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","modal-category",1,"block","text-sm","font-medium","text-gray-700"],["id","modal-category","formControlName","category",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","modal-amount",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","modal-amount","formControlName","amount",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2","text-right"],["for","modal-invoiceNumber",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","modal-invoiceNumber","formControlName","invoiceNumber",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","modal-vendorTaxId",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","modal-vendorTaxId","formControlName","vendorTaxId",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","modal-vendorName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","modal-vendorName","formControlName","vendorName",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","modal-description",1,"block","text-sm","font-medium","text-gray-700"],["id","modal-description","formControlName","description","rows","3",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],[1,"flex","items-center","space-x-2"],["type","checkbox","formControlName","approved",1,"rounded","h-4","w-4","text-indigo-600","focus:ring-indigo-500","border-gray-300"],[1,"text-sm","text-gray-700"],[1,"flex","justify-end","gap-4","pt-4","border-t","mt-6"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"h1",1),h(2,"\u6D41\u6C34\u5E33"),c(),d(3,"div",2)(4,"div",3)(5,"nav",4)(6,"button",5),D("click",function(){return i.changeView("details")}),h(7," \u6D41\u6C34\u5E33\u7D30\u9805 "),c(),d(8,"button",5),D("click",function(){return i.changeView("add")}),h(9," \u65B0\u589E\u5E33\u52D9 "),c()()(),d(10,"div",6),B(11,q4,76,7,"div",7),B(12,j4,50,9,"form",8),c()()(),B(13,K4,59,9,"div",9)),t&2&&(g(6),_t(i.activeView()==="details"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(2),_t(i.activeView()==="add"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(3),U(i.activeView()==="details"?11:-1),g(),U(i.activeView()==="add"?12:-1),g(),U(i.isModalOpen()?13:-1))},dependencies:[ye,ke,Xe,Ve,Be,we,on,qa,Fe,_e,$e,Ne,qe,Le,He],encapsulation:2,changeDetection:0});var $d=ts;var Nr=class Nr{constructor(){this.holidays2024=[{date:"2024-01-01",name:"\u5143\u65E6"},{date:"2024-02-08",name:"\u8FB2\u66C6\u6625\u7BC0"},{date:"2024-02-09",name:"\u8FB2\u66C6\u6625\u7BC0"},{date:"2024-02-10",name:"\u8FB2\u66C6\u6625\u7BC0"},{date:"2024-02-11",name:"\u8FB2\u66C6\u6625\u7BC0"},{date:"2024-02-12",name:"\u8FB2\u66C6\u6625\u7BC0"},{date:"2024-02-13",name:"\u8FB2\u66C6\u6625\u7BC0"},{date:"2024-02-14",name:"\u8FB2\u66C6\u6625\u7BC0"},{date:"2024-02-28",name:"\u548C\u5E73\u7D00\u5FF5\u65E5"},{date:"2024-04-04",name:"\u5152\u7AE5\u7BC0"},{date:"2024-04-05",name:"\u6E05\u660E\u7BC0"},{date:"2024-06-10",name:"\u7AEF\u5348\u7BC0"},{date:"2024-09-17",name:"\u4E2D\u79CB\u7BC0"},{date:"2024-10-10",name:"\u570B\u6176\u65E5"}]}getHolidays(e){return e===2024?this.holidays2024:[]}};Nr.\u0275fac=function(t){return new(t||Nr)},Nr.\u0275prov=K({token:Nr,factory:Nr.\u0275fac,providedIn:"root"});var Gd=Nr;var Q4=()=>({month:"long"}),Z4=()=>["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],X4=(n,e)=>e.date,eO=(n,e)=>e.id;function tO(n,e){if(n&1&&(Kt(0,"div",7),h(1),Qt()),n&2){let t=e.$implicit;g(),S(t)}}function nO(n,e){if(n&1&&(Kt(0,"div",12),h(1),Qt()),n&2){let t=C().$implicit;g(),H(" ",t.holiday.name," ")}}function iO(n,e){if(n&1){let t=$();Kt(0,"div",14),mo("click",function(){let r=T(t).$implicit,o=C(2);return I(o.editEvent(r))}),h(1),Qt()}if(n&2){let t=e.$implicit;J("opacity-60",t.status==="cancelled")("line-through",t.status==="cancelled"),g(),H(" ",t.name," ")}}function rO(n,e){if(n&1&&(Kt(0,"div",9)(1,"time",10),h(2),Qt(),Kt(3,"div",11),B(4,nO,2,1,"div",12),P(5,iO,2,5,"div",13,eO),Qt()()),n&2){let t=e.$implicit;J("bg-gray-50",!t.isCurrentMonth),g(),J("text-gray-400",!t.isCurrentMonth)("bg-indigo-600",t.isToday)("text-white",t.isToday)("rounded-full",t.isToday)("w-6",t.isToday)("h-6",t.isToday)("flex",t.isToday)("items-center",t.isToday)("justify-center",t.isToday),ju("dateTime",t.date.toISOString()),g(),H(" ",t.date.getDate()," "),g(2),U(t.holiday?4:-1),g(),F(t.events)}}var ns=class ns{constructor(){this.holidayService=R(Gd);this.router=R(Ze);this.events=Xu.required();this.currentDate=w(new Date("2024-10-01"));this.holidays=w([]);this.calendarGrid=Y(()=>{let e=this.events(),t=this.holidays(),i=this.currentDate(),r=i.getFullYear(),o=i.getMonth(),s=new Date(r,o,1),a=new Date(r,o+1,0),l=s.getDay(),f=new Date(s);f.setDate(s.getDate()-l);let m=[],y=new Date;y.setHours(0,0,0,0);for(let v=0;v<42;v++){let _=new Date(f);_.setDate(f.getDate()+v);let E=this.formatDate(_);m.push({date:_,isCurrentMonth:_.getMonth()===o,isToday:_.getTime()===y.getTime(),events:e.filter(b=>b.date===E),holiday:t.find(b=>b.date===E)})}return m});this.loadHolidays()}formatDate(e){let t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return`${t}-${i}-${r}`}loadHolidays(){let e=this.currentDate().getFullYear();this.holidays.set(this.holidayService.getHolidays(e))}previousMonth(){this.currentDate.update(e=>{let t=new Date(e);return t.setMonth(e.getMonth()-1),t}),this.loadHolidays()}nextMonth(){this.currentDate.update(e=>{let t=new Date(e);return t.setMonth(e.getMonth()+1),t}),this.loadHolidays()}editEvent(e){this.router.navigate(["/events/edit",e.id])}};ns.\u0275fac=function(t){return new(t||ns)},ns.\u0275cmp=ae({type:ns,selectors:[["app-calendar-view"]],inputs:{events:[1,"events"]},decls:13,vars:4,consts:[[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"p-2","rounded-full","hover:bg-gray-100","transition-colors",3,"click"],["name","chevron-back-outline",1,"text-xl","text-gray-600"],[1,"text-xl","font-semibold","text-gray-800"],["name","chevron-forward-outline",1,"text-xl","text-gray-600"],[1,"grid","grid-cols-7","gap-px","bg-gray-200","border","border-gray-200","rounded-lg","overflow-hidden"],[1,"py-2","text-center","text-sm","font-medium","text-gray-600","bg-gray-50"],[1,"relative","min-h-[120px]","bg-white","p-2",3,"bg-gray-50"],[1,"relative","min-h-[120px]","bg-white","p-2"],[1,"text-sm","font-medium",3,"dateTime"],[1,"mt-2","space-y-1","overflow-hidden"],[1,"text-xs","text-red-700","bg-red-100","rounded","px-1","py-0.5","truncate","font-medium"],[1,"text-xs","text-indigo-800","bg-indigo-100","rounded","px-1","py-0.5","cursor-pointer","hover:bg-indigo-200","truncate",3,"opacity-60","line-through"],[1,"text-xs","text-indigo-800","bg-indigo-100","rounded","px-1","py-0.5","cursor-pointer","hover:bg-indigo-200","truncate",3,"click"]],template:function(t,i){t&1&&(Kt(0,"div",0)(1,"div",1)(2,"button",2),mo("click",function(){return i.previousMonth()}),ea(3,"ion-icon",3),Qt(),Kt(4,"h2",4),h(5),Qt(),Kt(6,"button",2),mo("click",function(){return i.nextMonth()}),ea(7,"ion-icon",5),Qt()(),Kt(8,"div",6),P(9,tO,2,1,"div",7,j),P(11,rO,7,23,"div",8,X4),Qt()()),t&2&&(g(5),Ot(" ",i.currentDate().getFullYear(),"\u5E74 ",i.currentDate().toLocaleString("zh-TW",qt(2,Q4))," "),g(4),F(qt(3,Z4)),g(2),F(i.calendarGrid()))},dependencies:[ye],encapsulation:2,changeDetection:0});var qd=ns;var oO=(n,e)=>e.value,sO=(n,e)=>e.id;function aO(n,e){if(n&1&&(d(0,"option",15),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function lO(n,e){if(n&1&&(d(0,"option",15),h(1),c()),n&2){let t=e.$implicit;k("value",t.value),g(),S(t.label)}}function uO(n,e){if(n&1){let t=$();d(0,"tr",35),D("click",function(){let r=T(t).$implicit,o=C(2);return I(o.editEvent(r))}),d(1,"td",36),h(2),c(),d(3,"td",36),h(4),c(),d(5,"td",36),h(6),c(),d(7,"td",36),h(8),c(),d(9,"td",37),h(10),c(),d(11,"td",36),h(12),c(),d(13,"td",36),h(14),c(),d(15,"td",38),h(16),c(),d(17,"td",38),h(18),c(),d(19,"td",39),h(20),c(),d(21,"td",40),h(22),c()()}if(n&2){let t=e.$implicit,i=e.$index,r=C(2);J("text-gray-400",t.status==="cancelled")("line-through",t.status==="cancelled"),g(2),S((r.currentPage()-1)*r.pageSize+i+1),g(2),S(t.type),g(2),S(r.formatDateForDisplay(t.date)),g(2),S(t.time),g(2),S(t.name),g(2),S(t.organizer),g(2),S(t.attendees),g(2),S(r.formatCurrency(t.estimatedRevenue)),g(2),S(r.formatCurrency(t.deposit)),g(2),S(r.formatCurrency(t.actualRevenue)),g(2),S(t.notes)}}function cO(n,e){n&1&&(d(0,"tr")(1,"td",41),h(2,"\u627E\u4E0D\u5230\u7B26\u5408\u689D\u4EF6\u7684\u6D3B\u52D5\u3002"),c()())}function dO(n,e){if(n&1){let t=$();d(0,"div",34)(1,"span",42),h(2),c(),d(3,"div",12)(4,"button",43),D("click",function(){T(t);let r=C(2);return I(r.prevPage())}),x(5,"ion-icon",44),c(),d(6,"span",45),h(7),c(),d(8,"button",43),D("click",function(){T(t);let r=C(2);return I(r.nextPage())}),x(9,"ion-icon",46),c()()()}if(n&2){let t=C(2);g(2),hn(" \u986F\u793A\u7B2C ",(t.currentPage()-1)*t.pageSize+1," \u81F3 ",t.Math.min(t.currentPage()*t.pageSize,t.filteredEvents().length)," \u7B46\uFF0C\u5171 ",t.filteredEvents().length," \u7B46 "),g(2),k("disabled",t.currentPage()===1),g(3),Ot("\u7B2C ",t.currentPage()," \u9801 / \u5171 ",t.totalPages()," \u9801"),g(),k("disabled",t.currentPage()===t.totalPages())}}function fO(n,e){if(n&1){let t=$();d(0,"div",26)(1,"table",27)(2,"thead",28)(3,"tr")(4,"th",29),h(5,"\u7DE8\u865F"),c(),d(6,"th",30),D("click",function(){T(t);let r=C();return I(r.sortData("type"))}),h(7,"\u985E\u578B "),x(8,"ion-icon",31),c(),d(9,"th",30),D("click",function(){T(t);let r=C();return I(r.sortData("date"))}),h(10,"\u65E5\u671F "),x(11,"ion-icon",31),c(),d(12,"th",30),D("click",function(){T(t);let r=C();return I(r.sortData("time"))}),h(13,"\u6642\u9593 "),x(14,"ion-icon",31),c(),d(15,"th",30),D("click",function(){T(t);let r=C();return I(r.sortData("name"))}),h(16,"\u540D\u7A31 "),x(17,"ion-icon",31),c(),d(18,"th",30),D("click",function(){T(t);let r=C();return I(r.sortData("organizer"))}),h(19,"\u4ECB\u7D39\u4EBA "),x(20,"ion-icon",31),c(),d(21,"th",30),D("click",function(){T(t);let r=C();return I(r.sortData("attendees"))}),h(22,"\u4EBA\u6578 "),x(23,"ion-icon",31),c(),d(24,"th",32),D("click",function(){T(t);let r=C();return I(r.sortData("estimatedRevenue"))}),h(25,"\u9810\u8A08\u6536\u5165 "),x(26,"ion-icon",31),c(),d(27,"th",32),D("click",function(){T(t);let r=C();return I(r.sortData("deposit"))}),h(28,"\u8A02\u91D1 "),x(29,"ion-icon",31),c(),d(30,"th",32),D("click",function(){T(t);let r=C();return I(r.sortData("actualRevenue"))}),h(31,"\u5BE6\u969B\u6536\u5165 "),x(32,"ion-icon",31),c(),d(33,"th",30),D("click",function(){T(t);let r=C();return I(r.sortData("notes"))}),h(34,"\u5099\u8A3B "),x(35,"ion-icon",31),c()()(),d(36,"tbody"),P(37,uO,23,15,"tr",33,sO,!1,cO,3,0,"tr"),c()()(),B(40,dO,10,7,"div",34)}if(n&2){let t=C();g(37),F(t.paginatedEvents()),g(3),U(t.totalPages()>1?40:-1)}}function pO(n,e){if(n&1&&x(0,"app-calendar-view",25),n&2){let t=C();k("events",t.filteredEvents())}}var is=class is{constructor(){this.dataService=R(Te);this.router=R(Ze);this.allEvents=w([]);this.searchTerm=w("");this.activeView=w("list");this.availableYears=w([]);this.availableMonths=w([]);this.selectedYear=w(2024);this.selectedMonth=w(10);this.appliedFilters=w({year:2024,month:10});this.currentPage=w(1);this.pageSize=10;this.Math=Math;this.sortColumn=w("date");this.sortDirection=w("asc");this.filteredEvents=Y(()=>{let e=this.searchTerm().toLowerCase(),{year:t,month:i}=this.appliedFilters(),r=this.allEvents();if(t){let l=t.toString();if(i!==0){let f=String(i).padStart(2,"0"),m=`${l}-${f}`;r=r.filter(y=>y.date.startsWith(m))}else r=r.filter(f=>f.date.startsWith(l))}e&&(r=r.filter(l=>l.name.toLowerCase().includes(e)||l.date.includes(e)));let o=this.sortColumn(),s=this.sortDirection(),a=[...r];return a.sort((l,f)=>{let m=l[o],y=f[o];return m==null&&y!=null?1:m!=null&&y==null?-1:m==null&&y==null?0:m<y?s==="asc"?-1:1:m>y?s==="asc"?1:-1:0}),a});this.paginatedEvents=Y(()=>{let e=this.filteredEvents(),t=(this.currentPage()-1)*this.pageSize;return e.slice(t,t+this.pageSize)});this.totalPages=Y(()=>Math.ceil(this.filteredEvents().length/this.pageSize));this.eventsSummary=Y(()=>{let t=this.filteredEvents().filter(s=>s.status==="active"),i=t.reduce((s,a)=>s+a.estimatedRevenue,0),r=t.reduce((s,a)=>s+a.actualRevenue,0),o=r/2e5*100;return{estimatedRevenue:i,actualRevenue:r,targetRevenue:2e5,achievementRate:o}});this.loadEvents(),this.setupFilters()}loadEvents(){this.allEvents.set(this.dataService.getEvents())}setupFilters(){let e=[...new Set(this.allEvents().map(i=>new Date(i.date).getFullYear()))].sort((i,r)=>r-i);this.availableYears.set(e),this.availableMonths.set([{value:0,label:"\u5168\u5E74"},...Array.from({length:12},(i,r)=>({value:r+1,label:`${r+1}\u6708`}))]);let t=e.includes(2024)?2024:e[0]||new Date().getFullYear();this.selectedYear.set(t),this.selectedMonth.set(10),this.appliedFilters.set({year:t,month:10})}applyFilter(){this.appliedFilters.set({year:this.selectedYear(),month:this.selectedMonth()}),this.currentPage.set(1)}resetFilter(){let e=this.availableYears().includes(2024)?2024:this.availableYears()[0]||new Date().getFullYear();this.selectedYear.set(e),this.selectedMonth.set(10),this.applyFilter()}onSearchChange(e){this.searchTerm.set(e),this.currentPage.set(1)}sortData(e){this.sortColumn()===e?this.sortDirection.update(t=>t==="asc"?"desc":"asc"):(this.sortColumn.set(e),this.sortDirection.set("asc"))}goToPage(e){e>=1&&e<=this.totalPages()&&this.currentPage.set(e)}nextPage(){this.goToPage(this.currentPage()+1)}prevPage(){this.goToPage(this.currentPage()-1)}editEvent(e){this.router.navigate(["/events/edit",e.id])}formatDateForDisplay(e){let t=new Date(e),i=t.getMonth()+1,r=t.getDate(),o=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"][t.getDay()];return`${i}/${r} (${o})`}formatCurrency(e){return e==null?"":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}setView(e){this.activeView.set(e)}};is.\u0275fac=function(t){return new(t||is)},is.\u0275cmp=ae({type:is,selectors:[["app-events"]],decls:55,vars:32,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],["routerLink","/events/new",1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm"],["name","add-outline"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"text-sm","text-gray-500"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"text-2xl","font-semibold"],[1,"flex","flex-wrap","justify-between","items-center","gap-4","mb-4","border-b","pb-4"],[1,"flex","flex-wrap","items-center","gap-4"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-600","shrink-0"],[1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-50","pr-8",3,"ngModelChange","ngModel"],[3,"value"],[1,"bg-indigo-600","text-white","px-3","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-1","text-sm",3,"click"],["name","filter-outline"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],["type","text","placeholder","\u4F9D\u6D3B\u52D5\u540D\u7A31\u6216\u65E5\u671F\u641C\u5C0B...",1,"w-full","sm:w-auto","flex-grow","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","border","border-gray-200","rounded-lg","p-1","space-x-1","bg-gray-50","shrink-0"],[1,"px-3","py-1","text-sm","font-medium","rounded-md","transition-colors","flex","items-center","gap-2",3,"click"],["name","list-outline"],["name","calendar-outline"],[3,"events"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],[1,"px-4","py-3"],[1,"px-4","py-3","cursor-pointer",3,"click"],["name","swap-vertical-outline"],[1,"px-4","py-3","cursor-pointer","text-right",3,"click"],[1,"border-b","hover:bg-gray-50","cursor-pointer",3,"text-gray-400","line-through"],[1,"flex","justify-between","items-center","pt-4","border-t","mt-4"],[1,"border-b","hover:bg-gray-50","cursor-pointer",3,"click"],[1,"px-4","py-2"],[1,"px-4","py-2","font-medium"],[1,"px-4","py-2","text-right"],[1,"px-4","py-2","text-right","font-semibold"],[1,"px-4","py-2","truncate","max-w-xs"],["colspan","11",1,"text-center","py-8","text-gray-500"],[1,"text-sm","text-gray-600"],[1,"px-3","py-1","border","rounded-md","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["name","chevron-back-outline"],[1,"text-sm"],["name","chevron-forward-outline"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u6D3B\u52D5\u7BA1\u7406"),c(),d(4,"a",3),x(5,"ion-icon",4),d(6,"span"),h(7,"\u65B0\u589E\u6D3B\u52D5"),c()()(),d(8,"div",5)(9,"div",6)(10,"p",7),h(11,"\u9810\u8A08\u7E3D\u6536\u5165"),c(),d(12,"p",8),h(13),c()(),d(14,"div",6)(15,"p",7),h(16,"\u5BE6\u969B\u7E3D\u6536\u5165"),c(),d(17,"p",8),h(18),c()(),d(19,"div",6)(20,"p",7),h(21,"\u76EE\u6A19\u6536\u5165"),c(),d(22,"p",8),h(23),c()(),d(24,"div",6)(25,"p",7),h(26,"\u76EE\u6A19\u9054\u6210\u7387"),c(),d(27,"p",9),h(28),c()()(),d(29,"div",6)(30,"div",10)(31,"div",11)(32,"div",12)(33,"label",13),h(34,"\u6642\u9593:"),c(),d(35,"select",14),de("ngModelChange",function(o){return fe(i.selectedYear,o)||(i.selectedYear=o),o}),P(36,aO,2,2,"option",15,j),c(),d(38,"select",14),de("ngModelChange",function(o){return fe(i.selectedMonth,o)||(i.selectedMonth=o),o}),P(39,lO,2,2,"option",15,oO),c(),d(41,"button",16),D("click",function(){return i.applyFilter()}),x(42,"ion-icon",17),c(),d(43,"button",18),D("click",function(){return i.resetFilter()}),x(44,"ion-icon",19),c()(),d(45,"input",20),D("ngModelChange",function(o){return i.onSearchChange(o)}),c()(),d(46,"div",21)(47,"button",22),D("click",function(){return i.setView("list")}),x(48,"ion-icon",23),h(49," \u5217\u8868 "),c(),d(50,"button",22),D("click",function(){return i.setView("calendar")}),x(51,"ion-icon",24),h(52," \u65E5\u66C6 "),c()()(),B(53,fO,41,2)(54,pO,1,1,"app-calendar-view",25),c()()),t&2&&(g(13),S(i.formatCurrency(i.eventsSummary().estimatedRevenue)),g(5),S(i.formatCurrency(i.eventsSummary().actualRevenue)),g(5),S(i.formatCurrency(i.eventsSummary().targetRevenue)),g(4),J("text-green-600",i.eventsSummary().achievementRate>=100)("text-red-600",i.eventsSummary().achievementRate<100),g(),H(" ",i.eventsSummary().achievementRate.toFixed(1),"% "),g(7),ce("ngModel",i.selectedYear),g(),F(i.availableYears()),g(2),ce("ngModel",i.selectedMonth),g(),F(i.availableMonths()),g(6),k("ngModel",i.searchTerm()),g(2),J("bg-white",i.activeView()==="list")("shadow-sm",i.activeView()==="list")("text-indigo-600",i.activeView()==="list")("text-gray-600",i.activeView()!=="list")("hover:bg-gray-200",i.activeView()!=="list"),g(3),J("bg-white",i.activeView()==="calendar")("shadow-sm",i.activeView()==="calendar")("text-indigo-600",i.activeView()==="calendar")("text-gray-600",i.activeView()!=="calendar")("hover:bg-gray-200",i.activeView()!=="calendar"),g(3),U(i.activeView()==="list"?53:54))},dependencies:[ye,ke,Ve,Be,we,Fe,_e,Ne,Bi,qd],encapsulation:2,changeDetection:0});var Wd=is;function mO(n,e){if(n&1){let t=$();d(0,"button",35),D("click",function(){T(t);let r=C();return I(r.onDelete())}),h(1," \u522A\u9664\u6D3B\u52D5 "),c()}}var rs=class rs{constructor(){this.fb=R(Ge);this.dataService=R(Te);this.router=R(Ze);this.route=R(Vt);this.isEditMode=w(!1);this.eventId=w(null);this.submitted=w(!1);this.eventForm=this.fb.group({type:["",V.required],status:["active",V.required],date:["",V.required],time:[""],name:["",V.required],organizer:[""],attendees:["",V.required],estimatedRevenue:[0,[V.required,V.min(0)]],deposit:[null],actualRevenue:[0,[V.required,V.min(0)]],notes:[""]});this.route.paramMap.pipe(le(e=>e.get("id")),Ue(e=>{this.isEditMode.set(!!e),this.eventId.set(e)}),ut(e=>!!e),le(e=>this.dataService.getEventById(e)),Ue(e=>{e?this.eventForm.patchValue(e):(alert("\u627E\u4E0D\u5230\u6D3B\u52D5\uFF01"),this.router.navigate(["/events"]))})).subscribe()}isInvalid(e){let t=this.eventForm.get(e);return!!t&&t.invalid&&(t.touched||this.submitted())}onSubmit(){if(this.submitted.set(!0),this.eventForm.invalid){alert("\u8ACB\u6AA2\u67E5\u8868\u55AE\u4E26\u586B\u5BEB\u6240\u6709\u5FC5\u586B\u6B04\u4F4D\u3002");return}let e=this.eventForm.getRawValue(),t=q(N({},e),{deposit:e.deposit??void 0});this.isEditMode()&&this.eventId()?(this.dataService.updateEvent(q(N({},t),{id:this.eventId()})),alert("\u6D3B\u52D5\u5DF2\u6210\u529F\u66F4\u65B0\uFF01")):(this.dataService.addEvent(t),alert("\u6D3B\u52D5\u5DF2\u6210\u529F\u65B0\u589E\uFF01")),this.router.navigate(["/events"])}onDelete(){this.isEditMode()&&this.eventId()&&confirm("\u60A8\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u6D3B\u52D5\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002")&&(this.dataService.deleteEvent(this.eventId()),alert("\u6D3B\u52D5\u5DF2\u522A\u9664\u3002"),this.router.navigate(["/events"]))}onCancel(){this.router.navigate(["/events"])}};rs.\u0275fac=function(t){return new(t||rs)},rs.\u0275cmp=ae({type:rs,selectors:[["app-event-form"]],decls:61,vars:18,consts:[[1,"space-y-6","max-w-4xl","mx-auto"],[1,"text-3xl","font-bold","text-gray-900"],[1,"bg-white","p-6","md:p-8","rounded-xl","shadow-md"],["novalidate","",1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-x-6","gap-y-4"],[1,"md:col-span-2"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","name","formControlName","name",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","formControlName","date",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","time",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","time","formControlName","time","placeholder","\u4F8B\u5982: 14:30~18:30",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","type",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","type","formControlName","type",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","attendees",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","attendees","formControlName","attendees","placeholder","\u4F8B\u5982: 10~15",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","organizer",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","organizer","formControlName","organizer",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","estimatedRevenue",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","estimatedRevenue","formControlName","estimatedRevenue",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","deposit",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","deposit","formControlName","deposit",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","actualRevenue",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","actualRevenue","formControlName","actualRevenue",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["for","status",1,"block","text-sm","font-medium","text-gray-700"],["id","status","formControlName","status",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],["value","active"],["value","cancelled"],["for","notes",1,"block","text-sm","font-medium","text-gray-700"],["id","notes","formControlName","notes","rows","4",1,"mt-1","block","w-full","border","bg-gray-50","rounded-md","shadow-sm","p-2"],[1,"flex","items-center","justify-end","gap-4","pt-4","border-t","mt-6"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-red-600","bg-transparent","hover:bg-red-50","rounded-md"],[1,"flex-grow"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-red-600","bg-transparent","hover:bg-red-50","rounded-md",3,"click"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"h1",1),h(2),c(),d(3,"div",2)(4,"form",3),D("ngSubmit",function(){return i.onSubmit()}),d(5,"div",4)(6,"div",5)(7,"label",6),h(8,"\u6D3B\u52D5\u540D\u7A31*"),c(),x(9,"input",7),c(),d(10,"div")(11,"label",8),h(12,"\u65E5\u671F*"),c(),x(13,"input",9),c(),d(14,"div")(15,"label",10),h(16,"\u6642\u9593"),c(),x(17,"input",11),c(),d(18,"div")(19,"label",12),h(20,"\u985E\u578B*"),c(),x(21,"input",13),c(),d(22,"div")(23,"label",14),h(24,"\u4EBA\u6578*"),c(),x(25,"input",15),c(),d(26,"div",5)(27,"label",16),h(28,"\u4ECB\u7D39\u4EBA"),c(),x(29,"input",17),c(),d(30,"div")(31,"label",18),h(32,"\u9810\u8A08\u5831\u540D\u6536\u5165*"),c(),x(33,"input",19),c(),d(34,"div")(35,"label",20),h(36,"\u8A02\u91D1"),c(),x(37,"input",21),c(),d(38,"div")(39,"label",22),h(40,"\u5BE6\u969B\u7E3D\u6536\u5165*"),c(),x(41,"input",23),c(),d(42,"div")(43,"label",24),h(44,"\u72C0\u614B*"),c(),d(45,"select",25)(46,"option",26),h(47,"\u9032\u884C\u4E2D"),c(),d(48,"option",27),h(49,"\u5DF2\u53D6\u6D88"),c()()(),d(50,"div",5)(51,"label",28),h(52,"\u5099\u8A3B"),c(),x(53,"textarea",29),c()(),d(54,"div",30),B(55,mO,2,0,"button",31),x(56,"div",32),d(57,"button",33),D("click",function(){return i.onCancel()}),h(58," \u53D6\u6D88 "),c(),d(59,"button",34),h(60),c()()()()()),t&2&&(g(2),H(" ",i.isEditMode()?"\u7DE8\u8F2F\u6D3B\u52D5":"\u65B0\u589E\u6D3B\u52D5"," "),g(2),k("formGroup",i.eventForm),g(5),J("border-red-500",i.isInvalid("name")),g(4),J("border-red-500",i.isInvalid("date")),g(8),J("border-red-500",i.isInvalid("type")),g(4),J("border-red-500",i.isInvalid("attendees")),g(8),J("border-red-500",i.isInvalid("estimatedRevenue")),g(8),J("border-red-500",i.isInvalid("actualRevenue")),g(4),J("border-red-500",i.isInvalid("status")),g(10),U(i.isEditMode()?55:-1),g(5),H(" ",i.isEditMode()?"\u5132\u5B58\u8B8A\u66F4":"\u5132\u5B58\u6D3B\u52D5"," "))},dependencies:[ye,qe,Xe,Ve,Be,we,on,Fe,_e,$e,Le,He],encapsulation:2,changeDetection:0});var Za=rs;var hO=["dailyRevenueChart"],gO=(n,e)=>e.day;function yO(n,e){if(n&1&&(d(0,"option",8),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function vO(n,e){if(n&1&&(d(0,"option",8),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u6708")}}function _O(n,e){n&1&&(d(0,"td",32),h(1,"\u516C\u4F11"),c())}function CO(n,e){if(n&1&&(d(0,"td",33),h(1),c(),d(2,"td",33),h(3),c(),d(4,"td",33),h(5),c(),d(6,"td",33),h(7),c(),d(8,"td",34),h(9),c()),n&2){let t=C().$implicit,i=C();g(),S(i.formatCurrency(t.totalDailyRevenue)),g(),J("text-green-600",t.dailyAchievementRate>=100)("text-red-600",t.dailyAchievementRate<100),g(),H(" ",t.dailyAchievementRate.toFixed(2),"% "),g(2),S(t.eventRevenue>0?i.formatCurrency(t.eventRevenue):""),g(2),S(t.eventRevenue>0?t.eventAchievementRate.toFixed(2)+"%":""),g(2),S(t.eventNames.join(" / "))}}function EO(n,e){if(n&1){let t=$();d(0,"tr",30),D("click",function(){let r=T(t).$implicit,o=C();return I(o.navigateToDetail(r.date))}),d(1,"td",31),h(2),c(),B(3,_O,2,0,"td",32)(4,CO,10,9),c()}if(n&2){let t=e.$implicit;g(2),S(t.day),g(),U(t.isDayOff?3:4)}}function xO(n,e){if(n&1&&h(0),n&2){let t=C();H(" ",(t.summary().totalEventRevenue/t.summary().eventRevenueTarget*100).toFixed(2),"% ")}}var os=class os{constructor(){this.dataService=R(Te);this.router=R(Ze);this.monthlyRevenueTarget=28e4;this.eventRevenueTarget=112e3;this.availableYears=w([2024,2025,2026]);this.availableMonths=w(Array.from({length:12},(e,t)=>t+1));this.selectedYear=w(2024);this.selectedMonth=w(8);this.appliedFilters=w({year:2024,month:8});this.reportData=Y(()=>{let{year:e,month:t}=this.appliedFilters(),i=this.dataService.getDailyRevenueReport(e,t),r=i.filter(s=>!s.isDayOff).length,o=r>0?this.monthlyRevenueTarget/r:0;return i.map(s=>q(N({},s),{dailyAchievementRate:o>0?s.totalDailyRevenue/o*100:0,eventAchievementRate:this.eventRevenueTarget>0?s.eventRevenue/this.eventRevenueTarget*100:0}))});this.summary=Y(()=>{let e=this.reportData(),t=e.reduce((a,l)=>a+l.totalDailyRevenue,0),i=this.monthlyRevenueTarget-t,r=this.monthlyRevenueTarget>0?t/this.monthlyRevenueTarget*100:0,o=e.filter(a=>!a.isDayOff).length,s=o>0?this.monthlyRevenueTarget/o:0;return{monthlyRevenueTarget:this.monthlyRevenueTarget,dailyAverageTarget:s,eventRevenueTarget:this.eventRevenueTarget,targetDeficit:i,cumulativeMonthlyRevenue:t,monthlyTargetAchievementRate:r,totalEventRevenue:e.reduce((a,l)=>a+l.eventRevenue,0)}});this.applyFilter()}set dailyRevenueChartRef(e){this.destroyChart(),e&&this.reportData().length>0&&this.createChart(e)}applyFilter(){this.appliedFilters.set({year:this.selectedYear(),month:this.selectedMonth()})}resetFilter(){this.selectedYear.set(2024),this.selectedMonth.set(8),this.applyFilter()}navigateToDetail(e){this.router.navigate(["/daily-revenue",e])}formatCurrency(e){return e==null?"":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}createChart(e){let t=this.reportData(),i=this.summary(),r=t.map(a=>a.day),o=[{label:"\u6BCF\u65E5\u71DF\u6536",data:t.map(a=>a.isDayOff?null:a.totalDailyRevenue),borderColor:"#4f46e5",backgroundColor:"rgba(79, 70, 229, 0.1)",fill:!0,tension:.4,spanGaps:!0},{label:"\u6BCF\u65E5\u5E73\u5747\u76EE\u6A19",data:t.map(()=>i.dailyAverageTarget),borderColor:"#f97316",borderDash:[5,5],fill:!1,pointRadius:0,pointHitRadius:0}],s=e.nativeElement.getContext("2d");this.dailyChart=new Chart(s,{type:"line",data:{labels:r,datasets:o},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:a=>this.formatCurrency(a)}},x:{title:{display:!0,text:"\u65E5\u671F"}}},plugins:{tooltip:{callbacks:{label:a=>`${a.dataset.label}: ${this.formatCurrency(a.raw)}`}}}}})}destroyChart(){this.dailyChart&&(this.dailyChart.destroy(),this.dailyChart=null)}};os.\u0275fac=function(t){return new(t||os)},os.\u0275cmp=ae({type:os,selectors:[["app-daily-revenue"]],viewQuery:function(t,i){if(t&1&&Zt(hO,5),t&2){let r;Ft(r=kt())&&(i.dailyRevenueChartRef=r.first)}},decls:91,vars:20,consts:[["dailyRevenueChart",""],[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","flex-col","sm:flex-row","items-center","gap-2","bg-white","p-3","rounded-xl","shadow-md","border","border-gray-200"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-600"],[1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100","pr-8",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","items-center","gap-2","mt-2","sm:mt-0"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","filter-outline"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-6","gap-6"],[1,"bg-white","p-4","rounded-xl","shadow-md","text-center"],[1,"text-sm","text-gray-500"],[1,"text-xl","font-semibold","text-gray-900","mt-1"],[1,"text-xl","font-semibold","mt-1"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"text-lg","font-semibold","text-gray-800","mb-4"],[1,"h-80"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],[1,"px-4","py-3"],[1,"px-4","py-3","text-right"],[1,"border-b","hover:bg-gray-50","cursor-pointer"],[1,"font-bold","bg-gray-100"],[1,"border-t-2"],[1,"border-b","hover:bg-gray-50","cursor-pointer",3,"click"],[1,"px-4","py-2","font-medium"],["colspan","5",1,"px-4","py-2","text-center","text-gray-500"],[1,"px-4","py-2","text-right"],[1,"px-4","py-2"]],template:function(t,i){if(t&1){let r=$();d(0,"div",1)(1,"div",2)(2,"h1",3),h(3,"\u7576\u65E5\u71DF\u6536"),c(),d(4,"div",4)(5,"div",5)(6,"label",6),h(7,"\u6642\u9593:"),c(),d(8,"select",7),de("ngModelChange",function(s){return T(r),fe(i.selectedYear,s)||(i.selectedYear=s),I(s)}),P(9,yO,2,2,"option",8,j),c(),d(11,"select",7),de("ngModelChange",function(s){return T(r),fe(i.selectedMonth,s)||(i.selectedMonth=s),I(s)}),P(12,vO,2,2,"option",8,j),c()(),d(14,"div",9)(15,"button",10),D("click",function(){return T(r),I(i.applyFilter())}),x(16,"ion-icon",11),d(17,"span"),h(18,"\u5957\u7528"),c()(),d(19,"button",12),D("click",function(){return T(r),I(i.resetFilter())}),x(20,"ion-icon",13),c()()()(),d(21,"div",14)(22,"div",15)(23,"p",16),h(24,"\u6708\u71DF\u6536\u76EE\u6A19"),c(),d(25,"p",17),h(26),c()(),d(27,"div",15)(28,"p",16),h(29,"\u6BCF\u65E5\u5E73\u5747\u76EE\u6A19"),c(),d(30,"p",17),h(31),c()(),d(32,"div",15)(33,"p",16),h(34,"\u6D3B\u52D5\u71DF\u6536\u76EE\u6A19"),c(),d(35,"p",17),h(36),c()(),d(37,"div",15)(38,"p",16),h(39,"\u76EE\u6A19\u5DEE\u984D"),c(),d(40,"p",18),h(41),c()(),d(42,"div",15)(43,"p",16),h(44,"\u672C\u6708\u7D2F\u8A08\u71DF\u6536"),c(),d(45,"p",17),h(46),c()(),d(47,"div",15)(48,"p",16),h(49,"\u6708\u71DF\u6536\u76EE\u6A19\u9054\u6210\u7387"),c(),d(50,"p",18),h(51),c()()(),d(52,"div",19)(53,"h3",20),h(54,"\u6BCF\u65E5\u71DF\u6536\u8DA8\u52E2"),c(),d(55,"div",21),x(56,"canvas",null,0),c()(),d(58,"div",19)(59,"div",22)(60,"table",23)(61,"thead",24)(62,"tr")(63,"th",25),h(64,"\u65E5\u671F"),c(),d(65,"th",26),h(66,"\u7576\u65E5\u71DF\u6536"),c(),d(67,"th",26),h(68,"\u7576\u65E5\u9054\u6210\u7387"),c(),d(69,"th",26),h(70,"\u6D3B\u52D5\u71DF\u6536"),c(),d(71,"th",26),h(72,"\u6D3B\u52D5\u9054\u6210\u7387"),c(),d(73,"th",25),h(74,"\u6D3B\u52D5\u540D\u7A31"),c()()(),d(75,"tbody"),P(76,EO,5,2,"tr",27,gO),c(),d(78,"tfoot",28)(79,"tr",29)(80,"td",25),h(81,"\u7E3D\u8A08"),c(),d(82,"td",26),h(83),c(),d(84,"td",26),h(85),c(),d(86,"td",26),h(87),c(),d(88,"td",26),B(89,xO,1,1),c(),x(90,"td",25),c()()()()()()}t&2&&(g(8),ce("ngModel",i.selectedYear),g(),F(i.availableYears()),g(2),ce("ngModel",i.selectedMonth),g(),F(i.availableMonths()),g(14),S(i.formatCurrency(i.summary().monthlyRevenueTarget)),g(5),S(i.formatCurrency(i.summary().dailyAverageTarget)),g(5),S(i.formatCurrency(i.summary().eventRevenueTarget)),g(4),J("text-red-600",i.summary().targetDeficit>0)("text-green-600",i.summary().targetDeficit<=0),g(),H(" ",i.formatCurrency(i.summary().targetDeficit)," "),g(5),S(i.formatCurrency(i.summary().cumulativeMonthlyRevenue)),g(4),J("text-green-600",i.summary().monthlyTargetAchievementRate>=100)("text-red-600",i.summary().monthlyTargetAchievementRate<100),g(),H(" ",i.summary().monthlyTargetAchievementRate.toFixed(2),"% "),g(25),F(i.reportData()),g(7),S(i.formatCurrency(i.summary().cumulativeMonthlyRevenue)),g(2),H("",i.summary().monthlyTargetAchievementRate.toFixed(2),"%"),g(2),S(i.formatCurrency(i.summary().totalEventRevenue)),g(2),U(i.summary().eventRevenueTarget>0?89:-1))},dependencies:[ye,ke,Ve,Be,Fe,_e,Ne],encapsulation:2,changeDetection:0});var zd=os;var SO=(n,e)=>e.id;function DO(n,e){if(n&1&&(d(0,"tr",24)(1,"td",28),h(2),c(),d(3,"td",29),h(4),c(),d(5,"td",30),h(6),c()()),n&2){let t=e.$implicit,i=C();g(2),S(t.name),g(2),S(t.organizer),g(2),S(i.formatCurrency(t.actualRevenue))}}function bO(n,e){n&1&&(d(0,"tr")(1,"td",31),h(2,"\u672C\u65E5\u7121\u6D3B\u52D5\u3002"),c()())}var ss=class ss{constructor(){this.fb=R(Ge);this.dataService=R(Te);this.router=R(Ze);this.route=R(Vt);this.date=w("");this.dailyEntry=w(null);this.eventsOnDay=w([]);this.submitted=w(!1);this.revenueForm=this.fb.group({nonEventRevenue:[0,[V.required,V.min(0)]]});this.totalEventRevenue=Y(()=>this.eventsOnDay().reduce((e,t)=>e+t.actualRevenue,0));this.totalDailyRevenue=Y(()=>(this.revenueForm.controls.nonEventRevenue.value??0)+this.totalEventRevenue());this.route.paramMap.pipe(le(e=>e.get("date")),Ue(e=>{if(!e||!/^\d{4}-\d{2}-\d{2}$/.test(e)){alert("\u7121\u6548\u7684\u65E5\u671F\u683C\u5F0F"),this.router.navigate(["/daily-revenue"]);return}this.date.set(e);let t=this.dataService.getDailyRevenueEntryByDate(e);this.dailyEntry.set(t),this.revenueForm.patchValue({nonEventRevenue:t.nonEventRevenue});let i=this.dataService.getEvents();this.eventsOnDay.set(i.filter(r=>r.date===e&&r.status==="active"))})).subscribe()}onSubmit(){if(this.submitted.set(!0),this.revenueForm.invalid){alert("\u8ACB\u8F38\u5165\u6709\u6548\u7684\u975E\u6D3B\u52D5\u71DF\u6536\u91D1\u984D\u3002");return}let e=this.revenueForm.controls.nonEventRevenue.value??0;this.dataService.updateDailyRevenueEntry(this.date(),{nonEventRevenue:e}),alert("\u7576\u65E5\u71DF\u6536\u5DF2\u66F4\u65B0\uFF01"),this.router.navigate(["/daily-revenue"])}onCancel(){this.router.navigate(["/daily-revenue"])}formatCurrency(e){return e==null?"":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}};ss.\u0275fac=function(t){return new(t||ss)},ss.\u0275cmp=ae({type:ss,selectors:[["app-daily-revenue-detail"]],decls:53,vars:7,consts:[[1,"space-y-6","max-w-4xl","mx-auto"],[1,"flex","items-center","gap-4"],[1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","arrow-back-outline",1,"text-2xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-indigo-600"],["novalidate","",3,"ngSubmit","formGroup"],[1,"bg-white","p-6","md:p-8","rounded-xl","shadow-md","space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-gray-50","p-4","rounded-lg"],["for","nonEventRevenue",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","nonEventRevenue","formControlName","nonEventRevenue",1,"mt-2","block","w-full","border","bg-white","rounded-md","shadow-sm","p-2","text-lg","text-right","font-semibold"],[1,"text-xs","text-gray-500","mt-1"],[1,"bg-blue-50","p-4","rounded-lg"],[1,"text-sm","font-medium","text-gray-700"],[1,"mt-2","text-lg","text-right","font-semibold","text-blue-800"],[1,"bg-green-50","p-4","rounded-lg"],[1,"mt-2","text-lg","text-right","font-semibold","text-green-800"],[1,"text-lg","font-semibold","text-gray-800","mb-2"],[1,"border","rounded-lg","overflow-hidden"],[1,"w-full","text-sm","text-left"],[1,"bg-gray-100","text-xs","uppercase"],[1,"px-4","py-2"],[1,"px-4","py-2","text-right"],[1,"border-t"],[1,"flex","items-center","justify-end","gap-4","pt-4","border-t","mt-6"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700"],[1,"px-4","py-2","font-medium"],[1,"px-4","py-2","text-gray-600"],[1,"px-4","py-2","text-right","font-semibold"],["colspan","3",1,"px-4","py-4","text-center","text-gray-500"]],template:function(t,i){if(t&1&&(d(0,"div",0)(1,"div",1)(2,"button",2),D("click",function(){return i.onCancel()}),x(3,"ion-icon",3),c(),d(4,"h1",4),h(5," \u7DE8\u8F2F\u7576\u65E5\u71DF\u6536 - "),d(6,"span",5),h(7),c()()(),d(8,"form",6),D("ngSubmit",function(){return i.onSubmit()}),d(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),h(13,"\u975E\u6D3B\u52D5\u71DF\u6536*"),c(),x(14,"input",11),d(15,"p",12),h(16,"\u624B\u52D5\u8F38\u5165\u7576\u5929\u975E\u6D3B\u52D5\u76F8\u95DC\u7684\u71DF\u6536\u3002"),c()(),d(17,"div",13)(18,"p",14),h(19,"\u6D3B\u52D5\u7E3D\u71DF\u6536"),c(),d(20,"p",15),h(21),c(),d(22,"p",12),h(23,"\u4F86\u81EA\u4E0B\u65B9\u6D3B\u52D5\u5217\u8868\u7684\u52A0\u7E3D\u3002"),c()(),d(24,"div",16)(25,"p",14),h(26,"\u7576\u65E5\u7E3D\u71DF\u6536"),c(),d(27,"p",17),h(28),c(),d(29,"p",12),h(30,"\u975E\u6D3B\u52D5\u71DF\u6536 + \u6D3B\u52D5\u7E3D\u71DF\u6536\u3002"),c()()(),d(31,"div")(32,"h3",18),h(33,"\u672C\u65E5\u6D3B\u52D5"),c(),d(34,"div",19)(35,"table",20)(36,"thead",21)(37,"tr")(38,"th",22),h(39,"\u6D3B\u52D5\u540D\u7A31"),c(),d(40,"th",22),h(41,"\u4ECB\u7D39\u4EBA"),c(),d(42,"th",23),h(43,"\u5BE6\u969B\u6536\u5165"),c()()(),d(44,"tbody"),P(45,DO,7,3,"tr",24,SO,!1,bO,3,0,"tr"),c()()()(),d(48,"div",25)(49,"button",26),D("click",function(){return i.onCancel()}),h(50," \u53D6\u6D88 "),c(),d(51,"button",27),h(52," \u5132\u5B58\u8B8A\u66F4 "),c()()()()()),t&2){let r;g(7),S(i.date()),g(),k("formGroup",i.revenueForm),g(6),J("border-red-500",i.submitted()&&((r=i.revenueForm.get("nonEventRevenue"))==null?null:r.invalid)),g(7),S(i.formatCurrency(i.totalEventRevenue())),g(7),S(i.formatCurrency(i.totalDailyRevenue())),g(17),F(i.eventsOnDay())}},dependencies:[ye,qe,Xe,we,on,_e,$e,Le,He],encapsulation:2,changeDetection:0});var jd=ss;var wO=(n,e)=>e.employeeId;function TO(n,e){if(n&1&&(d(0,"option",7),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function IO(n,e){if(n&1&&(d(0,"option",7),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u6708")}}function MO(n,e){n&1&&(d(0,"span",30),h(1," \u662F "),c())}function AO(n,e){n&1&&(d(0,"span",31),h(1," \u5426 "),c())}function RO(n,e){if(n&1){let t=$();d(0,"tr",25),D("click",function(){let r=T(t).$implicit,o=C();return I(o.viewEmployeeDetails(r.employeeId))}),d(1,"td",26),h(2),c(),d(3,"td",27),h(4),c(),d(5,"td",28),h(6),c(),d(7,"td",29),B(8,MO,2,0,"span",30)(9,AO,2,0,"span",31),c()()}if(n&2){let t=e.$implicit,i=C();g(2),S(t.name),g(2),S(t.totalHours.toFixed(2)),g(2),S(i.formatCurrency(t.totalPay)),g(2),U(t.hasMissingPunch?8:9)}}function NO(n,e){n&1&&(d(0,"tr")(1,"td",32),h(2,"\u8A72\u6708\u4EFD\u6C92\u6709 PT \u54E1\u5DE5\u85AA\u8CC7\u8CC7\u6599\u3002"),c()())}var as=class as{constructor(){this.dataService=R(Te);this.router=R(Ze);this.availableYears=w([2024,2025,2026]);this.availableMonths=w(Array.from({length:12},(e,t)=>t+1));this.selectedYear=w(2024);this.selectedMonth=w(8);this.appliedFilters=w({year:2024,month:8});this.payrollSummary=Y(()=>{let{year:e,month:t}=this.appliedFilters();return this.dataService.getPayrollSummary(e,t)});this.applyFilter()}applyFilter(){this.appliedFilters.set({year:this.selectedYear(),month:this.selectedMonth()})}resetFilter(){this.selectedYear.set(2024),this.selectedMonth.set(8),this.applyFilter()}viewEmployeeDetails(e){let{year:t,month:i}=this.appliedFilters();this.router.navigate(["/payroll",e,t,i])}formatCurrency(e){return e==null?"":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}};as.\u0275fac=function(t){return new(t||as)},as.\u0275cmp=ae({type:as,selectors:[["app-payroll"]],decls:51,vars:5,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","flex-col","sm:flex-row","items-center","gap-2","bg-white","p-3","rounded-xl","shadow-md","border","border-gray-200"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-600"],[1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100","pr-8",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","items-center","gap-2","mt-2","sm:mt-0"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","filter-outline"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"text-sm","text-gray-500"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"text-lg","font-semibold","text-gray-800","mb-4"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],[1,"px-4","py-3"],[1,"px-4","py-3","text-right"],[1,"px-4","py-3","text-center"],[1,"border-b","hover:bg-gray-50","cursor-pointer"],[1,"border-b","hover:bg-gray-50","cursor-pointer",3,"click"],[1,"px-4","py-2","font-medium"],[1,"px-4","py-2","text-right"],[1,"px-4","py-2","text-right","font-semibold"],[1,"px-4","py-2","text-center"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-red-100","text-red-800"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-green-100","text-green-800"],["colspan","4",1,"text-center","py-8","text-gray-500"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u6253\u5361\u85AA\u8CC7"),c(),d(4,"div",3)(5,"div",4)(6,"label",5),h(7,"\u6642\u9593:"),c(),d(8,"select",6),de("ngModelChange",function(o){return fe(i.selectedYear,o)||(i.selectedYear=o),o}),P(9,TO,2,2,"option",7,j),c(),d(11,"select",6),de("ngModelChange",function(o){return fe(i.selectedMonth,o)||(i.selectedMonth=o),o}),P(12,IO,2,2,"option",7,j),c()(),d(14,"div",8)(15,"button",9),D("click",function(){return i.applyFilter()}),x(16,"ion-icon",10),d(17,"span"),h(18,"\u5957\u7528"),c()(),d(19,"button",11),D("click",function(){return i.resetFilter()}),x(20,"ion-icon",12),c()()()(),d(21,"div",13)(22,"div",14)(23,"p",15),h(24,"PT\u85AA\u8CC7"),c(),d(25,"p",16),h(26),c()(),d(27,"div",14)(28,"p",15),h(29,"\u6B63\u8077\u85AA\u8CC7"),c(),d(30,"p",16),h(31),c()()(),d(32,"div",14)(33,"h3",17),h(34,"PT \u54E1\u5DE5\u85AA\u8CC7\u660E\u7D30"),c(),d(35,"div",18)(36,"table",19)(37,"thead",20)(38,"tr")(39,"th",21),h(40,"\u54E1\u5DE5\u540D\u7A31"),c(),d(41,"th",22),h(42,"\u6642\u6578"),c(),d(43,"th",22),h(44,"\u85AA\u8CC7"),c(),d(45,"th",23),h(46,"\u662F\u5426\u6709\u7F3A\u5361"),c()()(),d(47,"tbody"),P(48,RO,10,4,"tr",24,wO,!1,NO,3,0,"tr"),c()()()()()),t&2&&(g(8),ce("ngModel",i.selectedYear),g(),F(i.availableYears()),g(2),ce("ngModel",i.selectedMonth),g(),F(i.availableMonths()),g(14),S(i.formatCurrency(i.payrollSummary().partTimePayroll)),g(5),S(i.formatCurrency(i.payrollSummary().fullTimePayroll)),g(17),F(i.payrollSummary().partTimeDetails))},dependencies:[ye,ke,Ve,Be,Fe,_e,Ne],encapsulation:2,changeDetection:0});var Yd=as;function PO(n,e){if(n&1){let t=$();d(0,"tr",16)(1,"td",23)(2,"button",24),D("click",function(){let r=T(t).$index,o=C();return I(o.clearRecord(r))}),x(3,"ion-icon",25),c()(),d(4,"td",26),h(5),c(),d(6,"td",27),x(7,"input",28),c(),d(8,"td",27),x(9,"input",29),c(),d(10,"td",30),h(11),ho(12,"number"),c(),d(13,"td",31),x(14,"input",32),c(),d(15,"td",33),h(16),ho(17,"currency"),c()()}if(n&2){let t,i=e.$implicit,r=e.$index,o=C();k("formGroupName",r),g(5),Ot(" ",(t=i.get("date"))==null?null:t.value," (",o.getWeekday((t=i.get("date"))==null?null:t.value),") "),g(6),H(" ",Ju(12,5,o.calculateWorkHours(i),"1.2-2")," "),g(5),H(" ",Ku(17,8,o.calculateSalary(i),"TWD","symbol","1.0-0")," ")}}var ls=class ls{constructor(){this.fb=R(Ge);this.dataService=R(Te);this.router=R(Ze);this.route=R(Vt);this.employee=w(null);this.year=w(0);this.month=w(0);this.payrollForm=this.fb.group({records:this.fb.array([])});this.initialFormValue="";this.totalHours=Y(()=>this.records.controls.reduce((e,t)=>e+this.calculateWorkHours(t),0));this.totalSalary=Y(()=>this.records.controls.reduce((e,t)=>e+this.calculateSalary(t),0));this.route.paramMap.pipe(Ue(e=>{let t=e.get("employeeId"),i=Number(e.get("year")),r=Number(e.get("month"));if(!t||!i||!r){alert("\u7121\u6548\u7684\u7DB2\u5740\u53C3\u6578"),this.router.navigate(["/payroll"]);return}let o=this.dataService.getEmployeeById(t);if(!o){alert("\u627E\u4E0D\u5230\u54E1\u5DE5"),this.router.navigate(["/payroll"]);return}this.employee.set(o),this.year.set(i),this.month.set(r),this.buildForm(t,i,r)})).subscribe()}get records(){return this.payrollForm.get("records")}buildForm(e,t,i){let r=this.records;r.clear();let o=this.dataService.getPunchRecordsForMonth(e,t,i),s=new Date(t,i,0).getDate();for(let a=1;a<=s;a++){let l=`${t}-${String(i).padStart(2,"0")}-${String(a).padStart(2,"0")}`,f=o.find(y=>y.date===l),m=this.fb.group({date:[l],clockIn:[f?.clockIn||null],clockOut:[f?.clockOut||null],isDoublePay:[f?.isDoublePay||!1]});r.push(m)}this.initialFormValue=JSON.stringify(this.payrollForm.value)}getWeekday(e){return e?new Date(e+"T00:00:00").toLocaleDateString("zh-TW",{weekday:"short"}).replace("\u9031",""):""}calculateWorkHours(e){let{clockIn:t,clockOut:i}=e.value;if(!t||!i)return 0;let[r,o,s]=t.split(":").map(Number),[a,l,f]=i.split(":").map(Number),m=new Date(0,0,0,r,o,s||0),y=new Date(0,0,0,a,l,f||0);if(isNaN(m.getTime())||isNaN(y.getTime())||y<m)return 0;let _=(y.getTime()-m.getTime())/(1e3*60*60);return Math.floor(_*100)/100}calculateSalary(e){let t=this.calculateWorkHours(e),i=this.employee()?.hourlyRate||0,r=e.get("isDoublePay")?.value,o=t*i;return r&&(o*=2),o}onSave(){let e=this.employee()?.id;if(!e)return;let i=(this.payrollForm.value.records||[]).map(r=>({employeeId:e,date:r.date,clockIn:r.clockIn||null,clockOut:r.clockOut||null,isDoublePay:r.isDoublePay||!1}));this.dataService.updatePunchRecords(e,this.year(),this.month(),i),this.initialFormValue=JSON.stringify(this.payrollForm.value),alert("\u6253\u5361\u7D00\u9304\u5DF2\u5132\u5B58\uFF01"),this.router.navigate(["/payroll"])}goBack(){this.router.navigate(["/payroll"])}onCancel(){let e=JSON.stringify(this.payrollForm.value);this.initialFormValue===e?this.router.navigate(["/payroll"]):confirm("\u60A8\u6709\u672A\u5132\u5B58\u7684\u8B8A\u66F4\uFF0C\u78BA\u5B9A\u8981\u96E2\u958B\u55CE\uFF1F")&&this.router.navigate(["/payroll"])}clearRecord(e){confirm("\u662F\u5426\u6E05\u9664\u7576\u5929\u6253\u5361\u8CC7\u6599\uFF1F")&&this.records.at(e).patchValue({clockIn:null,clockOut:null,isDoublePay:!1})}};ls.\u0275fac=function(t){return new(t||ls)},ls.\u0275cmp=ae({type:ls,selectors:[["app-payroll-detail"]],decls:47,vars:14,consts:[[1,"space-y-6","max-w-5xl","mx-auto"],[1,"flex","items-center","gap-4"],[1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","arrow-back-outline",1,"text-2xl"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-lg","text-indigo-600","font-semibold"],[1,"bg-white","p-6","rounded-xl","shadow-md"],["novalidate","",3,"ngSubmit","formGroup"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],[1,"px-2","py-3","w-12"],[1,"px-3","py-3"],[1,"px-3","py-3","text-center"],[1,"px-3","py-3","text-right"],["formArrayName","records"],[1,"border-b","hover:bg-gray-50",3,"formGroupName"],[1,"font-bold","bg-gray-100","text-base"],[1,"border-t-2"],["colspan","4",1,"px-3","py-3"],[1,"flex","items-center","justify-end","gap-4","pt-6","mt-6","border-t"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700"],[1,"px-2","py-2","text-center"],["type","button","title","\u6E05\u9664\u6B64\u884C",1,"text-red-500","hover:text-red-700","p-1","rounded-full","hover:bg-red-100","transition-colors",3,"click"],["name","close-circle-outline",1,"text-lg","align-middle"],[1,"px-3","py-2","font-medium"],[1,"px-3","py-2"],["type","time","step","1","formControlName","clockIn",1,"w-full","border-gray-200","rounded-md","shadow-sm","p-1","bg-gray-50","text-sm"],["type","time","step","1","formControlName","clockOut",1,"w-full","border-gray-200","rounded-md","shadow-sm","p-1","bg-gray-50","text-sm"],[1,"px-3","py-2","text-center","font-medium"],[1,"px-3","py-2","text-center"],["type","checkbox","formControlName","isDoublePay",1,"rounded","h-4","w-4","text-indigo-600","focus:ring-indigo-500","border-gray-300"],[1,"px-3","py-2","text-right","font-semibold"]],template:function(t,i){if(t&1&&(d(0,"div",0)(1,"div",1)(2,"button",2),D("click",function(){return i.goBack()}),x(3,"ion-icon",3),c(),d(4,"div")(5,"h1",4),h(6),c(),d(7,"p",5),h(8),c()()(),d(9,"div",6)(10,"form",7),D("ngSubmit",function(){return i.onSave()}),d(11,"div",8)(12,"table",9)(13,"thead",10)(14,"tr"),x(15,"th",11),d(16,"th",12),h(17,"\u65E5\u671F"),c(),d(18,"th",12),h(19,"\u4E0A\u73ED"),c(),d(20,"th",12),h(21,"\u4E0B\u73ED"),c(),d(22,"th",13),h(23,"\u5DE5\u6642"),c(),d(24,"th",13),h(25,"\u96D9\u500D\u85AA\u8CC7"),c(),d(26,"th",14),h(27,"\u85AA\u8CC7"),c()()(),d(28,"tbody",15),P(29,PO,18,13,"tr",16,j),c(),d(31,"tfoot",17)(32,"tr",18)(33,"td",19),h(34,"\u7E3D\u8A08"),c(),d(35,"td",13),h(36),ho(37,"number"),c(),x(38,"td",12),d(39,"td",14),h(40),ho(41,"currency"),c()()()()(),d(42,"div",20)(43,"button",21),D("click",function(){return i.onCancel()}),h(44," \u53D6\u6D88 "),c(),d(45,"button",22),h(46," \u5132\u5B58\u8B8A\u66F4 "),c()()()()()),t&2){let r;g(6),H(" ",(r=i.employee())==null?null:r.name," - \u6253\u5361\u8A73\u7D30\u8CC7\u8A0A "),g(2),Ot("",i.year(),"\u5E74 ",i.month(),"\u6708"),g(2),k("formGroup",i.payrollForm),g(19),F(i.records.controls),g(7),S(Ju(37,6,i.totalHours(),"1.2-2")),g(4),S(Ku(41,9,i.totalSalary(),"TWD","symbol","1.0-0"))}},dependencies:[ye,qe,Xe,we,qa,_e,$e,Le,He,Kn,Qn,uh,ch],encapsulation:2,changeDetection:0});var Jd=ls;var Xa=(n,e)=>e.id;function FO(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t.id),g(),S(t.name)}}function kO(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function OO(n,e){if(n&1){let t=$();d(0,"tr",27)(1,"td",29),h(2),c(),d(3,"td",30),h(4),c(),d(5,"td",29),h(6),c(),d(7,"td",29),h(8),c(),d(9,"td",31),h(10),c(),d(11,"td",29),h(12),c(),d(13,"td",29),h(14),c(),d(15,"td",31),h(16),c(),d(17,"td",32),h(18),c(),d(19,"td",33),h(20),c(),d(21,"td",29)(22,"div",34)(23,"button",35),D("click",function(){let r=T(t).$implicit,o=C(2);return I(o.openModal(r))}),x(24,"ion-icon",36),c(),d(25,"button",37),D("click",function(){let r=T(t).$implicit,o=C(2);return I(o.deleteItem(r.id))}),x(26,"ion-icon",38),c()()()()}if(n&2){let t=e.$implicit,i=C(2);g(2),S(t.productId),g(2),S(t.productName),g(2),S(i.getVendorName(t.vendorId)),g(2),S(t.category),g(2),S(t.itemQuantity),g(2),S(t.itemUnit),g(2),S(t.totalUnit),g(2),S(i.formatCurrency(t.price)),g(2),S(i.formatCurrency(i.calculateItemCost(t.price,t.itemQuantity))),g(2),S(t.notes)}}function LO(n,e){n&1&&(d(0,"tr")(1,"td",39),h(2,"\u7121\u7B26\u5408\u689D\u4EF6\u7684\u5546\u54C1\u6210\u672C\u8CC7\u6599\u3002"),c()())}function VO(n,e){if(n&1){let t=$();d(0,"div",28)(1,"span",40),h(2),c(),d(3,"div",34)(4,"button",41),D("click",function(){T(t);let r=C(2);return I(r.goToPage(r.groceriesCurrentPage()-1,"groceries"))}),x(5,"ion-icon",42),c(),d(6,"span",43),h(7),c(),d(8,"button",41),D("click",function(){T(t);let r=C(2);return I(r.goToPage(r.groceriesCurrentPage()+1,"groceries"))}),x(9,"ion-icon",44),c()()()}if(n&2){let t=C(2);g(2),hn("\u986F\u793A\u7B2C ",(t.groceriesCurrentPage()-1)*t.groceriesPageSize+1," \u81F3 ",t.Math.min(t.groceriesCurrentPage()*t.groceriesPageSize,t.filteredGroceries().length)," \u7B46\uFF0C\u5171 ",t.filteredGroceries().length," \u7B46"),g(2),k("disabled",t.groceriesCurrentPage()===1),g(3),Ot("\u7B2C ",t.groceriesCurrentPage()," \u9801 / \u5171 ",t.groceriesTotalPages()," \u9801"),g(),k("disabled",t.groceriesCurrentPage()===t.groceriesTotalPages())}}function BO(n,e){if(n&1){let t=$();d(0,"div",11)(1,"div",12)(2,"input",13),D("ngModelChange",function(r){T(t);let o=C();return o.groceriesSearchTerm.set(r),I(o.applyFilters("groceries"))}),c()(),d(3,"div")(4,"select",14),D("ngModelChange",function(r){T(t);let o=C();return o.groceriesSelectedVendor.set(r),I(o.applyFilters("groceries"))}),d(5,"option",15),h(6,"\u6240\u6709\u4F9B\u61C9\u5546"),c(),P(7,FO,2,2,"option",16,Xa),c()(),d(9,"div")(10,"select",14),D("ngModelChange",function(r){T(t);let o=C();return o.groceriesSelectedCategory.set(r),I(o.applyFilters("groceries"))}),d(11,"option",15),h(12,"\u6240\u6709\u54C1\u9805"),c(),P(13,kO,2,2,"option",16,j),c()(),d(15,"div",17)(16,"button",18),D("click",function(){T(t);let r=C();return I(r.resetFilters("groceries"))}),x(17,"ion-icon",19),c()()(),d(18,"div",20)(19,"table",21)(20,"thead",22)(21,"tr")(22,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("productId"))}),h(23,"\u5546\u54C1\u7DE8\u865F"),c(),d(24,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("productName"))}),h(25,"\u5546\u54C1\u540D\u7A31"),c(),d(26,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("vendorId"))}),h(27,"\u4F9B\u61C9\u5546"),c(),d(28,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("category"))}),h(29,"\u54C1\u9805"),c(),d(30,"th",24),D("click",function(){T(t);let r=C();return I(r.sortData("itemQuantity"))}),h(31,"\u7D30\u9805\u6578\u91CF"),c(),d(32,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("itemUnit"))}),h(33,"\u7D30\u9805\u55AE\u4F4D"),c(),d(34,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("totalUnit"))}),h(35,"\u7E3D\u55AE\u4F4D"),c(),d(36,"th",24),D("click",function(){T(t);let r=C();return I(r.sortData("price"))}),h(37,"\u50F9\u683C(\u5143)"),c(),d(38,"th",25),h(39,"\u7D30\u9805\u55AE\u4F4D\u6210\u672C"),c(),d(40,"th",26),h(41,"\u5099\u8A3B"),c(),d(42,"th",26),h(43,"\u64CD\u4F5C"),c()()(),d(44,"tbody"),P(45,OO,27,10,"tr",27,Xa,!1,LO,3,0,"tr"),c()()(),B(48,VO,10,7,"div",28)}if(n&2){let t=C();g(2),k("ngModel",t.groceriesSearchTerm()),g(2),k("ngModel",t.groceriesSelectedVendor()),g(3),F(t.allVendors()),g(3),k("ngModel",t.groceriesSelectedCategory()),g(3),F(t.groceriesProductCategories()),g(32),F(t.paginatedGroceries()),g(3),U(t.groceriesTotalPages()>1?48:-1)}}function UO(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function HO(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function $O(n,e){if(n&1){let t=$();d(0,"tr",27)(1,"td",29),h(2),c(),d(3,"td",30),h(4),c(),d(5,"td",29),h(6),c(),d(7,"td",31),h(8),c(),d(9,"td",31),h(10),c(),d(11,"td",32),h(12),c(),d(13,"td",29)(14,"div",34)(15,"button",35),D("click",function(){let r=T(t).$implicit,o=C(2);return I(o.openModal(r))}),x(16,"ion-icon",36),c(),d(17,"button",37),D("click",function(){let r=T(t).$implicit,o=C(2);return I(o.deleteItem(r.id))}),x(18,"ion-icon",38),c()()()()}if(n&2){let t=e.$implicit,i=C(2);g(2),S(t.vendor),g(2),S(t.productName),g(2),S(t.type),g(2),S(i.formatCurrency(t.cost)),g(2),S(i.formatCurrency(t.sellingPrice)),g(2),H("",i.calculateMargin(t.cost,t.sellingPrice).toFixed(2),"%")}}function GO(n,e){n&1&&(d(0,"tr")(1,"td",46),h(2,"\u7121\u8CC7\u6599\u3002"),c()())}function qO(n,e){if(n&1){let t=$();d(0,"div",28)(1,"span",40),h(2),c(),d(3,"div",34)(4,"button",41),D("click",function(){T(t);let r=C(2);return I(r.goToPage(r.wineCurrentPage()-1,"wines"))}),x(5,"ion-icon",42),c(),d(6,"span",43),h(7),c(),d(8,"button",41),D("click",function(){T(t);let r=C(2);return I(r.goToPage(r.wineCurrentPage()+1,"wines"))}),x(9,"ion-icon",44),c()()()}if(n&2){let t=C(2);g(2),hn("\u986F\u793A\u7B2C ",(t.wineCurrentPage()-1)*t.winePageSize+1," \u81F3 ",t.Math.min(t.wineCurrentPage()*t.winePageSize,t.filteredWines().length)," \u7B46\uFF0C\u5171 ",t.filteredWines().length," \u7B46"),g(2),k("disabled",t.wineCurrentPage()===1),g(3),Ot("\u7B2C ",t.wineCurrentPage()," \u9801 / \u5171 ",t.wineTotalPages()," \u9801"),g(),k("disabled",t.wineCurrentPage()===t.wineTotalPages())}}function WO(n,e){if(n&1){let t=$();d(0,"div",11)(1,"div",12)(2,"input",45),D("ngModelChange",function(r){T(t);let o=C();return o.wineSearchTerm.set(r),I(o.applyFilters("wines"))}),c()(),d(3,"div")(4,"select",14),D("ngModelChange",function(r){T(t);let o=C();return o.wineSelectedVendor.set(r),I(o.applyFilters("wines"))}),d(5,"option",15),h(6,"\u6240\u6709\u5EE0\u5546"),c(),P(7,UO,2,2,"option",16,j),c()(),d(9,"div")(10,"select",14),D("ngModelChange",function(r){T(t);let o=C();return o.wineSelectedType.set(r),I(o.applyFilters("wines"))}),d(11,"option",15),h(12,"\u6240\u6709\u985E\u578B"),c(),P(13,HO,2,2,"option",16,j),c()(),d(15,"div",17)(16,"button",18),D("click",function(){T(t);let r=C();return I(r.resetFilters("wines"))}),x(17,"ion-icon",19),c()()(),d(18,"div",20)(19,"table",21)(20,"thead",22)(21,"tr")(22,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("vendor"))}),h(23,"\u5EE0\u5546"),c(),d(24,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("productName"))}),h(25,"\u5546\u54C1"),c(),d(26,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("type"))}),h(27,"\u985E\u578B"),c(),d(28,"th",24),D("click",function(){T(t);let r=C();return I(r.sortData("cost"))}),h(29,"\u9032\u8CA8\u6210\u672C"),c(),d(30,"th",24),D("click",function(){T(t);let r=C();return I(r.sortData("sellingPrice"))}),h(31,"\u552E\u50F9"),c(),d(32,"th",25),h(33,"\u6BDB\u5229\u7387"),c(),d(34,"th",26),h(35,"\u64CD\u4F5C"),c()()(),d(36,"tbody"),P(37,$O,19,6,"tr",27,Xa,!1,GO,3,0,"tr"),c()()(),B(40,qO,10,7,"div",28)}if(n&2){let t=C();g(2),k("ngModel",t.wineSearchTerm()),g(2),k("ngModel",t.wineSelectedVendor()),g(3),F(t.wineVendors()),g(3),k("ngModel",t.wineSelectedType()),g(3),F(t.wineTypes()),g(24),F(t.paginatedWines()),g(3),U(t.wineTotalPages()>1?40:-1)}}function zO(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function jO(n,e){if(n&1){let t=$();d(0,"tr",27)(1,"td",30),h(2),c(),d(3,"td",29),h(4),c(),d(5,"td",29),h(6),c(),d(7,"td",31),h(8),c(),d(9,"td",31),h(10),c(),d(11,"td",31),h(12),c(),d(13,"td",31),h(14),c(),d(15,"td",32),h(16),c(),d(17,"td",29)(18,"div",34)(19,"button",35),D("click",function(){let r=T(t).$implicit,o=C(2);return I(o.openModal(r))}),x(20,"ion-icon",36),c(),d(21,"button",37),D("click",function(){let r=T(t).$implicit,o=C(2);return I(o.deleteItem(r.id))}),x(22,"ion-icon",38),c()()()()}if(n&2){let t=e.$implicit,i=C(2);g(2),S(t.brand),g(2),S(t.productName),g(2),S(t.size),g(2),S(t.quantityPerBox),g(2),S(i.formatCurrency(t.lishengCost)),g(2),S(i.formatCurrency(t.baijiaCost)),g(2),S(i.formatCurrency(t.sellingPrice)),g(2),H("",i.calculateMargin(t.baijiaCost,t.sellingPrice).toFixed(2),"%")}}function YO(n,e){n&1&&(d(0,"tr")(1,"td",50),h(2,"\u7121\u8CC7\u6599\u3002"),c()())}function JO(n,e){if(n&1){let t=$();d(0,"div",28)(1,"span",40),h(2),c(),d(3,"div",34)(4,"button",41),D("click",function(){T(t);let r=C(2);return I(r.goToPage(r.cigarCurrentPage()-1,"cigars"))}),x(5,"ion-icon",42),c(),d(6,"span",43),h(7),c(),d(8,"button",41),D("click",function(){T(t);let r=C(2);return I(r.goToPage(r.cigarCurrentPage()+1,"cigars"))}),x(9,"ion-icon",44),c()()()}if(n&2){let t=C(2);g(2),hn("\u986F\u793A\u7B2C ",(t.cigarCurrentPage()-1)*t.cigarPageSize+1," \u81F3 ",t.Math.min(t.cigarCurrentPage()*t.cigarPageSize,t.filteredCigars().length)," \u7B46\uFF0C\u5171 ",t.filteredCigars().length," \u7B46"),g(2),k("disabled",t.cigarCurrentPage()===1),g(3),Ot("\u7B2C ",t.cigarCurrentPage()," \u9801 / \u5171 ",t.cigarTotalPages()," \u9801"),g(),k("disabled",t.cigarCurrentPage()===t.cigarTotalPages())}}function KO(n,e){if(n&1){let t=$();d(0,"div",47)(1,"div",12)(2,"input",48),D("ngModelChange",function(r){T(t);let o=C();return o.cigarSearchTerm.set(r),I(o.applyFilters("cigars"))}),c()(),d(3,"div")(4,"select",14),D("ngModelChange",function(r){T(t);let o=C();return o.cigarSelectedBrand.set(r),I(o.applyFilters("cigars"))}),d(5,"option",15),h(6,"\u6240\u6709\u54C1\u724C"),c(),P(7,zO,2,2,"option",16,j),c()(),d(9,"div",49)(10,"button",18),D("click",function(){T(t);let r=C();return I(r.resetFilters("cigars"))}),x(11,"ion-icon",19),c()()(),d(12,"div",20)(13,"table",21)(14,"thead",22)(15,"tr")(16,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("brand"))}),h(17,"\u54C1\u724C"),c(),d(18,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("productName"))}),h(19,"\u5546\u54C1\u540D\u7A31"),c(),d(20,"th",23),D("click",function(){T(t);let r=C();return I(r.sortData("size"))}),h(21,"\u5C3A\u5BF8"),c(),d(22,"th",24),D("click",function(){T(t);let r=C();return I(r.sortData("quantityPerBox"))}),h(23,"\u6BCF\u76D2\u6578\u91CF"),c(),d(24,"th",24),D("click",function(){T(t);let r=C();return I(r.sortData("lishengCost"))}),h(25,"\u7406\u665F\u6210\u672C(\u652F)"),c(),d(26,"th",24),D("click",function(){T(t);let r=C();return I(r.sortData("baijiaCost"))}),h(27,"\u767E\u6CC7\u6210\u672C(\u652F)"),c(),d(28,"th",24),D("click",function(){T(t);let r=C();return I(r.sortData("sellingPrice"))}),h(29,"\u8CE3\u50F9"),c(),d(30,"th",25),h(31,"\u6BDB\u5229\u7387"),c(),d(32,"th",26),h(33,"\u64CD\u4F5C"),c()()(),d(34,"tbody"),P(35,jO,23,8,"tr",27,Xa,!1,YO,3,0,"tr"),c()()(),B(38,JO,10,7,"div",28)}if(n&2){let t=C();g(2),k("ngModel",t.cigarSearchTerm()),g(2),k("ngModel",t.cigarSelectedBrand()),g(3),F(t.cigarBrands()),g(28),F(t.paginatedCigars()),g(3),U(t.cigarTotalPages()>1?38:-1)}}function QO(n,e){if(n&1&&h(0),n&2){let t=C(2);H(" ",t.editingProductCost()?"\u7DE8\u8F2F\u5546\u54C1\u6210\u672C":"\u65B0\u589E\u5546\u54C1\u6210\u672C"," ")}}function ZO(n,e){if(n&1&&h(0),n&2){let t=C(2);H(" ",t.editingWineCost()?"\u7DE8\u8F2F\u9152\u985E\u6210\u672C":"\u65B0\u589E\u9152\u985E\u6210\u672C"," ")}}function XO(n,e){if(n&1&&h(0),n&2){let t=C(2);H(" ",t.editingCigarCost()?"\u7DE8\u8F2F\u96EA\u8304\u6210\u672C":"\u65B0\u589E\u96EA\u8304\u6210\u672C"," ")}}function eL(n,e){if(n&1&&x(0,"option",16),n&2){let t=e.$implicit;k("value",t)}}function tL(n,e){if(n&1&&(d(0,"option",16),h(1),c()),n&2){let t=e.$implicit;k("value",t.id),g(),S(t.name)}}function nL(n,e){if(n&1&&(d(0,"div",58)(1,"div",62)(2,"label",63)(3,"span",64),h(4,"\u5546\u54C1\u7DE8\u865F*"),c(),x(5,"input",65),c(),d(6,"label",63)(7,"span",64),h(8,"\u5546\u54C1\u540D\u7A31*"),c(),x(9,"input",66),c(),d(10,"label",63)(11,"span",64),h(12,"\u54C1\u9805*"),c(),x(13,"input",67),d(14,"datalist",68),P(15,eL,1,1,"option",16,j),c()(),d(17,"label",63)(18,"span",64),h(19,"\u4F9B\u61C9\u5546*"),c(),d(20,"select",69)(21,"option",70),h(22,"\u9078\u64C7\u4F9B\u61C9\u5546"),c(),P(23,tL,2,2,"option",16,Xa),c()(),d(25,"label",63)(26,"span",64),h(27,"\u7D30\u9805\u6578\u91CF*"),c(),x(28,"input",71),c(),d(29,"label",63)(30,"span",64),h(31,"\u7D30\u9805\u55AE\u4F4D*"),c(),x(32,"input",72),c(),d(33,"label",63)(34,"span",64),h(35,"\u7E3D\u55AE\u4F4D*"),c(),x(36,"input",73),c(),d(37,"label",63)(38,"span",64),h(39,"\u50F9\u683C(\u5143)*"),c(),x(40,"input",74),c()(),d(41,"label",63)(42,"span",64),h(43,"\u5099\u8A3B"),c(),x(44,"textarea",75),c()()),n&2){let t=C(2);k("formGroup",t.productCostForm),g(15),F(t.groceriesProductCategories()),g(8),F(t.allVendors())}}function iL(n,e){if(n&1&&(d(0,"div",58)(1,"div",62)(2,"label",63)(3,"span",64),h(4,"\u5EE0\u5546*"),c(),x(5,"input",76),c(),d(6,"label",63)(7,"span",64),h(8,"\u5546\u54C1\u540D\u7A31*"),c(),x(9,"input",66),c(),d(10,"label",63)(11,"span",64),h(12,"\u985E\u578B*"),c(),x(13,"input",77),c(),d(14,"label",63)(15,"span",64),h(16,"\u9032\u8CA8\u6210\u672C*"),c(),x(17,"input",78),c(),d(18,"label",79)(19,"span",64),h(20,"\u552E\u50F9*"),c(),x(21,"input",80),c()()()),n&2){let t=C(2);k("formGroup",t.wineCostForm)}}function rL(n,e){if(n&1&&(d(0,"div",58)(1,"div",62)(2,"label",63)(3,"span",64),h(4,"\u54C1\u724C*"),c(),x(5,"input",81),c(),d(6,"label",63)(7,"span",64),h(8,"\u5546\u54C1\u540D\u7A31*"),c(),x(9,"input",66),c(),d(10,"label",63)(11,"span",64),h(12,"\u5C3A\u5BF8*"),c(),x(13,"input",82),c(),d(14,"label",63)(15,"span",64),h(16,"\u6BCF\u76D2\u6578\u91CF*"),c(),x(17,"input",83),c(),d(18,"label",63)(19,"span",64),h(20,"\u7406\u665F\u6210\u672C(\u652F)*"),c(),x(21,"input",84),c(),d(22,"label",63)(23,"span",64),h(24,"\u767E\u6CC7\u6210\u672C(\u652F)*"),c(),x(25,"input",85),c(),d(26,"label",79)(27,"span",64),h(28,"\u8CE3\u50F9*"),c(),x(29,"input",80),c()()()),n&2){let t=C(2);k("formGroup",t.cigarCostForm)}}function oL(n,e){if(n&1){let t=$();d(0,"div",10)(1,"div",51)(2,"div",52)(3,"h3",53),B(4,QO,1,1)(5,ZO,1,1)(6,XO,1,1),c(),d(7,"button",54),D("click",function(){T(t);let r=C();return I(r.closeModal())}),x(8,"ion-icon",55),c()(),d(9,"div",56)(10,"form",57),D("ngSubmit",function(){T(t);let r=C();return I(r.handleFormSubmit())}),B(11,nL,45,1,"div",58)(12,iL,22,1,"div",58)(13,rL,30,1,"div",58),d(14,"div",59)(15,"button",60),D("click",function(){T(t);let r=C();return I(r.closeModal())}),h(16,"\u53D6\u6D88"),c(),d(17,"button",61),h(18,"\u5132\u5B58"),c()()()()()()}if(n&2){let t,i,r=C();g(4),U((t=r.activeView())==="groceries"?4:t==="wines"?5:t==="cigars"?6:-1),g(7),U((i=r.activeView())==="groceries"?11:i==="wines"?12:i==="cigars"?13:-1)}}var us=class us{constructor(){this.dataService=R(Te);this.fb=R(Ge);this.activeView=w("groceries");this.isModalOpen=w(!1);this.Math=Math;this.allVendors=w([]);this.allProductCosts=w([]);this.editingProductCost=w(null);this.allCigarCosts=w([]);this.editingCigarCost=w(null);this.allWineCosts=w([]);this.editingWineCost=w(null);this.productCostForm=this.fb.group({id:[""],productId:["",V.required],productName:["",V.required],vendorId:["",V.required],category:["",V.required],itemQuantity:[null,[V.required,V.min(.01)]],itemUnit:["",V.required],totalUnit:["",V.required],price:[null,[V.required,V.min(0)]],notes:[""]});this.cigarCostForm=this.fb.group({id:[""],brand:["",V.required],productName:["",V.required],size:["",V.required],quantityPerBox:[null,[V.required,V.min(1)]],lishengCost:[null,[V.required,V.min(0)]],baijiaCost:[null,[V.required,V.min(0)]],sellingPrice:[null,[V.required,V.min(0)]]});this.wineCostForm=this.fb.group({id:[""],vendor:["",V.required],productName:["",V.required],type:["",V.required],cost:[null,[V.required,V.min(0)]],sellingPrice:[null,[V.required,V.min(0)]]});this.groceriesSearchTerm=w("");this.groceriesSelectedVendor=w("");this.groceriesSelectedCategory=w("");this.groceriesSortColumn=w("productName");this.groceriesSortDirection=w("asc");this.groceriesCurrentPage=w(1);this.groceriesPageSize=10;this.cigarSearchTerm=w("");this.cigarSelectedBrand=w("");this.cigarSortColumn=w("brand");this.cigarSortDirection=w("asc");this.cigarCurrentPage=w(1);this.cigarPageSize=10;this.wineSearchTerm=w("");this.wineSelectedVendor=w("");this.wineSelectedType=w("");this.wineSortColumn=w("vendor");this.wineSortDirection=w("asc");this.wineCurrentPage=w(1);this.winePageSize=10;this.groceriesProductCategories=Y(()=>[...new Set(this.allProductCosts().map(e=>e.category))].sort());this.filteredGroceries=Y(()=>this.filterAndSort(this.allProductCosts(),this.groceriesSearchTerm(),{vendorId:this.groceriesSelectedVendor(),category:this.groceriesSelectedCategory()},["productName","productId"],this.groceriesSortColumn(),this.groceriesSortDirection()));this.paginatedGroceries=Y(()=>this.paginate(this.filteredGroceries(),this.groceriesCurrentPage(),this.groceriesPageSize));this.groceriesTotalPages=Y(()=>Math.ceil(this.filteredGroceries().length/this.groceriesPageSize));this.cigarBrands=Y(()=>[...new Set(this.allCigarCosts().map(e=>e.brand))].sort());this.filteredCigars=Y(()=>this.filterAndSort(this.allCigarCosts(),this.cigarSearchTerm(),{brand:this.cigarSelectedBrand()},["productName","brand"],this.cigarSortColumn(),this.cigarSortDirection()));this.paginatedCigars=Y(()=>this.paginate(this.filteredCigars(),this.cigarCurrentPage(),this.cigarPageSize));this.cigarTotalPages=Y(()=>Math.ceil(this.filteredCigars().length/this.cigarPageSize));this.wineVendors=Y(()=>[...new Set(this.allWineCosts().map(e=>e.vendor))].sort());this.wineTypes=Y(()=>[...new Set(this.allWineCosts().map(e=>e.type))].sort());this.filteredWines=Y(()=>this.filterAndSort(this.allWineCosts(),this.wineSearchTerm(),{vendor:this.wineSelectedVendor(),type:this.wineSelectedType()},["productName","vendor","type"],this.wineSortColumn(),this.wineSortDirection()));this.paginatedWines=Y(()=>this.paginate(this.filteredWines(),this.wineCurrentPage(),this.winePageSize));this.wineTotalPages=Y(()=>Math.ceil(this.filteredWines().length/this.winePageSize));this.loadData()}loadData(){this.allProductCosts.set(this.dataService.getProductCosts()),this.allCigarCosts.set(this.dataService.getCigarCosts()),this.allWineCosts.set(this.dataService.getWineCosts()),this.allVendors.set(this.dataService.getVendors())}changeView(e){this.activeView.set(e)}filterAndSort(e,t,i,r,o,s){let a=t.toLowerCase(),l=e.filter(f=>Object.entries(i).every(([y,v])=>!v||f[y]===v)?a?r.some(y=>String(f[y]).toLowerCase().includes(a)):!0:!1);return o&&(l=[...l].sort((f,m)=>{let y=f[o],v=m[o];return y<v?s==="asc"?-1:1:y>v?s==="asc"?1:-1:0})),l}paginate(e,t,i){let r=(t-1)*i;return e.slice(r,r+i)}openModal(e=null){let t=this.activeView();t==="groceries"?(this.editingProductCost.set(e),this.productCostForm.reset(),e&&this.productCostForm.patchValue(e)):t==="cigars"?(this.editingCigarCost.set(e),this.cigarCostForm.reset(),e&&this.cigarCostForm.patchValue(e)):t==="wines"&&(this.editingWineCost.set(e),this.wineCostForm.reset(),e&&this.wineCostForm.patchValue(e)),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1)}handleFormSubmit(){let e=this.activeView();e==="groceries"?this.handleGroceriesSubmit():e==="cigars"?this.handleCigarSubmit():e==="wines"&&this.handleWineSubmit(),this.loadData(),this.closeModal()}handleGroceriesSubmit(){if(this.productCostForm.invalid)return;let e=this.productCostForm.value;this.editingProductCost()?this.dataService.updateProductCost(q(N({},e),{id:this.editingProductCost().id})):this.dataService.addProductCost(e)}handleCigarSubmit(){if(this.cigarCostForm.invalid)return;let e=this.cigarCostForm.value;this.editingCigarCost()?this.dataService.updateCigarCost(q(N({},e),{id:this.editingCigarCost().id})):this.dataService.addCigarCost(e)}handleWineSubmit(){if(this.wineCostForm.invalid)return;let e=this.wineCostForm.value;this.editingWineCost()?this.dataService.updateWineCost(q(N({},e),{id:this.editingWineCost().id})):this.dataService.addWineCost(e)}deleteItem(e){if(!confirm("\u60A8\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u9805\u5546\u54C1\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002"))return;let t=this.activeView();t==="groceries"?this.dataService.deleteProductCost(e):t==="cigars"?this.dataService.deleteCigarCost(e):t==="wines"&&this.dataService.deleteWineCost(e),this.loadData()}sortData(e){let t=this.activeView(),i=t==="groceries"?this.groceriesSortColumn:t==="cigars"?this.cigarSortColumn:this.wineSortColumn,r=t==="groceries"?this.groceriesSortDirection:t==="cigars"?this.cigarSortDirection:this.wineSortDirection;i()===e?r.update(o=>o==="asc"?"desc":"asc"):(i.set(e),r.set("asc"))}resetFilters(e){e==="groceries"?(this.groceriesSearchTerm.set(""),this.groceriesSelectedVendor.set(""),this.groceriesSelectedCategory.set("")):e==="cigars"?(this.cigarSearchTerm.set(""),this.cigarSelectedBrand.set("")):e==="wines"&&(this.wineSearchTerm.set(""),this.wineSelectedVendor.set(""),this.wineSelectedType.set("")),this.goToPage(1,e)}applyFilters(e){this.goToPage(1,e)}goToPage(e,t){let i=t==="groceries"?this.groceriesCurrentPage:t==="cigars"?this.cigarCurrentPage:this.wineCurrentPage,r=t==="groceries"?this.groceriesTotalPages():t==="cigars"?this.cigarTotalPages():this.wineTotalPages();e>=1&&e<=r&&i.set(e)}getVendorName(e){return this.allVendors().find(t=>t.id===e)?.name||"N/A"}calculateItemCost(e,t){return!e||!t?0:e/t}calculateMargin(e,t){return!e||!t?0:(t-e)/t*100}formatCurrency(e){return e?.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})||""}};us.\u0275fac=function(t){return new(t||us)},us.\u0275cmp=ae({type:us,selectors:[["app-product-cost"]],decls:22,vars:8,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","add-outline"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-6"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"pt-6"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","p-4","bg-gray-50","rounded-lg","mb-6"],[1,"md:col-span-2"],["type","text","placeholder","\u641C\u5C0B\u5546\u54C1\u540D\u7A31\u6216\u7DE8\u865F...",1,"w-full","border-gray-300","rounded-lg","shadow-sm","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],[1,"w-full","border-gray-300","rounded-lg","shadow-sm","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"flex","items-center","gap-2","md:col-span-4","justify-end"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],[1,"px-4","py-3","cursor-pointer",3,"click"],[1,"px-4","py-3","cursor-pointer","text-right",3,"click"],[1,"px-4","py-3","text-right"],[1,"px-4","py-3"],[1,"border-b","hover:bg-gray-50"],[1,"flex","justify-between","items-center","pt-4","border-t","mt-4"],[1,"px-4","py-2"],[1,"px-4","py-2","font-medium"],[1,"px-4","py-2","text-right"],[1,"px-4","py-2","text-right","font-semibold","bg-green-50"],[1,"px-4","py-2","truncate","max-w-xs"],[1,"flex","items-center","gap-2"],["title","\u7DE8\u8F2F",1,"text-indigo-600","hover:text-indigo-800","p-1",3,"click"],["name","create-outline",1,"text-lg"],["title","\u522A\u9664",1,"text-red-500","hover:text-red-700","p-1",3,"click"],["name","trash-outline",1,"text-lg"],["colspan","11",1,"text-center","py-8","text-gray-500"],[1,"text-sm","text-gray-600"],[1,"px-3","py-1","border","rounded-md","disabled:opacity-50",3,"click","disabled"],["name","chevron-back-outline"],[1,"text-sm"],["name","chevron-forward-outline"],["type","text","placeholder","\u641C\u5C0B\u5546\u54C1\u3001\u5EE0\u5546\u3001\u985E\u578B...",1,"w-full","border-gray-300","rounded-lg","shadow-sm","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],["colspan","7",1,"text-center","py-8","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4","bg-gray-50","rounded-lg","mb-6"],["type","text","placeholder","\u641C\u5C0B\u54C1\u724C\u6216\u5546\u54C1\u540D\u7A31...",1,"w-full","border-gray-300","rounded-lg","shadow-sm","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-2","md:col-span-3","justify-end"],["colspan","9",1,"text-center","py-8","text-gray-500"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","close-outline",1,"text-2xl"],[1,"p-6","overflow-y-auto"],["novalidate","",1,"space-y-4",3,"ngSubmit"],[1,"space-y-4",3,"formGroup"],[1,"flex","justify-end","gap-4","pt-4","border-t","mt-4"],["type","button",1,"px-4","py-2","border","rounded-md",3,"click"],["type","submit",1,"px-4","py-2","bg-indigo-600","text-white","rounded-md"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block"],[1,"text-gray-700"],["formControlName","productId",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","productName",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","category","list","productCategoriesList","placeholder","\u9078\u64C7\u6216\u8F38\u5165\u65B0\u54C1\u9805",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["id","productCategoriesList"],["formControlName","vendorId",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["value","","disabled",""],["type","number","formControlName","itemQuantity",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","itemUnit","placeholder","\u4F8B\u5982: ml, g, \u9846",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","totalUnit","placeholder","\u4F8B\u5982: \u74F6, \u5305, \u7F50",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["type","number","formControlName","price",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","notes","rows","3",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","vendor",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","type",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["type","number","formControlName","cost",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],[1,"block","md:col-span-2"],["type","number","formControlName","sellingPrice",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","brand",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","size",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["type","number","formControlName","quantityPerBox",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["type","number","formControlName","lishengCost",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["type","number","formControlName","baijiaCost",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"]],template:function(t,i){if(t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u5546\u54C1\u6210\u672C\u7BA1\u7406"),c(),d(4,"button",3),D("click",function(){return i.openModal()}),x(5,"ion-icon",4),d(6,"span"),h(7,"\u65B0\u589E\u9805\u76EE"),c()()(),d(8,"div",5)(9,"div",6)(10,"nav",7)(11,"button",8),D("click",function(){return i.changeView("groceries")}),h(12,"\u9910\u98F2&\u96DC\u8CA8"),c(),d(13,"button",8),D("click",function(){return i.changeView("wines")}),h(14,"\u5A01&\u7D05\u767D\u9152"),c(),d(15,"button",8),D("click",function(){return i.changeView("cigars")}),h(16,"\u96EA\u8304"),c()()(),d(17,"div",9),B(18,BO,49,5)(19,WO,41,5)(20,KO,39,4),c()()(),B(21,oL,19,2,"div",10)),t&2){let r;g(11),_t(i.activeView()==="groceries"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(2),_t(i.activeView()==="wines"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(2),_t(i.activeView()==="cigars"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),g(3),U((r=i.activeView())==="groceries"?18:r==="wines"?19:r==="cigars"?20:-1),g(3),U(i.isModalOpen()?21:-1)}},dependencies:[ye,qe,Xe,Ve,Be,we,on,Fe,_e,$e,Le,He,ke,Ne,s0],encapsulation:2,changeDetection:0});var Kd=us;var sL=(n,e)=>e.id;function aL(n,e){if(n&1&&(d(0,"option",12),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function lL(n,e){if(n&1){let t=$();d(0,"tr",20)(1,"td",22),h(2),c(),d(3,"td",23),h(4),c(),d(5,"td",22),h(6),c(),d(7,"td",22),h(8),c(),d(9,"td",22)(10,"div",24)(11,"button",25),D("click",function(){let r=T(t).$implicit,o=C();return I(o.openModal(r))}),x(12,"ion-icon",26),c(),d(13,"button",27),D("click",function(){let r=T(t).$implicit,o=C();return I(o.deleteVendor(r))}),x(14,"ion-icon",28),c()()()()}if(n&2){let t=e.$implicit;g(2),S(t.category),g(2),S(t.name),g(2),S(t.contactInfo),g(2),S(t.restDays)}}function uL(n,e){n&1&&(d(0,"tr")(1,"td",29),h(2,"\u7121\u7B26\u5408\u689D\u4EF6\u7684\u5EE0\u5546\u8CC7\u6599\u3002"),c()())}function cL(n,e){if(n&1){let t=$();d(0,"div",21)(1,"div",30)(2,"div",31)(3,"h3",32),h(4),c(),d(5,"button",33),D("click",function(){T(t);let r=C();return I(r.closeModal())}),x(6,"ion-icon",34),c()(),d(7,"div",35)(8,"form",36),D("ngSubmit",function(){T(t);let r=C();return I(r.handleVendorSubmit())}),d(9,"label",37)(10,"span",38),h(11,"\u985E\u5225*"),c(),x(12,"input",39),c(),d(13,"label",37)(14,"span",38),h(15,"\u5EE0\u5546\u540D\u7A31*"),c(),x(16,"input",40),c(),d(17,"label",37)(18,"span",38),h(19,"\u7D71\u4E00\u7DE8\u865F"),c(),x(20,"input",41),c(),d(21,"label",37)(22,"span",38),h(23,"\u806F\u7D61\u65B9\u5F0F*"),c(),x(24,"input",42),c(),d(25,"label",37)(26,"span",38),h(27,"\u4F11\u606F\u6642\u9593"),c(),x(28,"input",43),c(),d(29,"div",44)(30,"button",45),D("click",function(){T(t);let r=C();return I(r.closeModal())}),h(31,"\u53D6\u6D88"),c(),d(32,"button",46),h(33,"\u5132\u5B58"),c()()()()()()}if(n&2){let t=C();g(4),S(t.editingVendor()?"\u7DE8\u8F2F\u5EE0\u5546":"\u65B0\u589E\u5EE0\u5546"),g(4),k("formGroup",t.vendorForm)}}var cs=class cs{constructor(){this.dataService=R(Te);this.fb=R(Ge);this.isModalOpen=w(!1);this.allVendors=w([]);this.editingVendor=w(null);this.vendorForm=this.fb.group({id:[""],category:["",V.required],name:["",V.required],taxId:[""],contactInfo:["",V.required],restDays:[""]});this.vendorSearchTerm=w("");this.selectedVendorCategory=w("");this.vendorCategories=Y(()=>{let e=this.allVendors();return[...new Set(e.map(i=>i.category))].sort()});this.filteredVendors=Y(()=>{let e=this.vendorSearchTerm().toLowerCase(),t=this.selectedVendorCategory(),i=this.allVendors();return t&&(i=i.filter(r=>r.category===t)),e&&(i=i.filter(r=>r.name.toLowerCase().includes(e)||r.category.toLowerCase().includes(e)||r.contactInfo.toLowerCase().includes(e))),i});this.loadData()}loadData(){this.allVendors.set(this.dataService.getVendors())}resetVendorFilters(){this.vendorSearchTerm.set(""),this.selectedVendorCategory.set("")}openModal(e=null){this.editingVendor.set(e),this.vendorForm.reset(),e&&this.vendorForm.patchValue(e),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.editingVendor.set(null)}handleVendorSubmit(){if(this.vendorForm.invalid)return;let e=this.vendorForm.value,t={category:e.category,name:e.name,taxId:e.taxId,contactInfo:e.contactInfo,restDays:e.restDays};this.editingVendor()?this.dataService.updateVendor(q(N({},t),{id:this.editingVendor().id})):this.dataService.addVendor(t),this.loadData(),this.closeModal()}deleteVendor(e){confirm(`\u60A8\u78BA\u5B9A\u8981\u522A\u9664\u5EE0\u5546 "${e.name}" \u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002`)&&(this.dataService.deleteVendor(e.id),this.loadData())}formatCurrency(e){return e==null?"":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}};cs.\u0275fac=function(t){return new(t||cs)},cs.\u0275cmp=ae({type:cs,selectors:[["app-vendors"]],decls:41,vars:4,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","add-outline"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4","bg-gray-50","rounded-lg"],[1,"md:col-span-2"],["type","text","placeholder","\u641C\u5C0B\u5EE0\u5546\u540D\u7A31\u3001\u985E\u5225\u6216\u806F\u7D61\u65B9\u5F0F...",1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],[1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"flex","items-center","gap-2","md:col-span-3","justify-end"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],[1,"px-4","py-3"],[1,"border-b","hover:bg-gray-50"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"px-4","py-2"],[1,"px-4","py-2","font-medium"],[1,"flex","items-center","gap-2"],["title","\u7DE8\u8F2F",1,"text-indigo-600","hover:text-indigo-800","p-1",3,"click"],["name","create-outline",1,"text-lg"],["title","\u522A\u9664",1,"text-red-500","hover:text-red-700","p-1",3,"click"],["name","trash-outline",1,"text-lg"],["colspan","5",1,"text-center","py-8","text-gray-500"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-lg","max-h-[90vh]","flex","flex-col"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","close-outline",1,"text-2xl"],[1,"p-6","overflow-y-auto"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block"],[1,"text-gray-700"],["formControlName","category",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","name",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","taxId",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","contactInfo",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","restDays",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],[1,"flex","justify-end","gap-4","pt-4","border-t","mt-4"],["type","button",1,"px-4","py-2","border","rounded-md",3,"click"],["type","submit",1,"px-4","py-2","bg-indigo-600","text-white","rounded-md"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u5EE0\u5546\u7BA1\u7406"),c(),d(4,"button",3),D("click",function(){return i.openModal()}),x(5,"ion-icon",4),d(6,"span"),h(7,"\u65B0\u589E\u5EE0\u5546"),c()()(),d(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"input",9),D("ngModelChange",function(o){return i.vendorSearchTerm.set(o)}),c()(),d(13,"div")(14,"select",10),D("ngModelChange",function(o){return i.selectedVendorCategory.set(o)}),d(15,"option",11),h(16,"\u6240\u6709\u985E\u5225"),c(),P(17,aL,2,2,"option",12,j),c()(),d(19,"div",13)(20,"button",14),D("click",function(){return i.resetVendorFilters()}),x(21,"ion-icon",15),c()()(),d(22,"div",16)(23,"table",17)(24,"thead",18)(25,"tr")(26,"th",19),h(27,"\u985E\u5225"),c(),d(28,"th",19),h(29,"\u5EE0\u5546"),c(),d(30,"th",19),h(31,"\u806F\u7D61\u65B9\u5F0F"),c(),d(32,"th",19),h(33,"\u4F11\u606F\u6642\u9593"),c(),d(34,"th",19),h(35,"\u64CD\u4F5C"),c()()(),d(36,"tbody"),P(37,lL,15,4,"tr",20,sL,!1,uL,3,0,"tr"),c()()()()()(),B(40,cL,34,2,"div",21)),t&2&&(g(12),k("ngModel",i.vendorSearchTerm()),g(2),k("ngModel",i.selectedVendorCategory()),g(3),F(i.vendorCategories()),g(20),F(i.filteredVendors()),g(3),U(i.isModalOpen()?40:-1))},dependencies:[ye,qe,Xe,Ve,Be,we,Fe,_e,$e,Le,He,ke,Ne],encapsulation:2,changeDetection:0});var Qd=cs;var mg=(n,e)=>e.id;function dL(n,e){if(n&1&&(d(0,"option",18),h(1),c()),n&2){let t=e.$implicit;k("value",t.id),g(),S(t.name)}}function fL(n,e){if(n&1){let t=$();d(0,"tr",27)(1,"td",29),h(2),c(),d(3,"td",30),h(4),c(),d(5,"td",30),h(6),c(),d(7,"td",31),h(8),c(),d(9,"td",30)(10,"div",10)(11,"button",32),D("click",function(){let r=T(t).$implicit,o=C();return I(o.openModal(r))}),x(12,"ion-icon",33),c(),d(13,"button",34),D("click",function(){let r=T(t).$implicit,o=C();return I(o.deletePurchaseOrder(r.id))}),x(14,"ion-icon",35),c()()()()}if(n&2){let t=e.$implicit,i=C();g(2),S(t.poNumber),g(2),S(i.getVendorName(t.vendorId)),g(2),S(t.date),g(2),S(i.formatCurrency(t.totalAmount))}}function pL(n,e){n&1&&(d(0,"tr")(1,"td",36),h(2,"\u7121\u7B26\u5408\u689D\u4EF6\u7684\u9032\u8CA8\u55AE\u8CC7\u6599\u3002"),c()())}function mL(n,e){if(n&1&&(d(0,"option",18),h(1),c()),n&2){let t=e.$implicit;k("value",t.id),g(),S(t.name)}}function hL(n,e){if(n&1){let t=$();d(0,"div",57),x(1,"input",63)(2,"input",64)(3,"input",65),d(4,"span",54),h(5),c(),d(6,"button",66),D("click",function(){let r=T(t).$index,o=C(2);return I(o.removeItem(r))}),x(7,"ion-icon",67),c()()}if(n&2){let t,i=e.$implicit,r=e.$index,o=C(2);k("formGroupName",r),g(5),S(o.formatCurrency((t=i.get("total"))==null?null:t.value))}}function gL(n,e){if(n&1){let t=$();d(0,"div",28)(1,"div",37)(2,"div",38)(3,"h3",39),h(4),c(),d(5,"button",40),D("click",function(){T(t);let r=C();return I(r.closeModal())}),x(6,"ion-icon",41),c()(),d(7,"div",42)(8,"form",43),D("ngSubmit",function(){T(t);let r=C();return I(r.handlePOSubmit())}),d(9,"div",44)(10,"label",45)(11,"span",46),h(12,"\u9032\u8CA8\u55AE\u865F*"),c(),x(13,"input",47),c(),d(14,"label",45)(15,"span",46),h(16,"\u65E5\u671F*"),c(),x(17,"input",48),c()(),d(18,"label",45)(19,"span",46),h(20,"\u5EE0\u5546*"),c(),d(21,"select",49)(22,"option",50),h(23,"\u9078\u64C7\u5EE0\u5546"),c(),P(24,mL,2,2,"option",18,mg),c()(),d(26,"h4",51),h(27,"\u54C1\u9805"),c(),d(28,"div",52)(29,"div",53),h(30,"\u54C1\u9805\u540D\u7A31"),c(),d(31,"div",54),h(32,"\u6578\u91CF"),c(),d(33,"div",54),h(34,"\u55AE\u50F9"),c(),d(35,"div",54),h(36,"\u5C0F\u8A08"),c(),x(37,"div",55),c(),d(38,"div",56),P(39,hL,8,2,"div",57,Mt),c(),d(41,"button",58),D("click",function(){T(t);let r=C();return I(r.addItem())}),h(42,"+ \u65B0\u589E\u54C1\u9805"),c(),d(43,"div",59),h(44),c(),d(45,"div",60)(46,"button",61),D("click",function(){T(t);let r=C();return I(r.closeModal())}),h(47,"\u53D6\u6D88"),c(),d(48,"button",62),h(49,"\u5132\u5B58"),c()()()()()()}if(n&2){let t,i=C();g(4),S(i.editingPO()?"\u7DE8\u8F2F\u9032\u8CA8\u55AE":"\u65B0\u589E\u9032\u8CA8\u55AE"),g(4),k("formGroup",i.poForm),g(16),F(i.allVendors()),g(15),F(i.poItems.controls),g(5),H("\u7E3D\u8A08: ",i.formatCurrency((t=i.poForm.get("totalAmount"))==null?null:t.value))}}var ds=class ds{constructor(){this.dataService=R(Te);this.fb=R(Ge);this.isModalOpen=w(!1);this.allVendors=w([]);this.allPOs=w([]);this.editingPO=w(null);this.poForm=this.fb.group({id:[""],poNumber:["",V.required],vendorId:["",V.required],date:["",V.required],items:this.fb.array([]),totalAmount:[0]});this.poSearchTerm=w("");this.selectedPOVendor=w("");this.poStartDate=w("");this.poEndDate=w("");this.filteredPOs=Y(()=>{let e=this.poSearchTerm().toLowerCase(),t=this.selectedPOVendor(),i=this.poStartDate(),r=this.poEndDate(),o=this.allPOs();return t&&(o=o.filter(s=>s.vendorId===t)),i&&(o=o.filter(s=>s.date>=i)),r&&(o=o.filter(s=>s.date<=r)),e&&(o=o.filter(s=>s.poNumber.toLowerCase().includes(e)||this.getVendorName(s.vendorId).toLowerCase().includes(e))),o});this.loadData(),this.poItems.valueChanges.subscribe(e=>{let t=e.reduce((i,r)=>i+(r.quantity||0)*(r.unitPrice||0),0);this.poForm.get("totalAmount")?.setValue(t,{emitEvent:!1})})}loadData(){this.allVendors.set(this.dataService.getVendors()),this.allPOs.set(this.dataService.getPurchaseOrders())}resetPOFilters(){this.poSearchTerm.set(""),this.selectedPOVendor.set(""),this.poStartDate.set(""),this.poEndDate.set("")}openModal(e=null){this.editingPO.set(e),this.poForm.reset({totalAmount:0}),this.poItems.clear(),e&&(this.poForm.patchValue(e),e.items.forEach(t=>this.addItem(t.productName,t.quantity,t.unitPrice))),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.editingPO.set(null)}get poItems(){return this.poForm.get("items")}createItem(e="",t=1,i=0){let r=this.fb.group({productName:[e,V.required],quantity:[t,[V.required,V.min(1)]],unitPrice:[i,[V.required,V.min(0)]],total:[t*i]});return r.get("quantity")?.valueChanges.subscribe(()=>this.updateItemTotal(r)),r.get("unitPrice")?.valueChanges.subscribe(()=>this.updateItemTotal(r)),r}updateItemTotal(e){let t=e.get("quantity")?.value||0,i=e.get("unitPrice")?.value||0;e.get("total")?.setValue(t*i,{emitEvent:!1})}addItem(e="",t=1,i=0){this.poItems.push(this.createItem(e,t,i))}removeItem(e){this.poItems.removeAt(e)}handlePOSubmit(){if(this.poForm.invalid)return;let e=this.poForm.getRawValue(),t={poNumber:e.poNumber,vendorId:e.vendorId,date:e.date,items:e.items,totalAmount:e.totalAmount};this.editingPO()?this.dataService.updatePurchaseOrder(q(N({},t),{id:this.editingPO().id})):this.dataService.addPurchaseOrder(t),this.loadData(),this.closeModal()}deletePurchaseOrder(e){confirm("\u78BA\u5B9A\u8981\u522A\u9664\u6B64\u9032\u8CA8\u55AE\u55CE\uFF1F")&&(this.dataService.deletePurchaseOrder(e),this.loadData())}getVendorName(e){return this.allVendors().find(t=>t.id===e)?.name||"N/A"}formatCurrency(e){return e==null?"":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}};ds.\u0275fac=function(t){return new(t||ds)},ds.\u0275cmp=ae({type:ds,selectors:[["app-purchase-orders"]],decls:49,vars:6,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","add-outline"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","p-4","bg-gray-50","rounded-lg"],[1,"lg:col-span-4"],["type","text","placeholder","\u641C\u5C0B\u9032\u8CA8\u55AE\u865F\u6216\u5EE0\u5546...",1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-2"],["for","poStartDate",1,"text-sm","font-medium","text-gray-600","shrink-0"],["type","date","id","poStartDate",1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],["for","poEndDate",1,"text-sm","font-medium","text-gray-600","shrink-0"],["type","date","id","poEndDate",1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],[1,"lg:col-span-2"],[1,"w-full","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"flex","items-center","gap-2","lg:col-span-4","justify-end"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],[1,"px-4","py-3"],[1,"px-4","py-3","text-right"],[1,"border-b","hover:bg-gray-50"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"px-4","py-2","font-medium"],[1,"px-4","py-2"],[1,"px-4","py-2","text-right","font-semibold"],["title","\u7DE8\u8F2F",1,"text-indigo-600","hover:text-indigo-800","p-1",3,"click"],["name","create-outline",1,"text-lg"],["title","\u522A\u9664",1,"text-red-500","hover:text-red-700","p-1",3,"click"],["name","trash-outline",1,"text-lg"],["colspan","5",1,"text-center","py-8","text-gray-500"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","close-outline",1,"text-2xl"],[1,"p-6","overflow-y-auto"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block"],[1,"text-gray-700"],["formControlName","poNumber",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["type","date","formControlName","date",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["formControlName","vendorId",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["value","","disabled",""],[1,"font-semibold","pt-4","border-t"],[1,"grid","grid-cols-12","gap-2","px-2","pb-1","text-xs","font-medium","text-gray-500"],[1,"col-span-5"],[1,"col-span-2","text-right"],[1,"col-span-1"],["formArrayName","items",1,"space-y-2"],[1,"grid","grid-cols-12","gap-2","items-center","p-2","rounded-md","bg-gray-50",3,"formGroupName"],["type","button",1,"text-indigo-600","text-sm",3,"click"],[1,"text-right","font-bold","text-lg"],[1,"flex","justify-end","gap-4","pt-4","border-t","mt-4"],["type","button",1,"px-4","py-2","border","rounded-md",3,"click"],["type","submit",1,"px-4","py-2","bg-indigo-600","text-white","rounded-md"],["formControlName","productName","placeholder","\u54C1\u9805\u540D\u7A31",1,"col-span-5","p-1","border","border-gray-300","bg-white","rounded-md","shadow-sm"],["type","number","formControlName","quantity","placeholder","\u6578\u91CF",1,"col-span-2","p-1","border","border-gray-300","bg-white","rounded-md","shadow-sm","text-right"],["type","number","formControlName","unitPrice","placeholder","\u55AE\u50F9",1,"col-span-2","p-1","border","border-gray-300","bg-white","rounded-md","shadow-sm","text-right"],["type","button",1,"col-span-1","text-red-500",3,"click"],["name","remove-circle-outline"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u9032\u8CA8\u55AE\u7BA1\u7406"),c(),d(4,"button",3),D("click",function(){return i.openModal()}),x(5,"ion-icon",4),d(6,"span"),h(7,"\u65B0\u589E\u9032\u8CA8\u55AE"),c()()(),d(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"input",9),D("ngModelChange",function(o){return i.poSearchTerm.set(o)}),c()(),d(13,"div",10)(14,"label",11),h(15,"\u5F9E:"),c(),d(16,"input",12),D("ngModelChange",function(o){return i.poStartDate.set(o)}),c()(),d(17,"div",10)(18,"label",13),h(19,"\u81F3:"),c(),d(20,"input",14),D("ngModelChange",function(o){return i.poEndDate.set(o)}),c()(),d(21,"div",15)(22,"select",16),D("ngModelChange",function(o){return i.selectedPOVendor.set(o)}),d(23,"option",17),h(24,"\u6240\u6709\u5EE0\u5546"),c(),P(25,dL,2,2,"option",18,mg),c()(),d(27,"div",19)(28,"button",20),D("click",function(){return i.resetPOFilters()}),x(29,"ion-icon",21),c()()(),d(30,"div",22)(31,"table",23)(32,"thead",24)(33,"tr")(34,"th",25),h(35,"\u9032\u8CA8\u55AE\u865F"),c(),d(36,"th",25),h(37,"\u5EE0\u5546"),c(),d(38,"th",25),h(39,"\u65E5\u671F"),c(),d(40,"th",26),h(41,"\u7E3D\u91D1\u984D"),c(),d(42,"th",25),h(43,"\u64CD\u4F5C"),c()()(),d(44,"tbody"),P(45,fL,15,4,"tr",27,mg,!1,pL,3,0,"tr"),c()()()()()(),B(48,gL,50,3,"div",28)),t&2&&(g(12),k("ngModel",i.poSearchTerm()),g(4),k("ngModel",i.poStartDate()),g(4),k("ngModel",i.poEndDate()),g(2),k("ngModel",i.selectedPOVendor()),g(3),F(i.allVendors()),g(20),F(i.filteredPOs()),g(3),U(i.isModalOpen()?48:-1))},dependencies:[ye,qe,Xe,Ve,Be,we,on,Fe,_e,$e,Le,He,Kn,Qn,ke,Ne],encapsulation:2,changeDetection:0});var Zd=ds;var yL=(n,e)=>e.name,vL=(n,e)=>e.month,_L=(n,e)=>e.id;function CL(n,e){if(n&1&&(d(0,"option",7),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u5E74")}}function EL(n,e){if(n&1&&(d(0,"option",7),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),H("",t,"\u6708")}}function xL(n,e){if(n&1){let t=$();d(0,"tr",36),D("click",function(){let r=T(t).$implicit,o=C();return I(o.openHistoryModal(r))}),d(1,"td",37),h(2),c(),d(3,"td",33),h(4),c(),d(5,"td",33),h(6),c(),d(7,"td",33),h(8),c()()}if(n&2){let t=e.$implicit,i=C();g(2),S(t.name),g(2),S(i.formatCurrency(t.currentMonthRebate)),g(2),S(i.formatCurrency(t.unpaidRebate)),g(2),S(i.formatCurrency(t.cumulativeRebate))}}function SL(n,e){n&1&&(d(0,"tr")(1,"td",38),h(2," \u76EE\u524D\u6C92\u6709\u80A1\u6771\u56DE\u994B\u91D1\u8CC7\u6599\u3002 "),c()())}function DL(n,e){if(n&1){let t=$();d(0,"tr",36),D("click",function(){let r=T(t).$implicit,o=C(2);return I(o.openDetailModal(r))}),d(1,"td",50),h(2),c(),d(3,"td",49),h(4),c(),d(5,"td",49),h(6),c()()}if(n&2){let t=e.$implicit,i=C(2);g(2),Ot("",t.year,"/",t.month),g(2),S(i.formatCurrency(t.totalRebate)),g(2),S(i.formatCurrency(t.unpaidRebate))}}function bL(n,e){n&1&&(d(0,"tr")(1,"td",51),h(2,"\u7121\u6B77\u53F2\u7D00\u9304"),c()())}function wL(n,e){if(n&1){let t=$();d(0,"div",39),D("click",function(){T(t);let r=C();return I(r.closeHistoryModal())}),d(1,"div",40),D("click",function(r){return T(t),I(r.stopPropagation())}),d(2,"div",41)(3,"h3",42),h(4),c(),d(5,"button",43),D("click",function(){T(t);let r=C();return I(r.closeHistoryModal())}),x(6,"ion-icon",44),c()(),d(7,"div",45)(8,"table",46)(9,"thead",47)(10,"tr")(11,"th",48),h(12,"\u6708\u4EFD"),c(),d(13,"th",49),h(14,"\u56DE\u994B\u91D1\u7E3D\u984D"),c(),d(15,"th",49),h(16,"\u672A\u4ED8\u91D1\u984D"),c()()(),d(17,"tbody"),P(18,DL,7,4,"tr",29,vL,!1,bL,3,0,"tr"),c()()()()()}if(n&2){let t=C();g(4),H("\u56DE\u994B\u91D1\u7D00\u9304 - ",e.name),g(14),F(t.monthlyHistory())}}function TL(n,e){n&1&&x(0,"ion-icon",66)}function IL(n,e){n&1&&x(0,"input",67)}function ML(n,e){if(n&1&&h(0),n&2){let t=C().$implicit,i=C(2);H(" ",i.formatCurrency(t.invoiceAmount)," ")}}function AL(n,e){n&1&&x(0,"input",68)}function RL(n,e){if(n&1&&h(0),n&2){let t=C().$implicit;H(" ",t.rebatePercentage,"% ")}}function NL(n,e){if(n&1){let t=$();d(0,"div",70)(1,"button",72),D("click",function(){T(t);let r=C(3);return I(r.saveEditing())}),x(2,"ion-icon",73),c(),d(3,"button",74),D("click",function(){T(t);let r=C(3);return I(r.cancelEditing())}),x(4,"ion-icon",75),c()()}}function PL(n,e){if(n&1){let t=$();d(0,"button",76),D("click",function(){T(t);let r=C().$implicit,o=C(2);return I(o.startEditing(r))}),x(1,"ion-icon",77),c()}}function FL(n,e){if(n&1&&(d(0,"tr",65)(1,"td",58),B(2,TL,1,0,"ion-icon",66),c(),d(3,"td",56),h(4),c(),d(5,"td",56),h(6),c(),d(7,"td",57),B(8,IL,1,0,"input",67)(9,ML,1,1),c(),d(10,"td",58),B(11,AL,1,0,"input",68)(12,RL,1,1),c(),d(13,"td",69),h(14),c(),d(15,"td",56),h(16),c(),d(17,"td",58),B(18,NL,5,0,"div",70)(19,PL,2,0,"button",71),c()()),n&2){let t=e.$implicit,i=C(2);J("bg-yellow-50",t.isEdited),g(2),U(t.isEdited?2:-1),g(2),S(t.checkoutTime),g(2),S(t.discountDetails),g(2),U(i.editingTxId()===t.id?8:9),g(3),U(i.editingTxId()===t.id?11:12),g(3),S(i.formatCurrency(t.rebateAmount)),g(2),S(t.discountUsed),g(2),U(i.editingTxId()===t.id?18:19)}}function kL(n,e){n&1&&(d(0,"tr")(1,"td",78),h(2,"\u6B64\u6708\u4EFD\u7121\u56DE\u994B\u91D1\u660E\u7D30"),c()())}function OL(n,e){if(n&1){let t=$();d(0,"div",52),D("click",function(){T(t);let r=C();return I(r.closeDetailModal())}),d(1,"div",53),D("click",function(r){return T(t),I(r.stopPropagation())}),d(2,"div",41)(3,"h3",42),h(4),c(),d(5,"button",43),D("click",function(){T(t);let r=C();return I(r.closeDetailModal())}),x(6,"ion-icon",44),c()(),d(7,"div",54)(8,"table",25)(9,"thead",26)(10,"tr"),x(11,"th",55),d(12,"th",56),h(13,"\u7D50\u5E33\u6642\u9593"),c(),d(14,"th",56),h(15,"\u6298\u6263\u91D1\u984D\u7D30\u9805"),c(),d(16,"th",57),h(17,"\u767C\u7968\u91D1\u984D"),c(),d(18,"th",58),h(19,"\u56DE\u994B%"),c(),d(20,"th",57),h(21,"\u56DE\u994B\u91D1"),c(),d(22,"th",56),h(23,"\u4F7F\u7528\u6298\u6263"),c(),d(24,"th",59),h(25,"\u64CD\u4F5C"),c()()(),d(26,"tbody"),P(27,FL,20,10,"tr",60,_L,!1,kL,3,0,"tr"),c(),d(30,"tfoot",61)(31,"tr")(32,"td",62),h(33,"\u7E3D\u56DE\u994B\u91D1:"),c(),d(34,"td",63),h(35),c(),x(36,"td",64),c()()()()()()}if(n&2){let t,i=e,r=C();g(4),hn("\u56DE\u994B\u91D1\u660E\u7D30 - ",(t=r.selectedShareholder())==null?null:t.name," (",i.year,"/",i.month,")"),g(3),k("formGroup",r.editForm),g(20),F(r.rebateTransactions()),g(8),S(r.formatCurrency(r.detailModalTotal()))}}var fs=class fs{constructor(){this.dataService=R(Te);this.fb=R(Ge);this.rebates=w([]);this.availableYears=w([2024,2025,2026]);this.availableMonths=w(Array.from({length:12},(e,t)=>t+1));this.selectedYear=w(2024);this.selectedMonth=w(8);this.selectedShareholder=w(null);this.isHistoryModalOpen=w(!1);this.monthlyHistory=w([]);this.selectedHistoryEntry=w(null);this.isDetailModalOpen=w(!1);this.rebateTransactions=w([]);this.editingTxId=w(null);this.editForm=this.fb.group({invoiceAmount:[0,[V.required,V.min(0)]],rebatePercentage:[0,[V.required,V.min(0),V.max(100)]]});this.totals=Y(()=>{let e=this.rebates();return{currentMonth:e.reduce((t,i)=>t+i.currentMonthRebate,0),unpaid:e.reduce((t,i)=>t+i.unpaidRebate,0),cumulative:e.reduce((t,i)=>t+i.cumulativeRebate,0)}});this.detailModalTotal=Y(()=>this.rebateTransactions().reduce((e,t)=>e+t.rebateAmount,0));this.applyFilter()}applyFilter(){this.rebates.set(this.dataService.getShareholderRebates(this.selectedYear(),this.selectedMonth()))}resetFilter(){this.selectedYear.set(2024),this.selectedMonth.set(8),this.applyFilter()}openHistoryModal(e){this.selectedShareholder.set(e),this.monthlyHistory.set(this.dataService.getMonthlyRebateHistory(e.name)),this.isHistoryModalOpen.set(!0)}closeHistoryModal(){this.isHistoryModalOpen.set(!1),this.selectedShareholder.set(null),this.monthlyHistory.set([])}openDetailModal(e){let t=this.selectedShareholder()?.name;t&&(this.selectedHistoryEntry.set(e),this.rebateTransactions.set(this.dataService.getRebateTransactions(t,e.year,e.month)),this.isDetailModalOpen.set(!0))}closeDetailModal(){this.isDetailModalOpen.set(!1),this.selectedHistoryEntry.set(null),this.rebateTransactions.set([]),this.editingTxId.set(null)}startEditing(e){this.editingTxId.set(e.id),this.editForm.setValue({invoiceAmount:e.invoiceAmount,rebatePercentage:e.rebatePercentage})}cancelEditing(){this.editingTxId.set(null)}saveEditing(){let e=this.editingTxId(),t=this.rebateTransactions().find(s=>s.id===e);if(!e||!t||this.editForm.invalid)return;let i=this.editForm.value,r=Math.round(i.invoiceAmount*i.rebatePercentage/100),o=q(N({},t),{invoiceAmount:i.invoiceAmount,rebatePercentage:i.rebatePercentage,rebateAmount:r});this.dataService.updateRebateTransaction(o),this.refreshModalData(),this.editingTxId.set(null)}refreshModalData(){let e=this.selectedHistoryEntry(),t=this.selectedShareholder();e&&t&&this.rebateTransactions.set(this.dataService.getRebateTransactions(t.name,e.year,e.month)),t&&this.monthlyHistory.set(this.dataService.getMonthlyRebateHistory(t.name))}formatCurrency(e){return e==null?"":e.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0})}};fs.\u0275fac=function(t){return new(t||fs)},fs.\u0275cmp=ae({type:fs,selectors:[["app-shareholder-rebates"]],decls:75,vars:11,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","flex-col","sm:flex-row","items-center","gap-2","bg-white","p-3","rounded-xl","shadow-md","border","border-gray-200"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-600"],[1,"border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-100","pr-8",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","items-center","gap-2","mt-2","sm:mt-0"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","filter-outline"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-white","p-6","rounded-xl","shadow-md","flex","items-center","space-x-4"],[1,"bg-green-100","p-3","rounded-full"],["name","cash-outline",1,"text-2xl","text-green-600"],[1,"text-sm","text-gray-500"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"bg-yellow-100","p-3","rounded-full"],["name","wallet-outline",1,"text-2xl","text-yellow-600"],[1,"bg-indigo-100","p-3","rounded-full"],["name","server-outline",1,"text-2xl","text-indigo-600"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-100"],[1,"px-6","py-3"],[1,"px-6","py-3","text-right"],[1,"border-b","hover:bg-gray-50","cursor-pointer"],[1,"font-bold","bg-gray-100","text-base"],[1,"border-t-2"],[1,"px-6","py-4"],[1,"px-6","py-4","text-right"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-40"],[1,"fixed","inset-0","bg-black","bg-opacity-60","flex","items-center","justify-center","z-50"],[1,"border-b","hover:bg-gray-50","cursor-pointer",3,"click"],[1,"px-6","py-4","font-medium","text-gray-900"],["colspan","4",1,"text-center","py-8","text-gray-500"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-40",3,"click"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col","m-4",3,"click"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","close-outline",1,"text-2xl"],[1,"p-6","overflow-y-auto"],[1,"w-full","text-sm","text-left"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],[1,"px-4","py-2"],[1,"px-4","py-2","text-right"],[1,"px-4","py-2","font-medium"],["colspan","3",1,"text-center","py-6","text-gray-500"],[1,"fixed","inset-0","bg-black","bg-opacity-60","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-5xl","max-h-[90vh]","flex","flex-col","m-4",3,"click"],[1,"p-6","overflow-y-auto",3,"formGroup"],[1,"px-2","py-2","w-12"],[1,"px-2","py-2"],[1,"px-2","py-2","text-right"],[1,"px-2","py-2","text-center"],[1,"px-2","py-2","w-24","text-center"],[1,"border-b",3,"bg-yellow-50"],[1,"font-bold","bg-gray-100"],["colspan","5",1,"px-2","py-3","text-right"],[1,"px-2","py-3","text-right"],["colspan","2"],[1,"border-b"],["name","pencil-outline","title","\u5DF2\u7DE8\u8F2F",1,"text-yellow-600"],["type","number","formControlName","invoiceAmount",1,"w-24","p-1","text-right","border","rounded-md","bg-white"],["type","number","formControlName","rebatePercentage",1,"w-16","p-1","text-right","border","rounded-md","bg-white"],[1,"px-2","py-2","text-right","font-semibold"],[1,"flex","items-center","justify-center","gap-1"],["title","\u7DE8\u8F2F",1,"text-indigo-600","p-1","hover:bg-indigo-100","rounded-full"],["title","\u5132\u5B58",1,"text-green-600","p-1","hover:bg-green-100","rounded-full",3,"click"],["name","checkmark-circle-outline",1,"text-xl"],["title","\u53D6\u6D88",1,"text-gray-500","p-1","hover:bg-gray-100","rounded-full",3,"click"],["name","close-circle-outline",1,"text-xl"],["title","\u7DE8\u8F2F",1,"text-indigo-600","p-1","hover:bg-indigo-100","rounded-full",3,"click"],["name","create-outline",1,"text-xl"],["colspan","8",1,"text-center","py-6","text-gray-500"]],template:function(t,i){if(t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u80A1\u6771\u56DE\u994B\u91D1"),c(),d(4,"div",3)(5,"div",4)(6,"label",5),h(7,"\u6642\u9593:"),c(),d(8,"select",6),de("ngModelChange",function(o){return fe(i.selectedYear,o)||(i.selectedYear=o),o}),P(9,CL,2,2,"option",7,j),c(),d(11,"select",6),de("ngModelChange",function(o){return fe(i.selectedMonth,o)||(i.selectedMonth=o),o}),P(12,EL,2,2,"option",7,j),c()(),d(14,"div",8)(15,"button",9),D("click",function(){return i.applyFilter()}),x(16,"ion-icon",10),d(17,"span"),h(18,"\u5957\u7528"),c()(),d(19,"button",11),D("click",function(){return i.resetFilter()}),x(20,"ion-icon",12),c()()()(),d(21,"div",13)(22,"div",14)(23,"div",15),x(24,"ion-icon",16),c(),d(25,"div")(26,"p",17),h(27,"\u7576\u6708\u56DE\u994B\u91D1 \u7E3D\u8A08"),c(),d(28,"p",18),h(29),c()()(),d(30,"div",14)(31,"div",19),x(32,"ion-icon",20),c(),d(33,"div")(34,"p",17),h(35,"\u7D2F\u8A08\u672A\u4ED8\u56DE\u994B\u91D1 \u7E3D\u8A08"),c(),d(36,"p",18),h(37),c()()(),d(38,"div",14)(39,"div",21),x(40,"ion-icon",22),c(),d(41,"div")(42,"p",17),h(43,"\u7D2F\u8A08\u7E3D\u56DE\u994B\u91D1 \u7E3D\u8A08"),c(),d(44,"p",18),h(45),c()()()(),d(46,"div",23)(47,"div",24)(48,"table",25)(49,"thead",26)(50,"tr")(51,"th",27),h(52,"\u540D\u7A31"),c(),d(53,"th",28),h(54,"\u7576\u6708\u56DE\u994B\u91D1"),c(),d(55,"th",28),h(56,"\u672A\u4ED8\u56DE\u994B\u91D1"),c(),d(57,"th",28),h(58,"\u7D2F\u8A08\u7E3D\u56DE\u994B\u91D1"),c()()(),d(59,"tbody"),P(60,xL,9,4,"tr",29,yL,!1,SL,3,0,"tr"),c(),d(63,"tfoot",30)(64,"tr",31)(65,"td",32),h(66,"\u7E3D\u8A08"),c(),d(67,"td",33),h(68),c(),d(69,"td",33),h(70),c(),d(71,"td",33),h(72),c()()()()()()(),B(73,wL,21,2,"div",34),B(74,OL,37,6,"div",35)),t&2){let r,o;g(8),ce("ngModel",i.selectedYear),g(),F(i.availableYears()),g(2),ce("ngModel",i.selectedMonth),g(),F(i.availableMonths()),g(17),S(i.formatCurrency(i.totals().currentMonth)),g(8),S(i.formatCurrency(i.totals().unpaid)),g(8),S(i.formatCurrency(i.totals().cumulative)),g(15),F(i.rebates()),g(8),S(i.formatCurrency(i.totals().currentMonth)),g(2),S(i.formatCurrency(i.totals().unpaid)),g(2),S(i.formatCurrency(i.totals().cumulative)),g(),U((r=i.isHistoryModalOpen()&&i.selectedShareholder())?73:-1,r),g(),U((o=i.isDetailModalOpen()&&i.selectedHistoryEntry())?74:-1,o)}},dependencies:[ye,ke,Ve,Be,we,on,Fe,_e,$e,Ne,qe,Le,He],encapsulation:2,changeDetection:0});var Xd=fs;var LL=(n,e)=>e.id;function VL(n,e){if(n&1&&(d(0,"div")(1,"h4",19),h(2,"\u884C\u52D5\u4E8B\u9805"),c(),d(3,"p",21),h(4),c()()),n&2){let t=C(2).$implicit;g(4),S(t.actionItems)}}function BL(n,e){if(n&1&&(d(0,"div",18)(1,"div")(2,"h4",19),h(3,"\u8207\u6703\u4EBA\u54E1"),c(),d(4,"p",20),h(5),c()(),d(6,"div")(7,"h4",19),h(8,"\u6703\u8B70\u8A18\u9304"),c(),d(9,"p",21),h(10),c()(),B(11,VL,5,1,"div"),c()),n&2){let t=C().$implicit;g(5),S(t.attendees),g(5),S(t.notes),g(),U(t.actionItems?11:-1)}}function UL(n,e){if(n&1){let t=$();d(0,"div",6)(1,"div",9),D("click",function(){let r=T(t).$implicit,o=C();return I(o.toggleMeeting(r.id))}),d(2,"div")(3,"p",10),h(4),c(),d(5,"h3",11),h(6),c()(),d(7,"div",12)(8,"button",13),D("click",function(r){let o=T(t).$implicit,s=C();return r.stopPropagation(),I(s.openModal(o))}),x(9,"ion-icon",14),c(),d(10,"button",15),D("click",function(r){let o=T(t).$implicit,s=C();return r.stopPropagation(),I(s.requestDelete(o))}),x(11,"ion-icon",16),c(),x(12,"ion-icon",17),c()(),B(13,BL,12,3,"div",18),c()}if(n&2){let t=e.$implicit,i=C();g(4),S(t.date),g(2),S(t.title),g(6),J("rotate-180",i.openMeetingId()===t.id),g(),U(i.openMeetingId()===t.id?13:-1)}}function HL(n,e){n&1&&(d(0,"div",7),h(1," \u5C1A\u7121\u6703\u8B70\u7D00\u9304\uFF0C\u9EDE\u64CA\u300C\u65B0\u589E\u6703\u8B70\u300D\u4F86\u5EFA\u7ACB\u7B2C\u4E00\u7B46\u7D00\u9304\u3002 "),c())}function $L(n,e){if(n&1){let t=$();d(0,"div",8)(1,"div",22)(2,"div",23)(3,"h3",24),h(4),c(),d(5,"button",25),D("click",function(){T(t);let r=C();return I(r.closeModal())}),x(6,"ion-icon",26),c()(),d(7,"div",27)(8,"form",28),D("ngSubmit",function(){T(t);let r=C();return I(r.handleFormSubmit())}),d(9,"div",29)(10,"div")(11,"label",30),h(12,"\u65E5\u671F*"),c(),x(13,"input",31),c(),d(14,"div",32)(15,"label",33),h(16,"\u6A19\u984C*"),c(),x(17,"input",34),c()(),d(18,"div")(19,"label",35),h(20,"\u8207\u6703\u4EBA\u54E1*"),c(),x(21,"input",36),c(),d(22,"div")(23,"label",37),h(24,"\u6703\u8B70\u8A18\u9304*"),c(),x(25,"textarea",38),c(),d(26,"div")(27,"label",39),h(28,"\u884C\u52D5\u4E8B\u9805"),c(),x(29,"textarea",40),c(),d(30,"div",41)(31,"button",42),D("click",function(){T(t);let r=C();return I(r.closeModal())}),h(32,"\u53D6\u6D88"),c(),d(33,"button",43),h(34,"\u5132\u5B58"),c()()()()()()}if(n&2){let t=C();g(4),S(t.editingMeeting()?"\u7DE8\u8F2F\u6703\u8B70":"\u65B0\u589E\u6703\u8B70"),g(4),k("formGroup",t.meetingForm),g(25),k("disabled",t.meetingForm.invalid)}}function GL(n,e){if(n&1){let t=$();d(0,"div",8)(1,"div",44)(2,"div",45)(3,"div",46),x(4,"ion-icon",47),c(),d(5,"h3",48),h(6,"\u78BA\u5B9A\u8981\u522A\u9664\u55CE\uFF1F"),c(),d(7,"p",49),h(8),c()(),d(9,"div",50)(10,"button",42),D("click",function(){T(t);let r=C();return I(r.cancelDelete())}),h(11,"\u53D6\u6D88"),c(),d(12,"button",51),D("click",function(){T(t);let r=C();return I(r.confirmDelete())}),h(13,"\u78BA\u8A8D\u522A\u9664"),c()()()()}n&2&&(g(8),H("\u60A8\u78BA\u5B9A\u8981\u522A\u9664\u6703\u8B70\u7D00\u9304\u300C",e.title,"\u300D\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002"))}var ps=class ps{constructor(){this.fb=R(Ge);this.isModalOpen=w(!1);this.editingMeeting=w(null);this.openMeetingId=w(null);this.meetingToDelete=w(null);this.meetings=w([{id:"MEET001",date:"2024-07-30",title:"\u7B2C\u4E09\u5B63\u8CA1\u52D9\u6AA2\u8A0E",attendees:"\u80A1\u6771 A, \u80A1\u6771 B, \u8CA1\u52D9\u9577",notes:`1. \u8A0E\u8AD6\u7B2C\u4E09\u5B63\u5EA6\u7684\u71DF\u6536\u72C0\u6CC1\uFF0C\u6574\u9AD4\u8868\u73FE\u512A\u65BC\u9810\u671F\u3002
2. \u5206\u6790\u5404\u7522\u54C1\u7DDA\u7684\u5229\u6F64\u7387\uFF0C\u767C\u73FE\u96EA\u8304\u7522\u54C1\u7684\u6210\u672C\u6709\u4E0A\u5347\u8DA8\u52E2\u3002`,actionItems:`1. \u8CA1\u52D9\u90E8\u9700\u5728\u4E00\u9031\u5167\u63D0\u4EA4\u96EA\u8304\u6210\u672C\u4E0A\u5347\u7684\u8A73\u7D30\u5206\u6790\u5831\u544A\u3002
2. \u80A1\u6771 B \u8CA0\u8CAC\u7814\u7A76\u65B0\u7684\u4F9B\u61C9\u5546\u4EE5\u964D\u4F4E\u6210\u672C\u3002`},{id:"MEET002",date:"2024-07-25",title:"\u884C\u92B7\u6D3B\u52D5 brainstorm",attendees:"\u80A1\u6771 C, \u884C\u92B7\u5718\u968A",notes:"\u8A0E\u8AD6\u4E0B\u534A\u5E74\u5EA6\u7684\u884C\u92B7\u7B56\u7565\uFF0C\u4E3B\u8981\u96C6\u4E2D\u5728 VIP \u5BA2\u6236\u7684\u7DAD\u7E6B\u3002",actionItems:`1. \u884C\u92B7\u5718\u968A\u63D0\u51FA\u5169\u500B VIP \u5C08\u5C6C\u6D3B\u52D5\u65B9\u6848\u3002
2. \u9810\u7B97\u521D\u4F30\u9700\u5728\u4E0B\u9031\u4E09\u524D\u5B8C\u6210\u3002`}]);this.sortedMeetings=Y(()=>this.meetings().sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()));this.meetingForm=this.fb.group({date:["",V.required],title:["",V.required],attendees:["",V.required],notes:["",V.required],actionItems:[""]})}toggleMeeting(e){this.openMeetingId.update(t=>t===e?null:e)}openModal(e=null){this.editingMeeting.set(e),e?this.meetingForm.patchValue(e):this.meetingForm.reset({date:new Date().toISOString().split("T")[0]}),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.editingMeeting.set(null)}handleFormSubmit(){if(this.meetingForm.invalid)return;let e=this.meetingForm.value,t=this.editingMeeting(),i={date:e.date,title:e.title,attendees:e.attendees,notes:e.notes,actionItems:e.actionItems||""};t?this.meetings.update(r=>r.map(o=>o.id===t.id?N(N({},o),i):o)):this.meetings.update(r=>[...r,N({id:`MEET${Date.now()}`},i)]),this.closeModal()}requestDelete(e){this.meetingToDelete.set(e)}confirmDelete(){if(!this.meetingToDelete())return;let e=this.meetingToDelete().id;this.meetings.update(t=>t.filter(i=>i.id!==e)),this.cancelDelete()}cancelDelete(){this.meetingToDelete.set(null)}};ps.\u0275fac=function(t){return new(t||ps)},ps.\u0275cmp=ae({type:ps,selectors:[["app-meeting"]],decls:14,vars:3,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","add-outline"],[1,"space-y-4"],[1,"bg-white","rounded-xl","shadow-md","overflow-hidden"],[1,"bg-white","p-6","rounded-xl","shadow-md","text-center","text-gray-500"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"p-4","flex","justify-between","items-center","cursor-pointer","hover:bg-gray-50",3,"click"],[1,"font-semibold","text-indigo-700"],[1,"text-lg","font-bold","text-gray-800"],[1,"flex","items-center","gap-2"],["title","\u7DE8\u8F2F",1,"text-gray-500","hover:text-indigo-600","p-2","rounded-full","hover:bg-gray-100",3,"click"],["name","create-outline"],["title","\u522A\u9664",1,"text-gray-500","hover:text-red-600","p-2","rounded-full","hover:bg-gray-100",3,"click"],["name","trash-outline"],["name","chevron-down-outline",1,"text-gray-500","transition-transform"],[1,"p-6","border-t","bg-gray-50/50","space-y-4","text-sm"],[1,"font-semibold","text-gray-600","mb-1"],[1,"text-gray-800"],[1,"text-gray-800","whitespace-pre-wrap"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col","m-4"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","close-outline",1,"text-2xl"],[1,"p-6","overflow-y-auto"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","formControlName","date",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],[1,"md:col-span-2"],["for","title",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","title","formControlName","title",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","attendees",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","attendees","formControlName","attendees","placeholder","\u8ACB\u7528\u9017\u865F\u5206\u9694",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","notes",1,"block","text-sm","font-medium","text-gray-700"],["id","notes","formControlName","notes","rows","5",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","actionItems",1,"block","text-sm","font-medium","text-gray-700"],["id","actionItems","formControlName","actionItems","rows","3",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],[1,"flex","justify-end","gap-4","pt-4","border-t","mt-4"],["type","button",1,"px-4","py-2","border","rounded-md",3,"click"],["type","submit",1,"px-4","py-2","bg-indigo-600","text-white","rounded-md","disabled:bg-indigo-300",3,"disabled"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-md","m-4"],[1,"p-6","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["name","warning-outline",1,"h-6","w-6","text-red-600"],[1,"mt-4","text-lg","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-500"],[1,"flex","justify-center","gap-4","bg-gray-50","px-6","py-4","rounded-b-xl"],["type","button",1,"px-4","py-2","bg-red-600","text-white","rounded-md","hover:bg-red-700",3,"click"]],template:function(t,i){if(t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u958B\u6703\u7D00\u9304"),c(),d(4,"button",3),D("click",function(){return i.openModal(null)}),x(5,"ion-icon",4),d(6,"span"),h(7,"\u65B0\u589E\u6703\u8B70"),c()()(),d(8,"div",5),P(9,UL,14,5,"div",6,LL,!1,HL,2,0,"div",7),c()(),B(12,$L,35,3,"div",8),B(13,GL,14,1,"div",8)),t&2){let r;g(9),F(i.sortedMeetings()),g(3),U(i.isModalOpen()?12:-1),g(),U((r=i.meetingToDelete())?13:-1,r)}},dependencies:[ye,qe,Xe,we,_e,$e,Le,He],encapsulation:2,changeDetection:0});var ef=ps;var tf=(n,e)=>e.id;function qL(n,e){if(n&1&&(d(0,"option",13),h(1),c()),n&2){let t=e.$implicit;k("value",t),g(),S(t)}}function WL(n,e){if(n&1&&(d(0,"option",13),h(1),c()),n&2){let t=e.$implicit;k("value",t.id),g(),S(t.name)}}function zL(n,e){if(n&1){let t=$();d(0,"tr",37)(1,"td",38)(2,"span",39),h(3),c()(),d(4,"td",40),h(5),c(),d(6,"td",41),h(7),c(),d(8,"td",38),h(9),c(),d(10,"td",42),h(11),c(),d(12,"td",38)(13,"div",3)(14,"button",43),D("click",function(){let r=T(t).$implicit,o=C(2).$implicit,s=C();return I(s.openRecordModal(o.id,r))}),x(15,"ion-icon",44),c(),d(16,"button",45),D("click",function(){let r=T(t).$implicit,o=C(2).$implicit,s=C();return I(s.requestDeleteRecord(o.id,r))}),x(17,"ion-icon",46),c()()()()}if(n&2){let t=e.$implicit,i=C(3);g(3),S(t.category),g(2),S(t.goal),g(2),S(t.progress),g(2),S(i.getShareholderName(t.assigneeId)),g(2),S(t.lastUpdated)}}function jL(n,e){n&1&&(d(0,"tr")(1,"td",47),h(2,"\u6B64\u65E5\u671F\u5C1A\u7121\u9032\u5EA6\u5831\u544A\uFF0C\u9EDE\u64CA\u300C\u65B0\u589E\u9032\u5EA6\u300D\u4F86\u5EFA\u7ACB\u7B2C\u4E00\u7B46\u3002"),c()())}function YL(n,e){if(n&1&&(d(0,"div",32)(1,"div",33)(2,"table",34)(3,"thead",35)(4,"tr")(5,"th",36),h(6,"\u5206\u985E"),c(),d(7,"th",36),h(8,"\u76EE\u6A19"),c(),d(9,"th",36),h(10,"\u9032\u5EA6"),c(),d(11,"th",36),h(12,"\u8CA0\u8CAC\u4EBA"),c(),d(13,"th",36),h(14,"\u6700\u5F8C\u66F4\u65B0"),c(),d(15,"th",36),h(16,"\u64CD\u4F5C"),c()()(),d(17,"tbody"),P(18,zL,18,5,"tr",37,tf,!1,jL,3,0,"tr"),c()()()()),n&2){let t=C().$implicit;g(18),F(t.records)}}function JL(n,e){if(n&1){let t=$();d(0,"div",20)(1,"div",23),D("click",function(){let r=T(t).$implicit,o=C();return I(o.toggleMeeting(r.id))}),d(2,"h3",24),h(3),c(),d(4,"div",3)(5,"button",25),D("click",function(r){let o=T(t).$implicit,s=C();return r.stopPropagation(),I(s.openRecordModal(o.id,null))}),x(6,"ion-icon",26),d(7,"span"),h(8,"\u65B0\u589E\u9032\u5EA6"),c()(),d(9,"button",27),D("click",function(r){let o=T(t).$implicit,s=C();return r.stopPropagation(),I(s.openMeetingModal(o))}),x(10,"ion-icon",28),c(),d(11,"button",29),D("click",function(r){let o=T(t).$implicit,s=C();return r.stopPropagation(),I(s.requestDeleteMeeting(o))}),x(12,"ion-icon",30),c(),x(13,"ion-icon",31),c()(),B(14,YL,21,1,"div",32),c()}if(n&2){let t=e.$implicit,i=C();g(3),S(t.date),g(10),J("rotate-180",i.openMeetingId()===t.id),g(),U(i.openMeetingId()===t.id?14:-1)}}function KL(n,e){n&1&&(d(0,"div",21),h(1,"\u7121\u7B26\u5408\u7BE9\u9078\u689D\u4EF6\u7684\u6703\u8B70\u7D00\u9304\u3002"),c())}function QL(n,e){if(n&1){let t=$();d(0,"div",22)(1,"div",48)(2,"div",49)(3,"h3",50),h(4),c(),d(5,"button",51),D("click",function(){T(t);let r=C();return I(r.closeMeetingModal())}),x(6,"ion-icon",52),c()(),d(7,"div",53)(8,"form",54),D("ngSubmit",function(){T(t);let r=C();return I(r.handleMeetingSubmit())}),d(9,"div")(10,"label",55),h(11,"\u65E5\u671F*"),c(),x(12,"input",56),c(),d(13,"div",57)(14,"button",58),D("click",function(){T(t);let r=C();return I(r.closeMeetingModal())}),h(15,"\u53D6\u6D88"),c(),d(16,"button",59),h(17,"\u5132\u5B58"),c()()()()()()}if(n&2){let t=C();g(4),S(t.editingMeeting()?"\u7DE8\u8F2F\u958B\u6703\u65E5\u671F":"\u65B0\u589E\u958B\u6703\u65E5\u671F"),g(4),k("formGroup",t.meetingForm),g(8),k("disabled",t.meetingForm.invalid)}}function ZL(n,e){if(n&1&&x(0,"option",13),n&2){let t=e.$implicit;k("value",t)}}function XL(n,e){if(n&1&&(d(0,"option",13),h(1),c()),n&2){let t=e.$implicit;k("value",t.id),g(),S(t.name)}}function eV(n,e){if(n&1){let t=$();d(0,"div",22)(1,"div",60)(2,"div",49)(3,"h3",50),h(4),c(),d(5,"button",51),D("click",function(){T(t);let r=C();return I(r.closeRecordModal())}),x(6,"ion-icon",52),c()(),d(7,"div",61)(8,"form",54),D("ngSubmit",function(){T(t);let r=C();return I(r.handleRecordFormSubmit())}),d(9,"div")(10,"label",62),h(11,"\u5206\u985E*"),c(),x(12,"input",63),d(13,"datalist",64),P(14,ZL,1,1,"option",13,j),c()(),d(16,"div")(17,"label",65),h(18,"\u76EE\u6A19*"),c(),x(19,"textarea",66),c(),d(20,"div")(21,"label",67),h(22,"\u9032\u5EA6*"),c(),x(23,"textarea",68),c(),d(24,"div")(25,"label",69),h(26,"\u8CA0\u8CAC\u4EBA*"),c(),d(27,"select",70)(28,"option",71),h(29,"\u8ACB\u9078\u64C7"),c(),P(30,XL,2,2,"option",13,tf),c()(),d(32,"div",57)(33,"button",58),D("click",function(){T(t);let r=C();return I(r.closeRecordModal())}),h(34,"\u53D6\u6D88"),c(),d(35,"button",59),h(36,"\u5132\u5B58"),c()()()()()()}if(n&2){let t,i=C();g(4),S((t=i.editingRecord())!=null&&t.record?"\u7DE8\u8F2F\u9032\u5EA6":"\u65B0\u589E\u9032\u5EA6"),g(4),k("formGroup",i.recordForm),g(6),F(i.categories()),g(16),F(i.shareholders()),g(5),k("disabled",i.recordForm.invalid)}}function tV(n,e){if(n&1){let t=$();d(0,"div",75),x(1,"input",78),d(2,"button",79),D("click",function(){let r=T(t).$index,o=C(2);return I(o.removeShareholder(r))}),x(3,"ion-icon",46),c()()}if(n&2){let t=e.$index;k("formGroupName",t)}}function nV(n,e){if(n&1){let t=$();d(0,"div",22)(1,"div",72)(2,"div",49)(3,"h3",50),h(4,"\u7BA1\u7406\u80A1\u6771"),c(),d(5,"button",51),D("click",function(){T(t);let r=C();return I(r.closeShareholderModal())}),x(6,"ion-icon",52),c()(),d(7,"div",61)(8,"form",73),D("ngSubmit",function(){T(t);let r=C();return I(r.saveShareholders())}),d(9,"div",74),P(10,tV,4,1,"div",75,Mt),c(),d(12,"button",76),D("click",function(){T(t);let r=C();return I(r.addShareholder())}),h(13,"+ \u65B0\u589E\u80A1\u6771"),c(),d(14,"div",77)(15,"button",58),D("click",function(){T(t);let r=C();return I(r.closeShareholderModal())}),h(16,"\u53D6\u6D88"),c(),d(17,"button",59),h(18,"\u5132\u5B58\u8B8A\u66F4"),c()()()()()()}if(n&2){let t=C();g(8),k("formGroup",t.shareholderForm),g(2),F(t.shareholderControls),g(7),k("disabled",t.shareholderForm.invalid)}}function iV(n,e){if(n&1){let t=$();d(0,"div",22)(1,"div",80)(2,"div",81)(3,"div",82),x(4,"ion-icon",83),c(),d(5,"h3",84),h(6,"\u78BA\u5B9A\u8981\u522A\u9664\u55CE\uFF1F"),c(),d(7,"p",85),h(8),c()(),d(9,"div",86)(10,"button",58),D("click",function(){T(t);let r=C();return I(r.cancelDeleteMeeting())}),h(11,"\u53D6\u6D88"),c(),d(12,"button",87),D("click",function(){T(t);let r=C();return I(r.confirmDeleteMeeting())}),h(13,"\u78BA\u8A8D\u522A\u9664"),c()()()()}n&2&&(g(8),H("\u60A8\u78BA\u5B9A\u8981\u522A\u9664\u65E5\u671F\u70BA\u300C",e.date,"\u300D\u7684\u6703\u8B70\u53CA\u5176\u6240\u6709\u9032\u5EA6\u5831\u544A\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002"))}function rV(n,e){if(n&1){let t=$();d(0,"div",22)(1,"div",80)(2,"div",81)(3,"div",82),x(4,"ion-icon",83),c(),d(5,"h3",84),h(6,"\u78BA\u5B9A\u8981\u522A\u9664\u55CE\uFF1F"),c(),d(7,"p",85),h(8),c()(),d(9,"div",86)(10,"button",58),D("click",function(){T(t);let r=C();return I(r.cancelDeleteRecord())}),h(11,"\u53D6\u6D88"),c(),d(12,"button",87),D("click",function(){T(t);let r=C();return I(r.confirmDeleteRecord())}),h(13,"\u78BA\u8A8D\u522A\u9664"),c()()()()}n&2&&(g(8),H("\u60A8\u78BA\u5B9A\u8981\u522A\u9664\u76EE\u6A19\u70BA\u300C",e.record.goal,"\u300D\u7684\u9019\u7B46\u9032\u5EA6\u5831\u544A\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002"))}var ms=class ms{constructor(){this.fb=R(Ge);this.isRecordModalOpen=w(!1);this.isShareholderModalOpen=w(!1);this.isMeetingModalOpen=w(!1);this.editingRecord=w(null);this.editingMeeting=w(null);this.openMeetingId=w(null);this.categoryFilter=w("");this.assigneeFilter=w("");this.shareholders=w([{id:"sh1",name:"\u80A1\u6771 A"},{id:"sh2",name:"\u80A1\u6771 B"},{id:"sh3",name:"\u80A1\u6771 C"}]);this.meetingProgresses=w([{id:"MP001",date:"2024-07-29",records:[{id:"REC001",category:"\u8CA1\u52D9",goal:"\u5F59\u6574\u5167\u5916\u8CA1\u5831",progress:"\u6574\u7406\u51FA\u5167\u5916\u5E33\u7684\u5831\u8868",assigneeId:"sh1",lastUpdated:"2024-07-29 11:00:00"},{id:"REC003",category:"\u516C\u95DC",goal:"2026/1/10 \u78BA\u8A8D\u4E00\u6708\u6D3B\u52D5\u5834\u6B21",progress:"\u798F\u59D4\u6703\u806F\u7D6145\u500B (1/5)",assigneeId:"sh2",lastUpdated:"2024-07-29 09:45:00"},{id:"REC005",category:"\u71DF\u904B",goal:"\u627E\u5230\u6709\u6548\u80A1\u6771",progress:"\u5206\u6F64\u6A5F\u5236\u8A0E\u8AD6\u4E2D",assigneeId:"sh2",lastUpdated:"2024-07-29 14:00:00"}]},{id:"MP002",date:"2024-07-22",records:[{id:"REC002",category:"\u8CA1\u52D9",goal:"\u62C9\u878D\u8CC7",progress:"\u88D5\u878D\u878D\u8CC7",assigneeId:"sh1",lastUpdated:"2024-07-28 15:30:00"},{id:"REC004",category:"\u6D3B\u52D5",goal:"\u5361\u724C\u805A\u9910 1/15",progress:"1/15\u5361\u724C\u805A\u6703*10\u4EBA (\u91CD\u9EDE\u4EBA\u7269) 5000\u9910\u8CBB \u4E2D\u9910",assigneeId:"sh3",lastUpdated:"2024-07-27 18:20:00"}]}]);this.categories=Y(()=>{let e=this.meetingProgresses().flatMap(t=>t.records);return[...new Set(e.map(t=>t.category))].sort()});this.sortedMeetings=Y(()=>this.meetingProgresses().slice().sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()));this.filteredMeetings=Y(()=>{let e=this.categoryFilter(),t=this.assigneeFilter(),i=this.sortedMeetings();return!e&&!t?i:i.map(r=>q(N({},r),{records:r.records.filter(o=>!e||o.category===e).filter(o=>!t||o.assigneeId===t)})).filter(r=>r.records.length>0)});this.meetingForm=this.fb.group({date:["",V.required]});this.recordForm=this.fb.group({category:["",V.required],goal:["",V.required],progress:["",V.required],assigneeId:["",V.required]});this.meetingToDelete=w(null);this.recordToDelete=w(null);this.shareholderForm=this.fb.group({shareholders:this.fb.array([])})}getShareholderName(e){return this.shareholders().find(t=>t.id===e)?.name||"\u672A\u77E5"}toggleMeeting(e){this.openMeetingId.update(t=>t===e?null:e)}openMeetingModal(e=null){this.editingMeeting.set(e),e?this.meetingForm.setValue({date:e.date}):this.meetingForm.reset({date:new Date().toISOString().split("T")[0]}),this.isMeetingModalOpen.set(!0)}closeMeetingModal(){this.isMeetingModalOpen.set(!1)}handleMeetingSubmit(){if(this.meetingForm.invalid)return;let e=this.meetingForm.value,t=this.editingMeeting();if(t)this.meetingProgresses.update(i=>i.map(r=>r.id===t.id?q(N({},r),{date:e.date}):r));else{let i={id:`MP${Date.now()}`,date:e.date,records:[]};this.meetingProgresses.update(r=>[...r,i])}this.closeMeetingModal()}openRecordModal(e,t=null){t?(this.editingRecord.set({record:t,meetingId:e}),this.recordForm.patchValue(t)):(this.editingRecord.set({record:null,meetingId:e}),this.recordForm.reset({assigneeId:""})),this.isRecordModalOpen.set(!0)}closeRecordModal(){this.isRecordModalOpen.set(!1),this.editingRecord.set(null)}handleRecordFormSubmit(){if(this.recordForm.invalid)return;let e=this.editingRecord();if(!e)return;let{record:t,meetingId:i}=e,r=this.recordForm.value,o={category:r.category,goal:r.goal,progress:r.progress,assigneeId:r.assigneeId,lastUpdated:new Date().toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-")};this.meetingProgresses.update(s=>s.map(a=>{if(a.id===i){let l;return t?l=a.records.map(f=>f.id===t.id?N(N({},f),o):f):l=[...a.records,N({id:`REC${Date.now()}`},o)],q(N({},a),{records:l})}return a})),this.closeRecordModal()}resetFilters(){this.categoryFilter.set(""),this.assigneeFilter.set("")}requestDeleteMeeting(e){this.meetingToDelete.set(e)}confirmDeleteMeeting(){if(!this.meetingToDelete())return;let e=this.meetingToDelete().id;this.meetingProgresses.update(t=>t.filter(i=>i.id!==e)),this.cancelDeleteMeeting()}cancelDeleteMeeting(){this.meetingToDelete.set(null)}requestDeleteRecord(e,t){this.recordToDelete.set({meetingId:e,record:t})}confirmDeleteRecord(){if(!this.recordToDelete())return;let{meetingId:e,record:t}=this.recordToDelete();this.meetingProgresses.update(i=>i.map(r=>r.id===e?q(N({},r),{records:r.records.filter(o=>o.id!==t.id)}):r)),this.cancelDeleteRecord()}cancelDeleteRecord(){this.recordToDelete.set(null)}get shareholderControls(){return this.shareholderForm.get("shareholders").controls}openShareholderModal(){let e=this.shareholderForm.get("shareholders");e.clear(),this.shareholders().map(i=>this.fb.group({id:[i.id],name:[i.name,V.required]})).forEach(i=>e.push(i)),this.isShareholderModalOpen.set(!0)}closeShareholderModal(){this.isShareholderModalOpen.set(!1)}addShareholder(){this.shareholderForm.get("shareholders").push(this.fb.group({id:[`sh${Date.now()}`],name:["",V.required]}))}removeShareholder(e){this.shareholderForm.get("shareholders").removeAt(e)}saveShareholders(){this.shareholderForm.invalid||(this.shareholders.set(this.shareholderForm.value.shareholders),this.closeShareholderModal())}};ms.\u0275fac=function(t){return new(t||ms)},ms.\u0275cmp=ae({type:ms,selectors:[["app-shareholder-records"]],decls:43,vars:8,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"flex","items-center","gap-2"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","calendar-outline"],[1,"bg-gray-700","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-gray-800","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","people-outline"],[1,"bg-white","p-6","rounded-xl","shadow-md"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4","bg-gray-50","rounded-lg","mb-6"],["for","categoryFilter",1,"text-sm","font-medium","text-gray-600"],["id","categoryFilter",1,"w-full","mt-1","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["for","assigneeFilter",1,"text-sm","font-medium","text-gray-600"],["id","assigneeFilter",1,"w-full","mt-1","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-white",3,"ngModelChange","ngModel"],[1,"flex","items-end","justify-end"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"space-y-4"],[1,"bg-gray-50","rounded-xl","border","border-gray-200","overflow-hidden"],[1,"text-center","py-8","text-gray-500"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"p-4","flex","justify-between","items-center","cursor-pointer","hover:bg-gray-100",3,"click"],[1,"text-lg","font-bold","text-gray-800"],[1,"bg-indigo-500","text-white","px-3","py-1","rounded-md","font-medium","hover:bg-indigo-600","flex","items-center","gap-1","text-xs",3,"click"],["name","add-outline"],["title","\u7DE8\u8F2F\u65E5\u671F",1,"text-gray-500","hover:text-indigo-600","p-2","rounded-full","hover:bg-gray-200",3,"click"],["name","create-outline"],["title","\u522A\u9664\u6B64\u65E5\u671F\u6240\u6709\u7D00\u9304",1,"text-gray-500","hover:text-red-600","p-2","rounded-full","hover:bg-gray-200",3,"click"],["name","trash-outline"],["name","chevron-down-outline",1,"text-gray-500","transition-transform"],[1,"px-4","pb-4"],[1,"overflow-x-auto","bg-white","rounded-lg","p-2","border"],[1,"w-full","text-sm","text-left","whitespace-nowrap"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],[1,"px-4","py-3"],[1,"border-b","hover:bg-gray-50"],[1,"px-4","py-2"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"px-4","py-2","font-medium","text-gray-800","whitespace-pre-wrap"],[1,"px-4","py-2","text-gray-600","whitespace-pre-wrap"],[1,"px-4","py-2","text-gray-500"],["title","\u7DE8\u8F2F",1,"text-indigo-600","hover:text-indigo-800","p-1",3,"click"],["name","create-outline",1,"text-lg"],["title","\u522A\u9664",1,"text-red-500","hover:text-red-700","p-1",3,"click"],["name","trash-outline",1,"text-lg"],["colspan","6",1,"text-center","py-6","text-gray-500"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-sm","m-4"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","close-outline",1,"text-2xl"],[1,"p-6"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","formControlName","date",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],[1,"flex","justify-end","gap-4","pt-4","border-t","mt-4"],["type","button",1,"px-4","py-2","border","rounded-md",3,"click"],["type","submit",1,"px-4","py-2","bg-indigo-600","text-white","rounded-md","disabled:bg-indigo-300",3,"disabled"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-lg","max-h-[90vh]","flex","flex-col","m-4"],[1,"p-6","overflow-y-auto"],["for","category",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","category","formControlName","category","list","category-options","placeholder","\u9078\u64C7\u6216\u8F38\u5165\u65B0\u5206\u985E",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["id","category-options"],["for","goal",1,"block","text-sm","font-medium","text-gray-700"],["id","goal","formControlName","goal","rows","2",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","progress",1,"block","text-sm","font-medium","text-gray-700"],["id","progress","formControlName","progress","rows","3",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","assigneeId",1,"block","text-sm","font-medium","text-gray-700"],["id","assigneeId","formControlName","assigneeId",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["value","","disabled",""],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-md","max-h-[90vh]","flex","flex-col","m-4"],[3,"ngSubmit","formGroup"],["formArrayName","shareholders",1,"space-y-3"],[1,"flex","items-center","gap-2",3,"formGroupName"],["type","button",1,"mt-4","text-sm","text-indigo-600","font-medium",3,"click"],[1,"flex","justify-end","gap-4","pt-4","border-t","mt-6"],["formControlName","name",1,"flex-grow","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["type","button","title","\u522A\u9664",1,"text-red-500","p-1","hover:bg-red-100","rounded-full",3,"click"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-md","m-4"],[1,"p-6","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["name","warning-outline",1,"h-6","w-6","text-red-600"],[1,"mt-4","text-lg","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-500"],[1,"flex","justify-center","gap-4","bg-gray-50","px-6","py-4","rounded-b-xl"],["type","button",1,"px-4","py-2","bg-red-600","text-white","rounded-md","hover:bg-red-700",3,"click"]],template:function(t,i){if(t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u80A1\u6771\u7D00\u9304"),c(),d(4,"div",3)(5,"button",4),D("click",function(){return i.openMeetingModal(null)}),x(6,"ion-icon",5),d(7,"span"),h(8,"\u65B0\u589E\u958B\u6703\u65E5\u671F"),c()(),d(9,"button",6),D("click",function(){return i.openShareholderModal()}),x(10,"ion-icon",7),d(11,"span"),h(12,"\u7BA1\u7406\u80A1\u6771"),c()()()(),d(13,"div",8)(14,"div",9)(15,"div")(16,"label",10),h(17,"\u9032\u5EA6\u5206\u985E"),c(),d(18,"select",11),de("ngModelChange",function(o){return fe(i.categoryFilter,o)||(i.categoryFilter=o),o}),d(19,"option",12),h(20,"\u6240\u6709\u5206\u985E"),c(),P(21,qL,2,2,"option",13,j),c()(),d(23,"div")(24,"label",14),h(25,"\u8CA0\u8CAC\u4EBA"),c(),d(26,"select",15),de("ngModelChange",function(o){return fe(i.assigneeFilter,o)||(i.assigneeFilter=o),o}),d(27,"option",12),h(28,"\u6240\u6709\u8CA0\u8CAC\u4EBA"),c(),P(29,WL,2,2,"option",13,tf),c()(),d(31,"div",16)(32,"button",17),D("click",function(){return i.resetFilters()}),x(33,"ion-icon",18),c()()(),d(34,"div",19),P(35,JL,15,4,"div",20,tf,!1,KL,2,0,"div",21),c()()(),B(38,QL,18,3,"div",22),B(39,eV,37,3,"div",22),B(40,nV,19,2,"div",22),B(41,iV,14,1,"div",22),B(42,rV,14,1,"div",22)),t&2){let r,o;g(18),ce("ngModel",i.categoryFilter),g(3),F(i.categories()),g(5),ce("ngModel",i.assigneeFilter),g(3),F(i.shareholders()),g(6),F(i.filteredMeetings()),g(3),U(i.isMeetingModalOpen()?38:-1),g(),U(i.isRecordModalOpen()?39:-1),g(),U(i.isShareholderModalOpen()?40:-1),g(),U((r=i.meetingToDelete())?41:-1,r),g(),U((o=i.recordToDelete())?42:-1,o)}},dependencies:[ye,qe,Xe,Ve,Be,we,Fe,_e,$e,Le,He,Kn,Qn,ke,Ne],encapsulation:2,changeDetection:0});var nf=ms;var oV=(n,e)=>e.id;function sV(n,e){if(n&1&&(d(0,"div",18)(1,"div")(2,"h4",19),h(3,"\u76F8\u95DC\u4EBA\u54E1"),c(),d(4,"p",20),h(5),c()(),d(6,"div")(7,"h4",19),h(8,"\u6C7A\u7B56\u80CC\u666F"),c(),d(9,"p",21),h(10),c()(),d(11,"div")(12,"h4",19),h(13,"\u6C7A\u7B56\u5167\u5BB9"),c(),d(14,"p",22),h(15),c()(),d(16,"div")(17,"h4",19),h(18,"\u6C7A\u7B56\u7406\u7531"),c(),d(19,"p",21),h(20),c()()()),n&2){let t=C().$implicit;g(5),S(t.stakeholders),g(5),S(t.background),g(5),S(t.decision),g(5),S(t.rationale)}}function aV(n,e){if(n&1){let t=$();d(0,"div",6)(1,"div",9),D("click",function(){let r=T(t).$implicit,o=C();return I(o.toggleDecision(r.id))}),d(2,"div")(3,"p",10),h(4),c(),d(5,"h3",11),h(6),c()(),d(7,"div",12)(8,"button",13),D("click",function(r){let o=T(t).$implicit,s=C();return r.stopPropagation(),I(s.openModal(o))}),x(9,"ion-icon",14),c(),d(10,"button",15),D("click",function(r){let o=T(t).$implicit,s=C();return r.stopPropagation(),I(s.requestDelete(o))}),x(11,"ion-icon",16),c(),x(12,"ion-icon",17),c()(),B(13,sV,21,4,"div",18),c()}if(n&2){let t=e.$implicit,i=C();g(4),S(t.date),g(2),S(t.title),g(6),J("rotate-180",i.openDecisionId()===t.id),g(),U(i.openDecisionId()===t.id?13:-1)}}function lV(n,e){n&1&&(d(0,"div",7),h(1," \u5C1A\u7121\u6C7A\u7B56\u7D00\u9304\uFF0C\u9EDE\u64CA\u6309\u9215\u4F86\u5EFA\u7ACB\u7B2C\u4E00\u7B46\u7D00\u9304\u3002 "),c())}function uV(n,e){if(n&1){let t=$();d(0,"div",8)(1,"div",23)(2,"div",24)(3,"h3",25),h(4),c(),d(5,"button",26),D("click",function(){T(t);let r=C();return I(r.closeModal())}),x(6,"ion-icon",27),c()(),d(7,"div",28)(8,"form",29),D("ngSubmit",function(){T(t);let r=C();return I(r.handleFormSubmit())}),d(9,"div",30)(10,"div")(11,"label",31),h(12,"\u65E5\u671F*"),c(),x(13,"input",32),c(),d(14,"div")(15,"label",33),h(16,"\u6A19\u984C*"),c(),x(17,"input",34),c()(),d(18,"div")(19,"label",35),h(20,"\u76F8\u95DC\u4EBA\u54E1*"),c(),x(21,"input",36),c(),d(22,"div")(23,"label",37),h(24,"\u6C7A\u7B56\u80CC\u666F*"),c(),x(25,"textarea",38),c(),d(26,"div")(27,"label",39),h(28,"\u6C7A\u7B56\u5167\u5BB9*"),c(),x(29,"textarea",40),c(),d(30,"div")(31,"label",41),h(32,"\u6C7A\u7B56\u7406\u7531*"),c(),x(33,"textarea",42),c(),d(34,"div",43)(35,"button",44),D("click",function(){T(t);let r=C();return I(r.closeModal())}),h(36,"\u53D6\u6D88"),c(),d(37,"button",45),h(38,"\u5132\u5B58"),c()()()()()()}if(n&2){let t=C();g(4),S(t.editingDecision()?"\u7DE8\u8F2F\u6C7A\u7B56":"\u8A18\u9304\u65B0\u6C7A\u7B56"),g(4),k("formGroup",t.decisionForm),g(29),k("disabled",t.decisionForm.invalid)}}function cV(n,e){if(n&1){let t=$();d(0,"div",8)(1,"div",46)(2,"div",47)(3,"div",48),x(4,"ion-icon",49),c(),d(5,"h3",50),h(6,"\u78BA\u5B9A\u8981\u522A\u9664\u55CE\uFF1F"),c(),d(7,"p",51),h(8),c()(),d(9,"div",52)(10,"button",44),D("click",function(){T(t);let r=C();return I(r.cancelDelete())}),h(11,"\u53D6\u6D88"),c(),d(12,"button",53),D("click",function(){T(t);let r=C();return I(r.confirmDelete())}),h(13,"\u78BA\u8A8D\u522A\u9664"),c()()()()}n&2&&(g(8),H("\u60A8\u78BA\u5B9A\u8981\u522A\u9664\u6C7A\u7B56\u7D00\u9304\u300C",e.title,"\u300D\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002"))}var hs=class hs{constructor(){this.fb=R(Ge);this.isModalOpen=w(!1);this.editingDecision=w(null);this.openDecisionId=w(null);this.decisionToDelete=w(null);this.decisions=w([{id:"DEC001",date:"2024-07-28",title:"\u63A1\u8CFC\u65B0\u7684 POS \u7CFB\u7D71",background:"\u76EE\u524D\u7684 POS \u7CFB\u7D71\u8001\u820A\uFF0C\u7D93\u5E38\u51FA\u932F\uFF0C\u4E14\u7121\u6CD5\u8207\u65B0\u7684\u5EAB\u5B58\u7BA1\u7406\u8EDF\u9AD4\u6574\u5408\u3002",decision:"\u6C7A\u5B9A\u63A1\u8CFC\u300CFuture POS\u300D\u7CFB\u7D71\uFF0C\u4E26\u9810\u8A08\u5728\u7B2C\u56DB\u5B63\u5B8C\u6210\u5C0E\u5165\u3002",rationale:"\u8A72\u7CFB\u7D71\u8A55\u50F9\u826F\u597D\uFF0C\u5177\u5099\u6211\u5011\u9700\u8981\u7684\u6240\u6709\u529F\u80FD\uFF0C\u4E14\u50F9\u683C\u5728\u9810\u7B97\u5167\u3002\u9577\u9060\u4F86\u770B\u80FD\u63D0\u5347\u71DF\u904B\u6548\u7387\u3002",stakeholders:"\u5168\u9AD4\u80A1\u6771, \u71DF\u904B\u7D93\u7406"},{id:"DEC002",date:"2024-07-15",title:"\u8ABF\u6574 VIP \u6703\u54E1\u798F\u5229",background:"VIP \u6703\u54E1\u7684\u6D88\u8CBB\u8A98\u56E0\u4E0D\u8DB3\uFF0C\u7E8C\u6703\u7387\u6709\u4E0B\u964D\u8DA8\u52E2\u3002",decision:"\u65B0\u589E VIP \u6703\u54E1\u751F\u65E5\u7576\u6708\u4EAB\u6709\u7528\u9910 8 \u6298\u512A\u60E0\uFF0C\u4E26\u63D0\u9AD8\u6D88\u8CBB\u7D2F\u7A4D\u9EDE\u6578\u7684\u56DE\u994B\u7387\u3002",rationale:"\u589E\u52A0\u5C0A\u69AE\u611F\u8207\u5BE6\u8CEA\u512A\u60E0\uFF0C\u5E0C\u671B\u80FD\u6709\u6548\u63D0\u5347\u9867\u5BA2\u5FE0\u8AA0\u5EA6\u8207\u6D88\u8CBB\u983B\u7387\u3002",stakeholders:"\u884C\u92B7\u5718\u968A, \u80A1\u6771 C"}]);this.sortedDecisions=Y(()=>this.decisions().sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()));this.decisionForm=this.fb.group({date:["",V.required],title:["",V.required],stakeholders:["",V.required],background:["",V.required],decision:["",V.required],rationale:["",V.required]})}toggleDecision(e){this.openDecisionId.update(t=>t===e?null:e)}openModal(e=null){this.editingDecision.set(e),e?this.decisionForm.patchValue(e):this.decisionForm.reset({date:new Date().toISOString().split("T")[0]}),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.editingDecision.set(null)}handleFormSubmit(){if(this.decisionForm.invalid)return;let e=this.decisionForm.value,t=this.editingDecision(),i={date:e.date,title:e.title,stakeholders:e.stakeholders,background:e.background,decision:e.decision,rationale:e.rationale};t?this.decisions.update(r=>r.map(o=>o.id===t.id?N(N({},o),i):o)):this.decisions.update(r=>[...r,N({id:`DEC${Date.now()}`},i)]),this.closeModal()}requestDelete(e){this.decisionToDelete.set(e)}confirmDelete(){if(!this.decisionToDelete())return;let e=this.decisionToDelete().id;this.decisions.update(t=>t.filter(i=>i.id!==e)),this.cancelDelete()}cancelDelete(){this.decisionToDelete.set(null)}};hs.\u0275fac=function(t){return new(t||hs)},hs.\u0275cmp=ae({type:hs,selectors:[["app-decision-log"]],decls:14,vars:3,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","add-outline"],[1,"space-y-4"],[1,"bg-white","rounded-xl","shadow-md","overflow-hidden"],[1,"bg-white","p-6","rounded-xl","shadow-md","text-center","text-gray-500"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"p-4","flex","justify-between","items-center","cursor-pointer","hover:bg-gray-50",3,"click"],[1,"font-semibold","text-indigo-700"],[1,"text-lg","font-bold","text-gray-800"],[1,"flex","items-center","gap-2"],["title","\u7DE8\u8F2F",1,"text-gray-500","hover:text-indigo-600","p-2","rounded-full","hover:bg-gray-100",3,"click"],["name","create-outline"],["title","\u522A\u9664",1,"text-gray-500","hover:text-red-600","p-2","rounded-full","hover:bg-gray-100",3,"click"],["name","trash-outline"],["name","chevron-down-outline",1,"text-gray-500","transition-transform"],[1,"p-6","border-t","bg-gray-50/50","space-y-4","text-sm"],[1,"font-semibold","text-gray-600","mb-1"],[1,"text-gray-800"],[1,"text-gray-800","whitespace-pre-wrap"],[1,"text-gray-800","whitespace-pre-wrap","font-medium","text-indigo-800","bg-indigo-50","p-3","rounded-md"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col","m-4"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","close-outline",1,"text-2xl"],[1,"p-6","overflow-y-auto"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","date","formControlName","date",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","title",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","title","formControlName","title",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","stakeholders",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","stakeholders","formControlName","stakeholders","placeholder","\u8ACB\u7528\u9017\u865F\u5206\u9694",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","background",1,"block","text-sm","font-medium","text-gray-700"],["id","background","formControlName","background","rows","3",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","decision",1,"block","text-sm","font-medium","text-gray-700"],["id","decision","formControlName","decision","rows","4",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","rationale",1,"block","text-sm","font-medium","text-gray-700"],["id","rationale","formControlName","rationale","rows","3",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],[1,"flex","justify-end","gap-4","pt-4","border-t","mt-4"],["type","button",1,"px-4","py-2","border","rounded-md",3,"click"],["type","submit",1,"px-4","py-2","bg-indigo-600","text-white","rounded-md","disabled:bg-indigo-300",3,"disabled"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-md","m-4"],[1,"p-6","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["name","warning-outline",1,"h-6","w-6","text-red-600"],[1,"mt-4","text-lg","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-500"],[1,"flex","justify-center","gap-4","bg-gray-50","px-6","py-4","rounded-b-xl"],["type","button",1,"px-4","py-2","bg-red-600","text-white","rounded-md","hover:bg-red-700",3,"click"]],template:function(t,i){if(t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u6C7A\u7B56\u7D00\u9304"),c(),d(4,"button",3),D("click",function(){return i.openModal(null)}),x(5,"ion-icon",4),d(6,"span"),h(7,"\u8A18\u9304\u65B0\u6C7A\u7B56"),c()()(),d(8,"div",5),P(9,aV,14,5,"div",6,oV,!1,lV,2,0,"div",7),c()(),B(12,uV,39,3,"div",8),B(13,cV,14,1,"div",8)),t&2){let r;g(9),F(i.sortedDecisions()),g(3),U(i.isModalOpen()?12:-1),g(),U((r=i.decisionToDelete())?13:-1,r)}},dependencies:[ye,qe,Xe,we,_e,$e,Le,He],encapsulation:2,changeDetection:0});var rf=hs;var of=(n,e)=>e.id;function dV(n,e){if(n&1&&(d(0,"option",15),h(1),c()),n&2){let t=e.$implicit;k("value",t.id),g(),S(t.name)}}function fV(n,e){if(n&1){let t=$();d(0,"label",40)(1,"input",42),D("change",function(r){let o=T(t).$index,s=C().$implicit,a=C();return I(a.updateProgress(s,o,r))}),c(),d(2,"span"),h(3),c()()}if(n&2){let t=e.$implicit;g(),k("checked",t.isCompleted),g(),J("line-through",t.isCompleted)("text-gray-400",t.isCompleted),g(),S(t.description)}}function pV(n,e){n&1&&(d(0,"p",41),h(1,"\u5C1A\u7121\u95DC\u9375\u6210\u679C"),c())}function mV(n,e){if(n&1){let t=$();d(0,"div",20)(1,"div",23)(2,"div",24)(3,"h3",25),h(4),c(),d(5,"div",26)(6,"button",27),D("click",function(){let r=T(t).$implicit,o=C();return I(o.openModal(r))}),x(7,"ion-icon",28),c(),d(8,"button",29),D("click",function(){let r=T(t).$implicit,o=C();return I(o.requestDelete(r))}),x(9,"ion-icon",30),c()()(),d(10,"div",31)(11,"span"),h(12),c(),d(13,"span"),h(14),c()()(),d(15,"div",32)(16,"div",33)(17,"span",34),h(18),c(),d(19,"span",35),h(20),c()(),d(21,"div",36),x(22,"div",37),c(),d(23,"div",38)(24,"h4",39),h(25,"\u95DC\u9375\u6210\u679C"),c(),P(26,fV,4,6,"label",40,of,!1,pV,2,0,"p",41),c()()()}if(n&2){let t=e.$implicit,i=C();g(4),S(t.title),g(8),S(i.getOwnerName(t.ownerId)),g(2),H("\u622A\u6B62\u65BC ",t.dueDate),g(3),k("ngClass",i.getStatusClass(t.status)),g(),S(t.status),g(2),H("",t.progress,"%"),g(2),Yu("width",t.progress,"%"),g(4),F(t.keyResults)}}function hV(n,e){n&1&&(d(0,"div",21),x(1,"ion-icon",43),d(2,"p",44),h(3,"\u7121\u7B26\u5408\u689D\u4EF6\u7684\u76EE\u6A19\uFF0C\u9EDE\u64CA\u300C\u65B0\u589E\u76EE\u6A19\u300D\u4F86\u5EFA\u7ACB\u4E00\u500B\u5427\uFF01"),c()())}function gV(n,e){if(n&1&&(d(0,"option",15),h(1),c()),n&2){let t=e.$implicit;k("value",t.id),g(),S(t.name)}}function yV(n,e){if(n&1){let t=$();d(0,"div",65),x(1,"input",70),d(2,"button",71),D("click",function(){let r=T(t).$index,o=C(2);return I(o.removeKeyResult(r))}),x(3,"ion-icon",30),c()()}if(n&2){let t=e.$index;k("formGroupName",t)}}function vV(n,e){if(n&1){let t=$();d(0,"div",22)(1,"div",45)(2,"div",46)(3,"h3",47),h(4),c(),d(5,"button",48),D("click",function(){T(t);let r=C();return I(r.closeModal())}),x(6,"ion-icon",49),c()(),d(7,"div",50)(8,"form",51),D("ngSubmit",function(){T(t);let r=C();return I(r.handleFormSubmit())}),d(9,"div")(10,"label",52),h(11,"\u76EE\u6A19*"),c(),x(12,"input",53),c(),d(13,"div",54)(14,"div")(15,"label",55),h(16,"\u8CA0\u8CAC\u4EBA*"),c(),d(17,"select",56)(18,"option",57),h(19,"\u8ACB\u9078\u64C7"),c(),P(20,gV,2,2,"option",15,of),c()(),d(22,"div")(23,"label",58),h(24,"\u622A\u6B62\u65E5\u671F*"),c(),x(25,"input",59),c(),d(26,"div")(27,"label",60),h(28,"\u72C0\u614B*"),c(),d(29,"select",61)(30,"option",9),h(31,"\u9032\u884C\u4E2D"),c(),d(32,"option",10),h(33,"\u5DF2\u5B8C\u6210"),c(),d(34,"option",11),h(35,"\u843D\u5F8C"),c(),d(36,"option",12),h(37,"\u5DF2\u64F1\u7F6E"),c()()()(),d(38,"div",62)(39,"h4",63),h(40,"\u95DC\u9375\u6210\u679C"),c(),d(41,"div",64),P(42,yV,4,1,"div",65,Mt),c(),d(44,"button",66),D("click",function(){T(t);let r=C();return I(r.addKeyResult())}),h(45,"+ \u65B0\u589E\u95DC\u9375\u6210\u679C"),c()(),d(46,"div",67)(47,"button",68),D("click",function(){T(t);let r=C();return I(r.closeModal())}),h(48,"\u53D6\u6D88"),c(),d(49,"button",69),h(50,"\u5132\u5B58"),c()()()()()()}if(n&2){let t=C();g(4),S(t.editingGoal()?"\u7DE8\u8F2F\u76EE\u6A19":"\u65B0\u589E\u76EE\u6A19"),g(4),k("formGroup",t.goalForm),g(12),F(t.shareholders()),g(22),F(t.keyResults.controls),g(7),k("disabled",t.goalForm.invalid)}}function _V(n,e){if(n&1){let t=$();d(0,"div",22)(1,"div",72)(2,"div",73)(3,"div",74),x(4,"ion-icon",75),c(),d(5,"h3",76),h(6,"\u78BA\u5B9A\u8981\u522A\u9664\u76EE\u6A19\u55CE\uFF1F"),c(),d(7,"p",77),h(8),c()(),d(9,"div",78)(10,"button",68),D("click",function(){T(t);let r=C();return I(r.cancelDelete())}),h(11,"\u53D6\u6D88"),c(),d(12,"button",79),D("click",function(){T(t);let r=C();return I(r.confirmDelete())}),h(13,"\u78BA\u8A8D\u522A\u9664"),c()()()()}n&2&&(g(8),H("\u60A8\u78BA\u5B9A\u8981\u522A\u9664\u76EE\u6A19\u300C",e.title,"\u300D\u55CE\uFF1F\u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\u3002"))}var gs=class gs{constructor(){this.fb=R(Ge);this.isModalOpen=w(!1);this.editingGoal=w(null);this.goalToDelete=w(null);this.statusFilter=w("");this.ownerFilter=w("");this.shareholders=w([{id:"sh1",name:"\u80A1\u6771 A"},{id:"sh2",name:"\u80A1\u6771 B"},{id:"sh3",name:"\u80A1\u6771 C"},{id:"sh4",name:"\u71DF\u904B\u7D93\u7406"}]);this.goals=w([{id:"GOAL001",title:"\u63D0\u5347 2026 \u5E74 Q3 \u71DF\u6536 20%",ownerId:"sh1",dueDate:"2026-09-30",status:"\u9032\u884C\u4E2D",progress:33,keyResults:[{id:"KR1-1",description:"\u63A8\u51FA\u4E09\u6B3E\u590F\u5B63\u7279\u8ABF\u98F2\u54C1",isCompleted:!0},{id:"KR1-2",description:"\u8209\u8FA6\u5169\u5834 VIP \u54C1\u9152\u6703",isCompleted:!1},{id:"KR1-3",description:"\u8207\u9644\u8FD1\u5546\u8FA6\u7C3D\u8A02\u4E0B\u5348\u8336\u5408\u4F5C",isCompleted:!1}]},{id:"GOAL002",title:"\u512A\u5316\u96EA\u8304\u5EAB\u5B58\u6210\u672C 15%",ownerId:"sh2",dueDate:"2026-08-31",status:"\u843D\u5F8C",progress:0,keyResults:[{id:"KR2-1",description:"\u5C0E\u5165\u65B0\u7684\u5EAB\u5B58\u7BA1\u7406\u7CFB\u7D71",isCompleted:!1},{id:"KR2-2",description:"\u958B\u767C\u81F3\u5C11\u5169\u5BB6\u65B0\u7684\u96EA\u8304\u4F9B\u61C9\u5546",isCompleted:!1}]},{id:"GOAL003",title:"\u5B8C\u6210\u7DB2\u7AD9\u6539\u7248\u4E26\u4E0A\u7DDA",ownerId:"sh4",dueDate:"2026-07-31",status:"\u5DF2\u5B8C\u6210",progress:100,keyResults:[{id:"KR3-1",description:"\u78BA\u8A8D\u65B0\u7DB2\u7AD9 UI/UX \u8A2D\u8A08",isCompleted:!0},{id:"KR3-2",description:"\u5B8C\u6210\u524D\u7AEF\u8207\u5F8C\u7AEF\u958B\u767C",isCompleted:!0},{id:"KR3-3",description:"\u5B8C\u6210\u4F7F\u7528\u8005\u6E2C\u8A66\u4E26\u4FEE\u5FA9 Bug",isCompleted:!0}]}]);this.filteredGoals=Y(()=>{let e=this.statusFilter(),t=this.ownerFilter();return this.goals().filter(i=>!e||i.status===e).filter(i=>!t||i.ownerId===t)});this.goalForm=this.fb.group({title:["",V.required],ownerId:["",V.required],dueDate:["",V.required],status:["\u9032\u884C\u4E2D",V.required],keyResults:this.fb.array([])})}get keyResults(){return this.goalForm.get("keyResults")}getOwnerName(e){return this.shareholders().find(t=>t.id===e)?.name||"\u672A\u77E5"}getStatusClass(e){return{"bg-blue-100 text-blue-800":e==="\u9032\u884C\u4E2D","bg-green-100 text-green-800":e==="\u5DF2\u5B8C\u6210","bg-yellow-100 text-yellow-800":e==="\u843D\u5F8C","bg-gray-100 text-gray-800":e==="\u5DF2\u64F1\u7F6E"}}resetFilters(){this.statusFilter.set(""),this.ownerFilter.set("")}openModal(e=null){this.editingGoal.set(e),this.goalForm.reset({status:"\u9032\u884C\u4E2D"}),this.keyResults.clear(),e?(this.goalForm.patchValue(e),e.keyResults.forEach(t=>this.addKeyResult(t.description,t.isCompleted))):this.goalForm.patchValue({dueDate:new Date().toISOString().split("T")[0]}),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1)}addKeyResult(e="",t=!1){let i=this.fb.group({description:[e,V.required],isCompleted:[t]});this.keyResults.push(i)}removeKeyResult(e){this.keyResults.removeAt(e)}handleFormSubmit(){if(this.goalForm.invalid)return;let e=this.goalForm.value,t=this.editingGoal(),i=e.keyResults.map(s=>({id:`KR${Date.now()}-${Math.random()}`,description:s.description,isCompleted:s.isCompleted})),r=i.length>0?i.filter(s=>s.isCompleted).length/i.length*100:0,o={title:e.title,ownerId:e.ownerId,dueDate:e.dueDate,status:e.status,keyResults:i,progress:Math.round(r)};t?this.goals.update(s=>s.map(a=>a.id===t.id?N(N({},a),o):a)):this.goals.update(s=>[...s,N({id:`GOAL${Date.now()}`},o)]),this.closeModal()}updateProgress(e,t,i){let r=i.target.checked;this.goals.update(o=>o.map(s=>{if(s.id===e.id){let a=[...s.keyResults];a[t]=q(N({},a[t]),{isCompleted:r});let l=a.length>0?a.filter(f=>f.isCompleted).length/a.length*100:0;return q(N({},s),{keyResults:a,progress:Math.round(l)})}return s}))}requestDelete(e){this.goalToDelete.set(e)}confirmDelete(){this.goalToDelete()&&(this.goals.update(e=>e.filter(t=>t.id!==this.goalToDelete().id)),this.cancelDelete())}cancelDelete(){this.goalToDelete.set(null)}};gs.\u0275fac=function(t){return new(t||gs)},gs.\u0275cmp=ae({type:gs,selectors:[["app-goal-progress"]],decls:40,vars:5,consts:[[1,"space-y-6"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"bg-indigo-600","text-white","px-4","py-2","rounded-lg","font-medium","hover:bg-indigo-700","transition-colors","flex","items-center","gap-2","text-sm",3,"click"],["name","add-outline"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","p-4","bg-white","rounded-xl","shadow-md"],["for","statusFilter",1,"text-sm","font-medium","text-gray-600"],["id","statusFilter",1,"w-full","mt-1","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-50",3,"ngModelChange","ngModel"],["value",""],["value","\u9032\u884C\u4E2D"],["value","\u5DF2\u5B8C\u6210"],["value","\u843D\u5F8C"],["value","\u5DF2\u64F1\u7F6E"],["for","ownerFilter",1,"text-sm","font-medium","text-gray-600"],["id","ownerFilter",1,"w-full","mt-1","border-gray-300","rounded-lg","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","text-sm","p-2","bg-gray-50",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","items-end","justify-end"],["title","\u91CD\u8A2D\u7BE9\u9078",1,"text-gray-500","hover:text-gray-800","transition-colors","p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["name","refresh-outline",1,"text-xl"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"bg-white","rounded-xl","shadow-md","border","flex","flex-col"],[1,"md:col-span-2","lg:col-span-3","bg-white","p-6","rounded-xl","shadow-md","text-center","text-gray-500"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"p-4","border-b"],[1,"flex","justify-between","items-start","gap-2"],[1,"text-base","font-bold","text-gray-800"],[1,"flex","items-center","gap-1","shrink-0"],["title","\u7DE8\u8F2F",1,"text-gray-400","hover:text-indigo-600","p-1.5","rounded-full","hover:bg-gray-100",3,"click"],["name","create-outline"],["title","\u522A\u9664",1,"text-gray-400","hover:text-red-600","p-1.5","rounded-full","hover:bg-gray-100",3,"click"],["name","trash-outline"],[1,"flex","items-center","justify-between","text-xs","text-gray-500","mt-2"],[1,"p-4","flex-grow"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xs","font-semibold","px-2","py-1","rounded-full",3,"ngClass"],[1,"text-sm","font-semibold"],[1,"w-full","bg-gray-200","rounded-full","h-2.5"],[1,"bg-indigo-600","h-2.5","rounded-full"],[1,"mt-4","space-y-2"],[1,"text-xs","font-semibold","text-gray-500","uppercase"],[1,"flex","items-start","gap-2","text-sm","text-gray-700","cursor-pointer"],[1,"text-xs","text-gray-400"],["type","checkbox",1,"mt-1","h-4","w-4","rounded","border-gray-300","text-indigo-600","focus:ring-indigo-500",3,"change","checked"],["name","flag-outline",1,"text-4xl"],[1,"mt-2"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col","m-4"],[1,"flex","justify-between","items-center","p-4","border-b"],[1,"text-lg","font-semibold"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","close-outline",1,"text-2xl"],[1,"p-6","overflow-y-auto"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","title",1,"block","text-sm","font-medium","text-gray-700"],["id","title","formControlName","title",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["for","ownerId",1,"block","text-sm","font-medium","text-gray-700"],["id","ownerId","formControlName","ownerId",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["value","","disabled",""],["for","dueDate",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","dueDate","formControlName","dueDate",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],["for","status",1,"block","text-sm","font-medium","text-gray-700"],["id","status","formControlName","status",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2"],[1,"space-y-2","pt-2"],[1,"text-sm","font-medium","text-gray-700"],["formArrayName","keyResults",1,"space-y-2"],[1,"flex","items-center","gap-2",3,"formGroupName"],["type","button",1,"text-sm","font-medium","text-indigo-600","hover:text-indigo-800",3,"click"],[1,"flex","justify-end","gap-4","pt-4","border-t","mt-4"],["type","button",1,"px-4","py-2","border","rounded-md",3,"click"],["type","submit",1,"px-4","py-2","bg-indigo-600","text-white","rounded-md","disabled:bg-indigo-300",3,"disabled"],["formControlName","description","placeholder","\u8F38\u5165\u95DC\u9375\u6210\u679C\u63CF\u8FF0...",1,"flex-grow","rounded-md","border-gray-300","shadow-sm","bg-gray-50","p-2","text-sm"],["type","button","title","\u522A\u9664",1,"text-red-500","hover:text-red-700","p-1.5","rounded-full","hover:bg-red-100",3,"click"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-md","m-4"],[1,"p-6","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["name","warning-outline",1,"h-6","w-6","text-red-600"],[1,"mt-4","text-lg","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-500"],[1,"flex","justify-center","gap-4","bg-gray-50","px-6","py-4","rounded-b-xl"],["type","button",1,"px-4","py-2","bg-red-600","text-white","rounded-md","hover:bg-red-700",3,"click"]],template:function(t,i){if(t&1&&(d(0,"div",0)(1,"div",1)(2,"h1",2),h(3,"\u76EE\u6A19\u9032\u5EA6"),c(),d(4,"button",3),D("click",function(){return i.openModal(null)}),x(5,"ion-icon",4),d(6,"span"),h(7,"\u65B0\u589E\u76EE\u6A19"),c()()(),d(8,"div",5)(9,"div")(10,"label",6),h(11,"\u72C0\u614B"),c(),d(12,"select",7),de("ngModelChange",function(o){return fe(i.statusFilter,o)||(i.statusFilter=o),o}),d(13,"option",8),h(14,"\u6240\u6709\u72C0\u614B"),c(),d(15,"option",9),h(16,"\u9032\u884C\u4E2D"),c(),d(17,"option",10),h(18,"\u5DF2\u5B8C\u6210"),c(),d(19,"option",11),h(20,"\u843D\u5F8C"),c(),d(21,"option",12),h(22,"\u5DF2\u64F1\u7F6E"),c()()(),d(23,"div")(24,"label",13),h(25,"\u8CA0\u8CAC\u4EBA"),c(),d(26,"select",14),de("ngModelChange",function(o){return fe(i.ownerFilter,o)||(i.ownerFilter=o),o}),d(27,"option",8),h(28,"\u6240\u6709\u8CA0\u8CAC\u4EBA"),c(),P(29,dV,2,2,"option",15,of),c()(),d(31,"div",16)(32,"button",17),D("click",function(){return i.resetFilters()}),x(33,"ion-icon",18),c()()(),d(34,"div",19),P(35,mV,29,9,"div",20,of,!1,hV,4,0,"div",21),c()(),B(38,vV,51,3,"div",22),B(39,_V,14,1,"div",22)),t&2){let r;g(12),ce("ngModel",i.statusFilter),g(14),ce("ngModel",i.ownerFilter),g(3),F(i.shareholders()),g(6),F(i.filteredGoals()),g(3),U(i.isModalOpen()?38:-1),g(),U((r=i.goalToDelete())?39:-1,r)}},dependencies:[ye,lh,qe,Xe,Ve,Be,we,Fe,_e,$e,Le,He,Kn,Qn,ke,Ne],encapsulation:2,changeDetection:0});var sf=gs;var Px=[{path:"dashboard",component:Vd,title:"Dashboard"},{path:"financial-statements",component:Bd,title:"Financial Statements"},{path:"customer-analysis",component:Ud,title:"\u9867\u5BA2\u7BA1\u7406"},{path:"product-analysis",component:Hd,title:"Product Analysis"},{path:"product-cost",component:Kd,title:"Product Cost"},{path:"ledger",component:$d,title:"Ledger"},{path:"vendors",component:Qd,title:"\u5EE0\u5546\u7BA1\u7406"},{path:"purchase-orders",component:Zd,title:"\u9032\u8CA8\u55AE\u7BA1\u7406"},{path:"events",component:Wd,title:"\u6D3B\u52D5\u7BA1\u7406"},{path:"events/new",component:Za,title:"\u65B0\u589E\u6D3B\u52D5"},{path:"events/edit/:id",component:Za,title:"\u7DE8\u8F2F\u6D3B\u52D5"},{path:"daily-revenue",component:zd,title:"Daily Revenue"},{path:"daily-revenue/:date",component:jd,title:"Edit Daily Revenue"},{path:"payroll",component:Yd,title:"Payroll"},{path:"payroll/:employeeId/:year/:month",component:Jd,title:"Payroll Details"},{path:"shareholder-rebates",component:Xd,title:"\u80A1\u6771\u56DE\u994B\u91D1"},{path:"meeting",component:ef,title:"\u958B\u6703\u7D00\u9304"},{path:"shareholder-records",component:nf,title:"\u80A1\u6771\u7D00\u9304"},{path:"goal-progress",component:sf,title:"\u76EE\u6A19\u9032\u5EA6"},{path:"decision-log",component:rf,title:"\u6C7A\u7B56\u7D00\u9304"},{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"**",redirectTo:"dashboard"}];var Fx=()=>{};var kx=async(n,e)=>{if(!(typeof window>"u"))return await Fx(),gg([["ion-icon",[[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]},null,{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}]]]],e)};Ch(Hc,{providers:[Qm(),Yh(Px,Jh()),Sh()]}).catch(n=>console.error(n));kx(window);
